/*! For license information please see 2.699d212d.chunk.js.LICENSE.txt */
(this["webpackJsonpholmes-hub"]=this["webpackJsonpholmes-hub"]||[]).push([[2],[function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var i=n(1),r={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},o=i.createContext&&i.createContext(r),s=["attr","size","title"];function a(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function l(){return(l=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){h(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function h(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f(t){return e=>i.createElement(d,l({attr:c({},t.attr)},e),function t(e){return e&&e.map((e,n)=>i.createElement(e.tag,c({key:n},e.attr),t(e.child)))}(t.child))}function d(t){var e=e=>{var n,{attr:r,size:o,title:u}=t,h=a(t,s),f=o||e.size||"1em";return e.className&&(n=e.className),t.className&&(n=(n?n+" ":"")+t.className),i.createElement("svg",l({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},e.attr,r,h,{className:n,style:c(c({color:t.color||e.color},e.style),t.style),height:f,width:f,xmlns:"http://www.w3.org/2000/svg"}),u&&i.createElement("title",null,u),t.children)};return void 0!==o?i.createElement(o.Consumer,null,t=>e(t)):e(r)}},function(t,e,n){"use strict";t.exports=n(100)},function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return s})),n.d(e,"d",(function(){return a})),n.d(e,"e",(function(){return l})),n.d(e,"f",(function(){return u})),n.d(e,"g",(function(){return c})),n.d(e,"h",(function(){return h})),n.d(e,"i",(function(){return f})),n.d(e,"j",(function(){return d})),n.d(e,"k",(function(){return g})),n.d(e,"l",(function(){return p})),n.d(e,"m",(function(){return v})),n.d(e,"n",(function(){return y})),n.d(e,"o",(function(){return m})),n.d(e,"p",(function(){return _})),n.d(e,"q",(function(){return b})),n.d(e,"r",(function(){return x})),n.d(e,"s",(function(){return w})),n.d(e,"t",(function(){return k})),n.d(e,"u",(function(){return S})),n.d(e,"v",(function(){return C})),n.d(e,"w",(function(){return O})),n.d(e,"x",(function(){return I})),n.d(e,"y",(function(){return M})),n.d(e,"B",(function(){return R})),n.d(e,"z",(function(){return T})),n.d(e,"A",(function(){return P})),n.d(e,"C",(function(){return L})),n.d(e,"D",(function(){return N})),n.d(e,"E",(function(){return A})),n.d(e,"F",(function(){return j})),n.d(e,"H",(function(){return D})),n.d(e,"I",(function(){return F})),n.d(e,"G",(function(){return z})),n.d(e,"a",(function(){return G})),n.d(e,"K",(function(){return B})),n.d(e,"J",(function(){return V}));var i=n(29),r=n(12);function o(t){const e=d();for(let n=0,i=t.length;n<i;++n)b(e,t[n]);return e}function s(t,e,n){return n?(n[0]=t[0]-e,n[1]=t[1]-e,n[2]=t[2]+e,n[3]=t[3]+e,n):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function a(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function l(t,e,n){let i,r;return i=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0,r=n<t[1]?t[1]-n:t[3]<n?n-t[3]:0,i*i+r*r}function u(t,e){return h(t,e[0],e[1])}function c(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function h(t,e,n){return t[0]<=e&&e<=t[2]&&t[1]<=n&&n<=t[3]}function f(t,e){const n=t[0],r=t[1],o=t[2],s=t[3],a=e[0],l=e[1];let u=i.a.UNKNOWN;return a<n?u|=i.a.LEFT:a>o&&(u|=i.a.RIGHT),l<r?u|=i.a.BELOW:l>s&&(u|=i.a.ABOVE),u===i.a.UNKNOWN&&(u=i.a.INTERSECTING),u}function d(){return[1/0,1/0,-1/0,-1/0]}function g(t,e,n,i,r){return r?(r[0]=t,r[1]=e,r[2]=n,r[3]=i,r):[t,e,n,i]}function p(t){return g(1/0,1/0,-1/0,-1/0,t)}function v(t,e){const n=t[0],i=t[1];return g(n,i,n,i,e)}function y(t,e,n,i,r){return x(p(r),t,e,n,i)}function m(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function _(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function b(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function x(t,e,n,i,r){for(;n<i;n+=r)E(t,e[n],e[n+1]);return t}function E(t,e,n){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],n),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],n)}function w(t,e){let n;return n=e(S(t)),n||(n=e(C(t)),n||(n=e(N(t)),n||(n=e(L(t)),n||!1)))}function k(t){let e=0;return D(t)||(e=A(t)*T(t)),e}function S(t){return[t[0],t[1]]}function C(t){return[t[2],t[1]]}function O(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function I(t,e){let n;return"bottom-left"===e?n=S(t):"bottom-right"===e?n=C(t):"top-left"===e?n=L(t):"top-right"===e?n=N(t):Object(r.a)(!1,13),n}function M(t,e,n,i,r){const[o,s,a,l,u,c,h,f]=R(t,e,n,i);return g(Math.min(o,a,u,h),Math.min(s,l,c,f),Math.max(o,a,u,h),Math.max(s,l,c,f),r)}function R(t,e,n,i){const r=e*i[0]/2,o=e*i[1]/2,s=Math.cos(n),a=Math.sin(n),l=r*s,u=r*a,c=o*s,h=o*a,f=t[0],d=t[1];return[f-l+h,d-u-c,f-l-h,d-u+c,f+l-h,d+u+c,f+l+h,d+u-c,f-l+h,d-u-c]}function T(t){return t[3]-t[1]}function P(t,e,n){const i=n||[1/0,1/0,-1/0,-1/0];return j(t,e)?(t[0]>e[0]?i[0]=t[0]:i[0]=e[0],t[1]>e[1]?i[1]=t[1]:i[1]=e[1],t[2]<e[2]?i[2]=t[2]:i[2]=e[2],t[3]<e[3]?i[3]=t[3]:i[3]=e[3]):p(i),i}function L(t){return[t[0],t[3]]}function N(t){return[t[2],t[3]]}function A(t){return t[2]-t[0]}function j(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function D(t){return t[2]<t[0]||t[3]<t[1]}function F(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}function z(t,e,n){let r=!1;const o=f(t,e),s=f(t,n);if(o===i.a.INTERSECTING||s===i.a.INTERSECTING)r=!0;else{const a=t[0],l=t[1],u=t[2],c=t[3],h=e[0],f=e[1],d=n[0],g=n[1],p=(g-f)/(d-h);let v,y;s&i.a.ABOVE&&!(o&i.a.ABOVE)&&(v=d-(g-c)/p,r=v>=a&&v<=u),r||!(s&i.a.RIGHT)||o&i.a.RIGHT||(y=g-(d-u)*p,r=y>=l&&y<=c),r||!(s&i.a.BELOW)||o&i.a.BELOW||(v=d-(g-l)/p,r=v>=a&&v<=u),r||!(s&i.a.LEFT)||o&i.a.LEFT||(y=g-(d-a)*p,r=y>=l&&y<=c)}return r}function G(t,e,n,i){let r=[];if(i>1){const e=t[2]-t[0],n=t[3]-t[1];for(let o=0;o<i;++o)r.push(t[0]+e*o/i,t[1],t[2],t[1]+n*o/i,t[2]-e*o/i,t[3],t[0],t[3]-n*o/i)}else r=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]];e(r,r,2);const o=[],s=[];for(let a=0,l=r.length;a<l;a+=2)o.push(r[a]),s.push(r[a+1]);return function(t,e,n){return g(Math.min.apply(null,t),Math.min.apply(null,e),Math.max.apply(null,t),Math.max.apply(null,e),n)}(o,s,n)}function B(t,e){const n=e.getExtent(),i=O(t);if(e.canWrapX()&&(i[0]<n[0]||i[0]>=n[2])){const e=A(n),r=Math.floor((i[0]-n[0])/e)*e;t[0]-=r,t[2]-=r}return t}function V(t,e){if(e.canWrapX()){const n=e.getExtent();if(!isFinite(t[0])||!isFinite(t[2]))return[[n[0],t[1],n[2],t[3]]];B(t,e);const i=A(n);if(A(t)>i)return[[n[0],t[1],n[2],t[3]]];if(t[0]<n[0])return[[t[0]+i,t[1],n[2],t[3]],[n[0],t[1],t[2],t[3]]];if(t[2]>n[2])return[[t[0],t[1],n[2],t[3]],[n[0],t[1],t[2]-i,t[3]]]}return[t]}},function(t,e,n){"use strict";function i(){throw new Error("Unimplemented abstract method.")}n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o}));let r=0;function o(t){return t.ol_uid||(t.ol_uid=String(++r))}},function(t,e,n){"use strict";function i(){return(i=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}var r;n.d(e,"a",(function(){return j})),n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return W})),n.d(e,"d",(function(){return X})),n.d(e,"e",(function(){return D})),n.d(e,"f",(function(){return b})),n.d(e,"g",(function(){return C})),n.d(e,"h",(function(){return R})),n.d(e,"i",(function(){return l})),n.d(e,"j",(function(){return s})),n.d(e,"k",(function(){return a})),n.d(e,"l",(function(){return o})),n.d(e,"m",(function(){return f})),n.d(e,"n",(function(){return K})),n.d(e,"o",(function(){return F})),n.d(e,"p",(function(){return P})),n.d(e,"q",(function(){return S})),n.d(e,"r",(function(){return m})),n.d(e,"s",(function(){return d})),n.d(e,"t",(function(){return T})),n.d(e,"u",(function(){return O})),function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"}(r||(r={}));function o(t){void 0===t&&(t={});let e,{initialEntries:n=["/"],initialIndex:i,v5Compat:o=!1}=t;e=n.map((t,e)=>p(t,"string"===typeof t?null:t.state,0===e?"default":void 0));let s=c(null==i?e.length-1:i),a=r.Pop,l=null;function c(t){return Math.min(Math.max(t,0),e.length-1)}function g(){return e[s]}function p(t,n,i){void 0===n&&(n=null);let r=h(e?g().pathname:"/",t,n,i);return u("/"===r.pathname.charAt(0),"relative pathnames are not supported in memory history: "+JSON.stringify(t)),r}function v(t){return"string"===typeof t?t:f(t)}return{get index(){return s},get action(){return a},get location(){return g()},createHref:v,createURL:t=>new URL(v(t),"http://localhost"),encodeLocation(t){let e="string"===typeof t?d(t):t;return{pathname:e.pathname||"",search:e.search||"",hash:e.hash||""}},push(t,n){a=r.Push;let i=p(t,n);s+=1,e.splice(s,e.length,i),o&&l&&l({action:a,location:i,delta:1})},replace(t,n){a=r.Replace;let i=p(t,n);e[s]=i,o&&l&&l({action:a,location:i,delta:0})},go(t){a=r.Pop;let n=c(s+t),i=e[n];s=n,l&&l({action:a,location:i,delta:t})},listen:t=>(l=t,()=>{l=null})}}function s(t){return void 0===t&&(t={}),g((function(t,e){let{pathname:n,search:i,hash:r}=t.location;return h("",{pathname:n,search:i,hash:r},e.state&&e.state.usr||null,e.state&&e.state.key||"default")}),(function(t,e){return"string"===typeof e?e:f(e)}),null,t)}function a(t){return void 0===t&&(t={}),g((function(t,e){let{pathname:n="/",search:i="",hash:r=""}=d(t.location.hash.substr(1));return n.startsWith("/")||n.startsWith(".")||(n="/"+n),h("",{pathname:n,search:i,hash:r},e.state&&e.state.usr||null,e.state&&e.state.key||"default")}),(function(t,e){let n=t.document.querySelector("base"),i="";if(n&&n.getAttribute("href")){let e=t.location.href,n=e.indexOf("#");i=-1===n?e:e.slice(0,n)}return i+"#"+("string"===typeof e?e:f(e))}),(function(t,e){u("/"===t.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(e)+")")}),t)}function l(t,e){if(!1===t||null===t||"undefined"===typeof t)throw new Error(e)}function u(t,e){if(!t){"undefined"!==typeof console&&console.warn(e);try{throw new Error(e)}catch(n){}}}function c(t,e){return{usr:t.state,key:t.key,idx:e}}function h(t,e,n,r){return void 0===n&&(n=null),i({pathname:"string"===typeof t?t:t.pathname,search:"",hash:""},"string"===typeof e?d(e):e,{state:n,key:e&&e.key||r||Math.random().toString(36).substr(2,8)})}function f(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&"?"!==n&&(e+="?"===n.charAt(0)?n:"?"+n),i&&"#"!==i&&(e+="#"===i.charAt(0)?i:"#"+i),e}function d(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function g(t,e,n,o){void 0===o&&(o={});let{window:s=document.defaultView,v5Compat:a=!1}=o,u=s.history,d=r.Pop,g=null,p=v();function v(){return(u.state||{idx:null}).idx}function y(){d=r.Pop;let t=v(),e=null==t?null:t-p;p=t,g&&g({action:d,location:_.location,delta:e})}function m(t){let e="null"!==s.location.origin?s.location.origin:s.location.href,n="string"===typeof t?t:f(t);return n=n.replace(/ $/,"%20"),l(e,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,e)}null==p&&(p=0,u.replaceState(i({},u.state,{idx:p}),""));let _={get action(){return d},get location(){return t(s,u)},listen(t){if(g)throw new Error("A history only accepts one active listener");return s.addEventListener("popstate",y),g=t,()=>{s.removeEventListener("popstate",y),g=null}},createHref:t=>e(s,t),createURL:m,encodeLocation(t){let e=m(t);return{pathname:e.pathname,search:e.search,hash:e.hash}},push:function(t,e){d=r.Push;let i=h(_.location,t,e);n&&n(i,t),p=v()+1;let o=c(i,p),l=_.createHref(i);try{u.pushState(o,"",l)}catch(f){if(f instanceof DOMException&&"DataCloneError"===f.name)throw f;s.location.assign(l)}a&&g&&g({action:d,location:_.location,delta:1})},replace:function(t,e){d=r.Replace;let i=h(_.location,t,e);n&&n(i,t),p=v();let o=c(i,p),s=_.createHref(i);u.replaceState(o,"",s),a&&g&&g({action:d,location:_.location,delta:0})},go:t=>u.go(t)};return _}var p;!function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"}(p||(p={}));const v=new Set(["lazy","caseSensitive","path","id","index","children"]);function y(t,e,n,r){return void 0===n&&(n=[]),void 0===r&&(r={}),t.map((t,o)=>{let s=[...n,String(o)],a="string"===typeof t.id?t.id:s.join("-");if(l(!0!==t.index||!t.children,"Cannot specify children on an index route"),l(!r[a],'Found a route id collision on id "'+a+"\".  Route id's must be globally unique within Data Router usages"),function(t){return!0===t.index}(t)){let n=i({},t,e(t),{id:a});return r[a]=n,n}{let n=i({},t,e(t),{id:a,children:void 0});return r[a]=n,t.children&&(n.children=y(t.children,e,s,r)),n}})}function m(t,e,n){return void 0===n&&(n="/"),_(t,e,n,!1)}function _(t,e,n,i){let r=O(("string"===typeof e?d(e):e).pathname||"/",n);if(null==r)return null;let o=function t(e,n,i,r){void 0===n&&(n=[]);void 0===i&&(i=[]);void 0===r&&(r="");let o=(e,o,s)=>{let a={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:o,route:e};a.relativePath.startsWith("/")&&(l(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));let u=P([r,a.relativePath]),c=i.concat(a);e.children&&e.children.length>0&&(l(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+u+'".'),t(e.children,n,c,u)),(null!=e.path||e.index)&&n.push({path:u,score:w(u,e.index),routesMeta:c})};return e.forEach((t,e)=>{var n;if(""!==t.path&&null!=(n=t.path)&&n.includes("?"))for(let i of function t(e){let n=e.split("/");if(0===n.length)return[];let[i,...r]=n,o=i.endsWith("?"),s=i.replace(/\?$/,"");if(0===r.length)return o?[s,""]:[s];let a=t(r.join("/")),l=[];l.push(...a.map(t=>""===t?s:[s,t].join("/"))),o&&l.push(...a);return l.map(t=>e.startsWith("/")&&""===t?"/":t)}(t.path))o(t,e,i);else o(t,e)}),n}(t);!function(t){t.sort((t,e)=>t.score!==e.score?e.score-t.score:function(t,e){return t.length===e.length&&t.slice(0,-1).every((t,n)=>t===e[n])?t[t.length-1]-e[e.length-1]:0}(t.routesMeta.map(t=>t.childrenIndex),e.routesMeta.map(t=>t.childrenIndex)))}(o);let s=null;for(let a=0;null==s&&a<o.length;++a){let t=C(r);s=k(o[a],t,i)}return s}function b(t,e){let{route:n,pathname:i,params:r}=t;return{id:n.id,pathname:i,params:r,data:e[n.id],handle:n.handle}}const x=/^:[\w-]+$/,E=t=>"*"===t;function w(t,e){let n=t.split("/"),i=n.length;return n.some(E)&&(i+=-2),e&&(i+=2),n.filter(t=>!E(t)).reduce((t,e)=>t+(x.test(e)?3:""===e?1:10),i)}function k(t,e,n){void 0===n&&(n=!1);let{routesMeta:i}=t,r={},o="/",s=[];for(let a=0;a<i.length;++a){let t=i[a],l=a===i.length-1,u="/"===o?e:e.slice(o.length)||"/",c=S({path:t.relativePath,caseSensitive:t.caseSensitive,end:l},u),h=t.route;if(!c&&l&&n&&!i[i.length-1].route.index&&(c=S({path:t.relativePath,caseSensitive:t.caseSensitive,end:!1},u)),!c)return null;Object.assign(r,c.params),s.push({params:r,pathname:P([o,c.pathname]),pathnameBase:L(P([o,c.pathnameBase])),route:h}),"/"!==c.pathnameBase&&(o=P([o,c.pathnameBase]))}return s}function S(t,e){"string"===typeof t&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=function(t,e,n){void 0===e&&(e=!1);void 0===n&&(n=!0);u("*"===t||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were "'+t.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+t.replace(/\*$/,"/*")+'".');let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(t,e,n)=>(i.push({paramName:e,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));t.endsWith("*")?(i.push({paramName:"*"}),r+="*"===t||"/*"===t?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":""!==t&&"/"!==t&&(r+="(?:(?=\\/|$))");return[new RegExp(r,e?void 0:"i"),i]}(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let o=r[0],s=o.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:i.reduce((t,e,n)=>{let{paramName:i,isOptional:r}=e;if("*"===i){let t=a[n]||"";s=o.slice(0,o.length-t.length).replace(/(.)\/+$/,"$1")}const l=a[n];return t[i]=r&&!l?void 0:(l||"").replace(/%2F/g,"/"),t},{}),pathname:o,pathnameBase:s,pattern:t}}function C(t){try{return t.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(e){return u(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+e+")."),t}}function O(t,e){if("/"===e)return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&"/"!==i?null:t.slice(n)||"/"}function I(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified `to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function M(t){return t.filter((t,e)=>0===e||t.route.path&&t.route.path.length>0)}function R(t,e){let n=M(t);return e?n.map((t,e)=>e===n.length-1?t.pathname:t.pathnameBase):n.map(t=>t.pathnameBase)}function T(t,e,n,r){let o;void 0===r&&(r=!1),"string"===typeof t?o=d(t):(o=i({},t),l(!o.pathname||!o.pathname.includes("?"),I("?","pathname","search",o)),l(!o.pathname||!o.pathname.includes("#"),I("#","pathname","hash",o)),l(!o.search||!o.search.includes("#"),I("#","search","hash",o)));let s,a=""===t||""===o.pathname,u=a?"/":o.pathname;if(null==u)s=n;else{let t=e.length-1;if(!r&&u.startsWith("..")){let e=u.split("/");for(;".."===e[0];)e.shift(),t-=1;o.pathname=e.join("/")}s=t>=0?e[t]:"/"}let c=function(t,e){void 0===e&&(e="/");let{pathname:n,search:i="",hash:r=""}="string"===typeof t?d(t):t;return{pathname:n?n.startsWith("/")?n:function(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(t=>{".."===t?n.length>1&&n.pop():"."!==t&&n.push(t)}),n.length>1?n.join("/"):"/"}(n,e):e,search:N(i),hash:A(r)}}(o,s),h=u&&"/"!==u&&u.endsWith("/"),f=(a||"."===u)&&n.endsWith("/");return c.pathname.endsWith("/")||!h&&!f||(c.pathname+="/"),c}const P=t=>t.join("/").replace(/\/\/+/g,"/"),L=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),N=t=>t&&"?"!==t?t.startsWith("?")?t:"?"+t:"",A=t=>t&&"#"!==t?t.startsWith("#")?t:"#"+t:"";class j extends Error{}class D{constructor(t,e,n,i){void 0===i&&(i=!1),this.status=t,this.statusText=e||"",this.internal=i,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}}function F(t){return null!=t&&"number"===typeof t.status&&"string"===typeof t.statusText&&"boolean"===typeof t.internal&&"data"in t}const z=["post","put","patch","delete"],G=new Set(z),B=["get",...z],V=new Set(B),Y=new Set([301,302,303,307,308]),q=new Set([307,308]),U={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},X={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},W={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},H=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Z=t=>({hasErrorBoundary:Boolean(t.hasErrorBoundary)});function K(t){const e=t.window?t.window:"undefined"!==typeof window?window:void 0,n="undefined"!==typeof e&&"undefined"!==typeof e.document&&"undefined"!==typeof e.document.createElement,o=!n;let s;if(l(t.routes.length>0,"You must provide a non-empty routes array to createRouter"),t.mapRouteProperties)s=t.mapRouteProperties;else if(t.detectErrorBoundary){let e=t.detectErrorBoundary;s=t=>({hasErrorBoundary:e(t)})}else s=Z;let a,c,f,d={},g=y(t.routes,s,void 0,d),v=t.basename||"/",x=t.dataStrategy||ot,E=t.patchRoutesOnNavigation,w=i({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},t.future),k=null,S=new Set,C=null,I=null,M=null,R=null!=t.hydrationData,T=m(g,t.history.location,v),P=!1,L=null;if(null==T&&!E){let e=_t(404,{pathname:t.history.location.pathname}),{matches:n,route:i}=mt(g);T=n,L={[i.id]:e}}if(T&&!t.hydrationData){ce(T,g,t.history.location.pathname).active&&(T=null)}if(T)if(T.some(t=>t.route.lazy))c=!1;else if(T.some(t=>t.route.loader))if(w.v7_partialHydration){let e=t.hydrationData?t.hydrationData.loaderData:null,n=t.hydrationData?t.hydrationData.errors:null;if(n){let t=T.findIndex(t=>void 0!==n[t.route.id]);c=T.slice(0,t+1).every(t=>!et(t.route,e,n))}else c=T.every(t=>!et(t.route,e,n))}else c=null!=t.hydrationData;else c=!0;else if(c=!1,T=[],w.v7_partialHydration){let e=ce(null,g,t.history.location.pathname);e.active&&e.matches&&(P=!0,T=e.matches)}let N,A={historyAction:t.history.action,location:t.history.location,matches:T,initialized:c,navigation:U,restoreScrollPosition:null==t.hydrationData&&null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||L,fetchers:new Map,blockers:new Map},j=r.Pop,D=!1,z=!1,G=new Map,B=null,V=!1,Y=!1,K=[],$=new Set,nt=new Map,it=0,ht=-1,ft=new Map,dt=new Set,xt=new Map,Ct=new Map,Ot=new Set,It=new Map,Lt=new Map,Gt=void 0;function Bt(t,e){void 0===e&&(e={}),A=i({},A,t);let n=[],r=[];w.v7_fetcherPersist&&A.fetchers.forEach((t,e)=>{"idle"===t.state&&(Ot.has(e)?r.push(e):n.push(e))}),Ot.forEach(t=>{A.fetchers.has(t)||nt.has(t)||r.push(t)}),[...S].forEach(t=>t(A,{deletedFetchers:r,viewTransitionOpts:e.viewTransitionOpts,flushSync:!0===e.flushSync})),w.v7_fetcherPersist?(n.forEach(t=>A.fetchers.delete(t)),r.forEach(t=>Qt(t))):r.forEach(t=>Ot.delete(t))}function Vt(e,n,o){var s,l;let u,{flushSync:c}=void 0===o?{}:o,h=null!=A.actionData&&null!=A.navigation.formMethod&&Mt(A.navigation.formMethod)&&"loading"===A.navigation.state&&!0!==(null==(s=e.state)?void 0:s._isRedirect);u=n.actionData?Object.keys(n.actionData).length>0?n.actionData:null:h?A.actionData:null;let f=n.loaderData?pt(A.loaderData,n.loaderData,n.matches||[],n.errors):A.loaderData,d=A.blockers;d.size>0&&(d=new Map(d),d.forEach((t,e)=>d.set(e,W)));let p,v=!0===D||null!=A.navigation.formMethod&&Mt(A.navigation.formMethod)&&!0!==(null==(l=e.state)?void 0:l._isRedirect);if(a&&(g=a,a=void 0),V||j===r.Pop||(j===r.Push?t.history.push(e,e.state):j===r.Replace&&t.history.replace(e,e.state)),j===r.Pop){let t=G.get(A.location.pathname);t&&t.has(e.pathname)?p={currentLocation:A.location,nextLocation:e}:G.has(e.pathname)&&(p={currentLocation:e,nextLocation:A.location})}else if(z){let t=G.get(A.location.pathname);t?t.add(e.pathname):(t=new Set([e.pathname]),G.set(A.location.pathname,t)),p={currentLocation:A.location,nextLocation:e}}Bt(i({},n,{actionData:u,loaderData:f,historyAction:j,location:e,initialized:!0,navigation:U,revalidation:"idle",restoreScrollPosition:ue(e,n.matches||A.matches),preventScrollReset:v,blockers:d}),{viewTransitionOpts:p,flushSync:!0===c}),j=r.Pop,D=!1,z=!1,V=!1,Y=!1,K=[]}async function Yt(e,n,o){N&&N.abort(),N=null,j=e,V=!0===(o&&o.startUninterruptedRevalidation),function(t,e){if(C&&M){let n=le(t,e);C[n]=M()}}(A.location,A.matches),D=!0===(o&&o.preventScrollReset),z=!0===(o&&o.enableViewTransition);let s=a||g,l=o&&o.overrideNavigation,u=null!=o&&o.initialHydration&&A.matches&&A.matches.length>0&&!P?A.matches:m(s,n,v),c=!0===(o&&o.flushSync);if(u&&A.initialized&&!Y&&function(t,e){if(t.pathname!==e.pathname||t.search!==e.search)return!1;if(""===t.hash)return""!==e.hash;if(t.hash===e.hash)return!0;if(""!==e.hash)return!0;return!1}(A.location,n)&&!(o&&o.submission&&Mt(o.submission.formMethod)))return void Vt(n,{matches:u},{flushSync:c});let h=ce(u,s,n.pathname);if(h.active&&h.matches&&(u=h.matches),!u){let{error:t,notFoundMatches:e,route:i}=se(n.pathname);return void Vt(n,{matches:e,loaderData:{},errors:{[i.id]:t}},{flushSync:c})}N=new AbortController;let f,d=ct(t.history,n,N.signal,o&&o.submission);if(o&&o.pendingError)f=[yt(u).route.id,{type:p.error,error:o.pendingError}];else if(o&&o.submission&&Mt(o.submission.formMethod)){let e=await async function(t,e,n,i,o,s){void 0===s&&(s={});let a;if(Ht(),Bt({navigation:Dt(e,n)},{flushSync:!0===s.flushSync}),o){let n=await he(i,e.pathname,t.signal);if("aborted"===n.type)return{shortCircuited:!0};if("error"===n.type){let t=yt(n.partialMatches).route.id;return{matches:n.partialMatches,pendingActionResult:[t,{type:p.error,error:n.error}]}}if(!n.matches){let{notFoundMatches:t,error:n,route:i}=se(e.pathname);return{matches:t,pendingActionResult:[i.id,{type:p.error,error:n}]}}i=n.matches}let l=Nt(i,e);if(l.route.action||l.route.lazy){let e=await Xt("action",A,t,[l],i,null);if(a=e[l.route.id],t.signal.aborted)return{shortCircuited:!0}}else a={type:p.error,error:_t(405,{method:t.method,pathname:e.pathname,routeId:l.route.id})};if(St(a)){let e;if(s&&null!=s.replace)e=s.replace;else{let n=ut(a.response.headers.get("Location"),new URL(t.url),v);e=n===A.location.pathname+A.location.search}return await Ut(t,a,!0,{submission:n,replace:e}),{shortCircuited:!0}}if(wt(a))throw _t(400,{type:"defer-action"});if(kt(a)){let t=yt(i,l.route.id);return!0!==(s&&s.replace)&&(j=r.Push),{matches:i,pendingActionResult:[t.route.id,a]}}return{matches:i,pendingActionResult:[l.route.id,a]}}(d,n,o.submission,u,h.active,{replace:o.replace,flushSync:c});if(e.shortCircuited)return;if(e.pendingActionResult){let[t,i]=e.pendingActionResult;if(kt(i)&&F(i.error)&&404===i.error.status)return N=null,void Vt(n,{matches:e.matches,loaderData:{},errors:{[t]:i.error}})}u=e.matches||u,f=e.pendingActionResult,l=jt(n,o.submission),c=!1,h.active=!1,d=ct(t.history,d.url,d.signal)}let{shortCircuited:y,matches:_,loaderData:b,errors:x}=await async function(e,n,r,o,s,l,u,c,h,f,d){let p=s||jt(n,l),y=l||u||At(p),m=!V&&(!w.v7_partialHydration||!h);if(o){if(m){let t=qt(d);Bt(i({navigation:p},void 0!==t?{actionData:t}:{}),{flushSync:f})}let t=await he(r,n.pathname,e.signal);if("aborted"===t.type)return{shortCircuited:!0};if("error"===t.type){let e=yt(t.partialMatches).route.id;return{matches:t.partialMatches,loaderData:{},errors:{[e]:t.error}}}if(!t.matches){let{error:t,notFoundMatches:e,route:i}=se(n.pathname);return{matches:e,loaderData:{},errors:{[i.id]:t}}}r=t.matches}let _=a||g,[b,x]=tt(t.history,A,r,y,n,w.v7_partialHydration&&!0===h,w.v7_skipActionErrorRevalidation,Y,K,$,Ot,xt,dt,_,v,d);if(ae(t=>!(r&&r.some(e=>e.route.id===t))||b&&b.some(e=>e.route.id===t)),ht=++it,0===b.length&&0===x.length){let t=ee();return Vt(n,i({matches:r,loaderData:{},errors:d&&kt(d[1])?{[d[0]]:d[1].error}:null},vt(d),t?{fetchers:new Map(A.fetchers)}:{}),{flushSync:f}),{shortCircuited:!0}}if(m){let t={};if(!o){t.navigation=p;let e=qt(d);void 0!==e&&(t.actionData=e)}x.length>0&&(t.fetchers=function(t){return t.forEach(t=>{let e=A.fetchers.get(t.key),n=Ft(void 0,e?e.data:void 0);A.fetchers.set(t.key,n)}),new Map(A.fetchers)}(x)),Bt(t,{flushSync:f})}x.forEach(t=>{$t(t.key),t.controller&&nt.set(t.key,t.controller)});let E=()=>x.forEach(t=>$t(t.key));N&&N.signal.addEventListener("abort",E);let{loaderResults:k,fetcherResults:S}=await Wt(A,r,b,x,e);if(e.signal.aborted)return{shortCircuited:!0};N&&N.signal.removeEventListener("abort",E);x.forEach(t=>nt.delete(t.key));let C=bt(k);if(C)return await Ut(e,C.result,!0,{replace:c}),{shortCircuited:!0};if(C=bt(S),C)return dt.add(C.key),await Ut(e,C.result,!0,{replace:c}),{shortCircuited:!0};let{loaderData:O,errors:I}=gt(A,r,k,d,x,S,It);It.forEach((t,e)=>{t.subscribe(n=>{(n||t.done)&&It.delete(e)})}),w.v7_partialHydration&&h&&A.errors&&(I=i({},A.errors,I));let M=ee(),R=ne(ht),T=M||R||x.length>0;return i({matches:r,loaderData:O,errors:I},T?{fetchers:new Map(A.fetchers)}:{})}(d,n,u,h.active,l,o&&o.submission,o&&o.fetcherSubmission,o&&o.replace,o&&!0===o.initialHydration,c,f);y||(N=null,Vt(n,i({matches:_||u},vt(f),{loaderData:b,errors:x})))}function qt(t){return t&&!kt(t[1])?{[t[0]]:t[1].data}:A.actionData?0===Object.keys(A.actionData).length?null:A.actionData:void 0}async function Ut(o,s,a,u){let{submission:c,fetcherSubmission:f,preventScrollReset:d,replace:g}=void 0===u?{}:u;s.response.headers.has("X-Remix-Revalidate")&&(Y=!0);let p=s.response.headers.get("Location");l(p,"Expected a Location header on the redirect Response"),p=ut(p,new URL(o.url),v);let y=h(A.location,p,{_isRedirect:!0});if(n){let n=!1;if(s.response.headers.has("X-Remix-Reload-Document"))n=!0;else if(H.test(p)){const i=t.history.createURL(p);n=i.origin!==e.location.origin||null==O(i.pathname,v)}if(n)return void(g?e.location.replace(p):e.location.assign(p))}N=null;let m=!0===g||s.response.headers.has("X-Remix-Replace")?r.Replace:r.Push,{formMethod:_,formAction:b,formEncType:x}=A.navigation;!c&&!f&&_&&b&&x&&(c=At(A.navigation));let E=c||f;if(q.has(s.response.status)&&E&&Mt(E.formMethod))await Yt(m,y,{submission:i({},E,{formAction:p}),preventScrollReset:d||D,enableViewTransition:a?z:void 0});else{let t=jt(y,c);await Yt(m,y,{overrideNavigation:t,fetcherSubmission:f,preventScrollReset:d||D,enableViewTransition:a?z:void 0})}}async function Xt(t,e,n,i,r,o){let a,l={};try{a=await st(x,t,e,n,i,r,o,d,s)}catch(u){return i.forEach(t=>{l[t.route.id]={type:p.error,error:u}}),l}for(let[s,c]of Object.entries(a))if(Et(c)){let t=c.result;l[s]={type:p.redirect,response:lt(t,n,s,r,v,w.v7_relativeSplatPath)}}else l[s]=await at(c);return l}async function Wt(e,n,i,r,o){let s=e.matches,a=Xt("loader",e,o,i,n,null),l=Promise.all(r.map(async n=>{if(n.matches&&n.match&&n.controller){let i=(await Xt("loader",e,ct(t.history,n.path,n.controller.signal),[n.match],n.matches,n.key))[n.match.route.id];return{[n.key]:i}}return Promise.resolve({[n.key]:{type:p.error,error:_t(404,{pathname:n.path})}})})),u=await a,c=(await l).reduce((t,e)=>Object.assign(t,e),{});return await Promise.all([Rt(n,u,o.signal,s,e.loaderData),Tt(n,c,r)]),{loaderResults:u,fetcherResults:c}}function Ht(){Y=!0,K.push(...ae()),xt.forEach((t,e)=>{nt.has(e)&&$.add(e),$t(e)})}function Zt(t,e,n){void 0===n&&(n={}),A.fetchers.set(t,e),Bt({fetchers:new Map(A.fetchers)},{flushSync:!0===(n&&n.flushSync)})}function Kt(t,e,n,i){void 0===i&&(i={});let r=yt(A.matches,e);Qt(t),Bt({errors:{[r.route.id]:n},fetchers:new Map(A.fetchers)},{flushSync:!0===(i&&i.flushSync)})}function Jt(t){return Ct.set(t,(Ct.get(t)||0)+1),Ot.has(t)&&Ot.delete(t),A.fetchers.get(t)||X}function Qt(t){let e=A.fetchers.get(t);!nt.has(t)||e&&"loading"===e.state&&ft.has(t)||$t(t),xt.delete(t),ft.delete(t),dt.delete(t),w.v7_fetcherPersist&&Ot.delete(t),$.delete(t),A.fetchers.delete(t)}function $t(t){let e=nt.get(t);e&&(e.abort(),nt.delete(t))}function te(t){for(let e of t){let t=zt(Jt(e).data);A.fetchers.set(e,t)}}function ee(){let t=[],e=!1;for(let n of dt){let i=A.fetchers.get(n);l(i,"Expected fetcher: "+n),"loading"===i.state&&(dt.delete(n),t.push(n),e=!0)}return te(t),e}function ne(t){let e=[];for(let[n,i]of ft)if(i<t){let t=A.fetchers.get(n);l(t,"Expected fetcher: "+n),"loading"===t.state&&($t(n),ft.delete(n),e.push(n))}return te(e),e.length>0}function ie(t){A.blockers.delete(t),Lt.delete(t)}function re(t,e){let n=A.blockers.get(t)||W;l("unblocked"===n.state&&"blocked"===e.state||"blocked"===n.state&&"blocked"===e.state||"blocked"===n.state&&"proceeding"===e.state||"blocked"===n.state&&"unblocked"===e.state||"proceeding"===n.state&&"unblocked"===e.state,"Invalid blocker state transition: "+n.state+" -> "+e.state);let i=new Map(A.blockers);i.set(t,e),Bt({blockers:i})}function oe(t){let{currentLocation:e,nextLocation:n,historyAction:i}=t;if(0===Lt.size)return;Lt.size>1&&u(!1,"A router only supports one blocker at a time");let r=Array.from(Lt.entries()),[o,s]=r[r.length-1],a=A.blockers.get(o);return a&&"proceeding"===a.state?void 0:s({currentLocation:e,nextLocation:n,historyAction:i})?o:void 0}function se(t){let e=_t(404,{pathname:t}),n=a||g,{matches:i,route:r}=mt(n);return ae(),{notFoundMatches:i,route:r,error:e}}function ae(t){let e=[];return It.forEach((n,i)=>{t&&!t(i)||(n.cancel(),e.push(i),It.delete(i))}),e}function le(t,e){if(I){return I(t,e.map(t=>b(t,A.loaderData)))||t.key}return t.key}function ue(t,e){if(C){let n=le(t,e),i=C[n];if("number"===typeof i)return i}return null}function ce(t,e,n){if(E){if(!t){return{active:!0,matches:_(e,n,v,!0)||[]}}if(Object.keys(t[0].params).length>0){return{active:!0,matches:_(e,n,v,!0)}}}return{active:!1,matches:null}}async function he(t,e,n,i){if(!E)return{type:"success",matches:t};let r=t;for(;;){let t=null==a,l=a||g,u=d;try{await E({signal:n,path:e,matches:r,fetcherKey:i,patch:(t,e)=>{n.aborted||rt(t,e,l,u,s)}})}catch(o){return{type:"error",error:o,partialMatches:r}}finally{t&&!n.aborted&&(g=[...g])}if(n.aborted)return{type:"aborted"};let c=m(l,e,v);if(c)return{type:"success",matches:c};let h=_(l,e,v,!0);if(!h||r.length===h.length&&r.every((t,e)=>t.route.id===h[e].route.id))return{type:"success",matches:null};r=h}}return f={get basename(){return v},get future(){return w},get state(){return A},get routes(){return g},get window(){return e},initialize:function(){if(k=t.history.listen(e=>{let{action:n,location:i,delta:r}=e;if(Gt)return Gt(),void(Gt=void 0);u(0===Lt.size||null!=r,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let o=oe({currentLocation:A.location,nextLocation:i,historyAction:n});if(o&&null!=r){let e=new Promise(t=>{Gt=t});return t.history.go(-1*r),void re(o,{state:"blocked",location:i,proceed(){re(o,{state:"proceeding",proceed:void 0,reset:void 0,location:i}),e.then(()=>t.history.go(r))},reset(){let t=new Map(A.blockers);t.set(o,W),Bt({blockers:t})}})}return Yt(n,i)}),n){!function(t,e){try{let n=t.sessionStorage.getItem("remix-router-transitions");if(n){let t=JSON.parse(n);for(let[n,i]of Object.entries(t||{}))i&&Array.isArray(i)&&e.set(n,new Set(i||[]))}}catch(n){}}(e,G);let t=()=>function(t,e){if(e.size>0){let i={};for(let[t,n]of e)i[t]=[...n];try{t.sessionStorage.setItem("remix-router-transitions",JSON.stringify(i))}catch(n){u(!1,"Failed to save applied view transitions in sessionStorage ("+n+").")}}}(e,G);e.addEventListener("pagehide",t),B=()=>e.removeEventListener("pagehide",t)}return A.initialized||Yt(r.Pop,A.location,{initialHydration:!0}),f},subscribe:function(t){return S.add(t),()=>S.delete(t)},enableScrollRestoration:function(t,e,n){if(C=t,M=e,I=n||null,!R&&A.navigation===U){R=!0;let t=ue(A.location,A.matches);null!=t&&Bt({restoreScrollPosition:t})}return()=>{C=null,M=null,I=null}},navigate:async function e(n,o){if("number"===typeof n)return void t.history.go(n);let s=J(A.location,A.matches,v,w.v7_prependBasename,n,w.v7_relativeSplatPath,null==o?void 0:o.fromRouteId,null==o?void 0:o.relative),{path:a,submission:l,error:u}=Q(w.v7_normalizeFormMethod,!1,s,o),c=A.location,f=h(A.location,a,o&&o.state);f=i({},f,t.history.encodeLocation(f));let d=o&&null!=o.replace?o.replace:void 0,g=r.Push;!0===d?g=r.Replace:!1===d||null!=l&&Mt(l.formMethod)&&l.formAction===A.location.pathname+A.location.search&&(g=r.Replace);let p=o&&"preventScrollReset"in o?!0===o.preventScrollReset:void 0,y=!0===(o&&o.flushSync),m=oe({currentLocation:c,nextLocation:f,historyAction:g});if(!m)return await Yt(g,f,{submission:l,pendingError:u,preventScrollReset:p,replace:o&&o.replace,enableViewTransition:o&&o.viewTransition,flushSync:y});re(m,{state:"blocked",location:f,proceed(){re(m,{state:"proceeding",proceed:void 0,reset:void 0,location:f}),e(n,o)},reset(){let t=new Map(A.blockers);t.set(m,W),Bt({blockers:t})}})},fetch:function(e,n,i,r){if(o)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");$t(e);let s=!0===(r&&r.flushSync),u=a||g,c=J(A.location,A.matches,v,w.v7_prependBasename,i,w.v7_relativeSplatPath,n,null==r?void 0:r.relative),h=m(u,c,v),f=ce(h,u,c);if(f.active&&f.matches&&(h=f.matches),!h)return void Kt(e,n,_t(404,{pathname:c}),{flushSync:s});let{path:d,submission:p,error:y}=Q(w.v7_normalizeFormMethod,!0,c,r);if(y)return void Kt(e,n,y,{flushSync:s});let _=Nt(h,d),b=!0===(r&&r.preventScrollReset);p&&Mt(p.formMethod)?async function(e,n,i,r,o,s,u,c,h){function f(t){if(!t.route.action&&!t.route.lazy){let t=_t(405,{method:h.formMethod,pathname:i,routeId:n});return Kt(e,n,t,{flushSync:u}),!0}return!1}if(Ht(),xt.delete(e),!s&&f(r))return;let d=A.fetchers.get(e);Zt(e,function(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}(h,d),{flushSync:u});let p=new AbortController,y=ct(t.history,i,p.signal,h);if(s){let t=await he(o,new URL(y.url).pathname,y.signal,e);if("aborted"===t.type)return;if("error"===t.type)return void Kt(e,n,t.error,{flushSync:u});if(!t.matches)return void Kt(e,n,_t(404,{pathname:i}),{flushSync:u});if(o=t.matches,f(r=Nt(o,i)))return}nt.set(e,p);let _=it,b=(await Xt("action",A,y,[r],o,e))[r.route.id];if(y.signal.aborted)return void(nt.get(e)===p&&nt.delete(e));if(w.v7_fetcherPersist&&Ot.has(e)){if(St(b)||kt(b))return void Zt(e,zt(void 0))}else{if(St(b))return nt.delete(e),ht>_?void Zt(e,zt(void 0)):(dt.add(e),Zt(e,Ft(h)),Ut(y,b,!1,{fetcherSubmission:h,preventScrollReset:c}));if(kt(b))return void Kt(e,n,b.error)}if(wt(b))throw _t(400,{type:"defer-action"});let x=A.navigation.location||A.location,E=ct(t.history,x,p.signal),k=a||g,S="idle"!==A.navigation.state?m(k,A.navigation.location,v):A.matches;l(S,"Didn't find any matches after fetcher action");let C=++it;ft.set(e,C);let O=Ft(h,b.data);A.fetchers.set(e,O);let[I,M]=tt(t.history,A,S,h,x,!1,w.v7_skipActionErrorRevalidation,Y,K,$,Ot,xt,dt,k,v,[r.route.id,b]);M.filter(t=>t.key!==e).forEach(t=>{let e=t.key,n=A.fetchers.get(e),i=Ft(void 0,n?n.data:void 0);A.fetchers.set(e,i),$t(e),t.controller&&nt.set(e,t.controller)}),Bt({fetchers:new Map(A.fetchers)});let R=()=>M.forEach(t=>$t(t.key));p.signal.addEventListener("abort",R);let{loaderResults:T,fetcherResults:P}=await Wt(A,S,I,M,E);if(p.signal.aborted)return;p.signal.removeEventListener("abort",R),ft.delete(e),nt.delete(e),M.forEach(t=>nt.delete(t.key));let L=bt(T);if(L)return Ut(E,L.result,!1,{preventScrollReset:c});if(L=bt(P),L)return dt.add(L.key),Ut(E,L.result,!1,{preventScrollReset:c});let{loaderData:D,errors:F}=gt(A,S,T,void 0,M,P,It);if(A.fetchers.has(e)){let t=zt(b.data);A.fetchers.set(e,t)}ne(C),"loading"===A.navigation.state&&C>ht?(l(j,"Expected pending action"),N&&N.abort(),Vt(A.navigation.location,{matches:S,loaderData:D,errors:F,fetchers:new Map(A.fetchers)})):(Bt({errors:F,loaderData:pt(A.loaderData,D,S,F),fetchers:new Map(A.fetchers)}),Y=!1)}(e,n,d,_,h,f.active,s,b,p):(xt.set(e,{routeId:n,path:d}),async function(e,n,i,r,o,s,a,u,c){let h=A.fetchers.get(e);Zt(e,Ft(c,h?h.data:void 0),{flushSync:a});let f=new AbortController,d=ct(t.history,i,f.signal);if(s){let t=await he(o,new URL(d.url).pathname,d.signal,e);if("aborted"===t.type)return;if("error"===t.type)return void Kt(e,n,t.error,{flushSync:a});if(!t.matches)return void Kt(e,n,_t(404,{pathname:i}),{flushSync:a});o=t.matches,r=Nt(o,i)}nt.set(e,f);let g=it,p=(await Xt("loader",A,d,[r],o,e))[r.route.id];wt(p)&&(p=await Pt(p,d.signal,!0)||p);nt.get(e)===f&&nt.delete(e);if(d.signal.aborted)return;if(Ot.has(e))return void Zt(e,zt(void 0));if(St(p))return ht>g?void Zt(e,zt(void 0)):(dt.add(e),void await Ut(d,p,!1,{preventScrollReset:u}));if(kt(p))return void Kt(e,n,p.error);l(!wt(p),"Unhandled fetcher deferred data"),Zt(e,zt(p.data))}(e,n,d,_,h,f.active,s,b,p))},revalidate:function(){Ht(),Bt({revalidation:"loading"}),"submitting"!==A.navigation.state&&("idle"!==A.navigation.state?Yt(j||A.historyAction,A.navigation.location,{overrideNavigation:A.navigation,enableViewTransition:!0===z}):Yt(A.historyAction,A.location,{startUninterruptedRevalidation:!0}))},createHref:e=>t.history.createHref(e),encodeLocation:e=>t.history.encodeLocation(e),getFetcher:Jt,deleteFetcher:function(t){let e=(Ct.get(t)||0)-1;e<=0?(Ct.delete(t),Ot.add(t),w.v7_fetcherPersist||Qt(t)):Ct.set(t,e),Bt({fetchers:new Map(A.fetchers)})},dispose:function(){k&&k(),B&&B(),S.clear(),N&&N.abort(),A.fetchers.forEach((t,e)=>Qt(e)),A.blockers.forEach((t,e)=>ie(e))},getBlocker:function(t,e){let n=A.blockers.get(t)||W;return Lt.get(t)!==e&&Lt.set(t,e),n},deleteBlocker:ie,patchRoutes:function(t,e){let n=null==a;rt(t,e,a||g,d,s),n&&(g=[...g],Bt({}))},_internalFetchControllers:nt,_internalActiveDeferreds:It,_internalSetRoutes:function(t){d={},a=y(t,s,void 0,d)}},f}Symbol("deferred");function J(t,e,n,i,r,o,s,a){let l,u;if(s){l=[];for(let t of e)if(l.push(t),t.route.id===s){u=t;break}}else l=e,u=e[e.length-1];let c=T(r||".",R(l,o),O(t.pathname,n)||t.pathname,"path"===a);if(null==r&&(c.search=t.search,c.hash=t.hash),(null==r||""===r||"."===r)&&u){let t=Lt(c.search);if(u.route.index&&!t)c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index";else if(!u.route.index&&t){let t=new URLSearchParams(c.search),e=t.getAll("index");t.delete("index"),e.filter(t=>t).forEach(e=>t.append("index",e));let n=t.toString();c.search=n?"?"+n:""}}return i&&"/"!==n&&(c.pathname="/"===c.pathname?n:P([n,c.pathname])),f(c)}function Q(t,e,n,i){if(!i||!function(t){return null!=t&&("formData"in t&&null!=t.formData||"body"in t&&void 0!==t.body)}(i))return{path:n};if(i.formMethod&&!It(i.formMethod))return{path:n,error:_t(405,{method:i.formMethod})};let r,o,s=()=>({path:n,error:_t(400,{type:"invalid-body"})}),a=i.formMethod||"get",u=t?a.toUpperCase():a.toLowerCase(),c=xt(n);if(void 0!==i.body){if("text/plain"===i.formEncType){if(!Mt(u))return s();let t="string"===typeof i.body?i.body:i.body instanceof FormData||i.body instanceof URLSearchParams?Array.from(i.body.entries()).reduce((t,e)=>{let[n,i]=e;return""+t+n+"="+i+"\n"},""):String(i.body);return{path:n,submission:{formMethod:u,formAction:c,formEncType:i.formEncType,formData:void 0,json:void 0,text:t}}}if("application/json"===i.formEncType){if(!Mt(u))return s();try{let t="string"===typeof i.body?JSON.parse(i.body):i.body;return{path:n,submission:{formMethod:u,formAction:c,formEncType:i.formEncType,formData:void 0,json:t,text:void 0}}}catch(p){return s()}}}if(l("function"===typeof FormData,"FormData is not available in this environment"),i.formData)r=ht(i.formData),o=i.formData;else if(i.body instanceof FormData)r=ht(i.body),o=i.body;else if(i.body instanceof URLSearchParams)r=i.body,o=ft(r);else if(null==i.body)r=new URLSearchParams,o=new FormData;else try{r=new URLSearchParams(i.body),o=ft(r)}catch(p){return s()}let h={formMethod:u,formAction:c,formEncType:i&&i.formEncType||"application/x-www-form-urlencoded",formData:o,json:void 0,text:void 0};if(Mt(h.formMethod))return{path:n,submission:h};let g=d(n);return e&&g.search&&Lt(g.search)&&r.append("index",""),g.search="?"+r,{path:f(g),submission:h}}function $(t,e,n){void 0===n&&(n=!1);let i=t.findIndex(t=>t.route.id===e);return i>=0?t.slice(0,n?i+1:i):t}function tt(t,e,n,r,o,s,a,l,u,c,h,f,d,g,p,v){let y=v?kt(v[1])?v[1].error:v[1].data:void 0,_=t.createURL(e.location),b=t.createURL(o),x=n;s&&e.errors?x=$(n,Object.keys(e.errors)[0],!0):v&&kt(v[1])&&(x=$(n,v[0]));let E=v?v[1].statusCode:void 0,w=a&&E&&E>=400,k=x.filter((t,n)=>{let{route:o}=t;if(o.lazy)return!0;if(null==o.loader)return!1;if(s)return et(o,e.loaderData,e.errors);if(function(t,e,n){let i=!e||n.route.id!==e.route.id,r=void 0===t[n.route.id];return i||r}(e.loaderData,e.matches[n],t)||u.some(e=>e===t.route.id))return!0;let a=e.matches[n],c=t;return it(t,i({currentUrl:_,currentParams:a.params,nextUrl:b,nextParams:c.params},r,{actionResult:y,actionStatus:E,defaultShouldRevalidate:!w&&(l||_.pathname+_.search===b.pathname+b.search||_.search!==b.search||nt(a,c))}))}),S=[];return f.forEach((t,o)=>{if(s||!n.some(e=>e.route.id===t.routeId)||h.has(o))return;let a=m(g,t.path,p);if(!a)return void S.push({key:o,routeId:t.routeId,path:t.path,matches:null,match:null,controller:null});let u=e.fetchers.get(o),f=Nt(a,t.path),v=!1;d.has(o)?v=!1:c.has(o)?(c.delete(o),v=!0):v=u&&"idle"!==u.state&&void 0===u.data?l:it(f,i({currentUrl:_,currentParams:e.matches[e.matches.length-1].params,nextUrl:b,nextParams:n[n.length-1].params},r,{actionResult:y,actionStatus:E,defaultShouldRevalidate:!w&&l})),v&&S.push({key:o,routeId:t.routeId,path:t.path,matches:a,match:f,controller:new AbortController})}),[k,S]}function et(t,e,n){if(t.lazy)return!0;if(!t.loader)return!1;let i=null!=e&&void 0!==e[t.id],r=null!=n&&void 0!==n[t.id];return!(!i&&r)&&("function"===typeof t.loader&&!0===t.loader.hydrate||!i&&!r)}function nt(t,e){let n=t.route.path;return t.pathname!==e.pathname||null!=n&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function it(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if("boolean"===typeof n)return n}return e.defaultShouldRevalidate}function rt(t,e,n,i,r){var o;let s;if(t){let e=i[t];l(e,"No route found to patch children into: routeId = "+t),e.children||(e.children=[]),s=e.children}else s=n;let a=y(e.filter(t=>!s.some(e=>function t(e,n){if("id"in e&&"id"in n&&e.id===n.id)return!0;if(e.index!==n.index||e.path!==n.path||e.caseSensitive!==n.caseSensitive)return!1;if((!e.children||0===e.children.length)&&(!n.children||0===n.children.length))return!0;return e.children.every((e,i)=>{var r;return null==(r=n.children)?void 0:r.some(n=>t(e,n))})}(t,e))),r,[t||"_","patch",String((null==(o=s)?void 0:o.length)||"0")],i);s.push(...a)}async function ot(t){let{matches:e}=t,n=e.filter(t=>t.shouldLoad);return(await Promise.all(n.map(t=>t.resolve()))).reduce((t,e,i)=>Object.assign(t,{[n[i].route.id]:e}),{})}async function st(t,e,n,r,o,s,a,c,h,f){let d=s.map(t=>t.route.lazy?async function(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let o=n[t.id];l(o,"No route found in manifest");let s={};for(let i in r){let t=void 0!==o[i]&&"hasErrorBoundary"!==i;u(!t,'Route "'+o.id+'" has a static property "'+i+'" defined but its lazy function is also returning a value for this property. The lazy route property "'+i+'" will be ignored.'),t||v.has(i)||(s[i]=r[i])}Object.assign(o,s),Object.assign(o,i({},e(o),{lazy:void 0}))}(t.route,h,c):void 0),g=s.map((t,n)=>{let s=d[n],a=o.some(e=>e.route.id===t.route.id);return i({},t,{shouldLoad:a,resolve:async n=>(n&&"GET"===r.method&&(t.route.lazy||t.route.loader)&&(a=!0),a?async function(t,e,n,i,r,o){let s,a,u=i=>{let s,l=new Promise((t,e)=>s=e);a=()=>s(),e.signal.addEventListener("abort",a);let u=r=>"function"!==typeof i?Promise.reject(new Error('You cannot call the handler for a route which defines a boolean "'+t+'" [routeId: '+n.route.id+"]")):i({request:e,params:n.params,context:o},...void 0!==r?[r]:[]),c=(async()=>{try{return{type:"data",result:await(r?r(t=>u(t)):u())}}catch(t){return{type:"error",result:t}}})();return Promise.race([c,l])};try{let r=n.route[t];if(i)if(r){let t,[e]=await Promise.all([u(r).catch(e=>{t=e}),i]);if(void 0!==t)throw t;s=e}else{if(await i,r=n.route[t],!r){if("action"===t){let t=new URL(e.url),i=t.pathname+t.search;throw _t(405,{method:e.method,pathname:i,routeId:n.route.id})}return{type:p.data,result:void 0}}s=await u(r)}else{if(!r){let t=new URL(e.url);throw _t(404,{pathname:t.pathname+t.search})}s=await u(r)}l(void 0!==s.result,"You defined "+("action"===t?"an action":"a loader")+' for route "'+n.route.id+"\" but didn't return anything from your `"+t+"` function. Please return a value or `null`.")}catch(c){return{type:p.error,result:c}}finally{a&&e.signal.removeEventListener("abort",a)}return s}(e,r,t,s,n,f):Promise.resolve({type:p.data,result:void 0}))})}),y=await t({matches:g,request:r,params:s[0].params,fetcherKey:a,context:f});try{await Promise.all(d)}catch(m){}return y}async function at(t){let{result:e,type:n}=t;if(Ot(e)){let t;try{let n=e.headers.get("Content-Type");t=n&&/\bapplication\/json\b/.test(n)?null==e.body?null:await e.json():await e.text()}catch(h){return{type:p.error,error:h}}return n===p.error?{type:p.error,error:new D(e.status,e.statusText,t),statusCode:e.status,headers:e.headers}:{type:p.data,data:t,statusCode:e.status,headers:e.headers}}var i,r,o,s,a,l,u,c;return n===p.error?Ct(e)?e.data instanceof Error?{type:p.error,error:e.data,statusCode:null==(o=e.init)?void 0:o.status,headers:null!=(s=e.init)&&s.headers?new Headers(e.init.headers):void 0}:{type:p.error,error:new D((null==(i=e.init)?void 0:i.status)||500,void 0,e.data),statusCode:F(e)?e.status:void 0,headers:null!=(r=e.init)&&r.headers?new Headers(e.init.headers):void 0}:{type:p.error,error:e,statusCode:F(e)?e.status:void 0}:function(t){let e=t;return e&&"object"===typeof e&&"object"===typeof e.data&&"function"===typeof e.subscribe&&"function"===typeof e.cancel&&"function"===typeof e.resolveData}(e)?{type:p.deferred,deferredData:e,statusCode:null==(a=e.init)?void 0:a.status,headers:(null==(l=e.init)?void 0:l.headers)&&new Headers(e.init.headers)}:Ct(e)?{type:p.data,data:e.data,statusCode:null==(u=e.init)?void 0:u.status,headers:null!=(c=e.init)&&c.headers?new Headers(e.init.headers):void 0}:{type:p.data,data:e}}function lt(t,e,n,i,r,o){let s=t.headers.get("Location");if(l(s,"Redirects returned/thrown from loaders/actions must have a Location header"),!H.test(s)){let a=i.slice(0,i.findIndex(t=>t.route.id===n)+1);s=J(new URL(e.url),a,r,!0,s,o),t.headers.set("Location",s)}return t}function ut(t,e,n){if(H.test(t)){let i=t,r=i.startsWith("//")?new URL(e.protocol+i):new URL(i),o=null!=O(r.pathname,n);if(r.origin===e.origin&&o)return r.pathname+r.search+r.hash}return t}function ct(t,e,n,i){let r=t.createURL(xt(e)).toString(),o={signal:n};if(i&&Mt(i.formMethod)){let{formMethod:t,formEncType:e}=i;o.method=t.toUpperCase(),"application/json"===e?(o.headers=new Headers({"Content-Type":e}),o.body=JSON.stringify(i.json)):"text/plain"===e?o.body=i.text:"application/x-www-form-urlencoded"===e&&i.formData?o.body=ht(i.formData):o.body=i.formData}return new Request(r,o)}function ht(t){let e=new URLSearchParams;for(let[n,i]of t.entries())e.append(n,"string"===typeof i?i:i.name);return e}function ft(t){let e=new FormData;for(let[n,i]of t.entries())e.append(n,i);return e}function dt(t,e,n,i,r){let o,s={},a=null,u=!1,c={},h=n&&kt(n[1])?n[1].error:void 0;return t.forEach(n=>{if(!(n.route.id in e))return;let f=n.route.id,d=e[f];if(l(!St(d),"Cannot handle redirect results in processLoaderData"),kt(d)){let e=d.error;if(void 0!==h&&(e=h,h=void 0),a=a||{},r)a[f]=e;else{let n=yt(t,f);null==a[n.route.id]&&(a[n.route.id]=e)}s[f]=void 0,u||(u=!0,o=F(d.error)?d.error.status:500),d.headers&&(c[f]=d.headers)}else wt(d)?(i.set(f,d.deferredData),s[f]=d.deferredData.data,null==d.statusCode||200===d.statusCode||u||(o=d.statusCode),d.headers&&(c[f]=d.headers)):(s[f]=d.data,d.statusCode&&200!==d.statusCode&&!u&&(o=d.statusCode),d.headers&&(c[f]=d.headers))}),void 0!==h&&n&&(a={[n[0]]:h},s[n[0]]=void 0),{loaderData:s,errors:a,statusCode:o||200,loaderHeaders:c}}function gt(t,e,n,r,o,s,a){let{loaderData:u,errors:c}=dt(e,n,r,a,!1);return o.forEach(e=>{let{key:n,match:r,controller:o}=e,a=s[n];if(l(a,"Did not find corresponding fetcher result"),!o||!o.signal.aborted)if(kt(a)){let e=yt(t.matches,null==r?void 0:r.route.id);c&&c[e.route.id]||(c=i({},c,{[e.route.id]:a.error})),t.fetchers.delete(n)}else if(St(a))l(!1,"Unhandled fetcher revalidation redirect");else if(wt(a))l(!1,"Unhandled fetcher deferred data");else{let e=zt(a.data);t.fetchers.set(n,e)}}),{loaderData:u,errors:c}}function pt(t,e,n,r){let o=i({},e);for(let i of n){let n=i.route.id;if(e.hasOwnProperty(n)?void 0!==e[n]&&(o[n]=e[n]):void 0!==t[n]&&i.route.loader&&(o[n]=t[n]),r&&r.hasOwnProperty(n))break}return o}function vt(t){return t?kt(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function yt(t,e){return(e?t.slice(0,t.findIndex(t=>t.route.id===e)+1):[...t]).reverse().find(t=>!0===t.route.hasErrorBoundary)||t[0]}function mt(t){let e=1===t.length?t[0]:t.find(t=>t.index||!t.path||"/"===t.path)||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function _t(t,e){let{pathname:n,routeId:i,method:r,type:o,message:s}=void 0===e?{}:e,a="Unknown Server Error",l="Unknown @remix-run/router error";return 400===t?(a="Bad Request",r&&n&&i?l="You made a "+r+' request to "'+n+'" but did not provide a `loader` for route "'+i+'", so there is no way to handle the request.':"defer-action"===o?l="defer() is not supported in actions":"invalid-body"===o&&(l="Unable to encode submission body")):403===t?(a="Forbidden",l='Route "'+i+'" does not match URL "'+n+'"'):404===t?(a="Not Found",l='No route matches URL "'+n+'"'):405===t&&(a="Method Not Allowed",r&&n&&i?l="You made a "+r.toUpperCase()+' request to "'+n+'" but did not provide an `action` for route "'+i+'", so there is no way to handle the request.':r&&(l='Invalid request method "'+r.toUpperCase()+'"')),new D(t||500,a,new Error(l),!0)}function bt(t){let e=Object.entries(t);for(let n=e.length-1;n>=0;n--){let[t,i]=e[n];if(St(i))return{key:t,result:i}}}function xt(t){return f(i({},"string"===typeof t?d(t):t,{hash:""}))}function Et(t){return Ot(t.result)&&Y.has(t.result.status)}function wt(t){return t.type===p.deferred}function kt(t){return t.type===p.error}function St(t){return(t&&t.type)===p.redirect}function Ct(t){return"object"===typeof t&&null!=t&&"type"in t&&"data"in t&&"init"in t&&"DataWithResponseInit"===t.type}function Ot(t){return null!=t&&"number"===typeof t.status&&"string"===typeof t.statusText&&"object"===typeof t.headers&&"undefined"!==typeof t.body}function It(t){return V.has(t.toLowerCase())}function Mt(t){return G.has(t.toLowerCase())}async function Rt(t,e,n,i,r){let o=Object.entries(e);for(let s=0;s<o.length;s++){let[a,l]=o[s],u=t.find(t=>(null==t?void 0:t.route.id)===a);if(!u)continue;let c=i.find(t=>t.route.id===u.route.id),h=null!=c&&!nt(c,u)&&void 0!==(r&&r[u.route.id]);wt(l)&&h&&await Pt(l,n,!1).then(t=>{t&&(e[a]=t)})}}async function Tt(t,e,n){for(let i=0;i<n.length;i++){let{key:r,routeId:o,controller:s}=n[i],a=e[r];t.find(t=>(null==t?void 0:t.route.id)===o)&&(wt(a)&&(l(s,"Expected an AbortController for revalidating fetcher deferred result"),await Pt(a,s.signal,!0).then(t=>{t&&(e[r]=t)})))}}async function Pt(t,e,n){if(void 0===n&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:p.data,data:t.deferredData.unwrappedData}}catch(i){return{type:p.error,error:i}}return{type:p.data,data:t.deferredData.data}}}function Lt(t){return new URLSearchParams(t).getAll("index").some(t=>""===t)}function Nt(t,e){let n="string"===typeof e?d(e).search:e.search;if(t[t.length-1].route.index&&Lt(n||""))return t[t.length-1];let i=M(t);return i[i.length-1]}function At(t){let{formMethod:e,formAction:n,formEncType:i,text:r,formData:o,json:s}=t;if(e&&n&&i)return null!=r?{formMethod:e,formAction:n,formEncType:i,formData:void 0,json:void 0,text:r}:null!=o?{formMethod:e,formAction:n,formEncType:i,formData:o,json:void 0,text:void 0}:void 0!==s?{formMethod:e,formAction:n,formEncType:i,formData:void 0,json:s,text:void 0}:void 0}function jt(t,e){if(e){return{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}return{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function Dt(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Ft(t,e){if(t){return{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}}return{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function zt(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}},function(t,e,n){"use strict";function i(t,e,n){return Math.min(Math.max(t,e),n)}function r(t,e,n,i,r,s){const a=r-n,l=s-i;if(0!==a||0!==l){const o=((t-n)*a+(e-i)*l)/(a*a+l*l);o>1?(n=r,i=s):o>0&&(n+=a*o,i+=l*o)}return o(t,e,n,i)}function o(t,e,n,i){const r=n-t,o=i-e;return r*r+o*o}function s(t){const e=t.length;for(let i=0;i<e;i++){let n=i,r=Math.abs(t[i][i]);for(let s=i+1;s<e;s++){const e=Math.abs(t[s][i]);e>r&&(r=e,n=s)}if(0===r)return null;const o=t[n];t[n]=t[i],t[i]=o;for(let s=i+1;s<e;s++){const n=-t[s][i]/t[i][i];for(let r=i;r<e+1;r++)i==r?t[s][r]=0:t[s][r]+=n*t[i][r]}}const n=new Array(e);for(let i=e-1;i>=0;i--){n[i]=t[i][e]/t[i][i];for(let r=i-1;r>=0;r--)t[r][e]-=t[r][i]*n[i]}return n}function a(t){return 180*t/Math.PI}function l(t){return t*Math.PI/180}function u(t,e){const n=t%e;return n*e<0?n+e:n}function c(t,e,n){return t+n*(e-t)}function h(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}function f(t,e){return Math.floor(h(t,e))}function d(t,e){return Math.ceil(h(t,e))}n.d(e,"b",(function(){return i})),n.d(e,"h",(function(){return r})),n.d(e,"g",(function(){return o})),n.d(e,"f",(function(){return s})),n.d(e,"i",(function(){return a})),n.d(e,"k",(function(){return l})),n.d(e,"e",(function(){return u})),n.d(e,"d",(function(){return c})),n.d(e,"j",(function(){return h})),n.d(e,"c",(function(){return f})),n.d(e,"a",(function(){return d}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"c",(function(){return S})),n.d(e,"h",(function(){return M})),n.d(e,"i",(function(){return R})),n.d(e,"b",(function(){return P})),n.d(e,"m",(function(){return L})),n.d(e,"d",(function(){return N})),n.d(e,"k",(function(){return A})),n.d(e,"j",(function(){return j})),n.d(e,"q",(function(){return D})),n.d(e,"r",(function(){return F})),n.d(e,"l",(function(){return G})),n.d(e,"n",(function(){return B})),n.d(e,"e",(function(){return V})),n.d(e,"o",(function(){return Y})),n.d(e,"f",(function(){return q})),n.d(e,"p",(function(){return U})),n.d(e,"g",(function(){return X}));const i={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};var r=class{constructor(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||i[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(t){this.defaultTileGrid_=t}setExtent(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)}setWorldExtent(t){this.worldExtent_=t}setGetPointResolution(t){this.getPointResolutionFunc_=t}getPointResolutionFunc(){return this.getPointResolutionFunc_}};const o=6378137*Math.PI,s=[-o,-o,o,o],a=[-180,-85,180,85],l=6378137*Math.log(Math.tan(Math.PI/2));class u extends r{constructor(t){super({code:t,units:"m",extent:s,global:!0,worldExtent:a,getPointResolution:function(t,e){return t/Math.cosh(e[1]/6378137)}})}}const c=[new u("EPSG:3857"),new u("EPSG:102100"),new u("EPSG:102113"),new u("EPSG:900913"),new u("http://www.opengis.net/def/crs/EPSG/0/3857"),new u("http://www.opengis.net/gml/srs/epsg.xml#3857")];function h(t,e,n){const i=t.length;n=n>1?n:2,void 0===e&&(e=n>2?t.slice():new Array(i));for(let r=0;r<i;r+=n){e[r]=o*t[r]/180;let n=6378137*Math.log(Math.tan(Math.PI*(+t[r+1]+90)/360));n>l?n=l:n<-l&&(n=-l),e[r+1]=n}return e}function f(t,e,n){const i=t.length;n=n>1?n:2,void 0===e&&(e=n>2?t.slice():new Array(i));for(let r=0;r<i;r+=n)e[r]=180*t[r]/o,e[r+1]=360*Math.atan(Math.exp(t[r+1]/6378137))/Math.PI-90;return e}const d=[-180,-90,180,90],g=6378137*Math.PI/180;class p extends r{constructor(t,e){super({code:t,units:"degrees",extent:d,axisOrientation:e,global:!0,metersPerUnit:g,worldExtent:d})}}const v=[new p("CRS:84"),new p("EPSG:4326","neu"),new p("urn:ogc:def:crs:OGC:1.3:CRS84"),new p("urn:ogc:def:crs:OGC:2:84"),new p("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new p("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new p("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let y={};n(21);let m={};function _(t,e,n){const i=t.getCode(),r=e.getCode();i in m||(m[i]={}),m[i][r]=n}var b=n(2),x=n(5),E=n(31),w=n(65);let k=!0;function S(t){k=!(void 0===t||t)}function C(t,e,n){if(void 0!==e){for(let n=0,i=t.length;n<i;++n)e[n]=t[n];e=e}else e=t.slice();return e}function O(t,e,n){if(void 0!==e&&t!==e){for(let n=0,i=t.length;n<i;++n)e[n]=t[n];t=e}return t}function I(t){!function(t,e){y[t]=e}(t.getCode(),t),_(t,t,C)}function M(t){return"string"===typeof t?y[e=t]||y[e.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null:t||null;var e}function R(t,e,n,r){let o;const s=(t=M(t)).getPointResolutionFunc();if(s){if(o=s(e,n),r&&r!==t.getUnits()){const e=t.getMetersPerUnit();e&&(o=o*e/i[r])}}else{const s=t.getUnits();if("degrees"==s&&!r||"degrees"==r)o=e;else{const a=A(t,M("EPSG:4326"));if(a===O&&"degrees"!==s)o=e*t.getMetersPerUnit();else{let t=[n[0]-e/2,n[1],n[0]+e/2,n[1],n[0],n[1]-e/2,n[0],n[1]+e/2];t=a(t,t,2);o=(Object(w.a)(t.slice(0,2),t.slice(2,4))+Object(w.a)(t.slice(4,6),t.slice(6,8)))/2}const l=r?i[r]:t.getMetersPerUnit();void 0!==l&&(o/=l)}}return o}function T(t){!function(t){t.forEach(I)}(t),t.forEach((function(e){t.forEach((function(t){e!==t&&_(e,t,C)}))}))}function P(t,e){return t?"string"===typeof t?M(t):t:M(e)}function L(t,e){const n=D(t,void 0!==e?e:"EPSG:3857","EPSG:4326"),i=n[0];return(i<-180||i>180)&&(n[0]=Object(x.e)(i+180,360)-180),n}function N(t,e){if(t===e)return!0;const n=t.getUnits()===e.getUnits();if(t.getCode()===e.getCode())return n;return A(t,e)===C&&n}function A(t,e){let n=function(t,e){let n;return t in m&&e in m[t]&&(n=m[t][e]),n}(t.getCode(),e.getCode());return n||(n=O),n}function j(t,e){return A(M(t),M(e))}function D(t,e,n){return j(e,n)(t,void 0,t.length)}function F(t,e,n,i){const r=j(e,n);return Object(b.a)(t,r,void 0,i)}let z=null;function G(){return z}function B(t,e){return z?D(t,e,z):t}function V(t,e){return z?D(t,z,e):(k&&!Object(E.b)(t,[0,0])&&t[0]>=-180&&t[0]<=180&&t[1]>=-90&&t[1]<=90&&(k=!1,console.warn("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),t)}function Y(t,e){return z?F(t,e,z):t}function q(t,e){return z?F(t,z,e):t}function U(t,e){if(!z)return t;const n=M(e).getUnits(),r=z.getUnits();return n&&r?t*i[n]/i[r]:t}function X(t,e){if(!z)return t;const n=M(e).getUnits(),r=z.getUnits();return n&&r?t*i[r]/i[n]:t}!function(){var t,e,n;T(c),T(v),t=c,e=h,n=f,v.forEach((function(i){t.forEach((function(t){_(i,t,e),_(t,i,n)}))}))}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return D})),n.d(e,"b",(function(){return F})),n.d(e,"c",(function(){return z})),n.d(e,"d",(function(){return s})),n.d(e,"e",(function(){return a})),n.d(e,"f",(function(){return l})),n.d(e,"g",(function(){return c})),n.d(e,"h",(function(){return j})),n.d(e,"i",(function(){return G})),n.d(e,"j",(function(){return R})),n.d(e,"k",(function(){return _})),n.d(e,"l",(function(){return N})),n.d(e,"m",(function(){return f})),n.d(e,"n",(function(){return g})),n.d(e,"o",(function(){return P})),n.d(e,"p",(function(){return v})),n.d(e,"q",(function(){return T})),n.d(e,"r",(function(){return y})),n.d(e,"s",(function(){return m}));var i=n(1),r=n(4);function o(){return(o=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}const s=i.createContext(null);const a=i.createContext(null);const l=i.createContext(null);const u=i.createContext(null);const c=i.createContext({outlet:null,matches:[],isDataRoute:!1});const h=i.createContext(null);function f(t,e){let{relative:n}=void 0===e?{}:e;d()||Object(r.i)(!1);let{basename:o,navigator:s}=i.useContext(l),{hash:a,pathname:u,search:c}=m(t,{relative:n}),h=u;return"/"!==o&&(h="/"===u?o:Object(r.p)([o,u])),s.createHref({pathname:h,search:c,hash:a})}function d(){return null!=i.useContext(u)}function g(){return d()||Object(r.i)(!1),i.useContext(u).location}function p(t){i.useContext(l).static||i.useLayoutEffect(t)}function v(){let{isDataRoute:t}=i.useContext(c);return t?function(){let{router:t}=O(S.UseNavigateStable),e=M(C.UseNavigateStable),n=i.useRef(!1);return p(()=>{n.current=!0}),i.useCallback((function(i,r){void 0===r&&(r={}),n.current&&("number"===typeof i?t.navigate(i):t.navigate(i,o({fromRouteId:e},r)))}),[t,e])}():function(){d()||Object(r.i)(!1);let t=i.useContext(s),{basename:e,future:n,navigator:o}=i.useContext(l),{matches:a}=i.useContext(c),{pathname:u}=g(),h=JSON.stringify(Object(r.h)(a,n.v7_relativeSplatPath)),f=i.useRef(!1);return p(()=>{f.current=!0}),i.useCallback((function(n,i){if(void 0===i&&(i={}),!f.current)return;if("number"===typeof n)return void o.go(n);let s=Object(r.t)(n,JSON.parse(h),u,"path"===i.relative);null==t&&"/"!==e&&(s.pathname="/"===s.pathname?e:Object(r.p)([e,s.pathname])),(i.replace?o.replace:o.push)(s,i.state,i)}),[e,o,h,u,t])}()}function y(){let{matches:t}=i.useContext(c),e=t[t.length-1];return e?e.params:{}}function m(t,e){let{relative:n}=void 0===e?{}:e,{future:o}=i.useContext(l),{matches:s}=i.useContext(c),{pathname:a}=g(),u=JSON.stringify(Object(r.h)(s,o.v7_relativeSplatPath));return i.useMemo(()=>Object(r.t)(t,JSON.parse(u),a,"path"===n),[t,u,a,n])}function _(t,e,n,s){d()||Object(r.i)(!1);let{navigator:a,static:h}=i.useContext(l),{matches:f}=i.useContext(c),p=f[f.length-1],v=p?p.params:{},y=(p&&p.pathname,p?p.pathnameBase:"/");p&&p.route;let m,_=g();if(e){var b;let t="string"===typeof e?Object(r.s)(e):e;"/"===y||(null==(b=t.pathname)?void 0:b.startsWith(y))||Object(r.i)(!1),m=t}else m=_;let x=m.pathname||"/",E=x;if("/"!==y){let t=y.replace(/^\//,"").split("/");E="/"+x.replace(/^\//,"").split("/").slice(t.length).join("/")}let w=!h&&n&&n.matches&&n.matches.length>0?n.matches:Object(r.r)(t,{pathname:E});let S=k(w&&w.map(t=>Object.assign({},t,{params:Object.assign({},v,t.params),pathname:Object(r.p)([y,a.encodeLocation?a.encodeLocation(t.pathname).pathname:t.pathname]),pathnameBase:"/"===t.pathnameBase?y:Object(r.p)([y,a.encodeLocation?a.encodeLocation(t.pathnameBase).pathname:t.pathnameBase])})),f,n,s);return e&&S?i.createElement(u.Provider,{value:{location:o({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:r.b.Pop}},S):S}function b(){let t=function(){var t;let e=i.useContext(h),n=I(C.UseRouteError),r=M(C.UseRouteError);if(void 0!==e)return e;return null==(t=n.errors)?void 0:t[r]}(),e=Object(r.o)(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return i.createElement(i.Fragment,null,i.createElement("h2",null,"Unexpected Application Error!"),i.createElement("h3",{style:{fontStyle:"italic"}},e),n?i.createElement("pre",{style:o},n):null,null)}const x=i.createElement(b,null);class E extends i.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||"idle"!==e.revalidation&&"idle"===t.revalidation?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:void 0!==t.error?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return void 0!==this.state.error?i.createElement(c.Provider,{value:this.props.routeContext},i.createElement(h.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function w(t){let{routeContext:e,match:n,children:r}=t,o=i.useContext(s);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),i.createElement(c.Provider,{value:e},r)}function k(t,e,n,o){var s;if(void 0===e&&(e=[]),void 0===n&&(n=null),void 0===o&&(o=null),null==t){var a;if(!n)return null;if(n.errors)t=n.matches;else{if(!(null!=(a=o)&&a.v7_partialHydration&&0===e.length&&!n.initialized&&n.matches.length>0))return null;t=n.matches}}let l=t,u=null==(s=n)?void 0:s.errors;if(null!=u){let t=l.findIndex(t=>t.route.id&&void 0!==(null==u?void 0:u[t.route.id]));t>=0||Object(r.i)(!1),l=l.slice(0,Math.min(l.length,t+1))}let c=!1,h=-1;if(n&&o&&o.v7_partialHydration)for(let i=0;i<l.length;i++){let t=l[i];if((t.route.HydrateFallback||t.route.hydrateFallbackElement)&&(h=i),t.route.id){let{loaderData:e,errors:i}=n,r=t.route.loader&&void 0===e[t.route.id]&&(!i||void 0===i[t.route.id]);if(t.route.lazy||r){c=!0,l=h>=0?l.slice(0,h+1):[l[0]];break}}}return l.reduceRight((t,r,o)=>{let s,a=!1,f=null,d=null;var g;n&&(s=u&&r.route.id?u[r.route.id]:void 0,f=r.route.errorElement||x,c&&(h<0&&0===o?(g="route-fallback",!1||A[g]||(A[g]=!0),a=!0,d=null):h===o&&(a=!0,d=r.route.hydrateFallbackElement||null)));let p=e.concat(l.slice(0,o+1)),v=()=>{let e;return e=s?f:a?d:r.route.Component?i.createElement(r.route.Component,null):r.route.element?r.route.element:t,i.createElement(w,{match:r,routeContext:{outlet:t,matches:p,isDataRoute:null!=n},children:e})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===o)?i.createElement(E,{location:n.location,revalidation:n.revalidation,component:f,error:s,children:v(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):v()},null)}var S=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(S||{}),C=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(C||{});function O(t){let e=i.useContext(s);return e||Object(r.i)(!1),e}function I(t){let e=i.useContext(a);return e||Object(r.i)(!1),e}function M(t){let e=function(t){let e=i.useContext(c);return e||Object(r.i)(!1),e}(),n=e.matches[e.matches.length-1];return n.route.id||Object(r.i)(!1),n.route.id}function R(){return M(C.UseRouteId)}function T(){return I(C.UseNavigation).navigation}function P(){let{matches:t,loaderData:e}=I(C.UseMatches);return i.useMemo(()=>t.map(t=>Object(r.f)(t,e)),[t,e])}let L=0;function N(t){let{router:e,basename:n}=O(S.UseBlocker),s=I(C.UseBlocker),[a,l]=i.useState(""),u=i.useCallback(e=>{if("function"!==typeof t)return!!t;if("/"===n)return t(e);let{currentLocation:i,nextLocation:s,historyAction:a}=e;return t({currentLocation:o({},i,{pathname:Object(r.u)(i.pathname,n)||i.pathname}),nextLocation:o({},s,{pathname:Object(r.u)(s.pathname,n)||s.pathname}),historyAction:a})},[n,t]);return i.useEffect(()=>{let t=String(++L);return l(t),()=>e.deleteBlocker(t)},[e]),i.useEffect(()=>{""!==a&&e.getBlocker(a,u)},[e,a,u]),a&&s.blockers.has(a)?s.blockers.get(a):r.c}const A={};function j(t,e){null==t||t.v7_startTransition,void 0===(null==t?void 0:t.v7_relativeSplatPath)&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}i.startTransition;function D(t){Object(r.i)(!1)}function F(t){let{basename:e="/",children:n=null,location:s,navigationType:a=r.b.Pop,navigator:c,static:h=!1,future:f}=t;d()&&Object(r.i)(!1);let g=e.replace(/^\/*/,"/"),p=i.useMemo(()=>({basename:g,navigator:c,static:h,future:o({v7_relativeSplatPath:!1},f)}),[g,f,c,h]);"string"===typeof s&&(s=Object(r.s)(s));let{pathname:v="/",search:y="",hash:m="",state:_=null,key:b="default"}=s,x=i.useMemo(()=>{let t=Object(r.u)(v,g);return null==t?null:{location:{pathname:t,search:y,hash:m,state:_,key:b},navigationType:a}},[g,v,y,m,_,b,a]);return null==x?null:i.createElement(l.Provider,{value:p},i.createElement(u.Provider,{children:n,value:x}))}function z(t){let{children:e,location:n}=t;return function(t,e){return _(t,e)}(function t(e,n){void 0===n&&(n=[]);let o=[];return i.Children.forEach(e,(e,s)=>{if(!i.isValidElement(e))return;let a=[...n,s];if(e.type===i.Fragment)return void o.push.apply(o,t(e.props.children,a));e.type!==D&&Object(r.i)(!1),e.props.index&&e.props.children&&Object(r.i)(!1);let l={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(l.children=t(e.props.children,a)),o.push(l)}),o}(e),n)}new Promise(()=>{});i.Component;function G(t){let e={hasErrorBoundary:null!=t.ErrorBoundary||null!=t.errorElement};return t.Component&&Object.assign(e,{element:i.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:i.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:i.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return s}));var i=n(21);function r(t,e,n,i,r){if(i&&i!==t&&(n=n.bind(i)),r){const i=n;n=function(){t.removeEventListener(e,n),i.apply(this,arguments)}}const o={target:t,type:e,listener:n};return t.addEventListener(e,n),o}function o(t,e,n,i){return r(t,e,n,i,!0)}function s(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),Object(i.a)(t))}},function(t,e,n){"use strict";n.d(e,"c",(function(){return l})),n.d(e,"b",(function(){return u})),n.d(e,"d",(function(){return c})),n.d(e,"e",(function(){return h})),n.d(e,"f",(function(){return f})),n.d(e,"g",(function(){return d})),n.d(e,"i",(function(){return g})),n.d(e,"k",(function(){return p})),n.d(e,"l",(function(){return v})),n.d(e,"m",(function(){return y})),n.d(e,"j",(function(){return m})),n.d(e,"h",(function(){return _})),n.d(e,"a",(function(){return b})),n.d(e,"q",(function(){return k})),n.d(e,"p",(function(){return I})),n.d(e,"o",(function(){return M})),n.d(e,"n",(function(){return R}));var i=n(24),r=n(28),o=n(21),s=n(15),a=n(25);const l="10px sans-serif",u="#000",c="round",h=[],f=0,d="round",g=10,p="#000",v="center",y="middle",m=[0,0,0,0],_=1,b=new i.a;let x,E=null;const w={},k=function(){const t=["monospace","serif"],e=t.length,n="wmytzilWMYTZIL@#/&?$%10\uf013";let i,r;function s(i,o,s){let a=!0;for(let l=0;l<e;++l){const e=t[l];if(r=O(i+" "+o+" 32px "+e,n),s!=e){const t=O(i+" "+o+" 32px "+s+","+e,n);a=a&&t!=r}}return!!a}function l(){let t=!0;const e=b.getKeys();for(let n=0,i=e.length;n<i;++n){const i=e[n];b.get(i)<100&&(s.apply(this,i.split("\n"))?(Object(o.a)(w),E=null,x=void 0,b.set(i,100)):(b.set(i,b.get(i)+1,!0),t=!1))}t&&(clearInterval(i),i=void 0)}return function(t){const e=Object(a.f)(t);if(!e)return;const n=e.families;for(let r=0,o=n.length;r<o;++r){const t=n[r],o=e.style+"\n"+e.weight+"\n"+t;void 0===b.get(o)&&(b.set(o,100,!0),s(e.style,e.weight,t)||(b.set(o,0,!0),void 0===i&&(i=setInterval(l,32))))}}}(),S=function(){let t;return function(e){let n=w[e];if(void 0==n){if(r.g){const t=Object(a.f)(e),i=C(e,"\u017dg");n=(isNaN(Number(t.lineHeight))?1.2:Number(t.lineHeight))*(i.actualBoundingBoxAscent+i.actualBoundingBoxDescent)}else t||(t=document.createElement("div"),t.innerHTML="M",t.style.minHeight="0",t.style.maxHeight="none",t.style.height="auto",t.style.padding="0",t.style.border="none",t.style.position="absolute",t.style.display="block",t.style.left="-99999px"),t.style.font=e,document.body.appendChild(t),n=t.offsetHeight,document.body.removeChild(t);w[e]=n}return n}}();function C(t,e){return E||(E=Object(s.a)(1,1)),t!=x&&(E.font=t,x=E.font),E.measureText(e)}function O(t,e){return C(t,e).width}function I(t,e,n){if(e in n)return n[e];const i=e.split("\n").reduce((e,n)=>Math.max(e,O(t,n)),0);return n[e]=i,i}function M(t,e){const n=[],i=[],r=[];let o=0,s=0,a=0,l=0;for(let u=0,c=e.length;u<=c;u+=2){const h=e[u];if("\n"===h||u===c){o=Math.max(o,s),r.push(s),s=0,a+=l;continue}const f=e[u+1]||t.font,d=O(f,h);n.push(d),s+=d;const g=S(f);i.push(g),l=Math.max(l,g)}return{width:o,height:a,widths:n,heights:i,lineWidths:r}}function R(t,e,n,i,r,o,s,a,l,u,c){t.save(),1!==n&&(t.globalAlpha*=n),e&&t.setTransform.apply(t,e),i.contextInstructions?(t.translate(l,u),t.scale(c[0],c[1]),function(t,e){const n=t.contextInstructions;for(let i=0,r=n.length;i<r;i+=2)Array.isArray(n[i+1])?e[n[i]].apply(e,n[i+1]):e[n[i]]=n[i+1]}(i,t)):c[0]<0||c[1]<0?(t.translate(l,u),t.scale(c[0],c[1]),t.drawImage(i,r,o,s,a,0,0,s,a)):t.drawImage(i,r,o,s,a,l,u,s*c[0],a*c[1]),t.restore()}},function(t,e,n){"use strict";e.a={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"}},function(t,e,n){"use strict";e.a={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n(73);function r(t,e){if(!t)throw new i.a(e)}},function(t,e,n){"use strict";function i(t,e,n){let i,o;n=n||r;let s=0,a=t.length,l=!1;for(;s<a;)i=s+(a-s>>1),o=+n(t[i],e),o<0?s=i+1:(a=i,l=!o);return l?s:~s}function r(t,e){return t>e?1:t<e?-1:0}function o(t,e,n){const i=t.length;if(t[0]<=e)return 0;if(e<=t[i-1])return i-1;{let r;if(n>0){for(r=1;r<i;++r)if(t[r]<e)return r-1}else if(n<0){for(r=1;r<i;++r)if(t[r]<=e)return r}else for(r=1;r<i;++r){if(t[r]==e)return r;if(t[r]<e)return"function"===typeof n?n(e,t[r-1],t[r])>0?r-1:r:t[r-1]-e<e-t[r]?r-1:r}return i-1}}function s(t,e,n){for(;e<n;){const i=t[e];t[e]=t[n],t[n]=i,++e,--n}}function a(t,e){const n=Array.isArray(e)?e:[e],i=n.length;for(let r=0;r<i;r++)t[t.length]=n[r]}function l(t,e){const n=t.length;if(n!==e.length)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}function u(t,e,n){const i=e||r;return t.every((function(e,r){if(0===r)return!0;const o=i(t[r-1],e);return!(o>0||n&&0===o)}))}n.d(e,"a",(function(){return i})),n.d(e,"f",(function(){return r})),n.d(e,"e",(function(){return o})),n.d(e,"g",(function(){return s})),n.d(e,"c",(function(){return a})),n.d(e,"b",(function(){return l})),n.d(e,"d",(function(){return u}))},function(t,e,n){"use strict";n.d(e,"c",(function(){return o})),n.d(e,"f",(function(){return a})),n.d(e,"a",(function(){return l})),n.d(e,"e",(function(){return u})),n.d(e,"b",(function(){return c})),n.d(e,"d",(function(){return h})),n.d(e,"g",(function(){return d}));var i=n(28),r=n(12);new Array(6);function o(){return[1,0,0,1,0,0]}function s(t,e,n,i,r,o,s){return t[0]=e,t[1]=n,t[2]=i,t[3]=r,t[4]=o,t[5]=s,t}function a(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function l(t,e){const n=e[0],i=e[1];return e[0]=t[0]*n+t[2]*i+t[4],e[1]=t[1]*n+t[3]*i+t[5],e}function u(t,e,n){return s(t,e,0,0,n,0,0)}function c(t,e,n,i,r,o,s,a){const l=Math.sin(o),u=Math.cos(o);return t[0]=i*u,t[1]=r*l,t[2]=-i*l,t[3]=r*u,t[4]=s*i*u-a*i*l+e,t[5]=s*r*l+a*r*u+n,t}function h(t,e){const n=(i=e)[0]*i[3]-i[1]*i[2];var i;Object(r.a)(0!==n,32);const o=e[0],s=e[1],a=e[2],l=e[3],u=e[4],c=e[5];return t[0]=l/n,t[1]=-s/n,t[2]=-a/n,t[3]=o/n,t[4]=(a*c-l*u)/n,t[5]=-(o*c-s*u)/n,t}let f;function d(t){const e="matrix("+t.join(", ")+")";if(i.g)return e;const n=f||(f=document.createElement("div"));return n.style.transform=e,n.style.transform}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"d",(function(){return o})),n.d(e,"c",(function(){return s})),n.d(e,"b",(function(){return a})),n.d(e,"h",(function(){return l})),n.d(e,"f",(function(){return u})),n.d(e,"e",(function(){return c})),n.d(e,"g",(function(){return h}));var i=n(28);function r(t,e,n,r){let o;return o=n&&n.length?n.shift():i.g?new OffscreenCanvas(t||300,e||300):document.createElement("canvas"),t&&(o.width=t),e&&(o.height=e),o.getContext("2d",r)}function o(t){const e=t.canvas;e.width=1,e.height=1,t.clearRect(0,0,1,1)}function s(t){let e=t.offsetWidth;const n=getComputedStyle(t);return e+=parseInt(n.marginLeft,10)+parseInt(n.marginRight,10),e}function a(t){let e=t.offsetHeight;const n=getComputedStyle(t);return e+=parseInt(n.marginTop,10)+parseInt(n.marginBottom,10),e}function l(t,e){const n=e.parentNode;n&&n.replaceChild(t,e)}function u(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}function c(t){for(;t.lastChild;)t.removeChild(t.lastChild)}function h(t,e){const n=t.childNodes;for(let i=0;;++i){const r=n[i],o=e[i];if(!r&&!o)break;r!==o&&(r?o?t.insertBefore(o,r):(t.removeChild(r),--i):t.appendChild(o))}}},function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return o})),n.d(e,"c",(function(){return s})),n.d(e,"d",(function(){return a}));var i=n(13);function r(){return!0}function o(){return!1}function s(){}function a(t){let e,n,r,o=!1;return function(){const s=Array.prototype.slice.call(arguments);return o&&this===r&&Object(i.b)(s,n)||(o=!0,r=this,n=s,e=t.apply(this,arguments)),e}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return l})),n.d(e,"e",(function(){return u})),n.d(e,"c",(function(){return c})),n.d(e,"d",(function(){return h})),n.d(e,"f",(function(){return f})),n.d(e,"h",(function(){return d})),n.d(e,"l",(function(){return g})),n.d(e,"i",(function(){return p})),n.d(e,"k",(function(){return v})),n.d(e,"m",(function(){return y})),n.d(e,"g",(function(){return m})),n.d(e,"j",(function(){return _}));var i=n(20),r=n(16),o=n(28),s=n(12);function a(t){const e=arguments;return function(t){let n=!0;for(let i=0,r=e.length;i<r&&(n=n&&e[i](t),n);++i);return n}}const l=function(t){const e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},u=function(t){return!t.map.getTargetElement().hasAttribute("tabindex")||function(t){const e=t.map.getTargetElement(),n=t.map.getOwnerDocument().activeElement;return e.contains(n)}(t)},c=r.b,h=function(t){return t.type==i.a.CLICK},f=function(t){const e=t.originalEvent;return 0==e.button&&!(o.f&&o.d&&e.ctrlKey)},d=r.a,g=function(t){return t.type==i.a.SINGLECLICK},p=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},v=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},y=function(t){const e=t.originalEvent,n=e.target.tagName;return"INPUT"!==n&&"SELECT"!==n&&"TEXTAREA"!==n&&!e.target.isContentEditable},m=function(t){const e=t.originalEvent;return Object(s.a)(void 0!==e,56),"mouse"==e.pointerType},_=function(t){const e=t.originalEvent;return Object(s.a)(void 0!==e,56),e.isPrimary&&0===e.button}},function(t,e,n){"use strict";e.a={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4}},function(t,e,n){"use strict";e.a={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"}},function(t,e,n){"use strict";var i=n(10);e.a={SINGLECLICK:"singleclick",CLICK:i.a.CLICK,DBLCLICK:i.a.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"}},function(t,e,n){"use strict";function i(t){for(const e in t)delete t[e]}function r(t){let e;for(e in t)return!1;return!e}n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return r}))},function(t,e,n){"use strict";function i(t){return t[0]>0&&t[1]>0}function r(t,e,n){return void 0===n&&(n=[0,0]),n[0]=t[0]*e+.5|0,n[1]=t[1]*e+.5|0,n}function o(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:(e[0]=t,e[1]=t),e)}n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return o}))},function(t,e,n){"use strict";e.a={ADD:"add",REMOVE:"remove"}},function(t,e,n){"use strict";var i=n(27),r=n(47),o=n(74),s=n(3),a=n(21);class l extends i.a{constructor(t,e,n){super(t),this.key=e,this.oldValue=n}}class u extends o.a{constructor(t){super(),this.on,this.once,this.un,Object(s.b)(this),this.values_=null,void 0!==t&&this.setProperties(t)}get(t){let e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}hasProperties(){return!!this.values_}notify(t,e){let n;n="change:"+t,this.hasListener(n)&&this.dispatchEvent(new l(n,t,e)),n=r.a.PROPERTYCHANGE,this.hasListener(n)&&this.dispatchEvent(new l(n,t,e))}addChangeListener(t,e){this.addEventListener("change:"+t,e)}removeChangeListener(t,e){this.removeEventListener("change:"+t,e)}set(t,e,n){const i=this.values_||(this.values_={});if(n)i[t]=e;else{const n=i[t];i[t]=e,n!==e&&this.notify(t,n)}}setProperties(t,e){for(const n in t)this.set(n,t[n],e)}applyProperties(t){t.values_&&Object.assign(this.values_||(this.values_={}),t.values_)}unset(t,e){if(this.values_&&t in this.values_){const n=this.values_[t];delete this.values_[t],Object(a.b)(this.values_)&&(this.values_=null),e||this.notify(t,n)}}}e.a=u},function(t,e,n){"use strict";n.d(e,"c",(function(){return i})),n.d(e,"d",(function(){return r})),n.d(e,"e",(function(){return o})),n.d(e,"b",(function(){return s})),n.d(e,"a",(function(){return a})),n.d(e,"f",(function(){return c}));const i="ol-hidden",r="ol-selectable",o="ol-unselectable",s="ol-control",a="ol-collapsed",l=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),u=["style","variant","weight","size","lineHeight","family"],c=function(t){const e=t.match(l);if(!e)return null;const n={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let i=0,r=u.length;i<r;++i){const t=e[i+1];void 0!==t&&(n[u[i]]=t)}return n.families=n.family.split(/,\s?/),n}},function(t,e,n){"use strict";function i(t,e,n,i,r){r=void 0!==r?r:[];let o=0;for(let s=e;s<n;s+=i)r[o++]=t.slice(s,s+i);return r.length=o,r}function r(t,e,n,r,o){o=void 0!==o?o:[];let s=0;for(let a=0,l=n.length;a<l;++a){const l=n[a];o[s++]=i(t,e,l,r,o[s]),e=l}return o.length=s,o}function o(t,e,n,i,o){o=void 0!==o?o:[];let s=0;for(let a=0,l=n.length;a<l;++a){const l=n[a];o[s++]=1===l.length&&l[0]===e?[]:r(t,e,l,i,o[s]),e=l[l.length-1]}return o.length=s,o}n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return o}))},function(t,e,n){"use strict";e.a=class{constructor(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}},function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"f",(function(){return o})),n.d(e,"d",(function(){return s})),n.d(e,"a",(function(){return a})),n.d(e,"g",(function(){return l})),n.d(e,"c",(function(){return u})),n.d(e,"e",(function(){return c}));const i="undefined"!==typeof navigator&&"undefined"!==typeof navigator.userAgent?navigator.userAgent.toLowerCase():"",r=i.includes("firefox"),o=(i.includes("safari")&&!i.includes("chrom")&&(i.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(i)),i.includes("webkit")&&!i.includes("edge")),s=i.includes("macintosh"),a="undefined"!==typeof devicePixelRatio?devicePixelRatio:1,l="undefined"!==typeof WorkerGlobalScope&&"undefined"!==typeof OffscreenCanvas&&self instanceof WorkerGlobalScope,u="undefined"!==typeof Image&&Image.prototype.decode,c=function(){let t=!1;try{const e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch(e){}return t}()},function(t,e,n){"use strict";e.a={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16}},function(t,e,n){"use strict";e.a={ANIMATING:0,INTERACTING:1}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return o})),n.d(e,"d",(function(){return s})),n.d(e,"e",(function(){return a})),n.d(e,"f",(function(){return l})),n.d(e,"c",(function(){return u}));var i=n(2);n(5);function r(t,e){return t[0]+=+e[0],t[1]+=+e[1],t}function o(t,e){let n=!0;for(let i=t.length-1;i>=0;--i)if(t[i]!=e[i]){n=!1;break}return n}function s(t,e){const n=Math.cos(e),i=Math.sin(e),r=t[0]*n-t[1]*i,o=t[1]*n+t[0]*i;return t[0]=r,t[1]=o,t}function a(t,e){return t[0]*=e,t[1]*=e,t}function l(t,e){if(e.canWrapX()){const n=Object(i.E)(e.getExtent()),r=u(t,e,n);r&&(t[0]-=r*n)}return t}function u(t,e,n){const r=e.getExtent();let o=0;return e.canWrapX()&&(t[0]<r[0]||t[0]>r[2])&&(n=n||Object(i.E)(r),o=Math.floor((t[0]-r[0])/n)),o}},function(t,e,n){"use strict";var i=n(73),r=n(24),o=n(23),s=n(27);const a="length";class l extends s.a{constructor(t,e,n){super(t),this.element=e,this.index=n}}class u extends r.a{constructor(t,e){if(super(),this.on,this.once,this.un,e=e||{},this.unique_=!!e.unique,this.array_=t||[],this.unique_)for(let n=0,i=this.array_.length;n<i;++n)this.assertUnique_(this.array_[n],n);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(t){for(let e=0,n=t.length;e<n;++e)this.push(t[e]);return this}forEach(t){const e=this.array_;for(let n=0,i=e.length;n<i;++n)t(e[n],n,e)}getArray(){return this.array_}item(t){return this.array_[t]}getLength(){return this.get(a)}insertAt(t,e){if(t<0||t>this.getLength())throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new l(o.a.ADD,e,t))}pop(){return this.removeAt(this.getLength()-1)}push(t){this.unique_&&this.assertUnique_(t);const e=this.getLength();return this.insertAt(e,t),this.getLength()}remove(t){const e=this.array_;for(let n=0,i=e.length;n<i;++n)if(e[n]===t)return this.removeAt(n)}removeAt(t){if(t<0||t>=this.getLength())return;const e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new l(o.a.REMOVE,e,t)),e}setAt(t,e){if(t>=this.getLength())return void this.insertAt(t,e);if(t<0)throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e,t);const n=this.array_[t];this.array_[t]=e,this.dispatchEvent(new l(o.a.REMOVE,n,t)),this.dispatchEvent(new l(o.a.ADD,e,t))}updateLength_(){this.set(a,this.array_.length)}assertUnique_(t,e){for(let n=0,r=this.array_.length;n<r;++n)if(this.array_[n]===t&&n!==e)throw new i.a(58)}}e.a=u},function(t,e,n){"use strict";function i(t,e,n,i,r,o){o=o||[];let s=0;for(let a=e;a<n;a+=i){const e=t[a],n=t[a+1];o[s++]=r[0]*e+r[2]*n+r[4],o[s++]=r[1]*e+r[3]*n+r[5]}return o&&o.length!=s&&(o.length=s),o}function r(t,e,n,i,r,o,s){s=s||[];const a=Math.cos(r),l=Math.sin(r),u=o[0],c=o[1];let h=0;for(let f=e;f<n;f+=i){const e=t[f]-u,n=t[f+1]-c;s[h++]=u+e*a-n*l,s[h++]=c+e*l+n*a;for(let r=f+2;r<f+i;++r)s[h++]=t[r]}return s&&s.length!=h&&(s.length=h),s}function o(t,e,n,i,r,o,s,a){a=a||[];const l=s[0],u=s[1];let c=0;for(let h=e;h<n;h+=i){const e=t[h]-l,n=t[h+1]-u;a[c++]=l+r*e,a[c++]=u+o*n;for(let r=h+2;r<h+i;++r)a[c++]=t[r]}return a&&a.length!=c&&(a.length=c),a}function s(t,e,n,i,r,o,s){s=s||[];let a=0;for(let l=e;l<n;l+=i){s[a++]=t[l]+r,s[a++]=t[l+1]+o;for(let e=l+2;e<l+i;++e)s[a++]=t[e]}return s&&s.length!=a&&(s.length=a),s}n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return o})),n.d(e,"d",(function(){return s}))},function(t,e,n){"use strict";n.d(e,"b",(function(){return u}));var i=n(77),r=n(3),o=n(2),s=n(33);class a extends i.a{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates=null}computeExtent(t){return Object(o.n)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinates(){return Object(r.a)()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getSimplifiedGeometryInternal(t){return this}getStride(){return this.stride}setFlatCoordinates(t,e){this.stride=l(t),this.layout=t,this.flatCoordinates=e}setCoordinates(t,e){Object(r.a)()}setLayout(t,e,n){let i;if(t)i=l(t);else{for(let t=0;t<n;++t){if(0===e.length)return this.layout="XY",void(this.stride=2);e=e[0]}i=e.length,t=function(t){let e;2==t?e="XY":3==t?e="XYZ":4==t&&(e="XYZM");return e}(i)}this.layout=t,this.stride=i}applyTransform(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(t,e){const n=this.getFlatCoordinates();if(n){const i=this.getStride();Object(s.a)(n,0,n.length,i,t,e,n),this.changed()}}scale(t,e,n){void 0===e&&(e=t),n||(n=Object(o.w)(this.getExtent()));const i=this.getFlatCoordinates();if(i){const r=this.getStride();Object(s.b)(i,0,i.length,r,t,e,n,i),this.changed()}}translate(t,e){const n=this.getFlatCoordinates();if(n){const i=this.getStride();Object(s.d)(n,0,n.length,i,t,e,n),this.changed()}}}function l(t){let e;return"XY"==t?e=2:"XYZ"==t||"XYM"==t?e=3:"XYZM"==t&&(e=4),e}function u(t,e,n){const i=t.getFlatCoordinates();if(i){const r=t.getStride();return Object(s.c)(i,0,i.length,r,e,n)}return null}e.a=a},function(t,e,n){"use strict";function i(t){return Math.pow(t,3)}function r(t){return 1-i(1-t)}function o(t){return 3*t*t-2*t*t*t}function s(t){return t}n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return o})),n.d(e,"d",(function(){return s}))},function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return l}));var i=n(24),r="active",o=n(35);class s extends i.a{constructor(t){super(),this.on,this.once,this.un,t&&t.handleEvent&&(this.handleEvent=t.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(r)}getMap(){return this.map_}handleEvent(t){return!0}setActive(t){this.set(r,t)}setMap(t){this.map_=t}}function a(t,e,n){const i=t.getCenterInternal();if(i){const r=[i[0]+e[0],i[1]+e[1]];t.animateInternal({duration:void 0!==n?n:250,easing:o.d,center:t.getConstrainedCenter(r)})}}function l(t,e,n,i){const r=t.getZoom();if(void 0===r)return;const s=t.getConstrainedZoom(r+e),a=t.getResolutionForZoom(s);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:a,anchor:n,duration:void 0!==i?i:250,easing:o.b})}e.a=s},function(t,e,n){"use strict";n.d(e,"e",(function(){return o})),n.d(e,"a",(function(){return s})),n.d(e,"f",(function(){return a})),n.d(e,"d",(function(){return l})),n.d(e,"b",(function(){return u})),n.d(e,"c",(function(){return c}));var i=n(5);function r(t,e,n,r,o,s,a){const l=t[e],u=t[e+1],c=t[n]-l,h=t[n+1]-u;let f;if(0===c&&0===h)f=e;else{const d=((o-l)*c+(s-u)*h)/(c*c+h*h);if(d>1)f=n;else{if(d>0){for(let o=0;o<r;++o)a[o]=Object(i.d)(t[e+o],t[n+o],d);return void(a.length=r)}f=e}}for(let i=0;i<r;++i)a[i]=t[f+i];a.length=r}function o(t,e,n,r,o){let s=t[e],a=t[e+1];for(e+=r;e<n;e+=r){const n=t[e],r=t[e+1],l=Object(i.g)(s,a,n,r);l>o&&(o=l),s=n,a=r}return o}function s(t,e,n,i,r){for(let s=0,a=n.length;s<a;++s){const a=n[s];r=o(t,e,a,i,r),e=a}return r}function a(t,e,n,i,r){for(let o=0,a=n.length;o<a;++o){const a=n[o];r=s(t,e,a,i,r),e=a[a.length-1]}return r}function l(t,e,n,o,s,a,l,u,c,h,f){if(e==n)return h;let d,g;if(0===s){if(g=Object(i.g)(l,u,t[e],t[e+1]),g<h){for(d=0;d<o;++d)c[d]=t[e+d];return c.length=o,g}return h}f=f||[NaN,NaN];let p=e+o;for(;p<n;)if(r(t,p-o,p,o,l,u,f),g=Object(i.g)(l,u,f[0],f[1]),g<h){for(h=g,d=0;d<o;++d)c[d]=f[d];c.length=o,p+=o}else p+=o*Math.max((Math.sqrt(g)-Math.sqrt(h))/s|0,1);if(a&&(r(t,n-o,e,o,l,u,f),g=Object(i.g)(l,u,f[0],f[1]),g<h)){for(h=g,d=0;d<o;++d)c[d]=f[d];c.length=o}return h}function u(t,e,n,i,r,o,s,a,u,c,h){h=h||[NaN,NaN];for(let f=0,d=n.length;f<d;++f){const d=n[f];c=l(t,e,d,i,r,o,s,a,u,c,h),e=d}return c}function c(t,e,n,i,r,o,s,a,l,c,h){h=h||[NaN,NaN];for(let f=0,d=n.length;f<d;++f){const d=n[f];c=u(t,e,d,i,r,o,s,a,l,c,h),e=d[d.length-1]}return c}},function(t,e,n){"use strict";function i(t,e,n,i){for(let r=0,o=n.length;r<o;++r)t[e++]=n[r];return e}function r(t,e,n,i){for(let r=0,o=n.length;r<o;++r){const o=n[r];for(let n=0;n<i;++n)t[e++]=o[n]}return e}function o(t,e,n,i,o){o=o||[];let s=0;for(let a=0,l=n.length;a<l;++a){const l=r(t,e,n[a],i);o[s++]=l,e=l}return o.length=s,o}function s(t,e,n,i,r){r=r||[];let s=0;for(let a=0,l=n.length;a<l;++a){const l=o(t,e,n[a],i,r[s]);0===l.length&&(l[0]=e),r[s++]=l,e=l[l.length-1]}return r.length=s,r}n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return o})),n.d(e,"d",(function(){return s}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n(41);function r(t){return Array.isArray(t)?Object(i.c)(t):t}},function(t,e,n){"use strict";n.d(e,"b",(function(){return c}));var i=n(81),r=n(10),o=n(19),s=n(44),a=n(12),l=n(8);class u extends i.a{constructor(t){const e=Object.assign({},t);delete e.source,super(e),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.rendered=!1,t.render&&(this.render=t.render),t.map&&this.setMap(t.map),this.addChangeListener(o.a.SOURCE,this.handleSourcePropertyChange_);const n=t.source?t.source:null;this.setSource(n)}getLayersArray(t){return(t=t||[]).push(this),t}getLayerStatesArray(t){return(t=t||[]).push(this.getLayerState()),t}getSource(){return this.get(o.a.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const t=this.getSource();return t?t.getState():"undefined"}handleSourceChange_(){this.changed()}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Object(l.c)(this.sourceChangeKey_),this.sourceChangeKey_=null);const t=this.getSource();t&&(this.sourceChangeKey_=Object(l.a)(t,r.a.CHANGE,this.handleSourceChange_,this)),this.changed()}getFeatures(t){return this.renderer_?this.renderer_.getFeatures(t):new Promise(t=>t([]))}getData(t){return this.renderer_&&this.rendered?this.renderer_.getData(t):null}render(t,e){const n=this.getRenderer();if(n.prepareFrame(t))return this.rendered=!0,n.renderFrame(t,e)}unrender(){this.rendered=!1}setMapInternal(t){t||this.unrender(),this.set(o.a.MAP,t)}getMapInternal(){return this.get(o.a.MAP)}setMap(t){this.mapPrecomposeKey_&&(Object(l.c)(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(Object(l.c)(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=Object(l.a)(t,s.a.PRECOMPOSE,(function(t){const e=t.frameState.layerStatesArray,n=this.getLayerState(!1);Object(a.a)(!e.some((function(t){return t.layer===n.layer})),67),e.push(n)}),this),this.mapRenderKey_=Object(l.a)(this,r.a.CHANGE,t.render,t),this.changed())}setSource(t){this.set(o.a.SOURCE,t)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}function c(t,e){if(!t.visible)return!1;const n=e.resolution;if(n<t.minResolution||n>=t.maxResolution)return!1;const i=e.zoom;return i>t.minZoom&&i<=t.maxZoom}e.a=u},function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return c})),n.d(e,"c",(function(){return f}));var i=n(12),r=n(5);const o=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,s=/^([a-z]*)$|^hsla?\(.*\)$/i;function a(t){return"string"===typeof t?t:f(t)}function l(t){const e=document.createElement("div");if(e.style.color=t,""!==e.style.color){document.body.appendChild(e);const t=getComputedStyle(e).color;return document.body.removeChild(e),t}return""}const u=function(){const t={};let e=0;return function(n){let r;if(t.hasOwnProperty(n))r=t[n];else{if(e>=1024){let n=0;for(const i in t)0===(3&n++)&&(delete t[i],--e)}r=function(t){let e,n,r,a,u;s.exec(t)&&(t=l(t));if(o.exec(t)){const i=t.length-1;let o;o=i<=4?1:2;const s=4===i||8===i;e=parseInt(t.substr(1+0*o,o),16),n=parseInt(t.substr(1+1*o,o),16),r=parseInt(t.substr(1+2*o,o),16),a=s?parseInt(t.substr(1+3*o,o),16):255,1==o&&(e=(e<<4)+e,n=(n<<4)+n,r=(r<<4)+r,s&&(a=(a<<4)+a)),u=[e,n,r,a/255]}else t.startsWith("rgba(")?(u=t.slice(5,-1).split(",").map(Number),h(u)):t.startsWith("rgb(")?(u=t.slice(4,-1).split(",").map(Number),u.push(1),h(u)):Object(i.a)(!1,14);return u}(n),t[n]=r,++e}return r}}();function c(t){return Array.isArray(t)?t:u(t)}function h(t){return t[0]=Object(r.b)(t[0]+.5|0,0,255),t[1]=Object(r.b)(t[1]+.5|0,0,255),t[2]=Object(r.b)(t[2]+.5|0,0,255),t[3]=Object(r.b)(t[3],0,1),t}function f(t){let e=t[0];e!=(0|e)&&(e=e+.5|0);let n=t[1];n!=(0|n)&&(n=n+.5|0);let i=t[2];i!=(0|i)&&(i=i+.5|0);return"rgba("+e+","+n+","+i+","+(void 0===t[3]?1:Math.round(100*t[3])/100)+")"}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return o})),n.d(e,"e",(function(){return s})),n.d(e,"c",(function(){return l})),n.d(e,"d",(function(){return u}));var i=n(5);function r(t,e,n,r,o,s,a){const l=(n-e)/r;if(l<3){for(;e<n;e+=r)s[a++]=t[e],s[a++]=t[e+1];return a}const u=new Array(l);u[0]=1,u[l-1]=1;const c=[e,n-r];let h=0;for(;c.length>0;){const n=c.pop(),s=c.pop();let a=0;const l=t[s],f=t[s+1],d=t[n],g=t[n+1];for(let e=s+r;e<n;e+=r){const n=t[e],r=t[e+1],o=Object(i.h)(n,r,l,f,d,g);o>a&&(h=e,a=o)}a>o&&(u[(h-e)/r]=1,s+r<h&&c.push(s,h),h+r<n&&c.push(h,n))}for(let i=0;i<l;++i)u[i]&&(s[a++]=t[e+i*r],s[a++]=t[e+i*r+1]);return a}function o(t,e,n,i,o,s,a,l){for(let u=0,c=n.length;u<c;++u){const c=n[u];a=r(t,e,c,i,o,s,a),l.push(a),e=c}return a}function s(t,e){return e*Math.round(t/e)}function a(t,e,n,i,r,o,a){if(e==n)return a;let l,u,c=s(t[e],r),h=s(t[e+1],r);e+=i,o[a++]=c,o[a++]=h;do{if(l=s(t[e],r),u=s(t[e+1],r),(e+=i)==n)return o[a++]=l,o[a++]=u,a}while(l==c&&u==h);for(;e<n;){const n=s(t[e],r),f=s(t[e+1],r);if(e+=i,n==l&&f==u)continue;const d=l-c,g=u-h,p=n-c,v=f-h;d*v==g*p&&(d<0&&p<d||d==p||d>0&&p>d)&&(g<0&&v<g||g==v||g>0&&v>g)?(l=n,u=f):(o[a++]=l,o[a++]=u,c=l,h=u,l=n,u=f)}return o[a++]=l,o[a++]=u,a}function l(t,e,n,i,r,o,s,l){for(let u=0,c=n.length;u<c;++u){const c=n[u];s=a(t,e,c,i,r,o,s),l.push(s),e=c}return s}function u(t,e,n,i,r,o,s,a){for(let u=0,c=n.length;u<c;++u){const c=n[u],h=[];s=l(t,e,c,i,r,o,s,h),a.push(h),e=c[c.length-1]}return s}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return s})),n.d(e,"d",(function(){return a}));var i=n(2);function r(t,e,n,r,s){return!Object(i.s)(s,(function(i){return!o(t,e,n,r,i[0],i[1])}))}function o(t,e,n,i,r,o){let s=0,a=t[n-i],l=t[n-i+1];for(;e<n;e+=i){const n=t[e],i=t[e+1];l<=o?i>o&&(n-a)*(o-l)-(r-a)*(i-l)>0&&s++:i<=o&&(n-a)*(o-l)-(r-a)*(i-l)<0&&s--,a=n,l=i}return 0!==s}function s(t,e,n,i,r,s){if(0===n.length)return!1;if(!o(t,e,n[0],i,r,s))return!1;for(let a=1,l=n.length;a<l;++a)if(o(t,n[a-1],n[a],i,r,s))return!1;return!0}function a(t,e,n,i,r,o){if(0===n.length)return!1;for(let a=0,l=n.length;a<l;++a){const l=n[a];if(s(t,e,l,i,r,o))return!0;e=l[l.length-1]}return!1}},function(t,e,n){"use strict";e.a={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"}},function(t,e,n){"use strict";e.a={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"}},function(t,e,n){"use strict";n.d(e,"a",(function(){return d})),n.d(e,"b",(function(){return v})),n.d(e,"c",(function(){return y}));var i=n(1),r=n(71),o=n(7),s=n(4);function a(){return(a=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function l(t,e){if(null==t)return{};var n,i,r={},o=Object.keys(t);for(i=0;i<o.length;i++)n=o[i],e.indexOf(n)>=0||(r[n]=t[n]);return r}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const u=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],c=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"];try{window.__reactRouterVersion="6"}catch(x){}const h=i.createContext({isTransitioning:!1});new Map;const f=i.startTransition;r.flushSync,i.useId;function d(t){let{basename:e,children:n,future:r,window:a}=t,l=i.useRef();null==l.current&&(l.current=Object(s.j)({window:a,v5Compat:!0}));let u=l.current,[c,h]=i.useState({action:u.action,location:u.location}),{v7_startTransition:d}=r||{},g=i.useCallback(t=>{d&&f?f(()=>h(t)):h(t)},[h,d]);return i.useLayoutEffect(()=>u.listen(g),[u,g]),i.useEffect(()=>Object(o.h)(r),[r]),i.createElement(o.b,{basename:e,children:n,location:c.location,navigationType:c.action,navigator:u,future:r})}const g="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,p=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,v=i.forwardRef((function(t,e){let n,{onClick:r,relative:c,reloadDocument:h,replace:f,state:d,target:v,to:y,preventScrollReset:m,viewTransition:_}=t,b=l(t,u),{basename:E}=i.useContext(o.f),w=!1;if("string"===typeof y&&p.test(y)&&(n=y,g))try{let t=new URL(window.location.href),e=y.startsWith("//")?new URL(t.protocol+y):new URL(y),n=Object(s.u)(e.pathname,E);e.origin===t.origin&&null!=n?y=n+e.search+e.hash:w=!0}catch(x){}let k=Object(o.m)(y,{relative:c}),S=function(t,e){let{target:n,replace:r,state:a,preventScrollReset:l,relative:u,viewTransition:c}=void 0===e?{}:e,h=Object(o.p)(),f=Object(o.n)(),d=Object(o.s)(t,{relative:u});return i.useCallback(e=>{if(function(t,e){return 0===t.button&&(!e||"_self"===e)&&!function(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}(t)}(e,n)){e.preventDefault();let n=void 0!==r?r:Object(s.m)(f)===Object(s.m)(d);h(t,{replace:n,state:a,preventScrollReset:l,relative:u,viewTransition:c})}},[f,h,d,r,a,n,t,l,u,c])}(y,{replace:f,state:d,target:v,preventScrollReset:m,relative:c,viewTransition:_});return i.createElement("a",a({},b,{href:n||k,onClick:w||h?r:function(t){r&&r(t),t.defaultPrevented||S(t)},ref:e,target:v}))}));const y=i.forwardRef((function(t,e){let{"aria-current":n="page",caseSensitive:r=!1,className:u="",end:f=!1,style:d,to:g,viewTransition:p,children:y}=t,_=l(t,c),x=Object(o.s)(g,{relative:_.relative}),E=Object(o.n)(),w=i.useContext(o.e),{navigator:k,basename:S}=i.useContext(o.f),C=null!=w&&function(t,e){void 0===e&&(e={});let n=i.useContext(h);null==n&&Object(s.i)(!1);let{basename:r}=b(m.useViewTransitionState),a=Object(o.s)(t,{relative:e.relative});if(!n.isTransitioning)return!1;let l=Object(s.u)(n.currentLocation.pathname,r)||n.currentLocation.pathname,u=Object(s.u)(n.nextLocation.pathname,r)||n.nextLocation.pathname;return null!=Object(s.q)(a.pathname,u)||null!=Object(s.q)(a.pathname,l)}(x)&&!0===p,O=k.encodeLocation?k.encodeLocation(x).pathname:x.pathname,I=E.pathname,M=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;r||(I=I.toLowerCase(),M=M?M.toLowerCase():null,O=O.toLowerCase()),M&&S&&(M=Object(s.u)(M,S)||M);const R="/"!==O&&O.endsWith("/")?O.length-1:O.length;let T,P=I===O||!f&&I.startsWith(O)&&"/"===I.charAt(R),L=null!=M&&(M===O||!f&&M.startsWith(O)&&"/"===M.charAt(O.length)),N={isActive:P,isPending:L,isTransitioning:C},A=P?n:void 0;T="function"===typeof u?u(N):[u,P?"active":null,L?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let j="function"===typeof d?d(N):d;return i.createElement(v,a({},_,{"aria-current":A,className:T,ref:e,style:j,to:g,viewTransition:p}),"function"===typeof y?y(N):y)}));var m,_;function b(t){let e=i.useContext(o.d);return e||Object(s.i)(!1),e}(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(m||(m={})),function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"}(_||(_={}))},function(t,e,n){"use strict";e.a={PROPERTYCHANGE:"propertychange"}},function(t,e,n){"use strict";var i=n(60),r=n(27),o=n(16),s=n(21);class a extends i.a{constructor(t){super(),this.eventTarget_=t,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(t,e){if(!t||!e)return;const n=this.listeners_||(this.listeners_={}),i=n[t]||(n[t]=[]);i.includes(e)||i.push(e)}dispatchEvent(t){const e="string"===typeof t,n=e?t:t.type,i=this.listeners_&&this.listeners_[n];if(!i)return;const s=e?new r.a(t):t;s.target||(s.target=this.eventTarget_||this);const a=this.dispatching_||(this.dispatching_={}),l=this.pendingRemovals_||(this.pendingRemovals_={});let u;n in a||(a[n]=0,l[n]=0),++a[n];for(let r=0,o=i.length;r<o;++r)if(u="handleEvent"in i[r]?i[r].handleEvent(s):i[r].call(this,s),!1===u||s.propagationStopped){u=!1;break}if(0===--a[n]){let t=l[n];for(delete l[n];t--;)this.removeEventListener(n,o.c);delete a[n]}return u}disposeInternal(){this.listeners_&&Object(s.a)(this.listeners_)}getListeners(t){return this.listeners_&&this.listeners_[t]||void 0}hasListener(t){return!!this.listeners_&&(t?t in this.listeners_:Object.keys(this.listeners_).length>0)}removeEventListener(t,e){const n=this.listeners_&&this.listeners_[t];if(n){const i=n.indexOf(e);-1!==i&&(this.pendingRemovals_&&t in this.pendingRemovals_?(n[i]=o.c,++this.pendingRemovals_[t]):(n.splice(i,1),0===n.length&&delete this.listeners_[t]))}}}e.a=a},function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return l})),n.d(e,"d",(function(){return u})),n.d(e,"e",(function(){return c}));var i=n(2),r=n(78),o=n(43);function s(t,e,n,o,s){const a=Object(i.r)(Object(i.j)(),t,e,n,o);return!!Object(i.F)(s,a)&&(!!Object(i.g)(s,a)||(a[0]>=s[0]&&a[2]<=s[2]||(a[1]>=s[1]&&a[3]<=s[3]||Object(r.a)(t,e,n,o,(function(t,e){return Object(i.G)(s,t,e)})))))}function a(t,e,n,i,r){for(let o=0,a=n.length;o<a;++o){if(s(t,e,n[o],i,r))return!0;e=n[o]}return!1}function l(t,e,n,i,r){return!!s(t,e,n,i,r)||(!!Object(o.b)(t,e,n,i,r[0],r[1])||(!!Object(o.b)(t,e,n,i,r[0],r[3])||(!!Object(o.b)(t,e,n,i,r[2],r[1])||!!Object(o.b)(t,e,n,i,r[2],r[3]))))}function u(t,e,n,i,r){if(!l(t,e,n[0],i,r))return!1;if(1===n.length)return!0;for(let a=1,l=n.length;a<l;++a)if(Object(o.a)(t,n[a-1],n[a],i,r)&&!s(t,n[a-1],n[a],i,r))return!1;return!0}function c(t,e,n,i,r){for(let o=0,s=n.length;o<s;++o){const s=n[o];if(u(t,e,s,i,r))return!0;e=s[s.length-1]}return!1}},function(t,e,n){"use strict";n.d(e,"b",(function(){return _}));var i=n(34),r=n(37),o=n(2),s=n(38),a=n(42),l=n(26),u=n(61);class c extends i.a{constructor(t,e){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===e||Array.isArray(t[0])?this.setCoordinates(t,e):this.setFlatCoordinates(e,t)}clone(){return new c(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,e,n,i){return i<Object(o.e)(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(r.e)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(r.d)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,n,i))}getArea(){return Object(u.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return Object(l.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(t){const e=[];return e.length=Object(a.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new c(e,"XY")}getType(){return"LinearRing"}intersectsExtent(t){return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Object(s.b)(this.flatCoordinates,0,t,this.stride),this.changed()}}var h=c,f=n(57),d=n(13),g=n(80),p=n(49),v=n(55),y=n(43);n(5),n(65);class m extends i.a{constructor(t,e,n){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,void 0!==e&&n?(this.setFlatCoordinates(e,t),this.ends_=n):this.setCoordinates(t,e)}appendLinearRing(t){this.flatCoordinates?Object(d.c)(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new m(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,n,i){return i<Object(o.e)(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(r.a)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(r.b)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,n,i))}containsXY(t,e){return Object(y.c)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)}getArea(){return Object(u.b)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(t){let e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),Object(v.c)(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,Object(l.b)(e,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const t=Object(o.w)(this.getExtent());this.flatInteriorPoint_=Object(g.a)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new f.a(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(t){return t<0||this.ends_.length<=t?null:new h(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLinearRings(){const t=this.layout,e=this.flatCoordinates,n=this.ends_,i=[];let r=0;for(let o=0,s=n.length;o<s;++o){const s=n[o],a=new h(e.slice(r,s),t);i.push(a),r=s}return i}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;Object(v.a)(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Object(v.c)(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],n=[];return e.length=Object(a.c)(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,n),new m(e,"XY",n)}getType(){return"Polygon"}intersectsExtent(t){return Object(p.d)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=Object(s.c)(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===n.length?0:n[n.length-1],this.changed()}}e.a=m;function _(t){const e=t[0],n=t[1],i=t[2],r=t[3],o=[e,n,e,r,i,r,i,n,e,n];return new m(o,"XY",[o.length])}},function(t,e,n){"use strict";n.d(e,"c",(function(){return r})),n.d(e,"d",(function(){return o})),n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return a}));var i=n(5);function r(t){return void 0!==t?0:void 0}function o(t){return void 0!==t?t:void 0}function s(t){const e=2*Math.PI/t;return function(t,n){return n?t:void 0!==t?t=Math.floor(t/e+.5)*e:void 0}}function a(t){return t=t||Object(i.k)(5),function(e,n){return n?e:void 0!==e?Math.abs(e)<=t?0:e:void 0}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));class i{constructor(t,e,n,i){this.minX=t,this.maxX=e,this.minY=n,this.maxY=i}contains(t){return this.containsXY(t[1],t[2])}containsTileRange(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY}containsXY(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY}equals(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY}extend(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY}}function r(t,e,n,r,o){return void 0!==o?(o.minX=t,o.maxX=e,o.minY=n,o.maxY=r,o):new i(t,e,n,r)}e.b=i},function(t,e,n){"use strict";n.d(e,"d",(function(){return l})),n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return h}));var i=n(67),r=n(54),o=n(59),s=n(12);class a{constructor(t){t=t||{},this.geometry_=null,this.geometryFunction_=f,void 0!==t.geometry&&this.setGeometry(t.geometry),this.fill_=void 0!==t.fill?t.fill:null,this.image_=void 0!==t.image?t.image:null,this.renderer_=void 0!==t.renderer?t.renderer:null,this.hitDetectionRenderer_=void 0!==t.hitDetectionRenderer?t.hitDetectionRenderer:null,this.stroke_=void 0!==t.stroke?t.stroke:null,this.text_=void 0!==t.text?t.text:null,this.zIndex_=t.zIndex}clone(){let t=this.getGeometry();return t&&"object"===typeof t&&(t=t.clone()),new a({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(t){this.renderer_=t}setHitDetectionRenderer(t){this.hitDetectionRenderer_=t}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(t){this.fill_=t}getImage(){return this.image_}setImage(t){this.image_=t}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t}getText(){return this.text_}setText(t){this.text_=t}getZIndex(){return this.zIndex_}setGeometry(t){"function"===typeof t?this.geometryFunction_=t:"string"===typeof t?this.geometryFunction_=function(e){return e.get(t)}:t?void 0!==t&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=f,this.geometry_=t}setZIndex(t){this.zIndex_=t}}function l(t){let e;if("function"===typeof t)e=t;else{let n;if(Array.isArray(t))n=t;else{Object(s.a)("function"===typeof t.getZIndex,41);n=[t]}e=function(){return n}}return e}let u=null;function c(t,e){if(!u){const t=new r.a({color:"rgba(255,255,255,0.4)"}),e=new o.a({color:"#3399CC",width:1.25});u=[new a({image:new i.a({fill:t,stroke:e,radius:5}),fill:t,stroke:e})]}return u}function h(){const t={},e=[255,255,255,1],n=[0,153,255,1];return t.Polygon=[new a({fill:new r.a({color:[255,255,255,.5]})})],t.MultiPolygon=t.Polygon,t.LineString=[new a({stroke:new o.a({color:e,width:5})}),new a({stroke:new o.a({color:n,width:3})})],t.MultiLineString=t.LineString,t.Circle=t.Polygon.concat(t.LineString),t.Point=[new a({image:new i.a({radius:6,fill:new r.a({color:n}),stroke:new o.a({color:e,width:1.5})}),zIndex:1/0})],t.MultiPoint=t.Point,t.GeometryCollection=t.Polygon.concat(t.LineString,t.Point),t}function f(t){return t.getGeometry()}e.c=a},function(t,e,n){"use strict";class i{constructor(t){t=t||{},this.color_=void 0!==t.color?t.color:null}clone(){const t=this.getColor();return new i({color:Array.isArray(t)?t.slice():t||void 0})}getColor(){return this.color_}setColor(t){this.color_=t}}e.a=i},function(t,e,n){"use strict";function i(t,e,n,i){for(;e<n-i;){for(let r=0;r<i;++r){const o=t[e+r];t[e+r]=t[n-i+r],t[n-i+r]=o}e+=i,n-=i}}function r(t,e,n,i){let r=0,o=t[n-i],s=t[n-i+1];for(;e<n;e+=i){const n=t[e],i=t[e+1];r+=(n-o)*(i+s),o=n,s=i}return 0===r?void 0:r>0}function o(t,e,n,i,o){o=void 0!==o&&o;for(let s=0,a=n.length;s<a;++s){const a=n[s],l=r(t,e,a,i);if(0===s){if(o&&l||!o&&!l)return!1}else if(o&&!l||!o&&l)return!1;e=a}return!0}function s(t,e,n,i,r){for(let s=0,a=n.length;s<a;++s){const a=n[s];if(!o(t,e,a,i,r))return!1;a.length&&(e=a[a.length-1])}return!0}function a(t,e,n,o,s){s=void 0!==s&&s;for(let a=0,l=n.length;a<l;++a){const l=n[a],u=r(t,e,l,o);(0===a?s&&u||!s&&!u:s&&!u||!s&&u)&&i(t,e,l,o),e=l}return e}function l(t,e,n,i,r){for(let o=0,s=n.length;o<s;++o)e=a(t,e,n[o],i,r);return e}n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return a})),n.d(e,"d",(function(){return l}))},function(t,e,n){"use strict";var i=n(24),r=n(30),o={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},s=n(58),a=n(6),l=n(16),u=n(31),c=n(12),h=n(5);function f(t,e,n){return function(i,r,o,s,a){if(!i)return;if(!r&&!e)return i;const l=e?0:o[0]*r,u=e?0:o[1]*r,c=a?a[0]:0,f=a?a[1]:0;let d=t[0]+l/2+c,g=t[2]-l/2+c,p=t[1]+u/2+f,v=t[3]-u/2+f;d>g&&(d=(g+d)/2,g=d),p>v&&(p=(v+p)/2,v=p);let y=Object(h.b)(i[0],d,g),m=Object(h.b)(i[1],p,v);if(s&&n&&r){const t=30*r;y+=-t*Math.log(1+Math.max(0,d-i[0])/t)+t*Math.log(1+Math.max(0,i[0]-g)/t),m+=-t*Math.log(1+Math.max(0,p-i[1])/t)+t*Math.log(1+Math.max(0,i[1]-v)/t)}return[y,m]}}function d(t){return t}var g=n(2),p=n(13);function v(t,e,n,i){const r=Object(g.E)(e)/n[0],o=Object(g.z)(e)/n[1];return i?Math.min(t,Math.max(r,o)):Math.min(t,Math.min(r,o))}function y(t,e,n){let i=Math.min(t,e);return i*=Math.log(1+50*Math.max(0,t/e-1))/50+1,n&&(i=Math.max(i,n),i/=Math.log(1+50*Math.max(0,n/t-1))/50+1),Object(h.b)(i,n/2,2*e)}function m(t,e,n,i,r){return n=void 0===n||n,function(o,s,a,l){if(void 0!==o){const s=i?v(t,i,a,r):t;return n&&l?y(o,s,e):Object(h.b)(o,e,s)}}}var _=n(51),b=n(35),x=n(50);class E extends i.a{constructor(t){super(),this.on,this.once,this.un,t=Object.assign({},t),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=Object(a.b)(t.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,t.projection&&Object(a.c)(),t.center&&(t.center=Object(a.e)(t.center,this.projection_)),t.extent&&(t.extent=Object(a.f)(t.extent,this.projection_)),this.applyOptions_(t)}applyOptions_(t){const e=Object.assign({},t);for(const s in o)delete e[s];this.setProperties(e,!0);const n=function(t){let e,n,i;let r=void 0!==t.minZoom?t.minZoom:0,o=void 0!==t.maxZoom?t.maxZoom:28;const l=void 0!==t.zoomFactor?t.zoomFactor:2,u=void 0!==t.multiWorld&&t.multiWorld,c=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint,f=void 0!==t.showFullExtent&&t.showFullExtent,d=Object(a.b)(t.projection,"EPSG:3857"),_=d.getExtent();let b=t.constrainOnlyCenter,x=t.extent;u||x||!d.isGlobal()||(b=!1,x=_);if(void 0!==t.resolutions){const s=t.resolutions;n=s[r],i=void 0!==s[o]?s[o]:s[s.length-1],e=t.constrainResolution?function(t,e,n,i){return e=void 0===e||e,function(r,o,s,a){if(void 0!==r){const l=t[0],u=t[t.length-1],c=n?v(l,n,s,i):l;if(a)return e?y(r,c,u):Object(h.b)(r,u,c);const f=Math.min(c,r),d=Math.floor(Object(p.e)(t,f,o));return t[d]>c&&d<t.length-1?t[d+1]:t[d]}}}(s,c,!b&&x,f):m(n,i,c,!b&&x,f)}else{const u=(_?Math.max(Object(g.E)(_),Object(g.z)(_)):360*a.a.degrees/d.getMetersPerUnit())/s.b/Math.pow(2,0),p=u/Math.pow(2,28);n=t.maxResolution,void 0!==n?r=0:n=u/Math.pow(l,r),i=t.minResolution,void 0===i&&(i=void 0!==t.maxZoom?void 0!==t.maxResolution?n/Math.pow(l,o):u/Math.pow(l,o):p),o=r+Math.floor(Math.log(n/i)/Math.log(l)),i=n/Math.pow(l,o-r),e=t.constrainResolution?function(t,e,n,i,r,o){return i=void 0===i||i,n=void 0!==n?n:0,function(s,a,l,u){if(void 0!==s){const c=r?v(e,r,l,o):e;if(u)return i?y(s,c,n):Object(h.b)(s,n,c);const f=1e-9,d=Math.ceil(Math.log(e/c)/Math.log(t)-f),g=-a*(.5-f)+.5,p=Math.min(c,s),m=Math.floor(Math.log(e/p)/Math.log(t)+g),_=Math.max(d,m),b=e/Math.pow(t,_);return Object(h.b)(b,n,c)}}}(l,n,i,c,!b&&x,f):m(n,i,c,!b&&x,f)}return{constraint:e,maxResolution:n,minResolution:i,minZoom:r,zoomFactor:l}}(t);this.maxResolution_=n.maxResolution,this.minResolution_=n.minResolution,this.zoomFactor_=n.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=n.minZoom;const i=function(t){if(void 0!==t.extent){const e=void 0===t.smoothExtentConstraint||t.smoothExtentConstraint;return f(t.extent,t.constrainOnlyCenter,e)}const e=Object(a.b)(t.projection,"EPSG:3857");if(!0!==t.multiWorld&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,f(t,!1,!1)}return d}(t),r=n.constraint,l=function(t){if(void 0===t.enableRotation||t.enableRotation){const e=t.constrainRotation;return void 0===e||!0===e?Object(_.b)():!1===e?_.d:"number"===typeof e?Object(_.a)(e):_.d}return _.c}(t);this.constraints_={center:i,resolution:r,rotation:l},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom)}get padding(){return this.padding_}set padding(t){let e=this.padding_;this.padding_=t;const n=this.getCenter();if(n){const i=t||[0,0,0,0];e=e||[0,0,0,0];const r=this.getResolution(),o=r/2*(i[3]-e[3]+e[1]-i[1]),s=r/2*(i[0]-e[0]+e[2]-i[2]);this.setCenterInternal([n[0]+o,n[1]-s])}}getUpdatedOptions_(t){const e=this.getProperties();return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),Object.assign({},e,t)}animate(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const e=new Array(arguments.length);for(let n=0;n<e.length;++n){let t=arguments[n];t.center&&(t=Object.assign({},t),t.center=Object(a.e)(t.center,this.getProjection())),t.anchor&&(t=Object.assign({},t),t.anchor=Object(a.e)(t.anchor,this.getProjection())),e[n]=t}this.animateInternal.apply(this,e)}animateInternal(t){let e,n=arguments.length;n>1&&"function"===typeof arguments[n-1]&&(e=arguments[n-1],--n);let i=0;for(;i<n&&!this.isDef();++i){const t=arguments[i];t.center&&this.setCenterInternal(t.center),void 0!==t.zoom?this.setZoom(t.zoom):t.resolution&&this.setResolution(t.resolution),void 0!==t.rotation&&this.setRotation(t.rotation)}if(i===n)return void(e&&w(e,!0));let o=Date.now(),s=this.targetCenter_.slice(),a=this.targetResolution_,l=this.targetRotation_;const u=[];for(;i<n;++i){const t=arguments[i],n={start:o,complete:!1,anchor:t.anchor,duration:void 0!==t.duration?t.duration:1e3,easing:t.easing||b.c,callback:e};if(t.center&&(n.sourceCenter=s,n.targetCenter=t.center.slice(),s=n.targetCenter),void 0!==t.zoom?(n.sourceResolution=a,n.targetResolution=this.getResolutionForZoom(t.zoom),a=n.targetResolution):t.resolution&&(n.sourceResolution=a,n.targetResolution=t.resolution,a=n.targetResolution),void 0!==t.rotation){n.sourceRotation=l;const e=Object(h.e)(t.rotation-l+Math.PI,2*Math.PI)-Math.PI;n.targetRotation=l+e,l=n.targetRotation}k(n)?n.complete=!0:o+=n.duration,u.push(n)}this.animations_.push(u),this.setHint(r.a.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[r.a.ANIMATING]>0}getInteracting(){return this.hints_[r.a.INTERACTING]>0}cancelAnimations(){let t;this.setHint(r.a.ANIMATING,-this.hints_[r.a.ANIMATING]);for(let e=0,n=this.animations_.length;e<n;++e){const n=this.animations_[e];if(n[0].callback&&w(n[0].callback,!1),!t)for(let e=0,i=n.length;e<i;++e){const i=n[e];if(!i.complete){t=i.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const t=Date.now();let e=!1;for(let n=this.animations_.length-1;n>=0;--n){const i=this.animations_[n];let o=!0;for(let n=0,r=i.length;n<r;++n){const r=i[n];if(r.complete)continue;const s=t-r.start;let a=r.duration>0?s/r.duration:1;a>=1?(r.complete=!0,a=1):o=!1;const l=r.easing(a);if(r.sourceCenter){const t=r.sourceCenter[0],e=r.sourceCenter[1],n=r.targetCenter[0],i=r.targetCenter[1];this.nextCenter_=r.targetCenter;const o=t+l*(n-t),s=e+l*(i-e);this.targetCenter_=[o,s]}if(r.sourceResolution&&r.targetResolution){const t=1===l?r.targetResolution:r.sourceResolution+l*(r.targetResolution-r.sourceResolution);if(r.anchor){const e=this.getViewportSize_(this.getRotation()),n=this.constraints_.resolution(t,0,e,!0);this.targetCenter_=this.calculateCenterZoom(n,r.anchor)}this.nextResolution_=r.targetResolution,this.targetResolution_=t,this.applyTargetState_(!0)}if(void 0!==r.sourceRotation&&void 0!==r.targetRotation){const t=1===l?Object(h.e)(r.targetRotation+Math.PI,2*Math.PI)-Math.PI:r.sourceRotation+l*(r.targetRotation-r.sourceRotation);if(r.anchor){const e=this.constraints_.rotation(t,!0);this.targetCenter_=this.calculateCenterRotate(e,r.anchor)}this.nextRotation_=r.targetRotation,this.targetRotation_=t}if(this.applyTargetState_(!0),e=!0,!r.complete)break}if(o){this.animations_[n]=null,this.setHint(r.a.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const t=i[0].callback;t&&w(t,!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(t,e){let n;const i=this.getCenterInternal();return void 0!==i&&(n=[i[0]-e[0],i[1]-e[1]],Object(u.d)(n,t-this.getRotation()),Object(u.a)(n,e)),n}calculateCenterZoom(t,e){let n;const i=this.getCenterInternal(),r=this.getResolution();if(void 0!==i&&void 0!==r){n=[e[0]-t*(e[0]-i[0])/r,e[1]-t*(e[1]-i[1])/r]}return n}getViewportSize_(t){const e=this.viewportSize_;if(t){const n=e[0],i=e[1];return[Math.abs(n*Math.cos(t))+Math.abs(i*Math.sin(t)),Math.abs(n*Math.sin(t))+Math.abs(i*Math.cos(t))]}return e}setViewportSize(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const t=this.getCenterInternal();return t?Object(a.n)(t,this.getProjection()):t}getCenterInternal(){return this.get(o.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}calculateExtent(t){const e=this.calculateExtentInternal(t);return Object(a.o)(e,this.getProjection())}calculateExtentInternal(t){t=t||this.getViewportSizeMinusPadding_();const e=this.getCenterInternal();Object(c.a)(e,1);const n=this.getResolution();Object(c.a)(void 0!==n,2);const i=this.getRotation();return Object(c.a)(void 0!==i,3),Object(g.y)(e,n,i,t)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}setConstrainResolution(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}getProjection(){return this.projection_}getResolution(){return this.get(o.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(t,e){return this.getResolutionForExtentInternal(Object(a.f)(t,this.getProjection()),e)}getResolutionForExtentInternal(t,e){e=e||this.getViewportSizeMinusPadding_();const n=Object(g.E)(t)/e[0],i=Object(g.z)(t)/e[1];return Math.max(n,i)}getResolutionForValueFunction(t){t=t||2;const e=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,i=Math.log(e/n)/Math.log(t);return function(n){return e/Math.pow(t,n*i)}}getRotation(){return this.get(o.ROTATION)}getValueForResolutionFunction(t){const e=Math.log(t||2),n=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,r=Math.log(n/i)/e;return function(t){return Math.log(n/t)/e/r}}getViewportSizeMinusPadding_(t){let e=this.getViewportSize_(t);const n=this.padding_;return n&&(e=[e[0]-n[1]-n[3],e[1]-n[0]-n[2]]),e}getState(){const t=this.getProjection(),e=this.getResolution(),n=this.getRotation();let i=this.getCenterInternal();const r=this.padding_;if(r){const t=this.getViewportSizeMinusPadding_();i=S(i,this.getViewportSize_(),[t[0]/2+r[3],t[1]/2+r[0]],e,n)}return{center:i.slice(0),projection:void 0!==t?t:null,resolution:e,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:n,zoom:this.getZoom()}}getZoom(){let t;const e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t}getZoomForResolution(t){let e,n,i=this.minZoom_||0;if(this.resolutions_){const r=Object(p.e)(this.resolutions_,t,1);i=r,e=this.resolutions_[r],n=r==this.resolutions_.length-1?2:e/this.resolutions_[r+1]}else e=this.maxResolution_,n=this.zoomFactor_;return i+Math.log(e/t)/Math.log(n)}getResolutionForZoom(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const e=Object(h.b)(Math.floor(t),0,this.resolutions_.length-2),n=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(n,Object(h.b)(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}fit(t,e){let n;if(Object(c.a)(Array.isArray(t)||"function"===typeof t.getSimplifiedGeometry,24),Array.isArray(t)){Object(c.a)(!Object(g.H)(t),25);const e=Object(a.f)(t,this.getProjection());n=Object(x.b)(e)}else if("Circle"===t.getType()){const e=Object(a.f)(t.getExtent(),this.getProjection());n=Object(x.b)(e),n.rotate(this.getRotation(),Object(g.w)(e))}else{const e=Object(a.l)();n=e?t.clone().transform(e,this.getProjection()):t}this.fitInternal(n,e)}rotatedExtentForGeometry(t){const e=this.getRotation(),n=Math.cos(e),i=Math.sin(-e),r=t.getFlatCoordinates(),o=t.getStride();let s=1/0,a=1/0,l=-1/0,u=-1/0;for(let c=0,h=r.length;c<h;c+=o){const t=r[c]*n-r[c+1]*i,e=r[c]*i+r[c+1]*n;s=Math.min(s,t),a=Math.min(a,e),l=Math.max(l,t),u=Math.max(u,e)}return[s,a,l,u]}fitInternal(t,e){let n=(e=e||{}).size;n||(n=this.getViewportSizeMinusPadding_());const i=void 0!==e.padding?e.padding:[0,0,0,0],r=void 0!==e.nearest&&e.nearest;let o;o=void 0!==e.minResolution?e.minResolution:void 0!==e.maxZoom?this.getResolutionForZoom(e.maxZoom):0;const s=this.rotatedExtentForGeometry(t);let a=this.getResolutionForExtentInternal(s,[n[0]-i[1]-i[3],n[1]-i[0]-i[2]]);a=isNaN(a)?o:Math.max(a,o),a=this.getConstrainedResolution(a,r?0:1);const u=this.getRotation(),c=Math.sin(u),h=Math.cos(u),f=Object(g.w)(s);f[0]+=(i[1]-i[3])/2*a,f[1]+=(i[0]-i[2])/2*a;const d=f[0]*h-f[1]*c,p=f[1]*h+f[0]*c,v=this.getConstrainedCenter([d,p],a),y=e.callback?e.callback:l.c;void 0!==e.duration?this.animateInternal({resolution:a,center:v,duration:e.duration,easing:e.easing},y):(this.targetResolution_=a,this.targetCenter_=v,this.applyTargetState_(!1,!0),w(y,!0))}centerOn(t,e,n){this.centerOnInternal(Object(a.e)(t,this.getProjection()),e,n)}centerOnInternal(t,e,n){this.setCenterInternal(S(t,e,n,this.getResolution(),this.getRotation()))}calculateCenterShift(t,e,n,i){let r;const o=this.padding_;if(o&&t){const s=this.getViewportSizeMinusPadding_(-n),a=S(t,i,[s[0]/2+o[3],s[1]/2+o[0]],e,n);r=[t[0]-a[0],t[1]-a[1]]}return r}isDef(){return!!this.getCenterInternal()&&void 0!==this.getResolution()}adjustCenter(t){const e=Object(a.n)(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])}adjustCenterInternal(t){const e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])}adjustResolution(t,e){e=e&&Object(a.e)(e,this.getProjection()),this.adjustResolutionInternal(t,e)}adjustResolutionInternal(t,e){const n=this.getAnimating()||this.getInteracting(),i=this.getViewportSize_(this.getRotation()),r=this.constraints_.resolution(this.targetResolution_*t,0,i,n);e&&(this.targetCenter_=this.calculateCenterZoom(r,e)),this.targetResolution_*=t,this.applyTargetState_()}adjustZoom(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)}adjustRotation(t,e){e&&(e=Object(a.e)(e,this.getProjection())),this.adjustRotationInternal(t,e)}adjustRotationInternal(t,e){const n=this.getAnimating()||this.getInteracting(),i=this.constraints_.rotation(this.targetRotation_+t,n);e&&(this.targetCenter_=this.calculateCenterRotate(i,e)),this.targetRotation_+=t,this.applyTargetState_()}setCenter(t){this.setCenterInternal(t?Object(a.e)(t,this.getProjection()):t)}setCenterInternal(t){this.targetCenter_=t,this.applyTargetState_()}setHint(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]}setResolution(t){this.targetResolution_=t,this.applyTargetState_()}setRotation(t){this.targetRotation_=t,this.applyTargetState_()}setZoom(t){this.setResolution(this.getResolutionForZoom(t))}applyTargetState_(t,e){const n=this.getAnimating()||this.getInteracting()||e,i=this.constraints_.rotation(this.targetRotation_,n),r=this.getViewportSize_(i),s=this.constraints_.resolution(this.targetResolution_,0,r,n),a=this.constraints_.center(this.targetCenter_,s,r,n,this.calculateCenterShift(this.targetCenter_,s,i,r));this.get(o.ROTATION)!==i&&this.set(o.ROTATION,i),this.get(o.RESOLUTION)!==s&&(this.set(o.RESOLUTION,s),this.set("zoom",this.getZoom(),!0)),a&&this.get(o.CENTER)&&Object(u.b)(this.get(o.CENTER),a)||this.set(o.CENTER,a),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(t,e,n){t=void 0!==t?t:200;const i=e||0,r=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(r),s=this.constraints_.resolution(this.targetResolution_,i,o),a=this.constraints_.center(this.targetCenter_,s,o,!1,this.calculateCenterShift(this.targetCenter_,s,r,o));if(0===t&&!this.cancelAnchor_)return this.targetResolution_=s,this.targetRotation_=r,this.targetCenter_=a,void this.applyTargetState_();n=n||(0===t?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,this.getResolution()===s&&this.getRotation()===r&&this.getCenterInternal()&&Object(u.b)(this.getCenterInternal(),a)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:r,center:a,resolution:s,duration:t,easing:b.b,anchor:n}))}beginInteraction(){this.resolveConstraints(0),this.setHint(r.a.INTERACTING,1)}endInteraction(t,e,n){n=n&&Object(a.e)(n,this.getProjection()),this.endInteractionInternal(t,e,n)}endInteractionInternal(t,e,n){this.setHint(r.a.INTERACTING,-1),this.resolveConstraints(t,e,n)}getConstrainedCenter(t,e){const n=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),n)}getConstrainedZoom(t,e){const n=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(n,e))}getConstrainedResolution(t,e){e=e||0;const n=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,e,n)}}function w(t,e){setTimeout((function(){t(e)}),0)}function k(t){return!(t.sourceCenter&&t.targetCenter&&!Object(u.b)(t.sourceCenter,t.targetCenter))&&(t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation)}function S(t,e,n,i,r){const o=Math.cos(-r);let s=Math.sin(-r),a=t[0]*o-t[1]*s,l=t[1]*o+t[0]*s;a+=(e[0]/2-n[0])*i,l+=(n[1]-e[1]/2)*i,s=-s;return[a*o-l*s,l*o+a*s]}e.a=E},function(t,e,n){"use strict";var i=n(34),r=n(2),o=n(38),s=n(5);class a extends i.a{constructor(t,e){super(),this.setCoordinates(t,e)}clone(){const t=new a(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,n,i){const r=this.flatCoordinates,o=Object(s.g)(t,e,r[0],r[1]);if(o<i){const t=this.stride;for(let e=0;e<t;++e)n[e]=r[e];return n.length=t,o}return i}getCoordinates(){return this.flatCoordinates?this.flatCoordinates.slice():[]}computeExtent(t){return Object(r.m)(this.flatCoordinates,t)}getType(){return"Point"}intersectsExtent(t){return Object(r.h)(t,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Object(o.a)(this.flatCoordinates,0,t,this.stride),this.changed()}}e.a=a},function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return r}));const i=42,r=256},function(t,e,n){"use strict";class i{constructor(t){t=t||{},this.color_=void 0!==t.color?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=void 0!==t.lineDash?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}clone(){const t=this.getColor();return new i({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(t){this.color_=t}setLineCap(t){this.lineCap_=t}setLineDash(t){this.lineDash_=t}setLineDashOffset(t){this.lineDashOffset_=t}setLineJoin(t){this.lineJoin_=t}setMiterLimit(t){this.miterLimit_=t}setWidth(t){this.width_=t}}e.a=i},function(t,e,n){"use strict";e.a=class{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}},function(t,e,n){"use strict";function i(t,e,n,i){let r=0,o=t[n-i],s=t[n-i+1];for(;e<n;e+=i){const n=t[e],i=t[e+1];r+=s*n-o*i,o=n,s=i}return r/2}function r(t,e,n,r){let o=0;for(let s=0,a=n.length;s<a;++s){const a=n[s];o+=i(t,e,a,r),e=a}return o}function o(t,e,n,i){let o=0;for(let s=0,a=n.length;s<a;++s){const a=n[s];o+=r(t,e,a,i),e=a[a.length-1]}return o}n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return o}))},function(t,e,n){"use strict";var i=n(40),r=n(76),o=n.n(r),s=n(53),a=n(67),l=n(54),u=n(10),c=n(18),h=n(83),f=n(41),d=n(12),g=n(48),p=n(15),v=n(63),y=n(87);let m=null;class _ extends g.a{constructor(t,e,n,i,r,o){super(),this.hitDetectionImage_=null,this.image_=t,this.crossOrigin_=i,this.canvas_={},this.color_=o,this.unlisten_=null,this.imageState_=r,this.size_=n,this.src_=e,this.tainted_}initializeImage_(){this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(void 0===this.tainted_&&this.imageState_===c.a.LOADED){m||(m=Object(p.a)(1,1)),m.drawImage(this.image_,0,0);try{m.getImageData(0,0,1,1),this.tainted_=!1}catch(t){m=null,this.tainted_=!0}}return!0===this.tainted_}dispatchChangeEvent_(){this.dispatchEvent(u.a.CHANGE)}handleImageError_(){this.imageState_=c.a.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=c.a.LOADED,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()}getImage(t){return this.image_||this.initializeImage_(),this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_}getPixelRatio(t){return this.replaceColor_(t),this.canvas_[t]?t:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const t=this.size_[0],e=this.size_[1],n=Object(p.a)(t,e);n.fillRect(0,0,t,e),this.hitDetectionImage_=n.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===c.a.IDLE){this.image_||this.initializeImage_(),this.imageState_=c.a.LOADING;try{this.image_.src=this.src_}catch(t){this.handleImageError_()}this.unlisten_=Object(y.a)(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}}replaceColor_(t){if(!this.color_||this.canvas_[t]||this.imageState_!==c.a.LOADED)return;const e=this.image_,n=document.createElement("canvas");n.width=Math.ceil(e.width*t),n.height=Math.ceil(e.height*t);const i=n.getContext("2d");i.scale(t,t),i.drawImage(e,0,0),i.globalCompositeOperation="multiply",i.fillStyle=Object(f.b)(this.color_),i.fillRect(0,0,n.width/t,n.height/t),i.globalCompositeOperation="destination-in",i.drawImage(e,0,0),this.canvas_[t]=n}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}var b=n(3);class x extends h.a{constructor(t){const e=void 0!==(t=t||{}).opacity?t.opacity:1,n=void 0!==t.rotation?t.rotation:0,i=void 0!==t.scale?t.scale:1,r=void 0!==t.rotateWithView&&t.rotateWithView;super({opacity:e,rotation:n,scale:i,displacement:void 0!==t.displacement?t.displacement:[0,0],rotateWithView:r,declutterMode:t.declutterMode}),this.anchor_=void 0!==t.anchor?t.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==t.anchorOrigin?t.anchorOrigin:"top-left",this.anchorXUnits_=void 0!==t.anchorXUnits?t.anchorXUnits:"fraction",this.anchorYUnits_=void 0!==t.anchorYUnits?t.anchorYUnits:"fraction",this.crossOrigin_=void 0!==t.crossOrigin?t.crossOrigin:null;const o=void 0!==t.img?t.img:null;this.imgSize_=t.imgSize;let s=t.src;Object(d.a)(!(void 0!==s&&o),4),Object(d.a)(!o||o&&this.imgSize_,5),void 0!==s&&0!==s.length||!o||(s=o.src||Object(b.b)(o)),Object(d.a)(void 0!==s&&s.length>0,6);const a=void 0!==t.src?c.a.IDLE:c.a.LOADED;this.color_=void 0!==t.color?Object(f.a)(t.color):null,this.iconImage_=function(t,e,n,i,r,o){let s=v.a.get(e,i,o);return s||(s=new _(t,e,n,i,r,o),v.a.set(e,i,o,s)),s}(o,s,void 0!==this.imgSize_?this.imgSize_:null,this.crossOrigin_,a,this.color_),this.offset_=void 0!==t.offset?t.offset:[0,0],this.offsetOrigin_=void 0!==t.offsetOrigin?t.offsetOrigin:"top-left",this.origin_=null,this.size_=void 0!==t.size?t.size:null}clone(){const t=this.getScale();return new x({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,imgSize:this.imgSize_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:Array.isArray(t)?t.slice():t,size:null!==this.size_?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let t=this.normalizedAnchor_;if(!t){t=this.anchor_;const e=this.getSize();if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!e)return null;t=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(t[0]*=e[0]),"fraction"==this.anchorYUnits_&&(t[1]*=e[1])}if("top-left"!=this.anchorOrigin_){if(!e)return null;t===this.anchor_&&(t=this.anchor_.slice()),"top-right"!=this.anchorOrigin_&&"bottom-right"!=this.anchorOrigin_||(t[0]=-t[0]+e[0]),"bottom-left"!=this.anchorOrigin_&&"bottom-right"!=this.anchorOrigin_||(t[1]=-t[1]+e[1])}this.normalizedAnchor_=t}const e=this.getDisplacement(),n=this.getScaleArray();return[t[0]-e[0]/n[0],t[1]+e[1]/n[1]]}setAnchor(t){this.anchor_=t,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(t){return this.iconImage_.getImage(t)}getPixelRatio(t){return this.iconImage_.getPixelRatio(t)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let t=this.offset_;if("top-left"!=this.offsetOrigin_){const e=this.getSize(),n=this.iconImage_.getSize();if(!e||!n)return null;t=t.slice(),"top-right"!=this.offsetOrigin_&&"bottom-right"!=this.offsetOrigin_||(t[0]=n[0]-e[0]-t[0]),"bottom-left"!=this.offsetOrigin_&&"bottom-right"!=this.offsetOrigin_||(t[1]=n[1]-e[1]-t[1])}return this.origin_=t,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}listenImageChange(t){this.iconImage_.addEventListener(u.a.CHANGE,t)}load(){this.iconImage_.load()}unlistenImageChange(t){this.iconImage_.removeEventListener(u.a.CHANGE,t)}}var E=x,w=n(82),k=n(59),S=n(22);class C{constructor(t){t=t||{},this.font_=t.font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.scale_=t.scale,this.scaleArray_=Object(S.c)(void 0!==t.scale?t.scale:1),this.text_=t.text,this.textAlign_=t.textAlign,this.justify_=t.justify,this.textBaseline_=t.textBaseline,this.fill_=void 0!==t.fill?t.fill:new l.a({color:"#333"}),this.maxAngle_=void 0!==t.maxAngle?t.maxAngle:Math.PI/4,this.placement_=void 0!==t.placement?t.placement:"point",this.overflow_=!!t.overflow,this.stroke_=void 0!==t.stroke?t.stroke:null,this.offsetX_=void 0!==t.offsetX?t.offsetX:0,this.offsetY_=void 0!==t.offsetY?t.offsetY:0,this.backgroundFill_=t.backgroundFill?t.backgroundFill:null,this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null,this.padding_=void 0===t.padding?null:t.padding}clone(){const t=this.getScale();return new C({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(t){this.overflow_=t}setFont(t){this.font_=t}setMaxAngle(t){this.maxAngle_=t}setOffsetX(t){this.offsetX_=t}setOffsetY(t){this.offsetY_=t}setPlacement(t){this.placement_=t}setRotateWithView(t){this.rotateWithView_=t}setFill(t){this.fill_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=Object(S.c)(void 0!==t?t:1)}setStroke(t){this.stroke_=t}setText(t){this.text_=t}setTextAlign(t){this.textAlign_=t}setJustify(t){this.justify_=t}setTextBaseline(t){this.textBaseline_=t}setBackgroundFill(t){this.backgroundFill_=t}setBackgroundStroke(t){this.backgroundStroke_=t}setPadding(t){this.padding_=t}}var O=C;function I(t){return new s.c({fill:M(t,""),stroke:R(t,""),text:T(t),image:P(t)})}function M(t,e){const n=t[e+"fill-color"];if(n)return new l.a({color:n})}function R(t,e){const n=t[e+"stroke-width"],i=t[e+"stroke-color"];if(n||i)return new k.a({width:n,color:i,lineCap:t[e+"stroke-line-cap"],lineJoin:t[e+"stroke-line-join"],lineDash:t[e+"stroke-line-dash"],lineDashOffset:t[e+"stroke-line-dash-offset"],miterLimit:t[e+"stroke-miter-limit"]})}function T(t){const e=t["text-value"];if(!e)return;return new O({text:e,font:t["text-font"],maxAngle:t["text-max-angle"],offsetX:t["text-offset-x"],offsetY:t["text-offset-y"],overflow:t["text-overflow"],placement:t["text-placement"],scale:t["text-scale"],rotateWithView:t["text-rotate-with-view"],rotation:t["text-rotation"],textAlign:t["text-align"],justify:t["text-justify"],textBaseline:t["text-baseline"],padding:t["text-padding"],fill:M(t,"text-"),backgroundFill:M(t,"text-background-"),stroke:R(t,"text-"),backgroundStroke:R(t,"text-background-")})}function P(t){const e=t["icon-src"],n=t["icon-img"];if(e||n){return new E({src:e,img:n,imgSize:t["icon-img-size"],anchor:t["icon-anchor"],anchorOrigin:t["icon-anchor-origin"],anchorXUnits:t["icon-anchor-x-units"],anchorYUnits:t["icon-anchor-y-units"],color:t["icon-color"],crossOrigin:t["icon-cross-origin"],offset:t["icon-offset"],displacement:t["icon-displacement"],opacity:t["icon-opacity"],scale:t["icon-scale"],rotation:t["icon-rotation"],rotateWithView:t["icon-rotate-with-view"],size:t["icon-size"],declutterMode:t["icon-declutter-mode"]})}const i=t["shape-points"];if(i){const e="shape-";return new w.a({points:i,fill:M(t,e),stroke:R(t,e),radius:t["shape-radius"],radius1:t["shape-radius1"],radius2:t["shape-radius2"],angle:t["shape-angle"],displacement:t["shape-displacement"],rotation:t["shape-rotation"],rotateWithView:t["shape-rotate-with-view"],scale:t["shape-scale"],declutterMode:t["shape-declutter-mode"]})}const r=t["circle-radius"];if(r){const e="circle-";return new a.a({radius:r,fill:M(t,e),stroke:R(t,e),displacement:t["circle-displacement"],scale:t["circle-scale"],rotation:t["circle-rotation"],rotateWithView:t["circle-rotate-with-view"],declutterMode:t["circle-declutter-mode"]})}}const L="renderOrder";class N extends i.a{constructor(t){t=t||{};const e=Object.assign({},t);delete e.style,delete e.renderBuffer,delete e.updateWhileAnimating,delete e.updateWhileInteracting,super(e),this.declutter_=void 0!==t.declutter&&t.declutter,this.renderBuffer_=void 0!==t.renderBuffer?t.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(t.style),this.updateWhileAnimating_=void 0!==t.updateWhileAnimating&&t.updateWhileAnimating,this.updateWhileInteracting_=void 0!==t.updateWhileInteracting&&t.updateWhileInteracting}getDeclutter(){return this.declutter_}getFeatures(t){return super.getFeatures(t)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(L)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(t){t.declutterTree||(t.declutterTree=new o.a(9)),this.getRenderer().renderDeclutter(t)}setRenderOrder(t){this.set(L,t)}setStyle(t){let e;if(void 0===t)e=s.a;else if(null===t)e=null;else if("function"===typeof t)e=t;else if(t instanceof s.c)e=t;else if(Array.isArray(t)){const n=t.length,i=new Array(n);for(let e=0;e<n;++e){const n=t[e];n instanceof s.c?i[e]=n:i[e]=I(n)}e=i}else e=I(t);this.style_=e,this.styleFunction_=null===t?void 0:Object(s.d)(this.style_),this.changed()}}var A=N;const j={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},D=[j.FILL],F=[j.STROKE],z=[j.BEGIN_PATH],G=[j.CLOSE_PATH];var B=j,V=n(29);var Y=class{drawCustom(t,e,n,i){}drawGeometry(t){}setStyle(t){}drawCircle(t,e){}drawFeature(t,e){}drawGeometryCollection(t,e){}drawLineString(t,e){}drawMultiLineString(t,e){}drawMultiPoint(t,e){}drawMultiPolygon(t,e){}drawPoint(t,e){}drawPolygon(t,e){}drawText(t,e){}setFillStrokeStyle(t,e){}setImageStyle(t,e){}setTextStyle(t,e){}},q=n(39),U=n(2),X=n(9),W=n(13),H=n(26);var Z=class extends Y{constructor(t,e,n,i){super(),this.tolerance=t,this.maxExtent=e,this.pixelRatio=i,this.maxLineWidth=0,this.resolution=n,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(t){const e=this.pixelRatio;return 1==e?t:t.map((function(t){return t*e}))}appendFlatPointCoordinates(t,e){const n=this.getBufferedMaxExtent(),i=this.tmpCoordinate_,r=this.coordinates;let o=r.length;for(let s=0,a=t.length;s<a;s+=e)i[0]=t[s],i[1]=t[s+1],Object(U.f)(n,i)&&(r[o++]=i[0],r[o++]=i[1]);return o}appendFlatLineCoordinates(t,e,n,i,r,o){const s=this.coordinates;let a=s.length;const l=this.getBufferedMaxExtent();o&&(e+=i);let u=t[e],c=t[e+1];const h=this.tmpCoordinate_;let f,d,g,p=!0;for(f=e+i;f<n;f+=i)h[0]=t[f],h[1]=t[f+1],g=Object(U.i)(l,h),g!==d?(p&&(s[a++]=u,s[a++]=c,p=!1),s[a++]=h[0],s[a++]=h[1]):g===V.a.INTERSECTING?(s[a++]=h[0],s[a++]=h[1],p=!1):p=!0,u=h[0],c=h[1],d=g;return(r&&p||f===e+i)&&(s[a++]=u,s[a++]=c),a}drawCustomCoordinates_(t,e,n,i,r){for(let o=0,s=n.length;o<s;++o){const s=n[o],a=this.appendFlatLineCoordinates(t,e,s,i,!1,!1);r.push(a),e=s}return e}drawCustom(t,e,n,i){this.beginGeometry(t,e);const r=t.getType(),o=t.getStride(),s=this.coordinates.length;let a,l,u,c,h;switch(r){case"MultiPolygon":a=t.getOrientedFlatCoordinates(),c=[];const e=t.getEndss();h=0;for(let t=0,n=e.length;t<n;++t){const n=[];h=this.drawCustomCoordinates_(a,h,e[t],o,n),c.push(n)}this.instructions.push([B.CUSTOM,s,c,t,n,H.c]),this.hitDetectionInstructions.push([B.CUSTOM,s,c,t,i||n,H.c]);break;case"Polygon":case"MultiLineString":u=[],a="Polygon"==r?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),h=this.drawCustomCoordinates_(a,0,t.getEnds(),o,u),this.instructions.push([B.CUSTOM,s,u,t,n,H.b]),this.hitDetectionInstructions.push([B.CUSTOM,s,u,t,i||n,H.b]);break;case"LineString":case"Circle":a=t.getFlatCoordinates(),l=this.appendFlatLineCoordinates(a,0,a.length,o,!1,!1),this.instructions.push([B.CUSTOM,s,l,t,n,H.a]),this.hitDetectionInstructions.push([B.CUSTOM,s,l,t,i||n,H.a]);break;case"MultiPoint":a=t.getFlatCoordinates(),l=this.appendFlatPointCoordinates(a,o),l>s&&(this.instructions.push([B.CUSTOM,s,l,t,n,H.a]),this.hitDetectionInstructions.push([B.CUSTOM,s,l,t,i||n,H.a]));break;case"Point":a=t.getFlatCoordinates(),this.coordinates.push(a[0],a[1]),l=this.coordinates.length,this.instructions.push([B.CUSTOM,s,l,t,n]),this.hitDetectionInstructions.push([B.CUSTOM,s,l,t,i||n])}this.endGeometry(e)}beginGeometry(t,e){this.beginGeometryInstruction1_=[B.BEGIN_GEOMETRY,e,0,t],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[B.BEGIN_GEOMETRY,e,0,t],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const t=this.hitDetectionInstructions;let e;t.reverse();const n=t.length;let i,r,o=-1;for(e=0;e<n;++e)i=t[e],r=i[0],r==B.END_GEOMETRY?o=e:r==B.BEGIN_GEOMETRY&&(i[2]=e,Object(W.g)(this.hitDetectionInstructions,o,e),o=-1)}setFillStrokeStyle(t,e){const n=this.state;if(t){const e=t.getColor();n.fillStyle=Object(q.a)(e||X.b)}else n.fillStyle=void 0;if(e){const t=e.getColor();n.strokeStyle=Object(q.a)(t||X.k);const i=e.getLineCap();n.lineCap=void 0!==i?i:X.d;const r=e.getLineDash();n.lineDash=r?r.slice():X.e;const o=e.getLineDashOffset();n.lineDashOffset=o||X.f;const s=e.getLineJoin();n.lineJoin=void 0!==s?s:X.g;const a=e.getWidth();n.lineWidth=void 0!==a?a:X.h;const l=e.getMiterLimit();n.miterLimit=void 0!==l?l:X.i,n.lineWidth>this.maxLineWidth&&(this.maxLineWidth=n.lineWidth,this.bufferedMaxExtent_=null)}else n.strokeStyle=void 0,n.lineCap=void 0,n.lineDash=null,n.lineDashOffset=void 0,n.lineJoin=void 0,n.lineWidth=void 0,n.miterLimit=void 0}createFill(t){const e=t.fillStyle,n=[B.SET_FILL_STYLE,e];return"string"!==typeof e&&n.push(!0),n}applyStroke(t){this.instructions.push(this.createStroke(t))}createStroke(t){return[B.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]}updateFillStyle(t,e){const n=t.fillStyle;"string"===typeof n&&t.currentFillStyle==n||(void 0!==n&&this.instructions.push(e.call(this,t)),t.currentFillStyle=n)}updateStrokeStyle(t,e){const n=t.strokeStyle,i=t.lineCap,r=t.lineDash,o=t.lineDashOffset,s=t.lineJoin,a=t.lineWidth,l=t.miterLimit;(t.currentStrokeStyle!=n||t.currentLineCap!=i||r!=t.currentLineDash&&!Object(W.b)(t.currentLineDash,r)||t.currentLineDashOffset!=o||t.currentLineJoin!=s||t.currentLineWidth!=a||t.currentMiterLimit!=l)&&(void 0!==n&&e.call(this,t),t.currentStrokeStyle=n,t.currentLineCap=i,t.currentLineDash=r,t.currentLineDashOffset=o,t.currentLineJoin=s,t.currentLineWidth=a,t.currentMiterLimit=l)}endGeometry(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const e=[B.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=Object(U.d)(this.maxExtent),this.maxLineWidth>0)){const t=this.resolution*(this.maxLineWidth+1)/2;Object(U.c)(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}};var K=class extends Z{constructor(t,e,n,i){super(t,e,n,i),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(t,e){if(!this.image_)return;this.beginGeometry(t,e);const n=t.getFlatCoordinates(),i=t.getStride(),r=this.coordinates.length,o=this.appendFlatPointCoordinates(n,i);this.instructions.push([B.DRAW_IMAGE,r,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([B.DRAW_IMAGE,r,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}drawMultiPoint(t,e){if(!this.image_)return;this.beginGeometry(t,e);const n=t.getFlatCoordinates(),i=t.getStride(),r=this.coordinates.length,o=this.appendFlatPointCoordinates(n,i);this.instructions.push([B.DRAW_IMAGE,r,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([B.DRAW_IMAGE,r,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,e){const n=t.getAnchor(),i=t.getSize(),r=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=n[0],this.anchorY_=n[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=i[1],this.opacity_=t.getOpacity(),this.originX_=r[0],this.originY_=r[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=i[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}};var J=class extends Z{constructor(t,e,n,i){super(t,e,n,i)}drawFlatCoordinates_(t,e,n,i){const r=this.coordinates.length,o=this.appendFlatLineCoordinates(t,e,n,i,!1,!1),s=[B.MOVE_TO_LINE_TO,r,o];return this.instructions.push(s),this.hitDetectionInstructions.push(s),n}drawLineString(t,e){const n=this.state,i=n.strokeStyle,r=n.lineWidth;if(void 0===i||void 0===r)return;this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([B.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,X.e,X.f],z);const o=t.getFlatCoordinates(),s=t.getStride();this.drawFlatCoordinates_(o,0,o.length,s),this.hitDetectionInstructions.push(F),this.endGeometry(e)}drawMultiLineString(t,e){const n=this.state,i=n.strokeStyle,r=n.lineWidth;if(void 0===i||void 0===r)return;this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([B.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset],z);const o=t.getEnds(),s=t.getFlatCoordinates(),a=t.getStride();let l=0;for(let u=0,c=o.length;u<c;++u)l=this.drawFlatCoordinates_(s,l,o[u],a);this.hitDetectionInstructions.push(F),this.endGeometry(e)}finish(){const t=this.state;return void 0!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&this.instructions.push(F),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(t){void 0!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(F),t.lastStroke=this.coordinates.length),t.lastStroke=0,super.applyStroke(t),this.instructions.push(z)}},Q=n(42);var $=class extends Z{constructor(t,e,n,i){super(t,e,n,i)}drawFlatCoordinatess_(t,e,n,i){const r=this.state,o=void 0!==r.fillStyle,s=void 0!==r.strokeStyle,a=n.length;this.instructions.push(z),this.hitDetectionInstructions.push(z);for(let l=0;l<a;++l){const r=n[l],o=this.coordinates.length,a=this.appendFlatLineCoordinates(t,e,r,i,!0,!s),u=[B.MOVE_TO_LINE_TO,o,a];this.instructions.push(u),this.hitDetectionInstructions.push(u),s&&(this.instructions.push(G),this.hitDetectionInstructions.push(G)),e=r}return o&&(this.instructions.push(D),this.hitDetectionInstructions.push(D)),s&&(this.instructions.push(F),this.hitDetectionInstructions.push(F)),e}drawCircle(t,e){const n=this.state,i=n.fillStyle,r=n.strokeStyle;if(void 0===i&&void 0===r)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([B.SET_FILL_STYLE,X.b]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([B.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);const o=t.getFlatCoordinates(),s=t.getStride(),a=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,s,!1,!1);const l=[B.CIRCLE,a];this.instructions.push(z,l),this.hitDetectionInstructions.push(z,l),void 0!==n.fillStyle&&(this.instructions.push(D),this.hitDetectionInstructions.push(D)),void 0!==n.strokeStyle&&(this.instructions.push(F),this.hitDetectionInstructions.push(F)),this.endGeometry(e)}drawPolygon(t,e){const n=this.state,i=n.fillStyle,r=n.strokeStyle;if(void 0===i&&void 0===r)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([B.SET_FILL_STYLE,X.b]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([B.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);const o=t.getEnds(),s=t.getOrientedFlatCoordinates(),a=t.getStride();this.drawFlatCoordinatess_(s,0,o,a),this.endGeometry(e)}drawMultiPolygon(t,e){const n=this.state,i=n.fillStyle,r=n.strokeStyle;if(void 0===i&&void 0===r)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([B.SET_FILL_STYLE,X.b]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([B.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);const o=t.getEndss(),s=t.getOrientedFlatCoordinates(),a=t.getStride();let l=0;for(let u=0,c=o.length;u<c;++u)l=this.drawFlatCoordinatess_(s,l,o[u],a);this.endGeometry(e)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const t=this.tolerance;if(0!==t){const e=this.coordinates;for(let n=0,i=e.length;n<i;++n)e[n]=Object(Q.e)(e[n],t)}return super.finish()}setFillStrokeStyles_(){const t=this.state;void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)}};function tt(t,e,n,i,r){let o,s,a,l,u,c,h,f,d,g,p=n,v=n,y=0,m=0,_=n;for(s=n;s<i;s+=r){const n=e[s],i=e[s+1];void 0!==u&&(d=n-u,g=i-c,l=Math.sqrt(d*d+g*g),void 0!==h&&(m+=a,o=Math.acos((h*d+f*g)/(a*l)),o>t&&(m>y&&(y=m,p=_,v=s),m=0,_=s-r)),a=l,h=d,f=g),u=n,c=i}return m+=l,m>y?[_,s]:[p,v]}const et={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};const nt={Circle:$,Default:Z,Image:K,LineString:J,Polygon:$,Text:class extends Z{constructor(t,e,n,i){super(t,e,n,i),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){const t=super.finish();return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,e){const n=this.textFillState_,i=this.textStrokeState_,r=this.textState_;if(""===this.text_||!r||!n&&!i)return;const o=this.coordinates;let s=o.length;const a=t.getType();let l=null,u=t.getStride();if("line"!==r.placement||"LineString"!=a&&"MultiLineString"!=a&&"Polygon"!=a&&"MultiPolygon"!=a){let n=r.overflow?null:[];switch(a){case"Point":case"MultiPoint":l=t.getFlatCoordinates();break;case"LineString":l=t.getFlatMidpoint();break;case"Circle":l=t.getCenter();break;case"MultiLineString":l=t.getFlatMidpoints(),u=2;break;case"Polygon":l=t.getFlatInteriorPoint(),r.overflow||n.push(l[2]/this.resolution),u=3;break;case"MultiPolygon":const e=t.getFlatInteriorPoints();l=[];for(let t=0,i=e.length;t<i;t+=3)r.overflow||n.push(e[t+2]/this.resolution),l.push(e[t],e[t+1]);if(0===l.length)return;u=2}const i=this.appendFlatPointCoordinates(l,u);if(i===s)return;if(n&&(i-s)/2!==l.length/u){let t=s/2;n=n.filter((e,n)=>{const i=o[2*(t+n)]===l[n*u]&&o[2*(t+n)+1]===l[n*u+1];return i||--t,i})}this.saveTextStates_(),(r.backgroundFill||r.backgroundStroke)&&(this.setFillStrokeStyle(r.backgroundFill,r.backgroundStroke),r.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),r.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e);let c=r.padding;if(c!=X.j&&(r.scale[0]<0||r.scale[1]<0)){let t=r.padding[0],e=r.padding[1],n=r.padding[2],i=r.padding[3];r.scale[0]<0&&(e=-e,i=-i),r.scale[1]<0&&(t=-t,n=-n),c=[t,e,n,i]}const h=this.pixelRatio;this.instructions.push([B.DRAW_IMAGE,s,i,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,c==X.j?X.j:c.map((function(t){return t*h})),!!r.backgroundFill,!!r.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,n]);const f=1/h;this.hitDetectionInstructions.push([B.DRAW_IMAGE,s,i,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[f,f],NaN,void 0,this.declutterImageWithText_,c,!!r.backgroundFill,!!r.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,n]),this.endGeometry(e)}else{if(!Object(U.F)(this.getBufferedMaxExtent(),t.getExtent()))return;let n;if(l=t.getFlatCoordinates(),"LineString"==a)n=[l.length];else if("MultiLineString"==a)n=t.getEnds();else if("Polygon"==a)n=t.getEnds().slice(0,1);else if("MultiPolygon"==a){const e=t.getEndss();n=[];for(let t=0,i=e.length;t<i;++t)n.push(e[t][0])}this.beginGeometry(t,e);const i=r.textAlign;let c,h=0;for(let t=0,e=n.length;t<e;++t){if(void 0==i){const e=tt(r.maxAngle,l,h,n[t],u);h=e[0],c=e[1]}else c=n[t];for(let t=h;t<c;t+=u)o.push(l[t],l[t+1]);const e=o.length;h=n[t],this.drawChars_(s,e),s=e}this.endGeometry(e)}}saveTextStates_(){const t=this.textStrokeState_,e=this.textState_,n=this.textFillState_,i=this.strokeKey_;t&&(i in this.strokeStates||(this.strokeStates[i]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));const r=this.textKey_;r in this.textStates||(this.textStates[r]={font:e.font,textAlign:e.textAlign||X.l,justify:e.justify,textBaseline:e.textBaseline||X.m,scale:e.scale});const o=this.fillKey_;n&&(o in this.fillStates||(this.fillStates[o]={fillStyle:n.fillStyle}))}drawChars_(t,e){const n=this.textStrokeState_,i=this.textState_,r=this.strokeKey_,o=this.textKey_,s=this.fillKey_;this.saveTextStates_();const a=this.pixelRatio,l=et[i.textBaseline],u=this.textOffsetY_*a,c=this.text_,h=n?n.lineWidth*Math.abs(i.scale[0])/2:0;this.instructions.push([B.DRAW_CHARS,t,e,l,i.overflow,s,i.maxAngle,a,u,r,h*a,c,o,1]),this.hitDetectionInstructions.push([B.DRAW_CHARS,t,e,l,i.overflow,s,i.maxAngle,1,u,r,h,c,o,1/a])}setTextStyle(t,e){let n,i,r;if(t){const e=t.getFill();e?(i=this.textFillState_,i||(i={},this.textFillState_=i),i.fillStyle=Object(q.a)(e.getColor()||X.b)):(i=null,this.textFillState_=i);const o=t.getStroke();if(o){r=this.textStrokeState_,r||(r={},this.textStrokeState_=r);const t=o.getLineDash(),e=o.getLineDashOffset(),n=o.getWidth(),i=o.getMiterLimit();r.lineCap=o.getLineCap()||X.d,r.lineDash=t?t.slice():X.e,r.lineDashOffset=void 0===e?X.f:e,r.lineJoin=o.getLineJoin()||X.g,r.lineWidth=void 0===n?X.h:n,r.miterLimit=void 0===i?X.i:i,r.strokeStyle=Object(q.a)(o.getColor()||X.k)}else r=null,this.textStrokeState_=r;n=this.textState_;const s=t.getFont()||X.c;Object(X.q)(s);const a=t.getScaleArray();n.overflow=t.getOverflow(),n.font=s,n.maxAngle=t.getMaxAngle(),n.placement=t.getPlacement(),n.textAlign=t.getTextAlign(),n.justify=t.getJustify(),n.textBaseline=t.getTextBaseline()||X.m,n.backgroundFill=t.getBackgroundFill(),n.backgroundStroke=t.getBackgroundStroke(),n.padding=t.getPadding()||X.j,n.scale=void 0===a?[1,1]:a;const l=t.getOffsetX(),u=t.getOffsetY(),c=t.getRotateWithView(),h=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===l?0:l,this.textOffsetY_=void 0===u?0:u,this.textRotateWithView_=void 0!==c&&c,this.textRotation_=void 0===h?0:h,this.strokeKey_=r?("string"==typeof r.strokeStyle?r.strokeStyle:Object(b.b)(r.strokeStyle))+r.lineCap+r.lineDashOffset+"|"+r.lineWidth+r.lineJoin+r.miterLimit+"["+r.lineDash.join()+"]":"",this.textKey_=n.font+n.scale+(n.textAlign||"?")+(n.justify||"?")+(n.textBaseline||"?"),this.fillKey_=i?"string"==typeof i.fillStyle?i.fillStyle:"|"+Object(b.b)(i.fillStyle):""}else this.text_="";this.declutterImageWithText_=e}}};var it=class{constructor(t,e,n,i){this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=i,this.resolution_=n,this.buildersByZIndex_={}}finish(){const t={};for(const e in this.buildersByZIndex_){t[e]=t[e]||{};const n=this.buildersByZIndex_[e];for(const i in n){const r=n[i].finish();t[e][i]=r}}return t}getBuilder(t,e){const n=void 0!==t?t.toString():"0";let i=this.buildersByZIndex_[n];void 0===i&&(i={},this.buildersByZIndex_[n]=i);let r=i[e];if(void 0===r){r=new(0,nt[e])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),i[e]=r}return r}},rt=n(64),ot=n(14),st=n(5),at=n(33);function lt(t,e,n,i,r,o,s,a,l,u,c,h){let f=t[e],d=t[e+1],g=0,p=0,v=0,y=0;function m(){g=f,p=d,f=t[e+=i],d=t[e+1],y+=v,v=Math.sqrt((f-g)*(f-g)+(d-p)*(d-p))}do{m()}while(e<n-i&&y+v<o);let _=0===v?0:(o-y)/v;const b=Object(st.d)(g,f,_),x=Object(st.d)(p,d,_),E=e-i,w=y,k=o+a*l(u,r,c);for(;e<n-i&&y+v<k;)m();_=0===v?0:(k-y)/v;const S=Object(st.d)(g,f,_),C=Object(st.d)(p,d,_);let O;if(h){const t=[b,x,S,C];Object(at.a)(t,0,4,2,h,t,t),O=t[0]>t[2]}else O=b>S;const I=Math.PI,M=[],R=E+i===e;let T;if(v=0,y=w,f=t[e=E],d=t[e+1],R){m(),T=Math.atan2(d-p,f-g),O&&(T+=T>0?-I:I);const t=(S+b)/2,e=(C+x)/2;return M[0]=[t,e,(k-o)/2,T,r],M}for(let P=0,L=(r=r.replace(/\n/g," ")).length;P<L;){m();let t=Math.atan2(d-p,f-g);if(O&&(t+=t>0?-I:I),void 0!==T){let e=t-T;if(e+=e>I?-2*I:e<-I?2*I:0,Math.abs(e)>s)return null}T=t;const h=P;let b=0;for(;P<L;++P){const t=a*l(u,r[O?L-P-1:P],c);if(e+i<n&&y+v<o+b+t/2)break;b+=t}if(P===h)continue;const x=O?r.substring(L-h,L-P):r.substring(h,P);_=0===v?0:(o+b/2-y)/v;const E=Object(st.d)(g,f,_),w=Object(st.d)(p,d,_);M.push([E,w,b/2,t,x]),o+=b}return M}var ut=n(79);const ct=Object(U.j)(),ht=[],ft=[],dt=[],gt=[];function pt(t){return t[3].declutterBox}const vt=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function yt(t,e){return"start"!==e&&"end"!==e||vt.test(t)||(e="start"===e?"left":"right"),et[e]}function mt(t,e,n){return n>0&&t.push("\n",""),t.push(e,""),t}var _t=class{constructor(t,e,n,i){this.overlaps=n,this.pixelRatio=e,this.resolution=t,this.alignFill_,this.instructions=i.instructions,this.coordinates=i.coordinates,this.coordinateCache_={},this.renderedTransform_=Object(ot.c)(),this.hitDetectionInstructions=i.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=i.fillStates||{},this.strokeStates=i.strokeStates||{},this.textStates=i.textStates||{},this.widths_={},this.labels_={}}createLabel(t,e,n,i){const r=t+e+n+i;if(this.labels_[r])return this.labels_[r];const o=i?this.strokeStates[i]:null,s=n?this.fillStates[n]:null,a=this.textStates[e],l=this.pixelRatio,u=[a.scale[0]*l,a.scale[1]*l],c=Array.isArray(t),h=a.justify?et[a.justify]:yt(Array.isArray(t)?t[0]:t,a.textAlign||X.l),f=i&&o.lineWidth?o.lineWidth:0,d=c?t:t.split("\n").reduce(mt,[]),{width:g,height:p,widths:v,heights:y,lineWidths:m}=Object(X.o)(a,d),_=g+f,b=[],x=(_+2)*u[0],E=(p+f)*u[1],w={width:x<0?Math.floor(x):Math.ceil(x),height:E<0?Math.floor(E):Math.ceil(E),contextInstructions:b};1==u[0]&&1==u[1]||b.push("scale",u),i&&(b.push("strokeStyle",o.strokeStyle),b.push("lineWidth",f),b.push("lineCap",o.lineCap),b.push("lineJoin",o.lineJoin),b.push("miterLimit",o.miterLimit),b.push("setLineDash",[o.lineDash]),b.push("lineDashOffset",o.lineDashOffset)),n&&b.push("fillStyle",s.fillStyle),b.push("textBaseline","middle"),b.push("textAlign","center");const k=.5-h;let S=h*_+k*f;const C=[],O=[];let I,M=0,R=0,T=0,P=0;for(let L=0,N=d.length;L<N;L+=2){const t=d[L];if("\n"===t){R+=M,M=0,S=h*_+k*f,++P;continue}const e=d[L+1]||a.font;e!==I&&(i&&C.push("font",e),n&&O.push("font",e),I=e),M=Math.max(M,y[T]);const r=[t,S+k*v[T]+h*(v[T]-m[P]),.5*(f+M)+R];S+=v[T],i&&C.push("strokeText",r),n&&O.push("fillText",r),++T}return Array.prototype.push.apply(b,C),Array.prototype.push.apply(b,O),this.labels_[r]=w,w}replayTextBackground_(t,e,n,i,r,o,s){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,n),t.lineTo.apply(t,i),t.lineTo.apply(t,r),t.lineTo.apply(t,e),o&&(this.alignFill_=o[2],this.fill_(t)),s&&(this.setStrokeStyle_(t,s),t.stroke())}calculateImageOrLabelDimensions_(t,e,n,i,r,o,s,a,l,u,c,h,f,d,g,p){let v=n-(s*=h[0]),y=i-(a*=h[1]);const m=r+l>t?t-l:r,_=o+u>e?e-u:o,b=d[3]+m*h[0]+d[1],x=d[0]+_*h[1]+d[2],E=v-d[3],w=y-d[0];let k;return(g||0!==c)&&(ht[0]=E,gt[0]=E,ht[1]=w,ft[1]=w,ft[0]=E+b,dt[0]=ft[0],dt[1]=w+x,gt[1]=dt[1]),0!==c?(k=Object(ot.b)(Object(ot.c)(),n,i,1,1,c,-n,-i),Object(ot.a)(k,ht),Object(ot.a)(k,ft),Object(ot.a)(k,dt),Object(ot.a)(k,gt),Object(U.k)(Math.min(ht[0],ft[0],dt[0],gt[0]),Math.min(ht[1],ft[1],dt[1],gt[1]),Math.max(ht[0],ft[0],dt[0],gt[0]),Math.max(ht[1],ft[1],dt[1],gt[1]),ct)):Object(U.k)(Math.min(E,E+b),Math.min(w,w+x),Math.max(E,E+b),Math.max(w,w+x),ct),f&&(v=Math.round(v),y=Math.round(y)),{drawImageX:v,drawImageY:y,drawImageW:m,drawImageH:_,originX:l,originY:u,declutterBox:{minX:ct[0],minY:ct[1],maxX:ct[2],maxY:ct[3],value:p},canvasTransform:k,scale:h}}replayImageOrLabel_(t,e,n,i,r,o,s){const a=!(!o&&!s),l=i.declutterBox,u=t.canvas,c=s?s[2]*i.scale[0]/2:0;return l.minX-c<=u.width/e&&l.maxX+c>=0&&l.minY-c<=u.height/e&&l.maxY+c>=0&&(a&&this.replayTextBackground_(t,ht,ft,dt,gt,o,s),Object(X.n)(t,i.canvasTransform,r,n,i.originX,i.originY,i.drawImageW,i.drawImageH,i.drawImageX,i.drawImageY,i.scale)),!0}fill_(t){if(this.alignFill_){const e=Object(ot.a)(this.renderedTransform_,[0,0]),n=512*this.pixelRatio;t.save(),t.translate(e[0]%n,e[1]%n),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()}setStrokeStyle_(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.lineDashOffset=e[7],t.setLineDash(e[6])}drawLabelWithPointPlacement_(t,e,n,i){const r=this.textStates[e],o=this.createLabel(t,e,i,n),s=this.strokeStates[n],a=this.pixelRatio,l=yt(Array.isArray(t)?t[0]:t,r.textAlign||X.l),u=et[r.textBaseline||X.m],c=s&&s.lineWidth?s.lineWidth:0;return{label:o,anchorX:l*(o.width/a-2*r.scale[0])+2*(.5-l)*c,anchorY:u*o.height/a+2*(.5-u)*c}}execute_(t,e,n,i,r,o,s,a){let l;this.pixelCoordinates_&&Object(W.b)(n,this.renderedTransform_)?l=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),l=Object(at.c)(this.coordinates,0,this.coordinates.length,2,n,this.pixelCoordinates_),Object(ot.f)(this.renderedTransform_,n));let u=0;const c=i.length;let h,f,d,g,p,v,y,m,_,b,x,E,w=0,k=0,S=0,C=null,O=null;const I=this.coordinateCache_,M=this.viewRotation_,R=Math.round(1e12*Math.atan2(-n[1],n[0]))/1e12,T={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:M},P=this.instructions!=i||this.overlaps?0:200;let L,N,A,j;for(;u<c;){const n=i[u];switch(n[0]){case B.BEGIN_GEOMETRY:L=n[1],j=n[3],L.getGeometry()?void 0===s||Object(U.F)(s,j.getExtent())?++u:u=n[2]+1:u=n[2];break;case B.BEGIN_PATH:k>P&&(this.fill_(t),k=0),S>P&&(t.stroke(),S=0),k||S||(t.beginPath(),g=NaN,p=NaN),++u;break;case B.CIRCLE:w=n[1];const i=l[w],c=l[w+1],D=l[w+2]-i,F=l[w+3]-c,z=Math.sqrt(D*D+F*F);t.moveTo(i+z,c),t.arc(i,c,z,0,2*Math.PI,!0),++u;break;case B.CLOSE_PATH:t.closePath(),++u;break;case B.CUSTOM:w=n[1],h=n[2];const G=n[3],V=n[4],Y=6==n.length?n[5]:void 0;T.geometry=G,T.feature=L,u in I||(I[u]=[]);const q=I[u];Y?Y(l,w,h,2,q):(q[0]=l[w],q[1]=l[w+1],q.length=2),V(q,T),++u;break;case B.DRAW_IMAGE:w=n[1],h=n[2],m=n[3],f=n[4],d=n[5];let W=n[6];const H=n[7],Z=n[8],K=n[9],J=n[10];let Q=n[11];const $=n[12];let tt=n[13];const nt=n[14],it=n[15];if(!m&&n.length>=20){_=n[19],b=n[20],x=n[21],E=n[22];const t=this.drawLabelWithPointPlacement_(_,b,x,E);m=t.label,n[3]=m;const e=n[23];f=(t.anchorX-e)*this.pixelRatio,n[4]=f;const i=n[24];d=(t.anchorY-i)*this.pixelRatio,n[5]=d,W=m.height,n[6]=W,tt=m.width,n[13]=tt}let rt,ot,st,at;n.length>25&&(rt=n[25]),n.length>17?(ot=n[16],st=n[17],at=n[18]):(ot=X.j,st=!1,at=!1),J&&R?Q+=M:J||R||(Q-=M);let ct=0;for(;w<h;w+=2){if(rt&&rt[ct++]<tt/this.pixelRatio)continue;const n=this.calculateImageOrLabelDimensions_(m.width,m.height,l[w],l[w+1],tt,W,f,d,Z,K,Q,$,r,ot,st||at,L),i=[t,e,m,n,H,st?C:null,at?O:null];if(a){if("none"===nt)continue;if("obstacle"===nt){a.insert(n.declutterBox);continue}{let t,e;if(it){const n=h-w;if(!it[n]){it[n]=i;continue}if(t=it[n],delete it[n],e=pt(t),a.collides(e))continue}if(a.collides(n.declutterBox))continue;t&&(a.insert(e),this.replayImageOrLabel_.apply(this,t)),a.insert(n.declutterBox)}}this.replayImageOrLabel_.apply(this,i)}++u;break;case B.DRAW_CHARS:const ht=n[1],ft=n[2],dt=n[3],gt=n[4];E=n[5];const vt=n[6],yt=n[7],mt=n[8];x=n[9];const _t=n[10];_=n[11],b=n[12];const bt=[n[13],n[13]],xt=this.textStates[b],Et=xt.font,wt=[xt.scale[0]*yt,xt.scale[1]*yt];let kt;Et in this.widths_?kt=this.widths_[Et]:(kt={},this.widths_[Et]=kt);const St=Object(ut.a)(l,ht,ft,2),Ct=Math.abs(wt[0])*Object(X.p)(Et,_,kt);if(gt||Ct<=St){const n=this.textStates[b].textAlign,i=lt(l,ht,ft,2,_,(St-Ct)*et[n],vt,Math.abs(wt[0]),X.p,Et,kt,R?0:this.viewRotation_);t:if(i){const n=[];let r,o,s,l,u;if(x)for(r=0,o=i.length;r<o;++r){u=i[r],s=u[4],l=this.createLabel(s,b,"",x),f=u[2]+(wt[0]<0?-_t:_t),d=dt*l.height+2*(.5-dt)*_t*wt[1]/wt[0]-mt;const o=this.calculateImageOrLabelDimensions_(l.width,l.height,u[0],u[1],l.width,l.height,f,d,0,0,u[3],bt,!1,X.j,!1,L);if(a&&a.collides(o.declutterBox))break t;n.push([t,e,l,o,1,null,null])}if(E)for(r=0,o=i.length;r<o;++r){u=i[r],s=u[4],l=this.createLabel(s,b,E,""),f=u[2],d=dt*l.height-mt;const o=this.calculateImageOrLabelDimensions_(l.width,l.height,u[0],u[1],l.width,l.height,f,d,0,0,u[3],bt,!1,X.j,!1,L);if(a&&a.collides(o.declutterBox))break t;n.push([t,e,l,o,1,null,null])}a&&a.load(n.map(pt));for(let t=0,e=n.length;t<e;++t)this.replayImageOrLabel_.apply(this,n[t])}}++u;break;case B.END_GEOMETRY:if(void 0!==o){L=n[1];const t=o(L,j);if(t)return t}++u;break;case B.FILL:P?k++:this.fill_(t),++u;break;case B.MOVE_TO_LINE_TO:for(w=n[1],h=n[2],N=l[w],A=l[w+1],v=N+.5|0,y=A+.5|0,v===g&&y===p||(t.moveTo(N,A),g=v,p=y),w+=2;w<h;w+=2)N=l[w],A=l[w+1],v=N+.5|0,y=A+.5|0,w!=h-2&&v===g&&y===p||(t.lineTo(N,A),g=v,p=y);++u;break;case B.SET_FILL_STYLE:C=n,this.alignFill_=n[2],k&&(this.fill_(t),k=0,S&&(t.stroke(),S=0)),t.fillStyle=n[1],++u;break;case B.SET_STROKE_STYLE:O=n,S&&(t.stroke(),S=0),this.setStrokeStyle_(t,n),++u;break;case B.STROKE:P?S++:t.stroke(),++u;break;default:++u}}k&&this.fill_(t),S&&t.stroke()}execute(t,e,n,i,r,o){this.viewRotation_=i,this.execute_(t,e,n,this.instructions,r,void 0,void 0,o)}executeHitDetection(t,e,n,i,r){return this.viewRotation_=n,this.execute_(t,1,e,this.hitDetectionInstructions,!0,i,r)}},bt=n(21);const xt=["Polygon","Circle","LineString","Image","Text","Default"];const Et={};var wt=class{constructor(t,e,n,i,r,o){this.maxExtent_=t,this.overlaps_=i,this.pixelRatio_=n,this.resolution_=e,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Object(ot.c)(),this.createExecutors_(r)}clip(t,e){const n=this.getClipCoords(e);t.beginPath(),t.moveTo(n[0],n[1]),t.lineTo(n[2],n[3]),t.lineTo(n[4],n[5]),t.lineTo(n[6],n[7]),t.clip()}createExecutors_(t){for(const e in t){let n=this.executorsByZIndex_[e];void 0===n&&(n={},this.executorsByZIndex_[e]=n);const i=t[e];for(const t in i){const e=i[t];n[t]=new _t(this.resolution_,this.pixelRatio_,this.overlaps_,e)}}}hasExecutors(t){for(const e in this.executorsByZIndex_){const n=this.executorsByZIndex_[e];for(let e=0,i=t.length;e<i;++e)if(t[e]in n)return!0}return!1}forEachFeatureAtCoordinate(t,e,n,i,r,o){const s=2*(i=Math.round(i))+1,a=Object(ot.b)(this.hitDetectionTransform_,i+.5,i+.5,1/e,-1/e,-n,-t[0],-t[1]),l=!this.hitDetectionContext_;l&&(this.hitDetectionContext_=Object(p.a)(s,s));const u=this.hitDetectionContext_;let c;u.canvas.width!==s||u.canvas.height!==s?(u.canvas.width=s,u.canvas.height=s):l||u.clearRect(0,0,s,s),void 0!==this.renderBuffer_&&(c=Object(U.j)(),Object(U.q)(c,t),Object(U.c)(c,e*(this.renderBuffer_+i),c));const h=function(t){if(void 0!==Et[t])return Et[t];const e=2*t+1,n=t*t,i=new Array(n+1);for(let o=0;o<=t;++o)for(let r=0;r<=t;++r){const s=o*o+r*r;if(s>n)break;let a=i[s];a||(a=[],i[s]=a),a.push(4*((t+o)*e+(t+r))+3),o>0&&a.push(4*((t-o)*e+(t+r))+3),r>0&&(a.push(4*((t+o)*e+(t-r))+3),o>0&&a.push(4*((t-o)*e+(t-r))+3))}const r=[];for(let o=0,s=i.length;o<s;++o)i[o]&&r.push(...i[o]);return Et[t]=r,r}(i);let f;function d(t,e){const n=u.getImageData(0,0,s,s).data;for(let a=0,l=h.length;a<l;a++)if(n[h[a]]>0){if(!o||"Image"!==f&&"Text"!==f||o.includes(t)){const n=(h[a]-3)/4,o=i-n%s,l=i-(n/s|0),u=r(t,e,o*o+l*l);if(u)return u}u.clearRect(0,0,s,s);break}}const g=Object.keys(this.executorsByZIndex_).map(Number);let v,y,m,_,b;for(g.sort(W.f),v=g.length-1;v>=0;--v){const t=g[v].toString();for(m=this.executorsByZIndex_[t],y=xt.length-1;y>=0;--y)if(f=xt[y],_=m[f],void 0!==_&&(b=_.executeHitDetection(u,a,n,d,c),b))return b}}getClipCoords(t){const e=this.maxExtent_;if(!e)return null;const n=e[0],i=e[1],r=e[2],o=e[3],s=[n,i,n,o,r,o,r,i];return Object(at.c)(s,0,8,2,t,s),s}isEmpty(){return Object(bt.b)(this.executorsByZIndex_)}execute(t,e,n,i,r,o,s){const a=Object.keys(this.executorsByZIndex_).map(Number);let l,u,c,h,f,d;for(a.sort(W.f),this.maxExtent_&&(t.save(),this.clip(t,n)),o=o||xt,s&&a.reverse(),l=0,u=a.length;l<u;++l){const u=a[l].toString();for(f=this.executorsByZIndex_[u],c=0,h=o.length;c<h;++c){d=f[o[c]],void 0!==d&&d.execute(t,e,n,i,r,s)}}this.maxExtent_&&t.restore()}},kt=n(30),St=n(34);var Ct=class extends Y{constructor(t,e,n,i,r,o,s){super(),this.context_=t,this.pixelRatio_=e,this.extent_=n,this.transform_=i,this.viewRotation_=r,this.squaredTolerance_=o,this.userTransform_=s,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Object(ot.c)()}drawImages_(t,e,n,i){if(!this.image_)return;const r=Object(at.c)(t,e,n,i,this.transform_,this.pixelCoordinates_),o=this.context_,s=this.tmpLocalTransform_,a=o.globalAlpha;1!=this.imageOpacity_&&(o.globalAlpha=a*this.imageOpacity_);let l=this.imageRotation_;this.imageRotateWithView_&&(l+=this.viewRotation_);for(let u=0,c=r.length;u<c;u+=2){const t=r[u]-this.imageAnchorX_,e=r[u+1]-this.imageAnchorY_;if(0!==l||1!=this.imageScale_[0]||1!=this.imageScale_[1]){const n=t+this.imageAnchorX_,i=e+this.imageAnchorY_;Object(ot.b)(s,n,i,1,1,l,-n,-i),o.setTransform.apply(o,s),o.translate(n,i),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.setTransform(1,0,0,1,0,0)}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,t,e,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(o.globalAlpha=a)}drawText_(t,e,n,i){if(!this.textState_||""===this.text_)return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const r=Object(at.c)(t,e,n,i,this.transform_,this.pixelCoordinates_),o=this.context_;let s=this.textRotation_;for(this.textRotateWithView_&&(s+=this.viewRotation_);e<n;e+=i){const t=r[e]+this.textOffsetX_,n=r[e+1]+this.textOffsetY_;0!==s||1!=this.textScale_[0]||1!=this.textScale_[1]?(o.translate(t-this.textOffsetX_,n-this.textOffsetY_),o.rotate(s),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.setTransform(1,0,0,1,0,0)):(this.textStrokeState_&&o.strokeText(this.text_,t,n),this.textFillState_&&o.fillText(this.text_,t,n))}}moveToLineTo_(t,e,n,i,r){const o=this.context_,s=Object(at.c)(t,e,n,i,this.transform_,this.pixelCoordinates_);o.moveTo(s[0],s[1]);let a=s.length;r&&(a-=2);for(let l=2;l<a;l+=2)o.lineTo(s[l],s[l+1]);return r&&o.closePath(),n}drawRings_(t,e,n,i){for(let r=0,o=n.length;r<o;++r)e=this.moveToLineTo_(t,e,n[r],i,!0);return e}drawCircle(t){if(Object(U.F)(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=Object(St.b)(t,this.transform_,this.pixelCoordinates_),n=e[2]-e[0],i=e[3]-e[1],r=Math.sqrt(n*n+i*i),o=this.context_;o.beginPath(),o.arc(e[0],e[1],r,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}}setStyle(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}setTransform(t){this.transform_=t}drawGeometry(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t)}}drawFeature(t,e){const n=e.getGeometryFunction()(t);n&&Object(U.F)(this.extent_,n.getExtent())&&(this.setStyle(e),this.drawGeometry(n))}drawGeometryCollection(t){const e=t.getGeometriesArray();for(let n=0,i=e.length;n<i;++n)this.drawGeometry(e[n])}drawPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),n=t.getStride();this.image_&&this.drawImages_(e,0,e.length,n),""!==this.text_&&this.drawText_(e,0,e.length,n)}drawMultiPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),n=t.getStride();this.image_&&this.drawImages_(e,0,e.length,n),""!==this.text_&&this.drawText_(e,0,e.length,n)}drawLineString(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Object(U.F)(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const e=this.context_,n=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(n,0,n.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){const e=t.getFlatMidpoint();this.drawText_(e,0,2,2)}}}drawMultiLineString(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getExtent();if(Object(U.F)(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const e=this.context_,n=t.getFlatCoordinates();let i=0;const r=t.getEnds(),o=t.getStride();e.beginPath();for(let t=0,s=r.length;t<s;++t)i=this.moveToLineTo_(n,i,r[t],o,!1);e.stroke()}if(""!==this.text_){const e=t.getFlatMidpoints();this.drawText_(e,0,e.length,2)}}}drawPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Object(U.F)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){const e=t.getFlatInteriorPoint();this.drawText_(e,0,2,2)}}}drawMultiPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Object(U.F)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_,n=t.getOrientedFlatCoordinates();let i=0;const r=t.getEndss(),o=t.getStride();e.beginPath();for(let t=0,s=r.length;t<s;++t){const e=r[t];i=this.drawRings_(n,i,e,o)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){const e=t.getFlatInteriorPoints();this.drawText_(e,0,e.length,2)}}}setContextFillState_(t){const e=this.context_,n=this.contextFillState_;n?n.fillStyle!=t.fillStyle&&(n.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}setContextStrokeState_(t){const e=this.context_,n=this.contextStrokeState_;n?(n.lineCap!=t.lineCap&&(n.lineCap=t.lineCap,e.lineCap=t.lineCap),Object(W.b)(n.lineDash,t.lineDash)||e.setLineDash(n.lineDash=t.lineDash),n.lineDashOffset!=t.lineDashOffset&&(n.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset),n.lineJoin!=t.lineJoin&&(n.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),n.lineWidth!=t.lineWidth&&(n.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),n.miterLimit!=t.miterLimit&&(n.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),n.strokeStyle!=t.strokeStyle&&(n.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset,e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})}setContextTextState_(t){const e=this.context_,n=this.contextTextState_,i=t.textAlign?t.textAlign:X.l;n?(n.font!=t.font&&(n.font=t.font,e.font=t.font),n.textAlign!=i&&(n.textAlign=i,e.textAlign=i),n.textBaseline!=t.textBaseline&&(n.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=i,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:i,textBaseline:t.textBaseline})}setFillStrokeStyle(t,e){if(t){const e=t.getColor();this.fillState_={fillStyle:Object(q.a)(e||X.b)}}else this.fillState_=null;if(e){const t=e.getColor(),n=e.getLineCap(),i=e.getLineDash(),r=e.getLineDashOffset(),o=e.getLineJoin(),s=e.getWidth(),a=e.getMiterLimit(),l=i||X.e;this.strokeState_={lineCap:void 0!==n?n:X.d,lineDash:1===this.pixelRatio_?l:l.map(t=>t*this.pixelRatio_),lineDashOffset:(r||X.f)*this.pixelRatio_,lineJoin:void 0!==o?o:X.g,lineWidth:(void 0!==s?s:X.h)*this.pixelRatio_,miterLimit:void 0!==a?a:X.i,strokeStyle:Object(q.a)(t||X.k)}}else this.strokeState_=null}setImageStyle(t){let e;if(!t||!(e=t.getSize()))return void(this.image_=null);const n=t.getPixelRatio(this.pixelRatio_),i=t.getAnchor(),r=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=i[0]*n,this.imageAnchorY_=i[1]*n,this.imageHeight_=e[1]*n,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=r[0],this.imageOriginY_=r[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation();const o=t.getScaleArray();this.imageScale_=[o[0]*this.pixelRatio_/n,o[1]*this.pixelRatio_/n],this.imageWidth_=e[0]*n}setTextStyle(t){if(t){const e=t.getFill();if(e){const t=e.getColor();this.textFillState_={fillStyle:Object(q.a)(t||X.b)}}else this.textFillState_=null;const n=t.getStroke();if(n){const t=n.getColor(),e=n.getLineCap(),i=n.getLineDash(),r=n.getLineDashOffset(),o=n.getLineJoin(),s=n.getWidth(),a=n.getMiterLimit();this.textStrokeState_={lineCap:void 0!==e?e:X.d,lineDash:i||X.e,lineDashOffset:r||X.f,lineJoin:void 0!==o?o:X.g,lineWidth:void 0!==s?s:X.h,miterLimit:void 0!==a?a:X.i,strokeStyle:Object(q.a)(t||X.k)}}else this.textStrokeState_=null;const i=t.getFont(),r=t.getOffsetX(),o=t.getOffsetY(),s=t.getRotateWithView(),a=t.getRotation(),l=t.getScaleArray(),u=t.getText(),c=t.getTextAlign(),h=t.getTextBaseline();this.textState_={font:void 0!==i?i:X.c,textAlign:void 0!==c?c:X.l,textBaseline:void 0!==h?h:X.m},this.text_=void 0!==u?Array.isArray(u)?u.reduce((t,e,n)=>t+(n%2?" ":e),""):u:"",this.textOffsetX_=void 0!==r?this.pixelRatio_*r:0,this.textOffsetY_=void 0!==o?this.pixelRatio_*o:0,this.textRotateWithView_=void 0!==s&&s,this.textRotation_=void 0!==a?a:0,this.textScale_=[this.pixelRatio_*l[0],this.pixelRatio_*l[1]]}else this.text_=""}};const Ot={Point:function(t,e,n,i,r){const o=n.getImage(),s=n.getText();let a;if(o){if(o.getImageState()!=c.a.LOADED)return;let l=t;if(r){const u=o.getDeclutterMode();if("none"!==u)if(l=r,"obstacle"===u){const r=t.getBuilder(n.getZIndex(),"Image");r.setImageStyle(o,a),r.drawPoint(e,i)}else s&&s.getText()&&(a={})}const u=l.getBuilder(n.getZIndex(),"Image");u.setImageStyle(o,a),u.drawPoint(e,i)}if(s&&s.getText()){let o=t;r&&(o=r);const l=o.getBuilder(n.getZIndex(),"Text");l.setTextStyle(s,a),l.drawText(e,i)}},LineString:function(t,e,n,i,r){const o=n.getStroke();if(o){const r=t.getBuilder(n.getZIndex(),"LineString");r.setFillStrokeStyle(null,o),r.drawLineString(e,i)}const s=n.getText();if(s&&s.getText()){const o=(r||t).getBuilder(n.getZIndex(),"Text");o.setTextStyle(s),o.drawText(e,i)}},Polygon:function(t,e,n,i,r){const o=n.getFill(),s=n.getStroke();if(o||s){const r=t.getBuilder(n.getZIndex(),"Polygon");r.setFillStrokeStyle(o,s),r.drawPolygon(e,i)}const a=n.getText();if(a&&a.getText()){const o=(r||t).getBuilder(n.getZIndex(),"Text");o.setTextStyle(a),o.drawText(e,i)}},MultiPoint:function(t,e,n,i,r){const o=n.getImage(),s=n.getText();let a;if(o){if(o.getImageState()!=c.a.LOADED)return;let l=t;if(r){const u=o.getDeclutterMode();if("none"!==u)if(l=r,"obstacle"===u){const r=t.getBuilder(n.getZIndex(),"Image");r.setImageStyle(o,a),r.drawMultiPoint(e,i)}else s&&s.getText()&&(a={})}const u=l.getBuilder(n.getZIndex(),"Image");u.setImageStyle(o,a),u.drawMultiPoint(e,i)}if(s&&s.getText()){let o=t;r&&(o=r);const l=o.getBuilder(n.getZIndex(),"Text");l.setTextStyle(s,a),l.drawText(e,i)}},MultiLineString:function(t,e,n,i,r){const o=n.getStroke();if(o){const r=t.getBuilder(n.getZIndex(),"LineString");r.setFillStrokeStyle(null,o),r.drawMultiLineString(e,i)}const s=n.getText();if(s&&s.getText()){const o=(r||t).getBuilder(n.getZIndex(),"Text");o.setTextStyle(s),o.drawText(e,i)}},MultiPolygon:function(t,e,n,i,r){const o=n.getFill(),s=n.getStroke();if(s||o){const r=t.getBuilder(n.getZIndex(),"Polygon");r.setFillStrokeStyle(o,s),r.drawMultiPolygon(e,i)}const a=n.getText();if(a&&a.getText()){const o=(r||t).getBuilder(n.getZIndex(),"Text");o.setTextStyle(a),o.drawText(e,i)}},GeometryCollection:function(t,e,n,i,r){const o=e.getGeometriesArray();let s,a;for(s=0,a=o.length;s<a;++s){(0,Ot[o[s].getType()])(t,o[s],n,i,r)}},Circle:function(t,e,n,i,r){const o=n.getFill(),s=n.getStroke();if(o||s){const r=t.getBuilder(n.getZIndex(),"Circle");r.setFillStrokeStyle(o,s),r.drawCircle(e,i)}const a=n.getText();if(a&&a.getText()){const o=(r||t).getBuilder(n.getZIndex(),"Text");o.setTextStyle(a),o.drawText(e,i)}}};function It(t,e){return parseInt(Object(b.b)(t),10)-parseInt(Object(b.b)(e),10)}function Mt(t,e){return.5*t/e}function Rt(t,e,n,i,r,o,s){let a=!1;const l=n.getImage();if(l){const t=l.getImageState();t==c.a.LOADED||t==c.a.ERROR?l.unlistenImageChange(r):(t==c.a.IDLE&&l.load(),l.listenImageChange(r),a=!0)}return function(t,e,n,i,r,o){const s=n.getGeometryFunction()(e);if(!s)return;const a=s.simplifyTransformed(i,r);if(n.getRenderer())!function t(e,n,i,r){if("GeometryCollection"==n.getType()){const o=n.getGeometries();for(let n=0,s=o.length;n<s;++n)t(e,o[n],i,r);return}e.getBuilder(i.getZIndex(),"Default").drawCustom(n,r,i.getRenderer(),i.getHitDetectionRenderer())}(t,a,n,e);else{(0,Ot[a.getType()])(t,a,n,e,o)}}(t,e,n,i,o,s),a}var Tt=n(6),Pt=n(31);class Lt extends rt.b{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Object(U.j)(),this.wrappedRenderedExtent_=Object(U.j)(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(t,e,n){const i=e.extent,r=e.viewState,o=r.center,s=r.resolution,a=r.projection,l=r.rotation,u=a.getExtent(),c=this.getLayer().getSource(),h=e.pixelRatio,f=e.viewHints,d=!(f[kt.a.ANIMATING]||f[kt.a.INTERACTING]),g=this.compositionContext_,p=Math.round(e.size[0]*h),v=Math.round(e.size[1]*h),y=c.getWrapX()&&a.canWrapX(),m=y?Object(U.E)(u):null,_=y?Math.ceil((i[2]-u[2])/m)+1:1;let b=y?Math.floor((i[0]-u[0])/m):0;do{const e=this.getRenderTransform(o,s,l,h,p,v,b*m);t.execute(g,1,e,l,d,void 0,n)}while(++b<_)}setupCompositionContext_(){if(1!==this.opacity_){const t=Object(p.a)(this.context.canvas.width,this.context.canvas.height,rt.a);this.compositionContext_=t}else this.compositionContext_=this.context}releaseCompositionContext_(){if(1!==this.opacity_){const t=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=t,Object(p.d)(this.compositionContext_),rt.a.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(t){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree),this.releaseCompositionContext_())}renderFrame(t,e){const n=t.pixelRatio,i=t.layerStatesArray[t.layerIndex];Object(ot.e)(this.pixelTransform,1/n,1/n),Object(ot.d)(this.inversePixelTransform,this.pixelTransform);const r=Object(ot.g)(this.pixelTransform);this.useContainer(e,r,this.getBackground(t));const o=this.context,s=o.canvas,a=this.replayGroup_,l=this.declutterExecutorGroup;if((!a||a.isEmpty())&&(!l||l.isEmpty()))return null;const u=Math.round(t.size[0]*n),c=Math.round(t.size[1]*n);s.width!=u||s.height!=c?(s.width=u,s.height=c,s.style.transform!==r&&(s.style.transform=r)):this.containerReused||o.clearRect(0,0,u,c),this.preRender(o,t);const h=t.viewState,f=h.projection;this.opacity_=i.opacity,this.setupCompositionContext_();let d=!1,g=!0;if(i.extent&&this.clipping){const e=Object(Tt.f)(i.extent,f);g=Object(U.F)(e,t.extent),d=g&&!Object(U.g)(e,t.extent),d&&this.clipUnrotated(this.compositionContext_,t,e)}return g&&this.renderWorlds(a,t),d&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(o,t),this.renderedRotation_!==h.rotation&&(this.renderedRotation_=h.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(t){return new Promise(function(e){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const t=[this.context.canvas.width,this.context.canvas.height];Object(ot.a)(this.pixelTransform,t);const e=this.renderedCenter_,n=this.renderedResolution_,i=this.renderedRotation_,r=this.renderedProjection_,o=this.wrappedRenderedExtent_,s=this.getLayer(),a=[],l=.5*t[0],u=.5*t[1];a.push(this.getRenderTransform(e,n,i,.5,l,u,0).slice());const c=s.getSource(),h=r.getExtent();if(c.getWrapX()&&r.canWrapX()&&!Object(U.g)(h,o)){let t=o[0];const r=Object(U.E)(h);let s,c=0;for(;t<h[0];)--c,s=r*c,a.push(this.getRenderTransform(e,n,i,.5,l,u,s).slice()),t+=r;for(c=0,t=o[2];t>h[2];)++c,s=r*c,a.push(this.getRenderTransform(e,n,i,.5,l,u,s).slice()),t-=r}this.hitDetectionImageData_=function(t,e,n,i,r,o,s){const a=.5*t[0],l=.5*t[1],u=Object(p.a)(a,l);u.imageSmoothingEnabled=!1;const c=u.canvas,h=new Ct(u,.5,r,null,s),f=n.length,d=Math.floor(16777215/f),g={};for(let y=1;y<=f;++y){const t=n[y-1],e=t.getStyleFunction()||i;if(!i)continue;let s=e(t,o);if(!s)continue;Array.isArray(s)||(s=[s]);const a="#"+("000000"+(y*d).toString(16)).slice(-6);for(let n=0,i=s.length;n<i;++n){const e=s[n],i=e.getGeometryFunction()(t);if(!i||!Object(U.F)(r,i.getExtent()))continue;const o=e.clone(),l=o.getFill();l&&l.setColor(a);const u=o.getStroke();u&&(u.setColor(a),u.setLineDash(null)),o.setText(void 0);const c=e.getImage();if(c&&0!==c.getOpacity()){const t=c.getImageSize();if(!t)continue;const e=Object(p.a)(t[0],t[1],void 0,{alpha:!1}),n=e.canvas;e.fillStyle=a,e.fillRect(0,0,n.width,n.height),o.setImage(new E({img:n,imgSize:t,anchor:c.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:c.getOrigin(),opacity:1,size:c.getSize(),scale:c.getScale(),rotation:c.getRotation(),rotateWithView:c.getRotateWithView()}))}const h=o.getZIndex()||0;let f=g[h];f||(f={},g[h]=f,f.Polygon=[],f.Circle=[],f.LineString=[],f.Point=[]),f[i.getType().replace("Multi","")].push(i,o)}}const v=Object.keys(g).map(Number).sort(W.f);for(let p=0,y=v.length;p<y;++p){const t=g[v[p]];for(const n in t){const i=t[n];for(let t=0,n=i.length;t<n;t+=2){h.setStyle(i[t+1]);for(let n=0,r=e.length;n<r;++n)h.setTransform(e[n]),h.drawGeometry(i[t])}}}return u.getImageData(0,0,c.width,c.height)}(t,a,this.renderedFeatures_,s.getStyleFunction(),o,n,i)}e(function(t,e,n){const i=[];if(n){const r=Math.floor(.5*Math.round(t[0])),o=Math.floor(.5*Math.round(t[1])),s=4*(Object(st.b)(r,0,n.width-1)+Object(st.b)(o,0,n.height-1)*n.width),a=n.data[s],l=n.data[s+1],u=n.data[s+2]+256*(l+256*a),c=Math.floor(16777215/e.length);u&&u%c===0&&i.push(e[u/c-1])}return i}(t,this.renderedFeatures_,this.hitDetectionImageData_))}.bind(this))}forEachFeatureAtCoordinate(t,e,n,i,r){if(!this.replayGroup_)return;const o=e.viewState.resolution,s=e.viewState.rotation,a=this.getLayer(),l={},u=function(t,e,n){const o=Object(b.b)(t),s=l[o];if(s){if(!0!==s&&n<s.distanceSq){if(0===n)return l[o]=!0,r.splice(r.lastIndexOf(s),1),i(t,a,e);s.geometry=e,s.distanceSq=n}}else{if(0===n)return l[o]=!0,i(t,a,e);r.push(l[o]={feature:t,layer:a,geometry:e,distanceSq:n,callback:i})}};let c;const h=[this.replayGroup_];return this.declutterExecutorGroup&&h.push(this.declutterExecutorGroup),h.some(i=>c=i.forEachFeatureAtCoordinate(t,o,s,n,u,i===this.declutterExecutorGroup&&e.declutterTree?e.declutterTree.all().map(t=>t.value):null)),c}handleFontsChanged(){const t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}prepareFrame(t){const e=this.getLayer(),n=e.getSource();if(!n)return!1;const i=t.viewHints[kt.a.ANIMATING],r=t.viewHints[kt.a.INTERACTING],o=e.getUpdateWhileAnimating(),s=e.getUpdateWhileInteracting();if(this.ready&&!o&&i||!s&&r)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const a=t.extent,l=t.viewState,u=l.projection,c=l.resolution,h=t.pixelRatio,f=e.getRevision(),d=e.getRenderBuffer();let g=e.getRenderOrder();void 0===g&&(g=It);const p=l.center.slice(),v=Object(U.c)(a,d*c),y=v.slice(),m=[v.slice()],_=u.getExtent();if(n.getWrapX()&&u.canWrapX()&&!Object(U.g)(_,t.extent)){const t=Object(U.E)(_),e=Math.max(Object(U.E)(v)/2,t);v[0]=_[0]-e,v[2]=_[2]+e,Object(Pt.f)(p,u);const n=Object(U.K)(m[0],u);n[0]<_[0]&&n[2]<_[2]?m.push([n[0]+t,n[1],n[2]+t,n[3]]):n[0]>_[0]&&n[2]>_[2]&&m.push([n[0]-t,n[1],n[2]-t,n[3]])}if(this.ready&&this.renderedResolution_==c&&this.renderedRevision_==f&&this.renderedRenderOrder_==g&&Object(U.g)(this.wrappedRenderedExtent_,v))return Object(W.b)(this.renderedExtent_,y)||(this.hitDetectionImageData_=null,this.renderedExtent_=y),this.renderedCenter_=p,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const b=new it(Mt(c,h),v,c,h);let x;this.getLayer().getDeclutter()&&(x=new it(Mt(c,h),v,c,h));const E=Object(Tt.l)();let w;if(E){for(let t=0,e=m.length;t<e;++t){const e=m[t],i=Object(Tt.o)(e,u);n.loadFeatures(i,Object(Tt.p)(c,u),E)}w=Object(Tt.k)(E,u)}else for(let T=0,P=m.length;T<P;++T)n.loadFeatures(m[T],c,u);const k=function(t,e){const n=Mt(t,e);return n*n}(c,h);let S=!0;const C=function(t){let n;const i=t.getStyleFunction()||e.getStyleFunction();if(i&&(n=i(t,c)),n){const e=this.renderFeature(t,k,n,b,w,x);S=S&&!e}}.bind(this),O=Object(Tt.o)(v,u),I=n.getFeaturesInExtent(O);g&&I.sort(g);for(let T=0,P=I.length;T<P;++T)C(I[T]);this.renderedFeatures_=I,this.ready=S;const M=b.finish(),R=new wt(v,c,h,n.getOverlaps(),M,e.getRenderBuffer());return x&&(this.declutterExecutorGroup=new wt(v,c,h,n.getOverlaps(),x.finish(),e.getRenderBuffer())),this.renderedResolution_=c,this.renderedRevision_=f,this.renderedRenderOrder_=g,this.renderedExtent_=y,this.wrappedRenderedExtent_=v,this.renderedCenter_=p,this.renderedProjection_=u,this.replayGroup_=R,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(t,e,n,i,r,o){if(!n)return!1;let s=!1;if(Array.isArray(n))for(let a=0,l=n.length;a<l;++a)s=Rt(i,t,n[a],e,this.boundHandleStyleImageChange_,r,o)||s;else s=Rt(i,t,n,e,this.boundHandleStyleImageChange_,r,o);return s}}var Nt=Lt;e.a=class extends A{constructor(t){super(t)}createRenderer(){return new Nt(this)}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var i=n(41);class r{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let t=0;for(const e in this.cache_){const n=this.cache_[e];0!==(3&t++)||n.hasListener()||(delete this.cache_[e],--this.cacheSize_)}}}get(t,e,n){const i=o(t,e,n);return i in this.cache_?this.cache_[i]:null}set(t,e,n,i){const r=o(t,e,n);this.cache_[r]=i,++this.cacheSize_}setSize(t){this.maxCacheSize_=t,this.expire()}}function o(t,e,n){return e+":"+t+":"+(n?Object(i.b)(n):"null")}const s=new r},function(t,e,n){"use strict";n.d(e,"a",(function(){return v}));var i=n(10),r=n(18),o=n(74),s=n(3);class a extends o.a{constructor(t){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=t,this.declutterExecutorGroup=null}getFeatures(t){return Object(s.a)()}getData(t){return null}prepareFrame(t){return Object(s.a)()}renderFrame(t,e){return Object(s.a)()}loadedTileCallback(t,e,n){t[e]||(t[e]={}),t[e][n.tileCoord.toString()]=n}createLoadedTileFinder(t,e,n){return function(i,r){const o=this.loadedTileCallback.bind(this,n,i);return t.forEachLoadedTile(e,i,r,o)}.bind(this)}forEachFeatureAtCoordinate(t,e,n,i,r){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(t){t.target.getState()===r.a.LOADED&&this.renderIfReadyAndVisible()}loadImage(t){let e=t.getState();return e!=r.a.LOADED&&e!=r.a.ERROR&&t.addEventListener(i.a.CHANGE,this.boundHandleImageChange_),e==r.a.IDLE&&(t.load(),e=t.getState()),e==r.a.LOADED}renderIfReadyAndVisible(){const t=this.getLayer();t&&t.getVisible()&&"ready"===t.getSourceState()&&t.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}}var l=a,u=n(84),c=n(44),h=n(14),f=n(41),d=n(15),g=n(13),p=n(2);const v=[];let y=null;e.b=class extends l{constructor(t){super(t),this.container=null,this.renderedResolution,this.tempTransform=Object(h.c)(),this.pixelTransform=Object(h.c)(),this.inversePixelTransform=Object(h.c)(),this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(t,e,n){let i;y||function(){const t=document.createElement("canvas");t.width=1,t.height=1,y=t.getContext("2d")}(),y.clearRect(0,0,1,1);try{y.drawImage(t,e,n,1,1,0,0,1,1),i=y.getImageData(0,0,1,1).data}catch(r){return y=null,null}return i}getBackground(t){let e=this.getLayer().getBackground();return"function"===typeof e&&(e=e(t.viewState.resolution)),e||void 0}useContainer(t,e,n){const i=this.getLayer().getClassName();let r,o;if(t&&t.className===i&&(!n||t&&t.style.backgroundColor&&Object(g.b)(Object(f.a)(t.style.backgroundColor),Object(f.a)(n)))){const e=t.firstElementChild;e instanceof HTMLCanvasElement&&(o=e.getContext("2d"))}if(o&&o.canvas.style.transform===e?(this.container=t,this.context=o,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){r=document.createElement("div"),r.className=i;let t=r.style;t.position="absolute",t.width="100%",t.height="100%",o=Object(d.a)();const e=o.canvas;r.appendChild(e),t=e.style,t.position="absolute",t.left="0",t.transformOrigin="top left",this.container=r,this.context=o}this.containerReused||!n||this.container.style.backgroundColor||(this.container.style.backgroundColor=n)}clipUnrotated(t,e,n){const i=Object(p.C)(n),r=Object(p.D)(n),o=Object(p.v)(n),s=Object(p.u)(n);Object(h.a)(e.coordinateToPixelTransform,i),Object(h.a)(e.coordinateToPixelTransform,r),Object(h.a)(e.coordinateToPixelTransform,o),Object(h.a)(e.coordinateToPixelTransform,s);const a=this.inversePixelTransform;Object(h.a)(a,i),Object(h.a)(a,r),Object(h.a)(a,o),Object(h.a)(a,s),t.save(),t.beginPath(),t.moveTo(Math.round(i[0]),Math.round(i[1])),t.lineTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(s[0]),Math.round(s[1])),t.clip()}dispatchRenderEvent_(t,e,n){const i=this.getLayer();if(i.hasListener(t)){const r=new u.a(t,this.inversePixelTransform,n,e);i.dispatchEvent(r)}}preRender(t,e){this.frameState=e,this.dispatchRenderEvent_(c.a.PRERENDER,t,e)}postRender(t,e){this.dispatchRenderEvent_(c.a.POSTRENDER,t,e)}getRenderTransform(t,e,n,i,r,o,s){const a=r/2,l=o/2,u=i/e,c=-u,f=-t[0]+s,d=-t[1];return Object(h.b)(this.tempTransform,a,l,u,c,-n,f,d)}disposeInternal(){delete this.frameState,super.disposeInternal()}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return o}));var i=n(5);function r(t,e,n){n=n||6371008.8;const r=Object(i.k)(t[1]),o=Object(i.k)(e[1]),s=(o-r)/2,a=Object(i.k)(e[0]-t[0])/2,l=Math.sin(s)*Math.sin(s)+Math.sin(a)*Math.sin(a)*Math.cos(r)*Math.cos(o);return 2*n*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))}function o(t,e,n,r){r=r||6371008.8;const o=Object(i.k)(t[1]),s=Object(i.k)(t[0]),a=e/r,l=Math.asin(Math.sin(o)*Math.cos(a)+Math.cos(o)*Math.sin(a)*Math.cos(n)),u=s+Math.atan2(Math.sin(n)*Math.sin(a)*Math.cos(o),Math.cos(a)-Math.sin(o)*Math.sin(l));return[Object(i.i)(u),Object(i.i)(l)]}},function(t,e,n){"use strict";var i=n(24),r=n(10),o=n(12),s=n(8);class a extends i.a{constructor(t){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),t)if("function"===typeof t.getSimplifiedGeometry){const e=t;this.setGeometry(e)}else{const e=t;this.setProperties(e)}}clone(){const t=new a(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());const e=this.getGeometry();e&&t.setGeometry(e.clone());const n=this.getStyle();return n&&t.setStyle(n),t}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(Object(s.c)(this.geometryChangeKey_),this.geometryChangeKey_=null);const t=this.getGeometry();t&&(this.geometryChangeKey_=Object(s.a)(t,r.a.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(t){this.set(this.geometryName_,t)}setStyle(t){this.style_=t,this.styleFunction_=t?function(t){if("function"===typeof t)return t;{let e;if(Array.isArray(t))e=t;else{Object(o.a)("function"===typeof t.getZIndex,41);e=[t]}return function(){return e}}}(t):void 0,this.changed()}setId(t){this.id_=t,this.changed()}setGeometryName(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}e.a=a},function(t,e,n){"use strict";var i=n(82);class r extends i.a{constructor(t){super({points:1/0,fill:(t=t||{radius:5}).fill,radius:t.radius,stroke:t.stroke,scale:void 0!==t.scale?t.scale:1,rotation:void 0!==t.rotation?t.rotation:0,rotateWithView:void 0!==t.rotateWithView&&t.rotateWithView,displacement:void 0!==t.displacement?t.displacement:[0,0],declutterMode:t.declutterMode})}clone(){const t=this.getScale(),e=new r({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}setRadius(t){this.radius_=t,this.render()}}e.a=r},function(t,e,n){"use strict";var i=n(66),r=n(10),o=n(77),s=n(2),a=n(8);class l extends o.a{constructor(t){super(),this.geometries_=t||null,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(a.c),this.changeEventsKeys_.length=0}listenGeometriesChange_(){if(this.geometries_)for(let t=0,e=this.geometries_.length;t<e;++t)this.changeEventsKeys_.push(Object(a.a)(this.geometries_[t],r.a.CHANGE,this.changed,this))}clone(){const t=new l(null);return t.setGeometries(this.geometries_),t.applyProperties(this),t}closestPointXY(t,e,n,i){if(i<Object(s.e)(this.getExtent(),t,e))return i;const r=this.geometries_;for(let o=0,s=r.length;o<s;++o)i=r[o].closestPointXY(t,e,n,i);return i}containsXY(t,e){const n=this.geometries_;for(let i=0,r=n.length;i<r;++i)if(n[i].containsXY(t,e))return!0;return!1}computeExtent(t){Object(s.l)(t);const e=this.geometries_;for(let n=0,i=e.length;n<i;++n)Object(s.p)(t,e[n].getExtent());return t}getGeometries(){return u(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let t=[];const e=this.geometries_;for(let n=0,i=e.length;n<i;++n)e[n].getType()===this.getType()?t=t.concat(e[n].getGeometriesArrayRecursive()):t.push(e[n]);return t}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=[],n=this.geometries_;let i=!1;for(let r=0,o=n.length;r<o;++r){const o=n[r],s=o.getSimplifiedGeometry(t);e.push(s),s!==o&&(i=!0)}if(i){const t=new l(null);return t.setGeometriesArray(e),t}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this}getType(){return"GeometryCollection"}intersectsExtent(t){const e=this.geometries_;for(let n=0,i=e.length;n<i;++n)if(e[n].intersectsExtent(t))return!0;return!1}isEmpty(){return 0===this.geometries_.length}rotate(t,e){const n=this.geometries_;for(let i=0,r=n.length;i<r;++i)n[i].rotate(t,e);this.changed()}scale(t,e,n){n||(n=Object(s.w)(this.getExtent()));const i=this.geometries_;for(let r=0,o=i.length;r<o;++r)i[r].scale(t,e,n);this.changed()}setGeometries(t){this.setGeometriesArray(u(t))}setGeometriesArray(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()}applyTransform(t){const e=this.geometries_;for(let n=0,i=e.length;n<i;++n)e[n].applyTransform(t);this.changed()}translate(t,e){const n=this.geometries_;for(let i=0,r=n.length;i<r;++i)n[i].translate(t,e);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function u(t){const e=[];for(let n=0,i=t.length;n<i;++n)e.push(t[n].clone());return e}var c=l,h=n(3),f=n(6);var d=class{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}getReadOptions(t,e){if(e){let n=e.dataProjection?Object(f.h)(e.dataProjection):this.readProjection(t);e.extent&&n&&"tile-pixels"===n.getUnits()&&(n=Object(f.h)(n),n.setWorldExtent(e.extent)),e={dataProjection:n,featureProjection:e.featureProjection}}return this.adaptOptions(e)}adaptOptions(t){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)}getType(){return Object(h.a)()}readFeature(t,e){return Object(h.a)()}readFeatures(t,e){return Object(h.a)()}readGeometry(t,e){return Object(h.a)()}readProjection(t){return Object(h.a)()}writeFeature(t,e){return Object(h.a)()}writeFeatures(t,e){return Object(h.a)()}writeGeometry(t,e){return Object(h.a)()}};function g(t,e,n){const i=n?Object(f.h)(n.featureProjection):null,r=n?Object(f.h)(n.dataProjection):null;let o;if(o=i&&r&&!Object(f.d)(i,r)?(e?t.clone():t).transform(e?i:r,e?r:i):t,e&&n&&void 0!==n.decimals){const e=Math.pow(10,n.decimals),i=function(t){for(let n=0,i=t.length;n<i;++n)t[n]=Math.round(t[n]*e)/e;return t};o===t&&(o=t.clone()),o.applyTransform(i)}return o}function p(t){if("string"===typeof t){const e=JSON.parse(t);return e||null}return null!==t?t:null}var v=class extends d{constructor(){super()}getType(){return"json"}readFeature(t,e){return this.readFeatureFromObject(p(t),this.getReadOptions(t,e))}readFeatures(t,e){return this.readFeaturesFromObject(p(t),this.getReadOptions(t,e))}readFeatureFromObject(t,e){return Object(h.a)()}readFeaturesFromObject(t,e){return Object(h.a)()}readGeometry(t,e){return this.readGeometryFromObject(p(t),this.getReadOptions(t,e))}readGeometryFromObject(t,e){return Object(h.a)()}readProjection(t){return this.readProjectionFromObject(p(t))}readProjectionFromObject(t){return Object(h.a)()}writeFeature(t,e){return JSON.stringify(this.writeFeatureObject(t,e))}writeFeatureObject(t,e){return Object(h.a)()}writeFeatures(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))}writeFeaturesObject(t,e){return Object(h.a)()}writeGeometry(t,e){return JSON.stringify(this.writeGeometryObject(t,e))}writeGeometryObject(t,e){return Object(h.a)()}},y=n(34),m=n(37),_=n(38),b=n(42),x=n(13),E=n(78),w=n(26),k=n(5);function S(t,e,n,i,r,o,s){let a,l;const u=(n-e)/i;if(1===u)a=e;else if(2===u)a=e,l=r;else if(0!==u){let o=t[e],s=t[e+1],u=0;const c=[0];for(let r=e+i;r<n;r+=i){const e=t[r],n=t[r+1];u+=Math.sqrt((e-o)*(e-o)+(n-s)*(n-s)),c.push(u),o=e,s=n}const h=r*u,f=Object(x.a)(c,h);f<0?(l=(h-c[-f-2])/(c[-f-1]-c[-f-2]),a=e+(-f-2)*i):a=e+f*i}s=s>1?s:2,o=o||new Array(s);for(let c=0;c<s;++c)o[c]=void 0===a?NaN:void 0===l?t[a+c]:Object(k.d)(t[a+c],t[a+i+c],l);return o}function C(t,e,n,i,r,o){if(n==e)return null;let s;if(r<t[e+i-1])return o?(s=t.slice(e,e+i),s[i-1]=r,s):null;if(t[n-1]<r)return o?(s=t.slice(n-i,n),s[i-1]=r,s):null;if(r==t[e+i-1])return t.slice(e,e+i);let a=e/i,l=n/i;for(;a<l;){const e=a+l>>1;r<t[(e+1)*i-1]?l=e:a=e+1}const u=t[a*i-1];if(r==u)return t.slice((a-1)*i,(a-1)*i+i);const c=(r-u)/(t[(a+1)*i-1]-u);s=[];for(let h=0;h<i-1;++h)s.push(Object(k.d)(t[(a-1)*i+h],t[a*i+h],c));return s.push(r),s}var O=n(49),I=n(79);class M extends y.a{constructor(t,e){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===e||Array.isArray(t[0])?this.setCoordinates(t,e):this.setFlatCoordinates(e,t)}appendCoordinate(t){this.flatCoordinates?Object(x.c)(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()}clone(){const t=new M(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,n,i){return i<Object(s.e)(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(m.e)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(m.d)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,n,i))}forEachSegment(t){return Object(E.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinateAtM(t,e){return"XYM"!=this.layout&&"XYZM"!=this.layout?null:(e=void 0!==e&&e,C(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e))}getCoordinates(){return Object(w.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(t,e){return S(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,this.stride)}getLength(){return Object(I.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(t){const e=[];return e.length=Object(b.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new M(e,"XY")}getType(){return"LineString"}intersectsExtent(t){return Object(O.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Object(_.b)(this.flatCoordinates,0,t,this.stride),this.changed()}}var R=M;class T extends y.a{constructor(t,e,n){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(t[0]))this.setCoordinates(t,e);else if(void 0!==e&&n)this.setFlatCoordinates(e,t),this.ends_=n;else{let e=this.getLayout();const n=t,i=[],r=[];for(let t=0,o=n.length;t<o;++t){const o=n[t];0===t&&(e=o.getLayout()),Object(x.c)(i,o.getFlatCoordinates()),r.push(i.length)}this.setFlatCoordinates(e,i),this.ends_=r}}appendLineString(t){this.flatCoordinates?Object(x.c)(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new T(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,n,i){return i<Object(s.e)(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(m.a)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(m.b)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,n,i))}getCoordinateAtM(t,e,n){return"XYM"!=this.layout&&"XYZM"!=this.layout||0===this.flatCoordinates.length?null:(e=void 0!==e&&e,n=void 0!==n&&n,function(t,e,n,i,r,o,s){if(s)return C(t,e,n[n.length-1],i,r,o);let a;if(r<t[i-1])return o?(a=t.slice(0,i),a[i-1]=r,a):null;if(t[t.length-1]<r)return o?(a=t.slice(t.length-i),a[i-1]=r,a):null;for(let l=0,u=n.length;l<u;++l){const o=n[l];if(e!=o){if(r<t[e+i-1])return null;if(r<=t[o-1])return C(t,e,o,i,r,!1);e=o}}return null}(this.flatCoordinates,0,this.ends_,this.stride,t,e,n))}getCoordinates(){return Object(w.b)(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(t){return t<0||this.ends_.length<=t?null:new R(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLineStrings(){const t=this.flatCoordinates,e=this.ends_,n=this.layout,i=[];let r=0;for(let o=0,s=e.length;o<s;++o){const s=e[o],a=new R(t.slice(r,s),n);i.push(a),r=s}return i}getFlatMidpoints(){const t=[],e=this.flatCoordinates;let n=0;const i=this.ends_,r=this.stride;for(let o=0,s=i.length;o<s;++o){const s=i[o],a=S(e,n,s,r,.5);Object(x.c)(t,a),n=s}return t}getSimplifiedGeometryInternal(t){const e=[],n=[];return e.length=Object(b.b)(this.flatCoordinates,0,this.ends_,this.stride,t,e,0,n),new T(e,"XY",n)}getType(){return"MultiLineString"}intersectsExtent(t){return Object(O.b)(this.flatCoordinates,0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=Object(_.c)(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===n.length?0:n[n.length-1],this.changed()}}var P=T,L=n(57);class N extends y.a{constructor(t,e){super(),e&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}appendPoint(t){this.flatCoordinates?Object(x.c)(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()}clone(){const t=new N(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,n,i){if(i<Object(s.e)(this.getExtent(),t,e))return i;const r=this.flatCoordinates,o=this.stride;for(let s=0,a=r.length;s<a;s+=o){const a=Object(k.g)(t,e,r[s],r[s+1]);if(a<i){i=a;for(let t=0;t<o;++t)n[t]=r[s+t];n.length=o}}return i}getCoordinates(){return Object(w.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(t){const e=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||e<=t?null:new L.a(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)}getPoints(){const t=this.flatCoordinates,e=this.layout,n=this.stride,i=[];for(let r=0,o=t.length;r<o;r+=n){const o=new L.a(t.slice(r,r+n),e);i.push(o)}return i}getType(){return"MultiPoint"}intersectsExtent(t){const e=this.flatCoordinates,n=this.stride;for(let i=0,r=e.length;i<r;i+=n){const n=e[i],r=e[i+1];if(Object(s.h)(t,n,r))return!0}return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Object(_.b)(this.flatCoordinates,0,t,this.stride),this.changed()}}var A=N,j=n(50),D=n(80),F=n(55),z=n(61);var G=n(43);class B extends y.a{constructor(t,e,n){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!n&&!Array.isArray(t[0])){let i=this.getLayout();const r=t,o=[],s=[];for(let t=0,e=r.length;t<e;++t){const e=r[t];0===t&&(i=e.getLayout());const n=o.length,a=e.getEnds();for(let t=0,i=a.length;t<i;++t)a[t]+=n;Object(x.c)(o,e.getFlatCoordinates()),s.push(a)}e=i,t=o,n=s}void 0!==e&&n?(this.setFlatCoordinates(e,t),this.endss_=n):this.setCoordinates(t,e)}appendPolygon(t){let e;if(this.flatCoordinates){const n=this.flatCoordinates.length;Object(x.c)(this.flatCoordinates,t.getFlatCoordinates()),e=t.getEnds().slice();for(let t=0,i=e.length;t<i;++t)e[t]+=n}else this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();this.endss_.push(e),this.changed()}clone(){const t=this.endss_.length,e=new Array(t);for(let i=0;i<t;++i)e[i]=this.endss_[i].slice();const n=new B(this.flatCoordinates.slice(),this.layout,e);return n.applyProperties(this),n}closestPointXY(t,e,n,i){return i<Object(s.e)(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(m.f)(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(m.c)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,n,i))}containsXY(t,e){return Object(G.d)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)}getArea(){return Object(z.c)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(t){let e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),Object(F.d)(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,Object(w.c)(e,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const t=function(t,e,n,i){const r=[];let o=Object(s.j)();for(let a=0,l=n.length;a<l;++a){const l=n[a];o=Object(s.n)(t,e,l[0],i),r.push((o[0]+o[2])/2,(o[1]+o[3])/2),e=l[l.length-1]}return r}(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=Object(D.b)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new A(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;Object(F.b)(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Object(F.d)(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],n=[];return e.length=Object(b.d)(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),e,0,n),new B(e,"XY",n)}getPolygon(t){if(t<0||this.endss_.length<=t)return null;let e;if(0===t)e=0;else{const n=this.endss_[t-1];e=n[n.length-1]}const n=this.endss_[t].slice(),i=n[n.length-1];if(0!==e)for(let r=0,o=n.length;r<o;++r)n[r]-=e;return new j.a(this.flatCoordinates.slice(e,i),this.layout,n)}getPolygons(){const t=this.layout,e=this.flatCoordinates,n=this.endss_,i=[];let r=0;for(let o=0,s=n.length;o<s;++o){const s=n[o].slice(),a=s[s.length-1];if(0!==r)for(let t=0,e=s.length;t<e;++t)s[t]-=r;const l=new j.a(e.slice(r,a),t,s);i.push(l),r=a}return i}getType(){return"MultiPolygon"}intersectsExtent(t){return Object(O.e)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);const n=Object(_.d)(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===n.length)this.flatCoordinates.length=0;else{const t=n[n.length-1];this.flatCoordinates.length=0===t.length?0:t[t.length-1]}this.changed()}}var V=B,Y=n(12),q=n(21);function U(t,e){if(!t)return null;let n;switch(t.type){case"Point":n=function(t){return new L.a(t.coordinates)}(t);break;case"LineString":n=function(t){return new R(t.coordinates)}(t);break;case"Polygon":n=function(t){return new j.a(t.coordinates)}(t);break;case"MultiPoint":n=function(t){return new A(t.coordinates)}(t);break;case"MultiLineString":n=function(t){return new P(t.coordinates)}(t);break;case"MultiPolygon":n=function(t){return new V(t.coordinates)}(t);break;case"GeometryCollection":n=function(t,e){const n=t.geometries.map((function(t){return U(t,e)}));return new c(n)}(t);break;default:throw new Error("Unsupported GeoJSON type: "+t.type)}return g(n,!1,e)}function X(t,e){const n=(t=g(t,!0,e)).getType();let i;switch(n){case"Point":i=function(t,e){return{type:"Point",coordinates:t.getCoordinates()}}(t);break;case"LineString":i=function(t,e){return{type:"LineString",coordinates:t.getCoordinates()}}(t);break;case"Polygon":i=function(t,e){let n;e&&(n=e.rightHanded);return{type:"Polygon",coordinates:t.getCoordinates(n)}}(t,e);break;case"MultiPoint":i=function(t,e){return{type:"MultiPoint",coordinates:t.getCoordinates()}}(t);break;case"MultiLineString":i=function(t,e){return{type:"MultiLineString",coordinates:t.getCoordinates()}}(t);break;case"MultiPolygon":i=function(t,e){let n;e&&(n=e.rightHanded);return{type:"MultiPolygon",coordinates:t.getCoordinates(n)}}(t,e);break;case"GeometryCollection":i=function(t,e){delete(e=Object.assign({},e)).featureProjection;return{type:"GeometryCollection",geometries:t.getGeometriesArray().map((function(t){return X(t,e)}))}}(t,e);break;case"Circle":i={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+n)}return i}e.a=class extends v{constructor(t){t=t||{},super(),this.dataProjection=Object(f.h)(t.dataProjection?t.dataProjection:"EPSG:4326"),t.featureProjection&&(this.defaultFeatureProjection=Object(f.h)(t.featureProjection)),this.geometryName_=t.geometryName,this.extractGeometryName_=t.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(t,e){let n=null;n="Feature"===t.type?t:{type:"Feature",geometry:t,properties:null};const r=U(n.geometry,e),o=new i.a;return this.geometryName_?o.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in n!==void 0&&o.setGeometryName(n.geometry_name),o.setGeometry(r),"id"in n&&o.setId(n.id),n.properties&&o.setProperties(n.properties,!0),o}readFeaturesFromObject(t,e){let n=null;if("FeatureCollection"===t.type){n=[];const i=t.features;for(let t=0,r=i.length;t<r;++t)n.push(this.readFeatureFromObject(i[t],e))}else n=[this.readFeatureFromObject(t,e)];return n}readGeometryFromObject(t,e){return U(t,e)}readProjectionFromObject(t){const e=t.crs;let n;return e?"name"==e.type?n=Object(f.h)(e.properties.name):"EPSG"===e.type?n=Object(f.h)("EPSG:"+e.properties.code):Object(Y.a)(!1,36):n=this.dataProjection,n}writeFeatureObject(t,e){e=this.adaptOptions(e);const n={type:"Feature",geometry:null,properties:null},i=t.getId();if(void 0!==i&&(n.id=i),!t.hasProperties())return n;const r=t.getProperties(),o=t.getGeometry();return o&&(n.geometry=X(o,e),delete r[t.getGeometryName()]),Object(q.b)(r)||(n.properties=r),n}writeFeaturesObject(t,e){e=this.adaptOptions(e);const n=[];for(let i=0,r=t.length;i<r;++i)n.push(this.writeFeatureObject(t[i],e));return{type:"FeatureCollection",features:n}}writeGeometryObject(t,e){return X(t,this.adaptOptions(e))}}},function(t,e,n){"use strict";var i=n(32),r=n(23),o=n(27),s=n(10),a=n(47),l=n(76),u=n.n(l),c=n(2),h=n(3),f=n(21);var d=class{constructor(t){this.rbush_=new u.a(t),this.items_={}}insert(t,e){const n={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(n),this.items_[Object(h.b)(e)]=n}load(t,e){const n=new Array(e.length);for(let i=0,r=e.length;i<r;i++){const r=t[i],o=e[i],s={minX:r[0],minY:r[1],maxX:r[2],maxY:r[3],value:o};n[i]=s,this.items_[Object(h.b)(o)]=s}this.rbush_.load(n)}remove(t){const e=Object(h.b)(t),n=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(n)}update(t,e){const n=this.items_[Object(h.b)(e)],i=[n.minX,n.minY,n.maxX,n.maxY];Object(c.o)(i,t)||(this.remove(e),this.insert(t,e))}getAll(){return this.rbush_.all().map((function(t){return t.value}))}getInExtent(t){const e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map((function(t){return t.value}))}forEach(t){return this.forEach_(this.getAll(),t)}forEachInExtent(t,e){return this.forEach_(this.getInExtent(t),e)}forEach_(t,e){let n;for(let i=0,r=t.length;i<r;i++)if(n=e(t[i]),n)return n;return n}isEmpty(){return Object(f.b)(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(t){const e=this.rbush_.toJSON();return Object(c.k)(e.minX,e.minY,e.maxX,e.maxY,t)}concat(t){this.rbush_.load(t.rbush_.all());for(const e in t.items_)this.items_[e]=t.items_[e]}},g=n(75),p="addfeature",v="changefeature",y="clear",m="removefeature",_="featuresloadstart",b="featuresloadend",x="featuresloaderror",E=n(16);n(6);function w(t,e){return[[-1/0,-1/0,1/0,1/0]]}var k=n(12),S=n(13),C=n(8);let O=!1;function I(t,e){return function(n,i,r,o,s){const a=this;!function(t,e,n,i,r,o,s){const a=new XMLHttpRequest;a.open("GET","function"===typeof t?t(n,i,r):t,!0),"arraybuffer"==e.getType()&&(a.responseType="arraybuffer"),a.withCredentials=O,a.onload=function(t){if(!a.status||a.status>=200&&a.status<300){const t=e.getType();let i;"json"==t||"text"==t?i=a.responseText:"xml"==t?(i=a.responseXML,i||(i=(new DOMParser).parseFromString(a.responseText,"application/xml"))):"arraybuffer"==t&&(i=a.response),i?o(e.readFeatures(i,{extent:n,featureProjection:r}),e.readProjection(i)):s()}else s()},a.onerror=s,a.send()}(t,e,n,i,r,(function(t,e){a.addFeatures(t),void 0!==o&&o(t)}),s||E.c)}}class M extends o.a{constructor(t,e,n){super(t),this.feature=e,this.features=n}}class R extends g.a{constructor(t){super({attributions:(t=t||{}).attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:void 0===t.wrapX||t.wrapX}),this.on,this.once,this.un,this.loader_=E.c,this.format_=t.format,this.overlaps_=void 0===t.overlaps||t.overlaps,this.url_=t.url,void 0!==t.loader?this.loader_=t.loader:void 0!==this.url_&&(Object(k.a)(this.format_,7),this.loader_=I(this.url_,this.format_)),this.strategy_=void 0!==t.strategy?t.strategy:w;const e=void 0===t.useSpatialIndex||t.useSpatialIndex;let n,r;this.featuresRtree_=e?new d:null,this.loadedExtentsRtree_=new d,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,Array.isArray(t.features)?r=t.features:t.features&&(n=t.features,r=n.getArray()),e||void 0!==n||(n=new i.a(r)),void 0!==r&&this.addFeaturesInternal(r),void 0!==n&&this.bindFeaturesCollection_(n)}addFeature(t){this.addFeatureInternal(t),this.changed()}addFeatureInternal(t){const e=Object(h.b)(t);if(!this.addToIndex_(e,t))return void(this.featuresCollection_&&this.featuresCollection_.remove(t));this.setupChangeEvents_(e,t);const n=t.getGeometry();if(n){const e=n.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(e,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new M(p,t))}setupChangeEvents_(t,e){this.featureChangeKeys_[t]=[Object(C.a)(e,s.a.CHANGE,this.handleFeatureChange_,this),Object(C.a)(e,a.a.PROPERTYCHANGE,this.handleFeatureChange_,this)]}addToIndex_(t,e){let n=!0;const i=e.getId();return void 0!==i&&(i.toString()in this.idIndex_?n=!1:this.idIndex_[i.toString()]=e),n&&(Object(k.a)(!(t in this.uidIndex_),30),this.uidIndex_[t]=e),n}addFeatures(t){this.addFeaturesInternal(t),this.changed()}addFeaturesInternal(t){const e=[],n=[],i=[];for(let r=0,o=t.length;r<o;r++){const e=t[r],i=Object(h.b)(e);this.addToIndex_(i,e)&&n.push(e)}for(let r=0,o=n.length;r<o;r++){const t=n[r],o=Object(h.b)(t);this.setupChangeEvents_(o,t);const s=t.getGeometry();if(s){const n=s.getExtent();e.push(n),i.push(t)}else this.nullGeometryFeatures_[o]=t}if(this.featuresRtree_&&this.featuresRtree_.load(e,i),this.hasListener(p))for(let r=0,o=n.length;r<o;r++)this.dispatchEvent(new M(p,n[r]))}bindFeaturesCollection_(t){let e=!1;this.addEventListener(p,(function(n){e||(e=!0,t.push(n.feature),e=!1)})),this.addEventListener(m,(function(n){e||(e=!0,t.remove(n.feature),e=!1)})),t.addEventListener(r.a.ADD,function(t){e||(e=!0,this.addFeature(t.element),e=!1)}.bind(this)),t.addEventListener(r.a.REMOVE,function(t){e||(e=!0,this.removeFeature(t.element),e=!1)}.bind(this)),this.featuresCollection_=t}clear(t){if(t){for(const t in this.featureChangeKeys_){this.featureChangeKeys_[t].forEach(C.c)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const t=function(t){this.removeFeatureInternal(t)}.bind(this);this.featuresRtree_.forEach(t);for(const e in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[e])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const e=new M(y);this.dispatchEvent(e),this.changed()}forEachFeature(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureAtCoordinateDirect(t,e){const n=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(n,(function(n){return n.getGeometry().intersectsCoordinate(t)?e(n):void 0}))}forEachFeatureInExtent(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureIntersectingExtent(t,e){return this.forEachFeatureInExtent(t,(function(n){if(n.getGeometry().intersectsExtent(t)){const t=e(n);if(t)return t}}))}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),Object(f.b)(this.nullGeometryFeatures_)||Object(S.c)(t,Object.values(this.nullGeometryFeatures_))),t}getFeaturesAtCoordinate(t){const e=[];return this.forEachFeatureAtCoordinateDirect(t,(function(t){e.push(t)})),e}getFeaturesInExtent(t,e){if(this.featuresRtree_){if(!(e&&e.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(t);const n=Object(c.J)(t,e);return[].concat(...n.map(t=>this.featuresRtree_.getInExtent(t)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(t,e){const n=t[0],i=t[1];let r=null;const o=[NaN,NaN];let s=1/0;const a=[-1/0,-1/0,1/0,1/0];return e=e||E.b,this.featuresRtree_.forEachInExtent(a,(function(t){if(e(t)){const e=t.getGeometry(),l=s;if(s=e.closestPointXY(n,i,o,s),s<l){r=t;const e=Math.sqrt(s);a[0]=n-e,a[1]=i-e,a[2]=n+e,a[3]=i+e}}})),r}getExtent(t){return this.featuresRtree_.getExtent(t)}getFeatureById(t){const e=this.idIndex_[t.toString()];return void 0!==e?e:null}getFeatureByUid(t){const e=this.uidIndex_[t];return void 0!==e?e:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(t){const e=t.target,n=Object(h.b)(e),i=e.getGeometry();if(i){const t=i.getExtent();n in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[n],this.featuresRtree_&&this.featuresRtree_.insert(t,e)):this.featuresRtree_&&this.featuresRtree_.update(t,e)}else n in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[n]=e);const r=e.getId();if(void 0!==r){const t=r.toString();this.idIndex_[t]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[t]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[n]=e;this.changed(),this.dispatchEvent(new M(v,e))}hasFeature(t){const e=t.getId();return void 0!==e?e in this.idIndex_:Object(h.b)(t)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&Object(f.b)(this.nullGeometryFeatures_):!this.featuresCollection_||0===this.featuresCollection_.getLength()}loadFeatures(t,e,n){const i=this.loadedExtentsRtree_,r=this.strategy_(t,e,n);for(let o=0,s=r.length;o<s;++o){const t=r[o];i.forEachInExtent(t,(function(e){return Object(c.g)(e.extent,t)}))||(++this.loadingExtentsCount_,this.dispatchEvent(new M(_)),this.loader_.call(this,t,e,n,function(t){--this.loadingExtentsCount_,this.dispatchEvent(new M(b,void 0,t))}.bind(this),function(){--this.loadingExtentsCount_,this.dispatchEvent(new M(x))}.bind(this)),i.insert(t,{extent:t.slice()}))}this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(t){const e=this.loadedExtentsRtree_;let n;e.forEachInExtent(t,(function(e){if(Object(c.o)(e.extent,t))return n=e,!0})),n&&e.remove(n)}removeFeature(t){if(!t)return;const e=Object(h.b)(t);e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t);this.removeFeatureInternal(t)&&this.changed()}removeFeatureInternal(t){const e=Object(h.b)(t),n=this.featureChangeKeys_[e];if(!n)return;n.forEach(C.c),delete this.featureChangeKeys_[e];const i=t.getId();return void 0!==i&&delete this.idIndex_[i.toString()],delete this.uidIndex_[e],this.dispatchEvent(new M(m,t)),t}removeFromIdIndex_(t){let e=!1;for(const n in this.idIndex_)if(this.idIndex_[n]===t){delete this.idIndex_[n],e=!0;break}return e}setLoader(t){this.loader_=t}setUrl(t){Object(k.a)(this.format_,7),this.url_=t,this.setLoader(I(t,this.format_))}}e.a=R},function(t,e,n){"use strict";var i=n(10),r=n(86),o=n(11),s=n(2),a=n(6),l=n(5);var u=class{constructor(t,e,n,i,r,o){this.sourceProj_=t,this.targetProj_=e;let l={};const u=Object(a.j)(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){const e=t[0]+"/"+t[1];return l[e]||(l[e]=u(t)),l[e]},this.maxSourceExtent_=i,this.errorThresholdSquared_=r*r,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!i&&!!this.sourceProj_.getExtent()&&Object(s.E)(i)==Object(s.E)(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Object(s.E)(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Object(s.E)(this.targetProj_.getExtent()):null;const c=Object(s.C)(n),h=Object(s.D)(n),f=Object(s.v)(n),d=Object(s.u)(n),g=this.transformInv_(c),p=this.transformInv_(h),v=this.transformInv_(f),y=this.transformInv_(d),m=10+(o?Math.max(0,Math.ceil(Math.log2(Object(s.t)(n)/(o*o*256*256)))):0);if(this.addQuad_(c,h,f,d,g,p,v,y,m),this.wrapsXInSource_){let t=1/0;this.triangles_.forEach((function(e,n,i){t=Math.min(t,e.source[0][0],e.source[1][0],e.source[2][0])})),this.triangles_.forEach(function(e){if(Math.max(e.source[0][0],e.source[1][0],e.source[2][0])-t>this.sourceWorldWidth_/2){const n=[[e.source[0][0],e.source[0][1]],[e.source[1][0],e.source[1][1]],[e.source[2][0],e.source[2][1]]];n[0][0]-t>this.sourceWorldWidth_/2&&(n[0][0]-=this.sourceWorldWidth_),n[1][0]-t>this.sourceWorldWidth_/2&&(n[1][0]-=this.sourceWorldWidth_),n[2][0]-t>this.sourceWorldWidth_/2&&(n[2][0]-=this.sourceWorldWidth_);const i=Math.min(n[0][0],n[1][0],n[2][0]);Math.max(n[0][0],n[1][0],n[2][0])-i<this.sourceWorldWidth_/2&&(e.source=n)}}.bind(this))}l={}}addTriangle_(t,e,n,i,r,o){this.triangles_.push({source:[i,r,o],target:[t,e,n]})}addQuad_(t,e,n,i,r,o,a,u,c){const h=Object(s.b)([r,o,a,u]),f=this.sourceWorldWidth_?Object(s.E)(h)/this.sourceWorldWidth_:null,d=this.sourceWorldWidth_,g=this.sourceProj_.canWrapX()&&f>.5&&f<1;let p=!1;if(c>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const r=Object(s.b)([t,e,n,i]);p=Object(s.E)(r)/this.targetWorldWidth_>.25||p}!g&&this.sourceProj_.isGlobal()&&f&&(p=f>.25||p)}if(!p&&this.maxSourceExtent_&&isFinite(h[0])&&isFinite(h[1])&&isFinite(h[2])&&isFinite(h[3])&&!Object(s.F)(h,this.maxSourceExtent_))return;let v=0;if(!p&&(!isFinite(r[0])||!isFinite(r[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(u[0])||!isFinite(u[1])))if(c>0)p=!0;else if(v=(isFinite(r[0])&&isFinite(r[1])?0:8)+(isFinite(o[0])&&isFinite(o[1])?0:4)+(isFinite(a[0])&&isFinite(a[1])?0:2)+(isFinite(u[0])&&isFinite(u[1])?0:1),1!=v&&2!=v&&4!=v&&8!=v)return;if(c>0){if(!p){const e=[(t[0]+n[0])/2,(t[1]+n[1])/2],i=this.transformInv_(e);let o;if(g){o=(Object(l.e)(r[0],d)+Object(l.e)(a[0],d))/2-Object(l.e)(i[0],d)}else o=(r[0]+a[0])/2-i[0];const s=(r[1]+a[1])/2-i[1];p=o*o+s*s>this.errorThresholdSquared_}if(p){if(Math.abs(t[0]-n[0])<=Math.abs(t[1]-n[1])){const s=[(e[0]+n[0])/2,(e[1]+n[1])/2],l=this.transformInv_(s),h=[(i[0]+t[0])/2,(i[1]+t[1])/2],f=this.transformInv_(h);this.addQuad_(t,e,s,h,r,o,l,f,c-1),this.addQuad_(h,s,n,i,f,l,a,u,c-1)}else{const s=[(t[0]+e[0])/2,(t[1]+e[1])/2],l=this.transformInv_(s),h=[(n[0]+i[0])/2,(n[1]+i[1])/2],f=this.transformInv_(h);this.addQuad_(t,s,h,i,r,l,f,u,c-1),this.addQuad_(s,e,n,h,l,o,a,f,c-1)}return}}if(g){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}0==(11&v)&&this.addTriangle_(t,n,i,r,a,u),0==(14&v)&&this.addTriangle_(t,n,e,r,a,o),v&&(0==(13&v)&&this.addTriangle_(e,i,t,o,u,r),0==(7&v)&&this.addTriangle_(e,i,n,o,u,a))}calculateSourceExtent(){const t=Object(s.j)();return this.triangles_.forEach((function(e,n,i){const r=e.source;Object(s.q)(t,r[0]),Object(s.q)(t,r[1]),Object(s.q)(t,r[2])})),t}getTriangles(){return this.triangles_}},c=n(15);let h;const f=[];function d(t,e,n,i,r){t.beginPath(),t.moveTo(0,0),t.lineTo(e,n),t.lineTo(i,r),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(e,i)+1,Math.max(n,r)),t.restore()}function g(t,e){return Math.abs(t[4*e]-210)>2||Math.abs(t[4*e+3]-191.25)>2}function p(t,e,n,i){const r=Object(a.q)(n,e,t);let o=Object(a.i)(e,i,n);const l=e.getMetersPerUnit();void 0!==l&&(o*=l);const u=t.getMetersPerUnit();void 0!==u&&(o/=u);const c=t.getExtent();if(!c||Object(s.f)(c,r)){const e=Object(a.i)(t,o,r)/o;isFinite(e)&&e>0&&(o/=e)}return o}function v(t,e,n,i,r,o,a,u,p,v,y,m){const _=Object(c.a)(Math.round(n*t),Math.round(n*e),f);if(m||(_.imageSmoothingEnabled=!1),0===p.length)return _.canvas;function b(t){return Math.round(t*n)/n}_.scale(n,n),_.globalCompositeOperation="lighter";const x=Object(s.j)();p.forEach((function(t,e,n){Object(s.p)(x,t.extent)}));const E=Object(s.E)(x),w=Object(s.z)(x),k=Object(c.a)(Math.round(n*E/i),Math.round(n*w/i));m||(k.imageSmoothingEnabled=!1);const S=n/i;p.forEach((function(t,e,n){const i=t.extent[0]-x[0],r=-(t.extent[3]-x[3]),o=Object(s.E)(t.extent),a=Object(s.z)(t.extent);t.image.width>0&&t.image.height>0&&k.drawImage(t.image,v,v,t.image.width-2*v,t.image.height-2*v,i*S,r*S,o*S,a*S)}));const C=Object(s.C)(a);return u.getTriangles().forEach((function(t,e,r){const s=t.source,a=t.target;let u=s[0][0],c=s[0][1],f=s[1][0],p=s[1][1],v=s[2][0],y=s[2][1];const E=b((a[0][0]-C[0])/o),w=b(-(a[0][1]-C[1])/o),S=b((a[1][0]-C[0])/o),O=b(-(a[1][1]-C[1])/o),I=b((a[2][0]-C[0])/o),M=b(-(a[2][1]-C[1])/o),R=u,T=c;u=0,c=0,f-=R,p-=T,v-=R,y-=T;const P=[[f,p,0,0,S-E],[v,y,0,0,I-E],[0,0,f,p,O-w],[0,0,v,y,M-w]],L=Object(l.f)(P);if(L){if(_.save(),_.beginPath(),function(){if(void 0===h){const t=document.createElement("canvas").getContext("2d");t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",d(t,4,5,4,0),d(t,4,5,0,5);const e=t.getImageData(0,0,3,3).data;h=g(e,0)||g(e,4)||g(e,8)}return h}()||!m){_.moveTo(S,O);const t=4,e=E-S,n=w-O;for(let i=0;i<t;i++)_.lineTo(S+b((i+1)*e/t),O+b(i*n/(t-1))),i!=t-1&&_.lineTo(S+b((i+1)*e/t),O+b((i+1)*n/(t-1)));_.lineTo(I,M)}else _.moveTo(S,O),_.lineTo(E,w),_.lineTo(I,M);_.clip(),_.transform(L[0],L[2],L[1],L[3],E,w),_.translate(x[0]-R,x[3]-T),_.scale(i/n,-i/n),_.drawImage(k.canvas,0,0),_.restore()}})),y&&(_.save(),_.globalCompositeOperation="source-over",_.strokeStyle="black",_.lineWidth=1,u.getTriangles().forEach((function(t,e,n){const i=t.target,r=(i[0][0]-C[0])/o,s=-(i[0][1]-C[1])/o,a=(i[1][0]-C[0])/o,l=-(i[1][1]-C[1])/o,u=(i[2][0]-C[0])/o,c=-(i[2][1]-C[1])/o;_.beginPath(),_.moveTo(a,l),_.lineTo(r,s),_.lineTo(u,c),_.closePath(),_.stroke()})),_.restore()),_.canvas}var y=n(8);class m extends r.a{constructor(t,e,n,i,r,a,c,h,f,d,g,v){super(r,o.a.IDLE,{interpolate:!!v}),this.renderEdges_=void 0!==g&&g,this.pixelRatio_=c,this.gutter_=h,this.canvas_=null,this.sourceTileGrid_=e,this.targetTileGrid_=i,this.wrappedTileCoord_=a||r,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const y=i.getTileCoordExtent(this.wrappedTileCoord_),m=this.targetTileGrid_.getExtent();let _=this.sourceTileGrid_.getExtent();const b=m?Object(s.A)(y,m):y;if(0===Object(s.t)(b))return void(this.state=o.a.EMPTY);const x=t.getExtent();x&&(_=_?Object(s.A)(_,x):x);const E=i.getResolution(this.wrappedTileCoord_[0]),w=function(t,e,n,i){const r=Object(s.w)(n);let o=p(t,e,r,i);return(!isFinite(o)||o<=0)&&Object(s.s)(n,(function(n){return o=p(t,e,n,i),isFinite(o)&&o>0})),o}(t,n,b,E);if(!isFinite(w)||w<=0)return void(this.state=o.a.EMPTY);const k=void 0!==d?d:.5;if(this.triangulation_=new u(t,n,b,_,w*k,E),0===this.triangulation_.getTriangles().length)return void(this.state=o.a.EMPTY);this.sourceZ_=e.getZForResolution(w);let S=this.triangulation_.calculateSourceExtent();if(_&&(t.canWrapX()?(S[1]=Object(l.b)(S[1],_[1],_[3]),S[3]=Object(l.b)(S[3],_[1],_[3])):S=Object(s.A)(S,_)),Object(s.t)(S)){const t=e.getTileRangeForExtentAndZ(S,this.sourceZ_);for(let e=t.minX;e<=t.maxX;e++)for(let n=t.minY;n<=t.maxY;n++){const t=f(this.sourceZ_,e,n,c);t&&this.sourceTiles_.push(t)}0===this.sourceTiles_.length&&(this.state=o.a.EMPTY)}else this.state=o.a.EMPTY}getImage(){return this.canvas_}reproject_(){const t=[];if(this.sourceTiles_.forEach(function(e,n,i){e&&e.getState()==o.a.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===t.length)this.state=o.a.ERROR;else{const e=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(e),i="number"===typeof n?n:n[0],r="number"===typeof n?n:n[1],s=this.targetTileGrid_.getResolution(e),a=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=v(i,r,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),s,l,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=o.a.LOADED}this.changed()}load(){if(this.state==o.a.IDLE){this.state=o.a.LOADING,this.changed();let t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(e,n,r){const s=e.getState();if(s==o.a.IDLE||s==o.a.LOADING){t++;const n=Object(y.a)(e,i.a.CHANGE,(function(i){const r=e.getState();r!=o.a.LOADED&&r!=o.a.ERROR&&r!=o.a.EMPTY||(Object(y.c)(n),t--,0===t&&(this.unlistenSources_(),this.reproject_()))}),this);this.sourcesListenerKeys_.push(n)}}.bind(this)),0===t?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach((function(t,e,n){t.getState()==o.a.IDLE&&t.load()}))}}unlistenSources_(){this.sourcesListenerKeys_.forEach(y.c),this.sourcesListenerKeys_=null}release(){this.canvas_&&(Object(c.d)(this.canvas_.getContext("2d")),f.push(this.canvas_),this.canvas_=null),super.release()}}e.a=m},function(t,e,n){"use strict";!function t(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE){0;try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}}(),t.exports=n(101)},function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return o}));var i=n(0);function r(t){return Object(i.a)({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224l0 32 0 160c0 17.7 14.3 32 32 32l32 0c17.7 0 32-14.3 32-32l0-88.2c9.9 6.6 20.6 12 32 16.1l0 24.2c0 8.8 7.2 16 16 16s16-7.2 16-16l0-16.9c5.3 .6 10.6 .9 16 .9s10.7-.3 16-.9l0 16.9c0 8.8 7.2 16 16 16s16-7.2 16-16l0-24.2c11.4-4 22.1-9.4 32-16.1l0 88.2c0 17.7 14.3 32 32 32l32 0c17.7 0 32-14.3 32-32l0-160 32 32 0 49.5c0 9.5 2.8 18.7 8.1 26.6L530 427c8.8 13.1 23.5 21 39.3 21c22.5 0 41.9-15.9 46.3-38l20.3-101.6c2.6-13-.3-26.5-8-37.3l-3.9-5.5 0-81.6c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 14.4-52.9-74.1C496 86.5 452.4 64 405.9 64L272 64l-16 0-64 0-48 0C77.7 64 24 117.7 24 184l0 54C9.4 249.8 0 267.8 0 288l0 17.6c0 8 6.4 14.4 14.4 14.4C46.2 320 72 294.2 72 262.4l0-6.4 0-32 0-40c0-24.3 12.1-45.8 30.5-58.9C98.3 135.9 96 147.7 96 160l0 64zM560 336a16 16 0 1 1 32 0 16 16 0 1 1 -32 0zM166.6 166.6c-4.2-4.2-6.6-10-6.6-16c0-12.5 10.1-22.6 22.6-22.6l178.7 0c12.5 0 22.6 10.1 22.6 22.6c0 6-2.4 11.8-6.6 16l-23.4 23.4C332.2 211.8 302.7 224 272 224s-60.2-12.2-81.9-33.9l-23.4-23.4z"},child:[]}]})(t)}function o(t){return Object(i.a)({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M0 96C0 60.7 28.7 32 64 32l384 0c35.3 0 64 28.7 64 64l0 320c0 35.3-28.7 64-64 64L64 480c-35.3 0-64-28.7-64-64L0 96zM48 368l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0c-8.8 0-16 7.2-16 16zm368-16c-8.8 0-16 7.2-16 16l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0zM48 240l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0c-8.8 0-16 7.2-16 16zm368-16c-8.8 0-16 7.2-16 16l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0zM48 112l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16L64 96c-8.8 0-16 7.2-16 16zM416 96c-8.8 0-16 7.2-16 16l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0zM160 128l0 64c0 17.7 14.3 32 32 32l128 0c17.7 0 32-14.3 32-32l0-64c0-17.7-14.3-32-32-32L192 96c-17.7 0-32 14.3-32 32zm32 160c-17.7 0-32 14.3-32 32l0 64c0 17.7 14.3 32 32 32l128 0c17.7 0 32-14.3 32-32l0-64c0-17.7-14.3-32-32-32l-128 0z"},child:[]}]})(t)}},function(t,e,n){"use strict";const i={1:"The view center is not defined",2:"The view resolution is not defined",3:"The view rotation is not defined",4:"`image` and `src` cannot be provided at the same time",5:"`imgSize` must be set when `image` is provided",7:"`format` must be set when `url` is set",8:"Unknown `serverType` configured",9:"`url` must be configured or set using `#setUrl()`",10:"The default `geometryFunction` can only handle `Point` geometries",11:"`options.featureTypes` must be an Array",12:"`options.geometryName` must also be provided when `options.bbox` is set",13:"Invalid corner",14:"Invalid color",15:"Tried to get a value for a key that does not exist in the cache",16:"Tried to set a value for a key that is used already",17:"`resolutions` must be sorted in descending order",18:"Either `origin` or `origins` must be configured, never both",19:"Number of `tileSizes` and `resolutions` must be equal",20:"Number of `origins` and `resolutions` must be equal",22:"Either `tileSize` or `tileSizes` must be configured, never both",24:"Invalid extent or geometry provided as `geometry`",25:"Cannot fit empty extent provided as `geometry`",26:"Features must have an id set",27:"Features must have an id set",28:'`renderMode` must be `"hybrid"` or `"vector"`',30:"The passed `feature` was already added to the source",31:"Tried to enqueue an `element` that was already added to the queue",32:"Transformation matrix cannot be inverted",33:"Invalid units",34:"Invalid geometry layout",36:"Unknown SRS type",37:"Unknown geometry type found",38:"`styleMapValue` has an unknown type",39:"Unknown geometry type",40:"Expected `feature` to have a geometry",41:"Expected an `ol/style/Style` or an array of `ol/style/Style.js`",42:"Question unknown, the answer is 42",43:"Expected `layers` to be an array or a `Collection`",47:"Expected `controls` to be an array or an `ol/Collection`",48:"Expected `interactions` to be an array or an `ol/Collection`",49:"Expected `overlays` to be an array or an `ol/Collection`",50:"`options.featureTypes` should be an Array",51:"Either `url` or `tileJSON` options must be provided",52:"Unknown `serverType` configured",53:"Unknown `tierSizeCalculation` configured",55:"The {-y} placeholder requires a tile grid with extent",56:"mapBrowserEvent must originate from a pointer event",57:"At least 2 conditions are required",59:"Invalid command found in the PBF",60:"Missing or invalid `size`",61:"Cannot determine IIIF Image API version from provided image information JSON",62:"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`",64:"Layer opacity must be a number",66:"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has not been enabled. This is done by providing adequate shaders using the `hitVertexShader` and `hitFragmentShader` properties of `WebGLPointsLayerRenderer`",67:"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both",68:"A VectorTile source can only be rendered if it has a projection compatible with the view projection"};class r extends Error{constructor(t){const e=i[t];super(e),this.code=t,this.name="AssertionError",this.message=e}}e.a=r},function(t,e,n){"use strict";var i=n(48),r=n(10),o=n(8);class s extends i.a{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(r.a.CHANGE)}getRevision(){return this.revision_}onInternal(t,e){if(Array.isArray(t)){const n=t.length,i=new Array(n);for(let r=0;r<n;++r)i[r]=Object(o.a)(this,t[r],e);return i}return Object(o.a)(this,t,e)}onceInternal(t,e){let n;if(Array.isArray(t)){const i=t.length;n=new Array(i);for(let r=0;r<i;++r)n[r]=Object(o.b)(this,t[r],e)}else n=Object(o.b)(this,t,e);return e.ol_key=n,n}unInternal(t,e){const n=e.ol_key;if(n)!function(t){if(Array.isArray(t))for(let e=0,n=t.length;e<n;++e)Object(o.c)(t[e]);else Object(o.c)(t)}(n);else if(Array.isArray(t))for(let i=0,r=t.length;i<r;++i)this.removeEventListener(t[i],e);else this.removeEventListener(t,e)}}s.prototype.on,s.prototype.once,s.prototype.un,e.a=s},function(t,e,n){"use strict";var i=n(24),r=n(3),o=n(6);class s extends i.a{constructor(t){super(),this.projection=Object(o.h)(t.projection),this.attributions_=a(t.attributions),this.attributionsCollapsible_=void 0===t.attributionsCollapsible||t.attributionsCollapsible,this.loading=!1,this.state_=void 0!==t.state?t.state:"ready",this.wrapX_=void 0!==t.wrapX&&t.wrapX,this.interpolate_=!!t.interpolate,this.viewResolver=null,this.viewRejector=null;const e=this;this.viewPromise_=new Promise((function(t,n){e.viewResolver=t,e.viewRejector=n}))}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(){return Object(r.a)()}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(t){this.attributions_=a(t),this.changed()}setState(t){this.state_=t,this.changed()}}function a(t){return t?Array.isArray(t)?function(e){return t}:"function"===typeof t?t:function(e){return[t]}:null}e.a=s},function(t,e,n){t.exports=function(){"use strict";function t(t,i,r,o,s){!function t(n,i,r,o,s){for(;o>r;){if(o-r>600){var a=o-r+1,l=i-r+1,u=Math.log(a),c=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*c*(a-c)/a)*(l-a/2<0?-1:1);t(n,i,Math.max(r,Math.floor(i-l*c/a+h)),Math.min(o,Math.floor(i+(a-l)*c/a+h)),s)}var f=n[i],d=r,g=o;for(e(n,r,i),s(n[o],f)>0&&e(n,r,o);d<g;){for(e(n,d,g),d++,g--;s(n[d],f)<0;)d++;for(;s(n[g],f)>0;)g--}0===s(n[r],f)?e(n,r,g):e(n,++g,o),g<=i&&(r=g+1),i<=g&&(o=g-1)}}(t,i,r||0,o||t.length-1,s||n)}function e(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function n(t,e){return t<e?-1:t>e?1:0}var i=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function r(t,e,n){if(!n)return e.indexOf(t);for(var i=0;i<e.length;i++)if(n(t,e[i]))return i;return-1}function o(t,e){s(t,0,t.children.length,e,t)}function s(t,e,n,i,r){r||(r=g(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var o=e;o<n;o++){var s=t.children[o];a(r,t.leaf?i(s):s)}return r}function a(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function l(t,e){return t.minX-e.minX}function u(t,e){return t.minY-e.minY}function c(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function h(t){return t.maxX-t.minX+(t.maxY-t.minY)}function f(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function d(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function g(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function p(e,n,i,r,o){for(var s=[n,i];s.length;)if(!((i=s.pop())-(n=s.pop())<=r)){var a=n+Math.ceil((i-n)/r/2)*r;t(e,a,n,i,o),s.push(n,a,a,i)}}return i.prototype.all=function(){return this._all(this.data,[])},i.prototype.search=function(t){var e=this.data,n=[];if(!d(t,e))return n;for(var i=this.toBBox,r=[];e;){for(var o=0;o<e.children.length;o++){var s=e.children[o],a=e.leaf?i(s):s;d(t,a)&&(e.leaf?n.push(s):f(t,a)?this._all(s,n):r.push(s))}e=r.pop()}return n},i.prototype.collides=function(t){var e=this.data;if(!d(t,e))return!1;for(var n=[];e;){for(var i=0;i<e.children.length;i++){var r=e.children[i],o=e.leaf?this.toBBox(r):r;if(d(t,o)){if(e.leaf||f(t,o))return!0;n.push(r)}}e=n.pop()}return!1},i.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var i=this.data;this.data=n,n=i}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},i.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},i.prototype.clear=function(){return this.data=g([]),this},i.prototype.remove=function(t,e){if(!t)return this;for(var n,i,o,s=this.data,a=this.toBBox(t),l=[],u=[];s||l.length;){if(s||(s=l.pop(),i=l[l.length-1],n=u.pop(),o=!0),s.leaf){var c=r(t,s.children,e);if(-1!==c)return s.children.splice(c,1),l.push(s),this._condense(l),this}o||s.leaf||!f(s,a)?i?(n++,s=i.children[n],o=!1):s=null:(l.push(s),u.push(n),n=0,i=s,s=s.children[0])}return this},i.prototype.toBBox=function(t){return t},i.prototype.compareMinX=function(t,e){return t.minX-e.minX},i.prototype.compareMinY=function(t,e){return t.minY-e.minY},i.prototype.toJSON=function(){return this.data},i.prototype.fromJSON=function(t){return this.data=t,this},i.prototype._all=function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},i.prototype._build=function(t,e,n,i){var r,s=n-e+1,a=this._maxEntries;if(s<=a)return o(r=g(t.slice(e,n+1)),this.toBBox),r;i||(i=Math.ceil(Math.log(s)/Math.log(a)),a=Math.ceil(s/Math.pow(a,i-1))),(r=g([])).leaf=!1,r.height=i;var l=Math.ceil(s/a),u=l*Math.ceil(Math.sqrt(a));p(t,e,n,u,this.compareMinX);for(var c=e;c<=n;c+=u){var h=Math.min(c+u-1,n);p(t,c,h,l,this.compareMinY);for(var f=c;f<=h;f+=l){var d=Math.min(f+l-1,h);r.children.push(this._build(t,f,d,i-1))}}return o(r,this.toBBox),r},i.prototype._chooseSubtree=function(t,e,n,i){for(;i.push(e),!e.leaf&&i.length-1!==n;){for(var r=1/0,o=1/0,s=void 0,a=0;a<e.children.length;a++){var l=e.children[a],u=c(l),h=(f=t,d=l,(Math.max(d.maxX,f.maxX)-Math.min(d.minX,f.minX))*(Math.max(d.maxY,f.maxY)-Math.min(d.minY,f.minY))-u);h<o?(o=h,r=u<r?u:r,s=l):h===o&&u<r&&(r=u,s=l)}e=s||e.children[0]}var f,d;return e},i.prototype._insert=function(t,e,n){var i=n?t:this.toBBox(t),r=[],o=this._chooseSubtree(i,this.data,e,r);for(o.children.push(t),a(o,i);e>=0&&r[e].children.length>this._maxEntries;)this._split(r,e),e--;this._adjustParentBBoxes(i,r,e)},i.prototype._split=function(t,e){var n=t[e],i=n.children.length,r=this._minEntries;this._chooseSplitAxis(n,r,i);var s=this._chooseSplitIndex(n,r,i),a=g(n.children.splice(s,n.children.length-s));a.height=n.height,a.leaf=n.leaf,o(n,this.toBBox),o(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(n,a)},i.prototype._splitRoot=function(t,e){this.data=g([t,e]),this.data.height=t.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},i.prototype._chooseSplitIndex=function(t,e,n){for(var i,r,o,a,l,u,h,f=1/0,d=1/0,g=e;g<=n-e;g++){var p=s(t,0,g,this.toBBox),v=s(t,g,n,this.toBBox),y=(r=p,o=v,a=Math.max(r.minX,o.minX),l=Math.max(r.minY,o.minY),u=Math.min(r.maxX,o.maxX),h=Math.min(r.maxY,o.maxY),Math.max(0,u-a)*Math.max(0,h-l)),m=c(p)+c(v);y<f?(f=y,i=g,d=m<d?m:d):y===f&&m<d&&(d=m,i=g)}return i||n-e},i.prototype._chooseSplitAxis=function(t,e,n){var i=t.leaf?this.compareMinX:l,r=t.leaf?this.compareMinY:u;this._allDistMargin(t,e,n,i)<this._allDistMargin(t,e,n,r)&&t.children.sort(i)},i.prototype._allDistMargin=function(t,e,n,i){t.children.sort(i);for(var r=this.toBBox,o=s(t,0,e,r),l=s(t,n-e,n,r),u=h(o)+h(l),c=e;c<n-e;c++){var f=t.children[c];a(o,t.leaf?r(f):f),u+=h(o)}for(var d=n-e-1;d>=e;d--){var g=t.children[d];a(l,t.leaf?r(g):g),u+=h(l)}return u},i.prototype._adjustParentBBoxes=function(t,e,n){for(var i=n;i>=0;i--)a(e[i],t)},i.prototype._condense=function(t){for(var e=t.length-1,n=void 0;e>=0;e--)0===t[e].children.length?e>0?(n=t[e-1].children).splice(n.indexOf(t[e]),1):this.clear():o(t[e],this.toBBox)},i}()},function(t,e,n){"use strict";var i=n(24),r=n(3),o=n(14),s=n(2),a=n(6),l=n(16),u=n(33);const c=Object(o.c)();class h extends i.a{constructor(){super(),this.extent_=Object(s.j)(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=Object(l.d)((function(t,e,n){if(!n)return this.getSimplifiedGeometry(e);const i=this.clone();return i.applyTransform(n),i.getSimplifiedGeometry(e)}))}simplifyTransformed(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)}clone(){return Object(r.a)()}closestPointXY(t,e,n,i){return Object(r.a)()}containsXY(t,e){const n=this.getClosestPoint([t,e]);return n[0]===t&&n[1]===e}getClosestPoint(t,e){return e=e||[NaN,NaN],this.closestPointXY(t[0],t[1],e,1/0),e}intersectsCoordinate(t){return this.containsXY(t[0],t[1])}computeExtent(t){return Object(r.a)()}getExtent(t){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&Object(s.l)(t),this.extentRevision_=this.getRevision()}return Object(s.I)(this.extent_,t)}rotate(t,e){Object(r.a)()}scale(t,e,n){Object(r.a)()}simplify(t){return this.getSimplifiedGeometry(t*t)}getSimplifiedGeometry(t){return Object(r.a)()}getType(){return Object(r.a)()}applyTransform(t){Object(r.a)()}intersectsExtent(t){return Object(r.a)()}translate(t,e){Object(r.a)()}transform(t,e){const n=Object(a.h)(t),i="tile-pixels"==n.getUnits()?function(t,i,r){const l=n.getExtent(),h=n.getWorldExtent(),f=Object(s.z)(h)/Object(s.z)(l);return Object(o.b)(c,h[0],h[3],f,-f,0,0,0),Object(u.c)(t,0,t.length,r,c,i),Object(a.j)(n,e)(t,i,r)}:Object(a.j)(n,e);return this.applyTransform(i),this}}e.a=h},function(t,e,n){"use strict";function i(t,e,n,i,r){let o;for(e+=i;e<n;e+=i)if(o=r(t.slice(e-i,e),t.slice(e,e+i)),o)return o;return!1}n.d(e,"a",(function(){return i}))},function(t,e,n){"use strict";function i(t,e,n,i){let r=t[e],o=t[e+1],s=0;for(let a=e+i;a<n;a+=i){const e=t[a],n=t[a+1];s+=Math.sqrt((e-r)*(e-r)+(n-o)*(n-o)),r=e,o=n}return s}n.d(e,"a",(function(){return i}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return s}));var i=n(43),r=n(13);function o(t,e,n,o,s,a,l){let u,c,h,f,d,g,p;const v=s[a+1],y=[];for(let i=0,r=n.length;i<r;++i){const r=n[i];for(f=t[r-o],g=t[r-o+1],u=e;u<r;u+=o)d=t[u],p=t[u+1],(v<=g&&p<=v||g<=v&&v<=p)&&(h=(v-g)/(p-g)*(d-f)+f,y.push(h)),f=d,g=p}let m=NaN,_=-1/0;for(y.sort(r.f),f=y[0],u=1,c=y.length;u<c;++u){d=y[u];const r=Math.abs(d-f);r>_&&(h=(f+d)/2,Object(i.c)(t,e,n,o,h,v)&&(m=h,_=r)),f=d}return isNaN(m)&&(m=s[a]),l?(l.push(m,v,_),l):[m,v,_]}function s(t,e,n,i,r){let s=[];for(let a=0,l=n.length;a<l;++a){const l=n[a];s=o(t,e,l,i,r,2*a,s),e=l[l.length-1]}return s}},function(t,e,n){"use strict";var i=n(24),r=n(19),o=n(3),s=n(12),a=n(5);class l extends i.a{constructor(t){super(),this.on,this.once,this.un,this.background_=t.background;const e=Object.assign({},t);"object"===typeof t.properties&&(delete e.properties,Object.assign(e,t.properties)),e[r.a.OPACITY]=void 0!==t.opacity?t.opacity:1,Object(s.a)("number"===typeof e[r.a.OPACITY],64),e[r.a.VISIBLE]=void 0===t.visible||t.visible,e[r.a.Z_INDEX]=t.zIndex,e[r.a.MAX_RESOLUTION]=void 0!==t.maxResolution?t.maxResolution:1/0,e[r.a.MIN_RESOLUTION]=void 0!==t.minResolution?t.minResolution:0,e[r.a.MIN_ZOOM]=void 0!==t.minZoom?t.minZoom:-1/0,e[r.a.MAX_ZOOM]=void 0!==t.maxZoom?t.maxZoom:1/0,this.className_=void 0!==e.className?e.className:"ol-layer",delete e.className,this.setProperties(e),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(t){const e=this.state_||{layer:this,managed:void 0===t||t},n=this.getZIndex();return e.opacity=Object(a.b)(Math.round(100*this.getOpacity())/100,0,1),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=void 0!==n||e.managed?n:1/0,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e}getLayersArray(t){return Object(o.a)()}getLayerStatesArray(t){return Object(o.a)()}getExtent(){return this.get(r.a.EXTENT)}getMaxResolution(){return this.get(r.a.MAX_RESOLUTION)}getMinResolution(){return this.get(r.a.MIN_RESOLUTION)}getMinZoom(){return this.get(r.a.MIN_ZOOM)}getMaxZoom(){return this.get(r.a.MAX_ZOOM)}getOpacity(){return this.get(r.a.OPACITY)}getSourceState(){return Object(o.a)()}getVisible(){return this.get(r.a.VISIBLE)}getZIndex(){return this.get(r.a.Z_INDEX)}setBackground(t){this.background_=t,this.changed()}setExtent(t){this.set(r.a.EXTENT,t)}setMaxResolution(t){this.set(r.a.MAX_RESOLUTION,t)}setMinResolution(t){this.set(r.a.MIN_RESOLUTION,t)}setMaxZoom(t){this.set(r.a.MAX_ZOOM,t)}setMinZoom(t){this.set(r.a.MIN_ZOOM,t)}setOpacity(t){Object(s.a)("number"===typeof t,64),this.set(r.a.OPACITY,t)}setVisible(t){this.set(r.a.VISIBLE,t)}setZIndex(t){this.set(r.a.Z_INDEX,t)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}e.a=l},function(t,e,n){"use strict";var i=n(18),r=n(83),o=n(41),s=n(39),a=n(15),l=n(9);class u extends r.a{constructor(t){super({opacity:1,rotateWithView:void 0!==t.rotateWithView&&t.rotateWithView,rotation:void 0!==t.rotation?t.rotation:0,scale:void 0!==t.scale?t.scale:1,displacement:void 0!==t.displacement?t.displacement:[0,0],declutterMode:t.declutterMode}),this.canvas_=void 0,this.hitDetectionCanvas_=null,this.fill_=void 0!==t.fill?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius_=void 0!==t.radius?t.radius:t.radius1,this.radius2_=t.radius2,this.angle_=void 0!==t.angle?t.angle:0,this.stroke_=void 0!==t.stroke?t.stroke:null,this.size_=null,this.renderOptions_=null,this.render()}clone(){const t=this.getScale(),e=new u({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}getAnchor(){const t=this.size_;if(!t)return null;const e=this.getDisplacement(),n=this.getScaleArray();return[t[0]/2-e[0]/n[0],t[1]/2+e[1]/n[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(t){this.fill_=t,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_}getImage(t){let e=this.canvas_[t];if(!e){const n=this.renderOptions_,i=Object(a.a)(n.size*t,n.size*t);this.draw_(n,i,t),e=i.canvas,this.canvas_[t]=e}return e}getPixelRatio(t){return t}getImageSize(){return this.size_}getImageState(){return i.a.LOADED}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t,this.render()}listenImageChange(t){}load(){}unlistenImageChange(t){}calculateLineJoinSize_(t,e,n){if(0===e||this.points_===1/0||"bevel"!==t&&"miter"!==t)return e;let i=this.radius_,r=void 0===this.radius2_?i:this.radius2_;if(i<r){const t=i;i=r,r=t}const o=void 0===this.radius2_?this.points_:2*this.points_,s=2*Math.PI/o,a=r*Math.sin(s),l=i-Math.sqrt(r*r-a*a),u=Math.sqrt(a*a+l*l),c=u/a;if("miter"===t&&c<=n)return c*e;const h=e/2/c,f=e/2*(l/u),d=Math.sqrt((i+h)*(i+h)+f*f)-i;if(void 0===this.radius2_||"bevel"===t)return 2*d;const g=i*Math.sin(s),p=r-Math.sqrt(i*i-g*g),v=Math.sqrt(g*g+p*p)/g;if(v<=n){const t=v*e/2-r-i;return 2*Math.max(d,t)}return 2*d}createRenderOptions(){let t,e=l.g,n=0,i=null,r=0,o=0;this.stroke_&&(t=this.stroke_.getColor(),null===t&&(t=l.k),t=Object(s.a)(t),o=this.stroke_.getWidth(),void 0===o&&(o=l.h),i=this.stroke_.getLineDash(),r=this.stroke_.getLineDashOffset(),e=this.stroke_.getLineJoin(),void 0===e&&(e=l.g),n=this.stroke_.getMiterLimit(),void 0===n&&(n=l.i));const a=this.calculateLineJoinSize_(e,o,n),u=Math.max(this.radius_,this.radius2_||0);return{strokeStyle:t,strokeWidth:o,size:Math.ceil(2*u+a),lineDash:i,lineDashOffset:r,lineJoin:e,miterLimit:n}}render(){this.renderOptions_=this.createRenderOptions();const t=this.renderOptions_.size;this.canvas_={},this.size_=[t,t]}draw_(t,e,n){if(e.scale(n,n),e.translate(t.size/2,t.size/2),this.createPath_(e),this.fill_){let t=this.fill_.getColor();null===t&&(t=l.b),e.fillStyle=Object(s.a)(t),e.fill()}this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}createHitDetectionCanvas_(t){if(this.fill_){let e=this.fill_.getColor(),n=0;if("string"===typeof e&&(e=Object(o.a)(e)),null===e?n=1:Array.isArray(e)&&(n=4===e.length?e[3]:1),0===n){const e=Object(a.a)(t.size,t.size);this.hitDetectionCanvas_=e.canvas,this.drawHitDetectionCanvas_(t,e)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))}createPath_(t){let e=this.points_;const n=this.radius_;if(e===1/0)t.arc(0,0,n,0,2*Math.PI);else{const i=void 0===this.radius2_?n:this.radius2_;void 0!==this.radius2_&&(e*=2);const r=this.angle_-Math.PI/2,o=2*Math.PI/e;for(let s=0;s<e;s++){const e=r+s*o,a=s%2===0?n:i;t.lineTo(a*Math.cos(e),a*Math.sin(e))}t.closePath()}}drawHitDetectionCanvas_(t,e){e.translate(t.size/2,t.size/2),this.createPath_(e),e.fillStyle=l.b,e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}}e.a=u},function(t,e,n){"use strict";var i=n(3),r=n(22);class o{constructor(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=Object(r.c)(t.scale),this.displacement_=t.displacement,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new o({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return Object(i.a)()}getImage(t){return Object(i.a)()}getHitDetectionImage(){return Object(i.a)()}getPixelRatio(t){return 1}getImageState(){return Object(i.a)()}getImageSize(){return Object(i.a)()}getOrigin(){return Object(i.a)()}getSize(){return Object(i.a)()}setDisplacement(t){this.displacement_=t}setOpacity(t){this.opacity_=t}setRotateWithView(t){this.rotateWithView_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=Object(r.c)(t)}listenImageChange(t){Object(i.a)()}load(){Object(i.a)()}unlistenImageChange(t){Object(i.a)()}}e.a=o},function(t,e,n){"use strict";var i=n(27);class r extends i.a{constructor(t,e,n,i){super(t),this.inversePixelTransform=e,this.frameState=n,this.context=i}}e.a=r},function(t,e,n){"use strict";var i=n(86),r=n(11),o=n(15),s=n(87);class a extends i.a{constructor(t,e,n,i,r,o){super(t,e,o),this.crossOrigin_=i,this.src_=n,this.key=n,this.image_=new Image,null!==i&&(this.image_.crossOrigin=i),this.unlisten_=null,this.tileLoadFunction_=r}getImage(){return this.image_}setImage(t){this.image_=t,this.state=r.a.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=r.a.ERROR,this.unlistenImage_(),this.image_=function(){const t=Object(o.a)(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas}(),this.changed()}handleImageLoad_(){const t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=r.a.LOADED:this.state=r.a.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==r.a.ERROR&&(this.state=r.a.IDLE,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==r.a.IDLE&&(this.state=r.a.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=Object(s.a)(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}e.a=a},function(t,e,n){"use strict";var i=n(48),r=n(10),o=n(11),s=n(3),a=n(35);class l extends i.a{constructor(t,e,n){super(),n=n||{},this.tileCoord=t,this.state=e,this.interimTile=null,this.key="",this.transition_=void 0===n.transition?250:n.transition,this.transitionStarts_={},this.interpolate=!!n.interpolate}changed(){this.dispatchEvent(r.a.CHANGE)}release(){this.state===o.a.ERROR&&this.setState(o.a.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){if(!this.interimTile)return this;let t=this.interimTile;do{if(t.getState()==o.a.LOADED)return this.transition_=0,t;t=t.interimTile}while(t);return this}refreshInterimChain(){if(!this.interimTile)return;let t=this.interimTile,e=this;do{if(t.getState()==o.a.LOADED){t.interimTile=null;break}t.getState()==o.a.LOADING?e=t:t.getState()==o.a.IDLE?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(t){if(this.state!==o.a.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()}load(){Object(s.a)()}getAlpha(t,e){if(!this.transition_)return 1;let n=this.transitionStarts_[t];if(n){if(-1===n)return 1}else n=e,this.transitionStarts_[t]=n;const i=e-n+1e3/60;return i>=this.transition_?1:Object(a.a)(i/this.transition_)}inTransition(t){return!!this.transition_&&-1!==this.transitionStarts_[t]}endTransition(t){this.transition_&&(this.transitionStarts_[t]=-1)}}e.a=l},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n(10),r=n(48);n(3);r.a;n(18);var o=n(28),s=(n(2),n(8));function a(t,e,n){const r=t;let a=!0,l=!1,u=!1;const c=[Object(s.b)(r,i.a.LOAD,(function(){u=!0,l||e()}))];return r.src&&o.c?(l=!0,r.decode().then((function(){a&&e()})).catch((function(t){a&&(u?e():n())}))):c.push(Object(s.b)(r,i.a.ERROR,n)),function(){a=!1,c.forEach(s.c)}}},function(t,e,n){!function(t){"use strict";function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function n(t){if(Array.isArray(t))return t}function i(t,e,n){return e=u(e),function(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return!!t}()?Reflect.construct(e,n||[],u(t).constructor):e.apply(t,n))}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,v(i.key),i)}}function s(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function a(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=m(t))||e){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){a=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function l(t,e,n){return(e=v(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d(t,e)}function h(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function f(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(t,e){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function g(t,e){return n(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,o,s,a=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=o.call(n)).done)&&(a.push(i.value),a.length!==e);l=!0);}catch(t){u=!0,r=t}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw r}}return a}}(t,e)||m(t,e)||f()}function p(t){return function(t){if(Array.isArray(t))return e(t)}(t)||h(t)||m(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t,"string");return"symbol"==typeof e?e:e+""}function y(t){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function m(t,n){if(t){if("string"==typeof t)return e(t,n);var i={}.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?e(t,n):void 0}}var _=6371008.8,b={centimeters:100*_,centimetres:100*_,degrees:360/(2*Math.PI),feet:3.28084*_,inches:39.37*_,kilometers:_/1e3,kilometres:_/1e3,meters:_,metres:_,miles:_/1609.344,millimeters:1e3*_,millimetres:1e3*_,nauticalmiles:_/1852,radians:1,yards:1.0936*_},x={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,nauticalmiles:2.9155334959812285e-7,millimeters:1e6,millimetres:1e6,yards:1.195990046};function E(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={type:"Feature"};return(0===n.id||n.id)&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.properties=e||{},i.geometry=t,i}function w(t,e){switch(t){case"Point":return k(e).geometry;case"LineString":return I(e).geometry;case"Polygon":return C(e).geometry;case"MultiPoint":return P(e).geometry;case"MultiLineString":return T(e).geometry;case"MultiPolygon":return L(e).geometry;default:throw new Error(t+" is invalid")}}function k(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!U(t[0])||!U(t[1]))throw new Error("coordinates must contain numbers");return E({type:"Point",coordinates:t},e,n)}function S(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return R(t.map((function(t){return k(t,e)})),n)}function C(t,e){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a(t);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(o[o.length-1].length!==o[0].length)throw new Error("First and last Position are not equivalent.");for(var s=0;s<o[o.length-1].length;s++)if(o[o.length-1][s]!==o[0][s])throw new Error("First and last Position are not equivalent.")}}catch(t){r.e(t)}finally{r.f()}return E({type:"Polygon",coordinates:t},e,i)}function O(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return R(t.map((function(t){return C(t,e)})),n)}function I(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t.length<2)throw new Error("coordinates must be an array of two or more positions");return E({type:"LineString",coordinates:t},e,n)}function M(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return R(t.map((function(t){return I(t,e)})),n)}function R(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function T(t,e){return E({type:"MultiLineString",coordinates:t},e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}function P(t,e){return E({type:"MultiPoint",coordinates:t},e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}function L(t,e){return E({type:"MultiPolygon",coordinates:t},e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}function N(t,e){return E({type:"GeometryCollection",geometries:t},e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}function A(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n}function j(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"kilometers",n=b[e];if(!n)throw new Error(e+" units is invalid");return t*n}function D(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"kilometers",n=b[e];if(!n)throw new Error(e+" units is invalid");return t/n}function F(t,e){return B(D(t,e))}function z(t){var e=t%360;return e<0&&(e+=360),e}function G(t){return(t%=360)>180?t-360:t<-180?t+360:t}function B(t){return t%(2*Math.PI)*180/Math.PI}function V(t){return t%360*Math.PI/180}function Y(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"kilometers",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"kilometers";if(!(t>=0))throw new Error("length must be a positive number");return j(D(t,e),n)}function q(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"meters",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"kilometers";if(!(t>=0))throw new Error("area must be a positive number");var i=x[e];if(!i)throw new Error("invalid original units");var r=x[n];if(!r)throw new Error("invalid final units");return t/i*r}function U(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function X(t){return null!==t&&"object"===y(t)&&!Array.isArray(t)}function W(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!U(t))throw new Error("bbox must only contain numbers")}))}function H(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(y(t)))throw new Error("id must be a number or a string")}var Z=Object.freeze({__proto__:null,areaFactors:x,azimuthToBearing:G,bearingToAzimuth:z,convertArea:q,convertLength:Y,degreesToRadians:V,earthRadius:_,factors:b,feature:E,featureCollection:R,geometry:w,geometryCollection:N,isNumber:U,isObject:X,lengthToDegrees:F,lengthToRadians:D,lineString:I,lineStrings:M,multiLineString:T,multiPoint:P,multiPolygon:L,point:k,points:S,polygon:C,polygons:O,radiansToDegrees:B,radiansToLength:j,round:A,validateBBox:W,validateId:H});function K(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return p(t.geometry.coordinates);if("Point"===t.type)return p(t.coordinates)}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return p(t);throw new Error("coord must be GeoJSON Point or an Array of numbers")}function J(t){if(Array.isArray(t))return t;if("Feature"===t.type){if(null!==t.geometry)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function Q(t){if(t.length>1&&U(t[0])&&U(t[1]))return!0;if(Array.isArray(t[0])&&t[0].length)return Q(t[0]);throw new Error("coordinates must only contain numbers")}function $(t,e,n){if(!e||!n)throw new Error("type and name required");if(!t||t.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.type)}function tt(t,e,n){if(!t)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)}function et(t,e,n){if(!t)throw new Error("No featureCollection passed");if(!n)throw new Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+n+", FeatureCollection required");var i,r=a(t.features);try{for(r.s();!(i=r.n()).done;){var o=i.value;if(!o||"Feature"!==o.type||!o.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!o.geometry||o.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+o.geometry.type)}}catch(t){r.e(t)}finally{r.f()}}function nt(t){return"Feature"===t.type?t.geometry:t}function it(t,e){return"FeatureCollection"===t.type?"FeatureCollection":"GeometryCollection"===t.type?"GeometryCollection":"Feature"===t.type&&null!==t.geometry?t.geometry.type:t.type}var rt=Object.freeze({__proto__:null,collectionOf:et,containsNumber:Q,featureOf:tt,geojsonType:$,getCoord:K,getCoords:J,getGeom:nt,getType:it});function ot(t,e){if(!0===(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).final)return function(t,e){var n=ot(e,t);return(n+180)%360}(t,e);var n=K(t),i=K(e),r=V(n[0]),o=V(i[0]),s=V(n[1]),a=V(i[1]),l=Math.sin(o-r)*Math.cos(a),u=Math.cos(s)*Math.sin(a)-Math.sin(s)*Math.cos(a)*Math.cos(o-r);return B(Math.atan2(l,u))}function st(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=K(t),o=V(r[0]),s=V(r[1]),a=V(n),l=D(e,i.units),u=Math.asin(Math.sin(s)*Math.cos(l)+Math.cos(s)*Math.sin(l)*Math.cos(a));return k([B(o+Math.atan2(Math.sin(a)*Math.sin(l)*Math.cos(s),Math.cos(l)-Math.sin(s)*Math.sin(u))),B(u)],i.properties)}function at(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=K(t),r=K(e),o=V(r[1]-i[1]),s=V(r[0]-i[0]),a=V(i[1]),l=V(r[1]),u=Math.pow(Math.sin(o/2),2)+Math.pow(Math.sin(s/2),2)*Math.cos(a)*Math.cos(l);return j(2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)),n.units)}function lt(t,e){var n;return(n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).final?ut(K(e),K(t)):ut(K(t),K(e)))>180?-(360-n):n}function ut(t,e){var n=V(t[1]),i=V(e[1]),r=V(e[0]-t[0]);r>Math.PI&&(r-=2*Math.PI),r<-Math.PI&&(r+=2*Math.PI);var o=Math.log(Math.tan(i/2+Math.PI/4)/Math.tan(n/2+Math.PI/4));return(B(Math.atan2(r,o))+360)%360}function ct(t,e,n){if(null!==t)for(var i,r,o,s,a,l,u,c,h=0,f=0,d=t.type,g="FeatureCollection"===d,p="Feature"===d,v=g?t.features.length:1,y=0;y<v;y++){a=(c=!!(u=g?t.features[y].geometry:p?t.geometry:t)&&"GeometryCollection"===u.type)?u.geometries.length:1;for(var m=0;m<a;m++){var _=0,b=0;if(null!==(s=c?u.geometries[m]:u)){l=s.coordinates;var x=s.type;switch(h=!n||"Polygon"!==x&&"MultiPolygon"!==x?0:1,x){case null:break;case"Point":if(!1===e(l,f,y,_,b))return!1;f++,_++;break;case"LineString":case"MultiPoint":for(i=0;i<l.length;i++){if(!1===e(l[i],f,y,_,b))return!1;f++,"MultiPoint"===x&&_++}"LineString"===x&&_++;break;case"Polygon":case"MultiLineString":for(i=0;i<l.length;i++){for(r=0;r<l[i].length-h;r++){if(!1===e(l[i][r],f,y,_,b))return!1;f++}"MultiLineString"===x&&_++,"Polygon"===x&&b++}"Polygon"===x&&_++;break;case"MultiPolygon":for(i=0;i<l.length;i++){for(b=0,r=0;r<l[i].length;r++){for(o=0;o<l[i][r].length-h;o++){if(!1===e(l[i][r][o],f,y,_,b))return!1;f++}b++}_++}break;case"GeometryCollection":for(i=0;i<s.geometries.length;i++)if(!1===ct(s.geometries[i],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function ht(t,e,n,i){var r=n;return ct(t,(function(t,i,o,s,a){r=0===i&&void 0===n?t:e(r,t,i,o,s,a)}),i),r}function ft(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length&&!1!==e(t.features[n].properties,n);n++);break;case"Feature":e(t.properties,0)}}function dt(t,e,n){var i=n;return ft(t,(function(t,r){i=0===r&&void 0===n?t:e(i,t,r)})),i}function gt(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}function pt(t,e,n){var i=n;return gt(t,(function(t,r){i=0===r&&void 0===n?t:e(i,t,r)})),i}function vt(t){var e=[];return ct(t,(function(t){e.push(t)})),e}function yt(t,e){var n,i,r,o,s,a,l,u,c,h,f=0,d="FeatureCollection"===t.type,g="Feature"===t.type,p=d?t.features.length:1;for(n=0;n<p;n++){for(a=d?t.features[n].geometry:g?t.geometry:t,u=d?t.features[n].properties:g?t.properties:{},c=d?t.features[n].bbox:g?t.bbox:void 0,h=d?t.features[n].id:g?t.id:void 0,s=(l=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,r=0;r<s;r++)if(null!==(o=l?a.geometries[r]:a))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,f,u,c,h))return!1;break;case"GeometryCollection":for(i=0;i<o.geometries.length;i++)if(!1===e(o.geometries[i],f,u,c,h))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,f,u,c,h))return!1;f++}}function mt(t,e,n){var i=n;return yt(t,(function(t,r,o,s,a){i=0===r&&void 0===n?t:e(i,t,r,o,s,a)})),i}function _t(t,e){yt(t,(function(t,n,i,r,o){var s,a=null===t?null:t.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return!1!==e(E(t,i,{bbox:r,id:o}),n,0)&&void 0}switch(a){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}for(var l=0;l<t.coordinates.length;l++){var u=t.coordinates[l];if(!1===e(E({type:s,coordinates:u},i),n,l))return!1}}))}function bt(t,e,n){var i=n;return _t(t,(function(t,r,o){i=0===r&&0===o&&void 0===n?t:e(i,t,r,o)})),i}function xt(t,e){_t(t,(function(t,n,i){var r=0;if(t.geometry){var o=t.geometry.type;if("Point"!==o&&"MultiPoint"!==o){var s,a=0,l=0,u=0;return!1!==ct(t,(function(o,c,h,f,d){if(void 0===s||n>a||f>l||d>u)return s=o,a=n,l=f,u=d,void(r=0);var g=I([s,o],t.properties);if(!1===e(g,n,i,d,r))return!1;r++,s=o}))&&void 0}}}))}function Et(t,e,n){var i=n,r=!1;return xt(t,(function(t,o,s,a,l){i=!1===r&&void 0===n?t:e(i,t,o,s,a,l),r=!0})),i}function wt(t,e){if(!t)throw new Error("geojson is required");_t(t,(function(t,n,i){if(null!==t.geometry){var r=t.geometry.type,o=t.geometry.coordinates;switch(r){case"LineString":if(!1===e(t,n,i,0,0))return!1;break;case"Polygon":for(var s=0;s<o.length;s++)if(!1===e(I(o[s],t.properties),n,i,s))return!1}}}))}function kt(t,e,n){var i=n;return wt(t,(function(t,r,o,s){i=0===r&&void 0===n?t:e(i,t,r,o,s)})),i}function St(t,e){if(!X(e=e||{}))throw new Error("options is invalid");var n,i=e.featureIndex||0,r=e.multiFeatureIndex||0,o=e.geometryIndex||0,s=e.segmentIndex||0,a=e.properties;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),a=a||t.features[i].properties,n=t.features[i].geometry;break;case"Feature":a=a||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var l=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return s<0&&(s=l.length+s-1),I([l[s],l[s+1]],a,e);case"Polygon":return o<0&&(o=l.length+o),s<0&&(s=l[o].length+s-1),I([l[o][s],l[o][s+1]],a,e);case"MultiLineString":return r<0&&(r=l.length+r),s<0&&(s=l[r].length+s-1),I([l[r][s],l[r][s+1]],a,e);case"MultiPolygon":return r<0&&(r=l.length+r),o<0&&(o=l[r].length+o),s<0&&(s=l[r][o].length-s-1),I([l[r][o][s],l[r][o][s+1]],a,e)}throw new Error("geojson is invalid")}function Ct(t,e){if(!X(e=e||{}))throw new Error("options is invalid");var n,i=e.featureIndex||0,r=e.multiFeatureIndex||0,o=e.geometryIndex||0,s=e.coordIndex||0,a=e.properties;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),a=a||t.features[i].properties,n=t.features[i].geometry;break;case"Feature":a=a||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var l=n.coordinates;switch(n.type){case"Point":return k(l,a,e);case"MultiPoint":return r<0&&(r=l.length+r),k(l[r],a,e);case"LineString":return s<0&&(s=l.length+s),k(l[s],a,e);case"Polygon":return o<0&&(o=l.length+o),s<0&&(s=l[o].length+s),k(l[o][s],a,e);case"MultiLineString":return r<0&&(r=l.length+r),s<0&&(s=l[r].length+s),k(l[r][s],a,e);case"MultiPolygon":return r<0&&(r=l.length+r),o<0&&(o=l[r].length+o),s<0&&(s=l[r][o].length-s),k(l[r][o][s],a,e)}throw new Error("geojson is invalid")}var Ot=Object.freeze({__proto__:null,coordAll:vt,coordEach:ct,coordReduce:ht,featureEach:gt,featureReduce:pt,findPoint:Ct,findSegment:St,flattenEach:_t,flattenReduce:bt,geomEach:yt,geomReduce:mt,lineEach:wt,lineReduce:kt,propEach:ft,propReduce:dt,segmentEach:xt,segmentReduce:Et});function It(t){return mt(t,(function(t,e){return t+function(t){var e,n=0;switch(t.type){case"Polygon":return Mt(t.coordinates);case"MultiPolygon":for(e=0;e<t.coordinates.length;e++)n+=Mt(t.coordinates[e]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(e)}),0)}function Mt(t){var e=0;if(t&&t.length>0){e+=Math.abs(Tt(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(Tt(t[n]))}return e}var Rt=Math.PI/180;function Tt(t){var e=t.length-1;if(e<=2)return 0;for(var n=0,i=0;i<e;){var r=t[i],o=t[i+1===e?0:i+1],s=t[i+2>=e?(i+2)%e:i+2],a=r[0]*Rt,l=o[1]*Rt;n+=(s[0]*Rt-a)*Math.sin(l),i++}return 20294876564838.72*n}function Pt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null!=t.bbox&&!0!==e.recompute)return t.bbox;var n=[1/0,1/0,-1/0,-1/0];return ct(t,(function(t){n[0]>t[0]&&(n[0]=t[0]),n[1]>t[1]&&(n[1]=t[1]),n[2]<t[0]&&(n[2]=t[0]),n[3]<t[1]&&(n[3]=t[1])})),n}function Lt(t,e){var n,i,r,o,s,a,l;for(i=1;i<=8;i*=2){for(n=[],o=!(At(r=t[t.length-1],e)&i),s=0;s<t.length;s++)(l=!(At(a=t[s],e)&i))!==o&&n.push(Nt(r,a,i,e)),l&&n.push(a),r=a,o=l;if(!(t=n).length)break}return n}function Nt(t,e,n,i){return 8&n?[t[0]+(e[0]-t[0])*(i[3]-t[1])/(e[1]-t[1]),i[3]]:4&n?[t[0]+(e[0]-t[0])*(i[1]-t[1])/(e[1]-t[1]),i[1]]:2&n?[i[2],t[1]+(e[1]-t[1])*(i[2]-t[0])/(e[0]-t[0])]:1&n?[i[0],t[1]+(e[1]-t[1])*(i[0]-t[0])/(e[0]-t[0])]:null}function At(t,e){var n=0;return t[0]<e[0]?n|=1:t[0]>e[2]&&(n|=2),t[1]<e[1]?n|=4:t[1]>e[3]&&(n|=8),n}function jt(t,e){var n,i=[],r=a(t);try{for(r.s();!(n=r.n()).done;){var o=Lt(n.value,e);o.length>0&&(o[0][0]===o[o.length-1][0]&&o[0][1]===o[o.length-1][1]||o.push(o[0]),o.length>=4&&i.push(o))}}catch(t){r.e(t)}finally{r.f()}return i}function Dt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Number(t[0]),i=Number(t[1]),r=Number(t[2]),o=Number(t[3]);if(6===t.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var s=[n,i];return C([[s,[r,i],[r,o],[n,o],s]],e.properties,{bbox:t,id:e.id})}var Ft=s((function t(e){r(this,t),this.points=e.points||[],this.duration=e.duration||1e4,this.sharpness=e.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=e.stepLength||60,this.length=this.points.length,this.delay=0;for(var n=0;n<this.length;n++)this.points[n].z=this.points[n].z||0;for(var i=0;i<this.length-1;i++){var o=this.points[i],s=this.points[i+1];this.centers.push({x:(o.x+s.x)/2,y:(o.y+s.y)/2,z:(o.z+s.z)/2})}this.controls.push([this.points[0],this.points[0]]);for(var a=0;a<this.centers.length-1;a++){var l=this.points[a+1].x-(this.centers[a].x+this.centers[a+1].x)/2,u=this.points[a+1].y-(this.centers[a].y+this.centers[a+1].y)/2,c=this.points[a+1].z-(this.centers[a].y+this.centers[a+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[a+1].x+this.sharpness*(this.centers[a].x+l),y:(1-this.sharpness)*this.points[a+1].y+this.sharpness*(this.centers[a].y+u),z:(1-this.sharpness)*this.points[a+1].z+this.sharpness*(this.centers[a].z+c)},{x:(1-this.sharpness)*this.points[a+1].x+this.sharpness*(this.centers[a+1].x+l),y:(1-this.sharpness)*this.points[a+1].y+this.sharpness*(this.centers[a+1].y+u),z:(1-this.sharpness)*this.points[a+1].z+this.sharpness*(this.centers[a+1].z+c)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this}),[{key:"cacheSteps",value:function(t){var e=[],n=this.pos(0);e.push(0);for(var i=0;i<this.duration;i+=10){var r=this.pos(i);Math.sqrt((r.x-n.x)*(r.x-n.x)+(r.y-n.y)*(r.y-n.y)+(r.z-n.z)*(r.z-n.z))>t&&(e.push(i),n=r)}return e}},{key:"vector",value:function(t){var e=this.pos(t+10),n=this.pos(t-10);return{angle:180*Math.atan2(e.y-n.y,e.x-n.x)/3.14,speed:Math.sqrt((n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y)+(n.z-e.z)*(n.z-e.z))}}},{key:"pos",value:function(t){var e=t-this.delay;e<0&&(e=0),e>this.duration&&(e=this.duration-1);var n=e/this.duration;if(n>=1)return this.points[this.length-1];var i=Math.floor((this.points.length-1)*n);return function(t,e,n,i,r){var o=function(t){var e=t*t;return[e*t,3*e*(1-t),3*t*(1-t)*(1-t),(1-t)*(1-t)*(1-t)]}(t);return{x:r.x*o[0]+i.x*o[1]+n.x*o[2]+e.x*o[3],y:r.y*o[0]+i.y*o[1]+n.y*o[2]+e.y*o[3],z:r.z*o[0]+i.z*o[1]+n.z*o[2]+e.z*o[3]}}((this.length-1)*n-i,this.points[i],this.controls[i][1],this.controls[i+1][0],this.points[i+1])}}]);function zt(t){for(var e,n,i=J(t),r=0,o=1;o<i.length;)e=n||i[0],r+=((n=i[o])[0]-e[0])*(n[1]+e[1]),o++;return r>0}function Gt(t,e){for(var n=0,i=0,r=0,o=0,s=0,a=0,l=0,u=0,c=null,h=null,f=t[0],d=t[1],g=e.length;n<g;n++){i=0;var p=e[n].length-1,v=e[n];if((c=v[0])[0]!==v[p][0]&&c[1]!==v[p][1])throw new Error("First and last coordinates in a ring must be the same");for(s=c[0]-f,a=c[1]-d;i<p;i++)if(u=(h=v[i+1])[1]-d,a<0&&u<0||a>0&&u>0)a=u,s=(c=h)[0]-f;else{if(l=h[0]-t[0],u>0&&a<=0){if((o=s*u-l*a)>0)r+=1;else if(0===o)return 0}else if(a>0&&u<=0){if((o=s*u-l*a)<0)r+=1;else if(0===o)return 0}else if(0===u&&a<0){if(0===(o=s*u-l*a))return 0}else if(0===a&&u<0){if(0===(o=s*u-l*a))return 0}else if(0===a&&0===u){if(l<=0&&s>=0)return 0;if(s<=0&&l>=0)return 0}c=h,a=u,s=l}}return r%2!=0}function Bt(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var i=K(t),r=nt(e),o=r.type,s=e.bbox,a=r.coordinates;if(s&&!1===function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}(i,s))return!1;"Polygon"===o&&(a=[a]);for(var l=!1,u=0;u<a.length;++u){var c=Gt(i,a[u]);if(0===c)return!n.ignoreBoundary;c&&(l=!0)}return l}function Vt(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=K(t),r=J(e),o=0;o<r.length-1;o++){var s=!1;if(n.ignoreEndVertices&&(0===o&&(s="start"),o===r.length-2&&(s="end"),0===o&&o+1===r.length-1&&(s="both")),Yt(r[o],r[o+1],i,s,void 0===n.epsilon?null:n.epsilon))return!0}return!1}function Yt(t,e,n,i,r){var o=n[0],s=n[1],a=t[0],l=t[1],u=e[0],c=e[1],h=u-a,f=c-l,d=(n[0]-a)*f-(n[1]-l)*h;if(null!==r){if(Math.abs(d)>r)return!1}else if(0!==d)return!1;return Math.abs(h)===Math.abs(f)&&0===Math.abs(h)?!i&&n[0]===t[0]&&n[1]===t[1]:i?"start"===i?Math.abs(h)>=Math.abs(f)?h>0?a<o&&o<=u:u<=o&&o<a:f>0?l<s&&s<=c:c<=s&&s<l:"end"===i?Math.abs(h)>=Math.abs(f)?h>0?a<=o&&o<u:u<o&&o<=a:f>0?l<=s&&s<c:c<s&&s<=l:"both"===i&&(Math.abs(h)>=Math.abs(f)?h>0?a<o&&o<u:u<o&&o<a:f>0?l<s&&s<c:c<s&&s<l):Math.abs(h)>=Math.abs(f)?h>0?a<=o&&o<=u:u<=o&&o<=a:f>0?l<=s&&s<=c:c<=s&&s<=l}function qt(t,e){if("Feature"===t.type&&null===t.geometry)return!1;if("Feature"===e.type&&null===e.geometry)return!1;if(!Ut(Pt(t),Pt(e)))return!1;var n,i=a(nt(e).coordinates);try{for(i.s();!(n=i.n()).done;){var r,o=a(n.value);try{for(o.s();!(r=o.n()).done;)if(!Bt(r.value,t))return!1}catch(t){o.e(t)}finally{o.f()}}}catch(t){i.e(t)}finally{i.f()}return!0}function Ut(t,e){return!(t[0]>e[0])&&!(t[2]<e[2])&&!(t[1]>e[1])&&!(t[3]<e[3])}function Xt(t,e){return t[0]===e[0]&&t[1]===e[1]}function Wt(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}var Ht=s((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Zt;if(r(this,t),this.data=e,this.length=this.data.length,this.compare=n,this.length>0)for(var i=(this.length>>1)-1;i>=0;i--)this._down(i)}),[{key:"push",value:function(t){this.data.push(t),this.length++,this._up(this.length-1)}},{key:"pop",value:function(){if(0!==this.length){var t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}}},{key:"peek",value:function(){return this.data[0]}},{key:"_up",value:function(t){for(var e=this.data,n=this.compare,i=e[t];t>0;){var r=t-1>>1,o=e[r];if(n(i,o)>=0)break;e[t]=o,t=r}e[t]=i}},{key:"_down",value:function(t){for(var e=this.data,n=this.compare,i=this.length>>1,r=e[t];t<i;){var o=1+(t<<1),s=e[o],a=o+1;if(a<this.length&&n(e[a],s)<0&&(o=a,s=e[a]),n(s,r)>=0)break;e[t]=s,t=o}e[t]=r}}]);function Zt(t,e){return t<e?-1:t>e?1:0}function Kt(t,e){return t.p.x>e.p.x?1:t.p.x<e.p.x?-1:t.p.y!==e.p.y?t.p.y>e.p.y?1:-1:1}function Jt(t,e){return t.rightSweepEvent.p.x>e.rightSweepEvent.p.x?1:t.rightSweepEvent.p.x<e.rightSweepEvent.p.x?-1:t.rightSweepEvent.p.y!==e.rightSweepEvent.p.y?t.rightSweepEvent.p.y<e.rightSweepEvent.p.y?1:-1:1}var Qt=s((function t(e,n,i,o){r(this,t),this.p={x:e[0],y:e[1]},this.featureId=n,this.ringId=i,this.eventId=o,this.otherEvent=null,this.isLeftEndpoint=null}),[{key:"isSamePoint",value:function(t){return this.p.x===t.p.x&&this.p.y===t.p.y}}]),$t=0,te=0,ee=0;function ne(t,e){var n="Feature"===t.type?t.geometry:t,i=n.coordinates;"Polygon"!==n.type&&"MultiLineString"!==n.type||(i=[i]),"LineString"===n.type&&(i=[[i]]);for(var r=0;r<i.length;r++)for(var o=0;o<i[r].length;o++){var s=i[r][o][0],a=null;te+=1;for(var l=0;l<i[r][o].length-1;l++){a=i[r][o][l+1];var u=new Qt(s,$t,te,ee),c=new Qt(a,$t,te,ee+1);u.otherEvent=c,c.otherEvent=u,Kt(u,c)>0?(c.isLeftEndpoint=!0,u.isLeftEndpoint=!1):(u.isLeftEndpoint=!0,c.isLeftEndpoint=!1),e.push(u),e.push(c),s=a,ee+=1}}$t+=1}var ie=s((function t(e){r(this,t),this.leftSweepEvent=e,this.rightSweepEvent=e.otherEvent}));function re(t,e){if(null===t||null===e)return!1;if(t.leftSweepEvent.ringId===e.leftSweepEvent.ringId&&(t.rightSweepEvent.isSamePoint(e.leftSweepEvent)||t.rightSweepEvent.isSamePoint(e.leftSweepEvent)||t.rightSweepEvent.isSamePoint(e.rightSweepEvent)||t.leftSweepEvent.isSamePoint(e.leftSweepEvent)||t.leftSweepEvent.isSamePoint(e.rightSweepEvent)))return!1;var n=t.leftSweepEvent.p.x,i=t.leftSweepEvent.p.y,r=t.rightSweepEvent.p.x,o=t.rightSweepEvent.p.y,s=e.leftSweepEvent.p.x,a=e.leftSweepEvent.p.y,l=e.rightSweepEvent.p.x,u=e.rightSweepEvent.p.y,c=(u-a)*(r-n)-(l-s)*(o-i);if(0===c)return!1;var h=((l-s)*(i-a)-(u-a)*(n-s))/c,f=((r-n)*(i-a)-(o-i)*(n-s))/c;return h>=0&&h<=1&&f>=0&&f<=1&&[n+h*(r-n),i+h*(o-i)]}var oe=function(t,e){var n=new Ht([],Kt);return function(t,e){if("FeatureCollection"===t.type)for(var n=t.features,i=0;i<n.length;i++)ne(n[i],e);else ne(t,e)}(t,n),function(t,e){e=e||!1;for(var n=[],i=new Ht([],Jt);t.length;){var r=t.pop();if(r.isLeftEndpoint){for(var o=new ie(r),s=0;s<i.data.length;s++){var a=i.data[s];if(!e||a.leftSweepEvent.featureId!==r.featureId){var l=re(o,a);!1!==l&&n.push(l)}}i.push(o)}else!1===r.isLeftEndpoint&&i.pop()}return n}(n,e)};function se(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.removeDuplicates,r=void 0===i||i,o=n.ignoreSelfIntersections,s=void 0===o||o,a=[];"FeatureCollection"===t.type?a=a.concat(t.features):"Feature"===t.type?a.push(t):"LineString"!==t.type&&"Polygon"!==t.type&&"MultiLineString"!==t.type&&"MultiPolygon"!==t.type||a.push(E(t)),"FeatureCollection"===e.type?a=a.concat(e.features):"Feature"===e.type?a.push(e):"LineString"!==e.type&&"Polygon"!==e.type&&"MultiLineString"!==e.type&&"MultiPolygon"!==e.type||a.push(E(e));var l=oe(R(a),s),u=[];if(r){var c={};l.forEach((function(t){var e=t.join(",");c[e]||(c[e]=!0,u.push(t))}))}else u=l;return R(u.map((function(t){return k(t)})))}function ae(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=nt(t);switch(e.properties||"Feature"!==t.type||(e.properties=t.properties),n.type){case"Polygon":return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=nt(t),i=n.coordinates,r=e.properties?e.properties:"Feature"===t.type?t.properties:{};return le(i,r)}(n,e);case"MultiPolygon":return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=nt(t),i=n.coordinates,r=e.properties?e.properties:"Feature"===t.type?t.properties:{},o=[];return i.forEach((function(t){o.push(le(t,r))})),R(o)}(n,e);default:throw new Error("invalid poly")}}function le(t,e){return t.length>1?T(t,e):I(t[0],e)}function ue(t,e){var n=nt(t),i=nt(e),r=n.type,o=i.type;switch(r){case"MultiPoint":switch(o){case"LineString":return ce(n,i);case"Polygon":return fe(n,i);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"MultiPoint":return ce(i,n);case"LineString":return function(t,e){if(se(t,e).features.length>0)for(var n=0;n<t.coordinates.length-1;n++)for(var i=0;i<e.coordinates.length-1;i++){var r=!0;if(0!==i&&i!==e.coordinates.length-2||(r=!1),de(t.coordinates[n],t.coordinates[n+1],e.coordinates[i],r))return!0}return!1}(n,i);case"Polygon":return he(n,i);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"MultiPoint":return fe(i,n);case"LineString":return he(i,n);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+r+" geometry not supported")}}function ce(t,e){for(var n=!1,i=!1,r=t.coordinates.length,o=0;o<r&&!n&&!i;){for(var s=0;s<e.coordinates.length-1;s++){var a=!0;0!==s&&s!==e.coordinates.length-2||(a=!1),de(e.coordinates[s],e.coordinates[s+1],t.coordinates[o],a)?n=!0:i=!0}o++}return n&&i}function he(t,e){return se(t,ae(e)).features.length>0}function fe(t,e){for(var n=!1,i=!1,r=t.coordinates.length,o=0;o<r&&(!n||!i);o++)Bt(k(t.coordinates[o]),e)?n=!0:i=!0;return i&&n}function de(t,e,n,i){var r=n[0]-t[0],o=n[1]-t[1],s=e[0]-t[0],a=e[1]-t[1];return 0==r*a-o*s&&(i?Math.abs(s)>=Math.abs(a)?s>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:a>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1]:Math.abs(s)>=Math.abs(a)?s>0?t[0]<n[0]&&n[0]<e[0]:e[0]<n[0]&&n[0]<t[0]:a>0?t[1]<n[1]&&n[1]<e[1]:e[1]<n[1]&&n[1]<t[1])}function ge(t,e){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{ignoreSelfIntersections:!0}).ignoreSelfIntersections,i=void 0===n||n,r=!0;return _t(t,(function(t){_t(e,(function(e){if(!1===r)return!1;r=function(t,e,n){switch(t.type){case"Point":switch(e.type){case"Point":return i=t.coordinates,r=e.coordinates,!(i[0]===r[0]&&i[1]===r[1]);case"LineString":return!pe(e,t);case"Polygon":return!Bt(t,e)}break;case"LineString":switch(e.type){case"Point":return!pe(t,e);case"LineString":return!function(t,e,n){return se(t,e,{ignoreSelfIntersections:n}).features.length>0}(t,e,n);case"Polygon":return!ve(e,t,n)}break;case"Polygon":switch(e.type){case"Point":return!Bt(e,t);case"LineString":return!ve(t,e,n);case"Polygon":return!function(t,e,n){var i,r=a(t.coordinates[0]);try{for(r.s();!(i=r.n()).done;)if(Bt(i.value,e))return!0}catch(t){r.e(t)}finally{r.f()}var o,s=a(e.coordinates[0]);try{for(s.s();!(o=s.n()).done;)if(Bt(o.value,t))return!0}catch(t){s.e(t)}finally{s.f()}return se(ae(t),ae(e),{ignoreSelfIntersections:n}).features.length>0}(e,t,n)}}var i,r;return!1}(t.geometry,e.geometry,i)}))})),r}function pe(t,e){for(var n=0;n<t.coordinates.length-1;n++)if(ye(t.coordinates[n],t.coordinates[n+1],e.coordinates))return!0;return!1}function ve(t,e,n){var i,r=a(e.coordinates);try{for(r.s();!(i=r.n()).done;)if(Bt(i.value,t))return!0}catch(t){r.e(t)}finally{r.f()}return se(e,ae(t),{ignoreSelfIntersections:n}).features.length>0}function ye(t,e,n){var i=n[0]-t[0],r=n[1]-t[1],o=e[0]-t[0],s=e[1]-t[1];return 0==i*s-r*o&&(Math.abs(o)>=Math.abs(s)?o>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:s>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1])}var me=Object.defineProperty,_e=function(t,e){return me(t,"name",{value:e,configurable:!0})},be=s((function t(e){var n,i,o;r(this,t),this.direction=!1,this.compareProperties=!0,this.precision=Math.pow(10,-(null!=(n=null==e?void 0:e.precision)?n:17)),this.direction=null!=(i=null==e?void 0:e.direction)&&i,this.compareProperties=null==(o=null==e?void 0:e.compareProperties)||o}),[{key:"compare",value:function(t,e){var n=this;if(t.type!==e.type)return!1;if(!Ee(t,e))return!1;switch(t.type){case"Point":return this.compareCoord(t.coordinates,e.coordinates);case"LineString":return this.compareLine(t.coordinates,e.coordinates);case"Polygon":return this.comparePolygon(t,e);case"GeometryCollection":return this.compareGeometryCollection(t,e);case"Feature":return this.compareFeature(t,e);case"FeatureCollection":return this.compareFeatureCollection(t,e);default:if(t.type.startsWith("Multi")){var i=we(t),r=we(e);return i.every((function(t){return r.some((function(e){return n.compare(t,e)}))}))}}return!1}},{key:"compareCoord",value:function(t,e){var n=this;return t.length===e.length&&t.every((function(t,i){return Math.abs(t-e[i])<n.precision}))}},{key:"compareLine",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!Ee(t,e))return!1;var r=t,o=e;if(i&&!this.compareCoord(r[0],o[0])){var s=this.fixStartIndex(o,r);if(!s)return!1;o=s}var a=this.compareCoord(r[n],o[n]);return this.direction||a?this.comparePath(r,o):!!this.compareCoord(r[n],o[o.length-(1+n)])&&this.comparePath(r.slice().reverse(),o)}},{key:"fixStartIndex",value:function(t,e){for(var n,i=-1,r=0;r<t.length;r++)if(this.compareCoord(t[r],e[0])){i=r;break}return i>=0&&(n=[].concat(t.slice(i,t.length),t.slice(1,i+1))),n}},{key:"comparePath",value:function(t,e){var n=this;return t.every((function(t,i){return n.compareCoord(t,e[i])}))}},{key:"comparePolygon",value:function(t,e){var n=this;if(this.compareLine(t.coordinates[0],e.coordinates[0],1,!0)){var i=t.coordinates.slice(1,t.coordinates.length),r=e.coordinates.slice(1,e.coordinates.length);return i.every((function(t){return r.some((function(e){return n.compareLine(t,e,1,!0)}))}))}return!1}},{key:"compareGeometryCollection",value:function(t,e){var n=this;return Ee(t.geometries,e.geometries)&&this.compareBBox(t,e)&&t.geometries.every((function(t,i){return n.compare(t,e.geometries[i])}))}},{key:"compareFeature",value:function(t,e){return t.id===e.id&&(!this.compareProperties||Se(t.properties,e.properties))&&this.compareBBox(t,e)&&this.compare(t.geometry,e.geometry)}},{key:"compareFeatureCollection",value:function(t,e){var n=this;return Ee(t.features,e.features)&&this.compareBBox(t,e)&&t.features.every((function(t,i){return n.compare(t,e.features[i])}))}},{key:"compareBBox",value:function(t,e){return Boolean(!t.bbox&&!e.bbox)||!(!t.bbox||!e.bbox)&&this.compareCoord(t.bbox,e.bbox)}}]);_e(be,"GeojsonEquality");var xe=be;function Ee(t,e){return t.coordinates?t.coordinates.length===e.coordinates.length:t.length===e.length}function we(t){return t.coordinates.map((function(e){return{type:t.type.replace("Multi",""),coordinates:e}}))}function ke(t,e,n){return new xe(n).compare(t,e)}function Se(t,e){if(null===t&&null===e)return!0;if(null===t||null===e)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(var r=0,o=n;r<o.length;r++){var s=o[r],a=t[s],l=e[s],u=Ce(a)&&Ce(l);if(u&&!Se(a,l)||!u&&a!==l)return!1}return!0}_e(Ee,"sameLength"),_e(we,"explode"),_e(ke,"geojsonEquality"),_e(Se,"equal");var Ce=_e((function(t){return null!=t&&"object"===y(t)}),"isObject");function Oe(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="object"===y(e)?e.mutate:e;if(!t)throw new Error("geojson is required");var i=it(t),r=[];switch(i){case"LineString":r=Ie(t,i);break;case"MultiLineString":case"Polygon":J(t).forEach((function(t){r.push(Ie(t,i))}));break;case"MultiPolygon":J(t).forEach((function(t){var e=[];t.forEach((function(t){e.push(Ie(t,i))})),r.push(e)}));break;case"Point":return t;case"MultiPoint":var o={};J(t).forEach((function(t){var e=t.join("-");Object.prototype.hasOwnProperty.call(o,e)||(r.push(t),o[e]=!0)}));break;default:throw new Error(i+" geometry not supported")}return t.coordinates?!0===n?(t.coordinates=r,t):{type:i,coordinates:r}:!0===n?(t.geometry.coordinates=r,t):E({type:i,coordinates:r},t.properties,{bbox:t.bbox,id:t.id})}function Ie(t,e){var n=J(t);if(2===n.length&&!Me(n[0],n[1]))return n;var i=[],r=n.length-1,o=i.length;i.push(n[0]);for(var s=1;s<r;s++){var a=i[i.length-1];n[s][0]===a[0]&&n[s][1]===a[1]||(i.push(n[s]),(o=i.length)>2&&Re(i[o-3],i[o-1],i[o-2])&&i.splice(i.length-2,1))}if(i.push(n[n.length-1]),o=i.length,("Polygon"===e||"MultiPolygon"===e)&&Me(n[0],n[n.length-1])&&o<4)throw new Error("invalid polygon");return"LineString"===e&&o<3||Re(i[o-3],i[o-1],i[o-2])&&i.splice(i.length-2,1),i}function Me(t,e){return t[0]===e[0]&&t[1]===e[1]}function Re(t,e,n){var i=n[0],r=n[1],o=t[0],s=t[1],a=e[0],l=e[1],u=a-o,c=l-s;return 0===(i-o)*c-(r-s)*u&&(Math.abs(u)>=Math.abs(c)?u>0?o<=i&&i<=a:a<=i&&i<=o:c>0?s<=r&&r<=l:l<=r&&r<=s)}function Te(t,e){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).ignoreSelfIntersections,i=void 0===n||n,r=!1;return _t(t,(function(t){_t(e,(function(e){if(!0===r)return!0;r=!ge(t.geometry,e.geometry,{ignoreSelfIntersections:i})}))})),r}function Pe(t,e,n,i,r){!function t(e,n,i,r,o){for(;r>i;){if(r-i>600){var s=r-i+1,a=n-i+1,l=Math.log(s),u=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*u*(s-u)/s)*(a-s/2<0?-1:1);t(e,n,Math.max(i,Math.floor(n-a*u/s+c)),Math.min(r,Math.floor(n+(s-a)*u/s+c)),o)}var h=e[n],f=i,d=r;for(Le(e,i,n),o(e[r],h)>0&&Le(e,i,r);f<d;){for(Le(e,f,d),f++,d--;o(e[f],h)<0;)f++;for(;o(e[d],h)>0;)d--}0===o(e[i],h)?Le(e,i,d):Le(e,++d,r),d<=n&&(i=d+1),n<=d&&(r=d-1)}}(t,e,n||0,i||t.length-1,r||Ne)}function Le(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function Ne(t,e){return t<e?-1:t>e?1:0}var Ae=s((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:9;r(this,t),this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()}),[{key:"all",value:function(){return this._all(this.data,[])}},{key:"search",value:function(t){var e=this.data,n=[];if(!Ue(t,e))return n;for(var i=this.toBBox,r=[];e;){for(var o=0;o<e.children.length;o++){var s=e.children[o],a=e.leaf?i(s):s;Ue(t,a)&&(e.leaf?n.push(s):qe(t,a)?this._all(s,n):r.push(s))}e=r.pop()}return n}},{key:"collides",value:function(t){var e=this.data;if(!Ue(t,e))return!1;for(var n=[];e;){for(var i=0;i<e.children.length;i++){var r=e.children[i],o=e.leaf?this.toBBox(r):r;if(Ue(t,o)){if(e.leaf||qe(t,o))return!0;n.push(r)}}e=n.pop()}return!1}},{key:"load",value:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var i=this.data;this.data=n,n=i}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this}},{key:"insert",value:function(t){return t&&this._insert(t,this.data.height-1),this}},{key:"clear",value:function(){return this.data=Xe([]),this}},{key:"remove",value:function(t,e){if(!t)return this;for(var n,i,r,o=this.data,s=this.toBBox(t),a=[],l=[];o||a.length;){if(o||(o=a.pop(),i=a[a.length-1],n=l.pop(),r=!0),o.leaf){var u=je(t,o.children,e);if(-1!==u)return o.children.splice(u,1),a.push(o),this._condense(a),this}r||o.leaf||!qe(o,s)?i?(n++,o=i.children[n],r=!1):o=null:(a.push(o),l.push(n),n=0,i=o,o=o.children[0])}return this}},{key:"toBBox",value:function(t){return t}},{key:"compareMinX",value:function(t,e){return t.minX-e.minX}},{key:"compareMinY",value:function(t,e){return t.minY-e.minY}},{key:"toJSON",value:function(){return this.data}},{key:"fromJSON",value:function(t){return this.data=t,this}},{key:"_all",value:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,p(t.children)):n.push.apply(n,p(t.children)),t=n.pop();return e}},{key:"_build",value:function(t,e,n,i){var r,o=n-e+1,s=this._maxEntries;if(o<=s)return De(r=Xe(t.slice(e,n+1)),this.toBBox),r;i||(i=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,i-1))),(r=Xe([])).leaf=!1,r.height=i;var a=Math.ceil(o/s),l=a*Math.ceil(Math.sqrt(s));We(t,e,n,l,this.compareMinX);for(var u=e;u<=n;u+=l){var c=Math.min(u+l-1,n);We(t,u,c,a,this.compareMinY);for(var h=u;h<=c;h+=a){var f=Math.min(h+a-1,c);r.children.push(this._build(t,h,f,i-1))}}return De(r,this.toBBox),r}},{key:"_chooseSubtree",value:function(t,e,n,i){for(;i.push(e),!e.leaf&&i.length-1!==n;){for(var r=1/0,o=1/0,s=void 0,a=0;a<e.children.length;a++){var l=e.children[a],u=Ve(l),c=(h=t,f=l,(Math.max(f.maxX,h.maxX)-Math.min(f.minX,h.minX))*(Math.max(f.maxY,h.maxY)-Math.min(f.minY,h.minY))-u);c<o?(o=c,r=u<r?u:r,s=l):c===o&&u<r&&(r=u,s=l)}e=s||e.children[0]}var h,f;return e}},{key:"_insert",value:function(t,e,n){var i=n?t:this.toBBox(t),r=[],o=this._chooseSubtree(i,this.data,e,r);for(o.children.push(t),ze(o,i);e>=0&&r[e].children.length>this._maxEntries;)this._split(r,e),e--;this._adjustParentBBoxes(i,r,e)}},{key:"_split",value:function(t,e){var n=t[e],i=n.children.length,r=this._minEntries;this._chooseSplitAxis(n,r,i);var o=this._chooseSplitIndex(n,r,i),s=Xe(n.children.splice(o,n.children.length-o));s.height=n.height,s.leaf=n.leaf,De(n,this.toBBox),De(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)}},{key:"_splitRoot",value:function(t,e){this.data=Xe([t,e]),this.data.height=t.height+1,this.data.leaf=!1,De(this.data,this.toBBox)}},{key:"_chooseSplitIndex",value:function(t,e,n){for(var i,r,o,s,a,l,u,c=1/0,h=1/0,f=e;f<=n-e;f++){var d=Fe(t,0,f,this.toBBox),g=Fe(t,f,n,this.toBBox),p=(r=d,o=g,s=Math.max(r.minX,o.minX),a=Math.max(r.minY,o.minY),l=Math.min(r.maxX,o.maxX),u=Math.min(r.maxY,o.maxY),Math.max(0,l-s)*Math.max(0,u-a)),v=Ve(d)+Ve(g);p<c?(c=p,i=f,h=v<h?v:h):p===c&&v<h&&(h=v,i=f)}return i||n-e}},{key:"_chooseSplitAxis",value:function(t,e,n){var i=t.leaf?this.compareMinX:Ge,r=t.leaf?this.compareMinY:Be;this._allDistMargin(t,e,n,i)<this._allDistMargin(t,e,n,r)&&t.children.sort(i)}},{key:"_allDistMargin",value:function(t,e,n,i){t.children.sort(i);for(var r=this.toBBox,o=Fe(t,0,e,r),s=Fe(t,n-e,n,r),a=Ye(o)+Ye(s),l=e;l<n-e;l++){var u=t.children[l];ze(o,t.leaf?r(u):u),a+=Ye(o)}for(var c=n-e-1;c>=e;c--){var h=t.children[c];ze(s,t.leaf?r(h):h),a+=Ye(s)}return a}},{key:"_adjustParentBBoxes",value:function(t,e,n){for(var i=n;i>=0;i--)ze(e[i],t)}},{key:"_condense",value:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():De(t[n],this.toBBox)}}]);function je(t,e,n){if(!n)return e.indexOf(t);for(var i=0;i<e.length;i++)if(n(t,e[i]))return i;return-1}function De(t,e){Fe(t,0,t.children.length,e,t)}function Fe(t,e,n,i,r){r||(r=Xe(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var o=e;o<n;o++){var s=t.children[o];ze(r,t.leaf?i(s):s)}return r}function ze(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function Ge(t,e){return t.minX-e.minX}function Be(t,e){return t.minY-e.minY}function Ve(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function Ye(t){return t.maxX-t.minX+(t.maxY-t.minY)}function qe(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function Ue(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function Xe(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function We(t,e,n,i,r){for(var o=[e,n];o.length;)if(!((n=o.pop())-(e=o.pop())<=i)){var s=e+Math.ceil((n-e)/i/2)*i;Pe(t,s,e,n,r),o.push(e,s,s,n)}}var He=Object.freeze({__proto__:null,default:Ae});function Ze(t){var e=new Ae(t);return e.insert=function(t){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:Pt(t),Ae.prototype.insert.call(this,t)},e.load=function(t){var e=[];return Array.isArray(t)?t.forEach((function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:Pt(t),e.push(t)})):gt(t,(function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:Pt(t),e.push(t)})),Ae.prototype.load.call(this,e)},e.remove=function(t,e){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:Pt(t),Ae.prototype.remove.call(this,t,e)},e.clear=function(){return Ae.prototype.clear.call(this)},e.search=function(t){return R(Ae.prototype.search.call(this,this.toBBox(t)))},e.collides=function(t){return Ae.prototype.collides.call(this,this.toBBox(t))},e.all=function(){return R(Ae.prototype.all.call(this))},e.toJSON=function(){return Ae.prototype.toJSON.call(this)},e.fromJSON=function(t){return Ae.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;if(t.bbox)e=t.bbox;else if(Array.isArray(t)&&4===t.length)e=t;else if(Array.isArray(t)&&6===t.length)e=[t[0],t[1],t[3],t[4]];else if("Feature"===t.type)e=Pt(t);else{if("FeatureCollection"!==t.type)throw new Error("invalid geojson");e=Pt(t)}return{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}},e}function Ke(t){if(!t)throw new Error("geojson is required");var e=[];return _t(t,(function(t){!function(t,e){var n=[],i=t.geometry;if(null!==i){switch(i.type){case"Polygon":n=J(i);break;case"LineString":n=[J(i)]}n.forEach((function(n){(function(t,e){var n=[];return t.reduce((function(t,i){var r=I([t,i],e);return r.bbox=function(t,e){var n=t[0],i=t[1],r=e[0],o=e[1];return[n<r?n:r,i<o?i:o,n>r?n:r,i>o?i:o]}(t,i),n.push(r),i})),n})(n,t.properties).forEach((function(t){t.id=e.length,e.push(t)}))}))}}(t,e)})),R(e)}var Je,Qe,$e=Object.defineProperty,tn=Object.defineProperties,en=Object.getOwnPropertyDescriptors,nn=Object.getOwnPropertySymbols,rn=Object.prototype.hasOwnProperty,on=Object.prototype.propertyIsEnumerable,sn=function(t,e,n){return e in t?$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n},an=function(t,e){for(var n in e||(e={}))rn.call(e,n)&&sn(t,n,e[n]);if(nn){var i,r=a(nn(e));try{for(r.s();!(i=r.n()).done;)n=i.value,on.call(e,n)&&sn(t,n,e[n])}catch(t){r.e(t)}finally{r.f()}}return t},ln=function(t,e){return tn(t,en(e))};function un(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t||!e)throw new Error("lines and pt are required arguments");var i=K(e),r=k([1/0,1/0],{dist:1/0,index:-1,multiFeatureIndex:-1,location:-1}),o=0;return _t(t,(function(t,s,a){for(var l=J(t),u=0;u<l.length-1;u++){var c=k(l[u]);c.properties.dist=at(e,c,n);var h=K(c),f=k(l[u+1]);f.properties.dist=at(e,f,n);var d=K(f),p=at(c,f,n),v=void 0,y=void 0;if(h[0]===i[0]&&h[1]===i[1]){var m=[h,void 0,!1];v=m[0],y=m[2]}else if(d[0]===i[0]&&d[1]===i[1]){var _=[d,void 0,!0];v=_[0],y=_[2]}else{var b=g(gn(c.geometry.coordinates,f.geometry.coordinates,K(e)),3);v=b[0],y=b[2]}var x=void 0;v&&(x=k(v,{dist:at(e,v,n),multiFeatureIndex:a,location:o+at(c,v,n)})),x&&x.properties.dist<r.properties.dist&&(r=ln(an({},x),{properties:ln(an({},x.properties),{index:y?u+1:u})})),o+=p}})),r}function cn(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2))}function hn(t,e){var n=function(t,e){var n=g(t,3),i=n[0],r=n[1],o=n[2],s=g(e,3);return i*s[0]+r*s[1]+o*s[2]}(t,e)/(cn(t)*cn(e));return Math.acos(Math.min(Math.max(n,-1),1))}function fn(t){var e=V(t[1]),n=V(t[0]);return[Math.cos(e)*Math.cos(n),Math.cos(e)*Math.sin(n),Math.sin(e)]}function dn(t){var e=g(t,3),n=e[0],i=e[1],r=e[2],o=B(Math.asin(r));return[B(Math.atan2(i,n)),o]}function gn(t,e,n){var i,r,o,s,a,l,u,c,h,f,d=fn(t),p=fn(e),v=g(fn(n),3),y=v[0],m=v[1],_=v[2],b=(i=p,o=(r=g(d,3))[0],s=r[1],a=r[2],u=(l=g(i,3))[0],c=l[1],[s*(h=l[2])-a*c,a*u-o*h,o*c-s*u]),x=g(b,3),E=x[0],w=x[1],k=x[2],S=w*_-k*m,C=k*y-E*_,O=E*m-w*y,I=O*w-C*k,M=S*k-O*E,R=C*E-S*w,T=1/Math.sqrt(Math.pow(I,2)+Math.pow(M,2)+Math.pow(R,2)),P=[I*T,M*T,R*T],L=[-1*I*T,-1*M*T,-1*R*T],N=hn(d,p),A=hn(d,P),j=hn(p,P),D=hn(d,L),F=hn(p,L);return hn(d,f=A<D&&A<F||j<D&&j<F?P:L)>N||hn(p,f)>N?at(dn(f),dn(d))<=at(dn(f),dn(p))?[dn(d),!0,!1]:[dn(p),!1,!0]:[dn(f),!1,!1]}function pn(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function vn(t){if(t.__esModule)return t;var e=t.default;if("function"==typeof e){var n=function t(){return this instanceof t?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach((function(e){var i=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(n,e,i.get?i:{enumerable:!0,get:function(){return t[e]}})})),n}var yn=pn((Qe||(Qe=1,Je=function t(e,n){if(e===n)return!0;if(e&&n&&"object"==y(e)&&"object"==y(n)){if(e.constructor!==n.constructor)return!1;var i,r,o;if(Array.isArray(e)){if((i=e.length)!=n.length)return!1;for(r=i;0!=r--;)if(!t(e[r],n[r]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if((i=(o=Object.keys(e)).length)!==Object.keys(n).length)return!1;for(r=i;0!=r--;)if(!Object.prototype.hasOwnProperty.call(n,o[r]))return!1;for(r=i;0!=r--;){var s=o[r];if(!t(e[s],n[s]))return!1}return!0}return e!=e&&n!=n}),Je));function mn(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!X(n=n||{}))throw new Error("options is invalid");var i,r=n.tolerance||0,o=[],s=Ze(),a=Ke(t);s.load(a);var l=[];return xt(e,(function(t){var e=!1;t&&(gt(s.search(t),(function(n){if(!1===e){var o=J(t).sort(),s=J(n).sort();if(yn(o,s))e=!0,i=i?_n(i,t)||i:t;else if(0===r?Vt(o[0],n)&&Vt(o[1],n):un(n,o[0]).properties.dist<=r&&un(n,o[1]).properties.dist<=r)e=!0,i=i?_n(i,t)||i:t;else if(0===r?Vt(s[0],t)&&Vt(s[1],t):un(t,s[0]).properties.dist<=r&&un(t,s[1]).properties.dist<=r)if(i){var a=_n(i,n);a?i=a:l.push(n)}else i=n}})),!1===e&&i&&(o.push(i),l.length&&(o=o.concat(l),l=[]),i=void 0))})),i&&o.push(i),R(o)}function _n(t,e){var n=J(e),i=J(t),r=i[0],o=i[i.length-1],s=t.geometry.coordinates;if(yn(n[0],r))s.unshift(n[1]);else if(yn(n[0],o))s.push(n[1]);else if(yn(n[1],r))s.unshift(n[0]);else{if(!yn(n[1],o))return;s.push(n[0])}return t}function bn(t,e){var n=z(lt(t[0],t[1])),i=z(lt(e[0],e[1]));return n===i||(i-n)%180==0}function xn(t,e){if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error("Invalid GeoJSON object for "+e)}function En(t,e){return!!wn(e.coordinates[0],t.coordinates)||!!wn(e.coordinates[e.coordinates.length-1],t.coordinates)}function wn(t,e){return t[0]===e[0]&&t[1]===e[1]}function kn(t){return t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]}function Sn(t){for(var e=0;e<t.length-1;e++)for(var n=t[e],i=e+1;i<t.length-2;i++)if(Vt(n,I([t[i],t[i+1]])))return!0;return!1}function Cn(t,e,n){for(var i=C(t),r=n+1;r<e.length;r++)if(!ge(i,C(e[r]))&&ue(i,I(e[r][0])))return!1;return!0}function On(t,e){var n=nt(t),i=nt(e),r=n.type,o=i.type;switch(r){case"Point":switch(o){case"MultiPoint":return function(t,e){var n,i=!1;for(n=0;n<e.coordinates.length;n++)if(Mn(e.coordinates[n],t.coordinates)){i=!0;break}return i}(n,i);case"LineString":return Vt(n,i,{ignoreEndVertices:!0});case"Polygon":case"MultiPolygon":return Bt(n,i,{ignoreBoundary:!0});default:throw new Error("feature2 "+o+" geometry not supported")}case"MultiPoint":switch(o){case"MultiPoint":return function(t,e){for(var n=0;n<t.coordinates.length;n++){for(var i=!1,r=0;r<e.coordinates.length;r++)Mn(t.coordinates[n],e.coordinates[r])&&(i=!0);if(!i)return!1}return!0}(n,i);case"LineString":return function(t,e){for(var n=!1,i=0;i<t.coordinates.length;i++){if(!Vt(t.coordinates[i],e))return!1;n||(n=Vt(t.coordinates[i],e,{ignoreEndVertices:!0}))}return n}(n,i);case"Polygon":case"MultiPolygon":return function(t,e){for(var n=!0,i=!1,r=0;r<t.coordinates.length;r++){if(!(i=Bt(t.coordinates[r],e))){n=!1;break}i=Bt(t.coordinates[r],e,{ignoreBoundary:!0})}return n&&i}(n,i);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"LineString":return function(t,e){for(var n=0;n<t.coordinates.length;n++)if(!Vt(t.coordinates[n],e))return!1;return!0}(n,i);case"Polygon":case"MultiPolygon":return function(t,e){if(!In(Pt(e),Pt(t)))return!1;for(var n=!1,i=0;i<t.coordinates.length;i++){if(!Bt(t.coordinates[i],e))return!1;n||(n=Bt(t.coordinates[i],e,{ignoreBoundary:!0})),!n&&i<t.coordinates.length-1&&(n=Bt(Rn(t.coordinates[i],t.coordinates[i+1]),e,{ignoreBoundary:!0}))}return n}(n,i);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"Polygon":case"MultiPolygon":return function(t,e){var n=Pt(t);if(!In(Pt(e),n))return!1;for(var i=0;i<t.coordinates[0].length;i++)if(!Bt(t.coordinates[0][i],e))return!1;return!0}(n,i);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+r+" geometry not supported")}}function In(t,e){return!(t[0]>e[0])&&!(t[2]<e[2])&&!(t[1]>e[1])&&!(t[3]<e[3])}function Mn(t,e){return t[0]===e[0]&&t[1]===e[1]}function Rn(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}function Tn(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Pt(t);return k([(n[0]+n[2])/2,(n[1]+n[3])/2],e.properties,e)}var Pn,Ln={exports:{}},Nn=(Pn||(Pn=1,function(t,e){t.exports=function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function n(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function a(t,e,n){return(a=s()?Reflect.construct:function(t,e,n){var i=[null];i.push.apply(i,e);var r=new(Function.bind.apply(t,i));return n&&o(r,n.prototype),r}).apply(null,arguments)}function l(t){var e="function"==typeof Map?new Map:void 0;return(l=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,i)}function i(){return a(t,arguments,r(this).constructor)}return i.prototype=Object.create(t.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),o(i,t)})(t)}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t,e){if(e&&("object"==y(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return u(t)}function h(t){var e=s();return function(){var n,i=r(t);if(e){var o=r(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return c(this,n)}}function f(t,e,n){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=r(t)););return t}(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function d(t){return function(t){if(Array.isArray(t))return p(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||g(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t,e){if(t){if("string"==typeof t)return p(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(t,e):void 0}}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function v(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=g(t))||e){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){a=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}var m=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getEndCapStyle",value:function(){return this._endCapStyle}},{key:"isSingleSided",value:function(){return this._isSingleSided}},{key:"setQuadrantSegments",value:function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=e.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=e.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==e.JOIN_ROUND&&(this._quadrantSegments=e.DEFAULT_QUADRANT_SEGMENTS)}},{key:"getJoinStyle",value:function(){return this._joinStyle}},{key:"setJoinStyle",value:function(t){this._joinStyle=t}},{key:"setSimplifyFactor",value:function(t){this._simplifyFactor=t<0?0:t}},{key:"getSimplifyFactor",value:function(){return this._simplifyFactor}},{key:"getQuadrantSegments",value:function(){return this._quadrantSegments}},{key:"setEndCapStyle",value:function(t){this._endCapStyle=t}},{key:"getMitreLimit",value:function(){return this._mitreLimit}},{key:"setMitreLimit",value:function(t){this._mitreLimit=t}},{key:"setSingleSided",value:function(t){this._isSingleSided=t}}],[{key:"constructor_",value:function(){if(this._quadrantSegments=e.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=e.CAP_ROUND,this._joinStyle=e.JOIN_ROUND,this._mitreLimit=e.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=e.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setQuadrantSegments(t)}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.setQuadrantSegments(n),this.setEndCapStyle(i)}else if(4===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];this.setQuadrantSegments(r),this.setEndCapStyle(o),this.setJoinStyle(s),this.setMitreLimit(a)}}},{key:"bufferDistanceError",value:function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)}}]),e}();m.CAP_ROUND=1,m.CAP_FLAT=2,m.CAP_SQUARE=3,m.JOIN_ROUND=1,m.JOIN_MITRE=2,m.JOIN_BEVEL=3,m.DEFAULT_QUADRANT_SEGMENTS=8,m.DEFAULT_MITRE_LIMIT=5,m.DEFAULT_SIMPLIFY_FACTOR=.01;var _=function(e){i(o,e);var r=h(o);function o(e){var n;return t(this,o),(n=r.call(this,e)).name=Object.keys({Exception:o})[0],n}return n(o,[{key:"toString",value:function(){return this.message}}]),o}(l(Error)),b=function(e){i(r,e);var n=h(r);function r(e){var i;return t(this,r),(i=n.call(this,e)).name=Object.keys({IllegalArgumentException:r})[0],i}return r}(_),x=function(){function e(){t(this,e)}return n(e,[{key:"filter",value:function(t){}}]),e}();function E(){}function w(){}function k(){}var S,C,O,I,M,R,T,P=function(){function e(){t(this,e)}return n(e,null,[{key:"equalsWithTolerance",value:function(t,e,n){return Math.abs(t-e)<=n}}]),e}(),L=function(){function e(n,i){t(this,e),this.low=i||0,this.high=n||0}return n(e,null,[{key:"toBinaryString",value:function(t){var e,n="";for(e=2147483648;e>0;e>>>=1)n+=(t.high&e)===e?"1":"0";for(e=2147483648;e>0;e>>>=1)n+=(t.low&e)===e?"1":"0";return n}}]),e}();function N(){}function A(){}N.NaN=NaN,N.isNaN=function(t){return Number.isNaN(t)},N.isInfinite=function(t){return!Number.isFinite(t)},N.MAX_VALUE=Number.MAX_VALUE,N.POSITIVE_INFINITY=Number.POSITIVE_INFINITY,N.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,"function"==typeof Float64Array&&"function"==typeof Int32Array?(M=2146435072,R=new Float64Array(1),T=new Int32Array(R.buffer),N.doubleToLongBits=function(t){R[0]=t;var e=0|T[0],n=0|T[1];return(n&M)===M&&0!=(1048575&n)&&0!==e&&(e=0,n=2146959360),new L(n,e)},N.longBitsToDouble=function(t){return T[0]=t.low,T[1]=t.high,R[0]}):(S=Math.log2,C=Math.floor,O=Math.pow,I=function(){for(var t=53;t>0;t--){var e=O(2,t)-1;if(C(S(e))+1===t)return e}return 0}(),N.doubleToLongBits=function(t){var e,n,i,r,o,s,a,l,u;if(t<0||1/t===Number.NEGATIVE_INFINITY?(s=1<<31,t=-t):s=0,0===t)return new L(l=s,u=0);if(t===1/0)return new L(l=2146435072|s,u=0);if(t!=t)return new L(l=2146959360,u=0);if(r=0,u=0,(e=C(t))>1)if(e<=I)(r=C(S(e)))<=20?(u=0,l=e<<20-r&1048575):(u=e%(n=O(2,i=r-20))<<32-i,l=e/n&1048575);else for(i=e,u=0;0!==(i=C(n=i/2));)r++,u>>>=1,u|=(1&l)<<31,l>>>=1,n!==i&&(l|=524288);if(a=r+1023,o=0===e,e=t-e,r<52&&0!==e)for(i=0;;){if((n=2*e)>=1?(e=n-1,o?(a--,o=!1):(i<<=1,i|=1,r++)):(e=n,o?0==--a&&(r++,o=!1):(i<<=1,r++)),20===r)l|=i,i=0;else if(52===r){u|=i;break}if(1===n){r<20?l|=i<<20-r:r<52&&(u|=i<<52-r);break}}return l|=a<<20,new L(l|=s,u)},N.longBitsToDouble=function(t){var e,n,i,r,o=t.high,s=t.low,a=o&1<<31?-1:1;for(i=((2146435072&o)>>20)-1023,r=0,n=1<<19,e=1;e<=20;e++)o&n&&(r+=O(2,-e)),n>>>=1;for(n=1<<31,e=21;e<=52;e++)s&n&&(r+=O(2,-e)),n>>>=1;if(-1023===i){if(0===r)return 0*a;i=-1022}else{if(1024===i)return 0===r?a/0:NaN;r+=1}return a*r*O(2,i)});var j=function(e){i(r,e);var n=h(r);function r(e){var i;return t(this,r),(i=n.call(this,e)).name=Object.keys({RuntimeException:r})[0],i}return r}(_),D=function(e){i(o,e);var r=h(o);function o(){var e;return t(this,o),e=r.call(this),o.constructor_.apply(u(e),arguments),e}return n(o,null,[{key:"constructor_",value:function(){if(0===arguments.length)j.constructor_.call(this);else if(1===arguments.length){var t=arguments[0];j.constructor_.call(this,t)}}}]),o}(j),F=function(){function e(){t(this,e)}return n(e,null,[{key:"shouldNeverReachHere",value:function(){if(0===arguments.length)e.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new D("Should never reach here"+(null!==t?": "+t:""))}}},{key:"isTrue",value:function(){if(1===arguments.length){var t=arguments[0];e.isTrue(t,null)}else if(2===arguments.length){var n=arguments[1];if(!arguments[0])throw null===n?new D:new D(n)}}},{key:"equals",value:function(){if(2===arguments.length){var t=arguments[0],n=arguments[1];e.equals(t,n,null)}else if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];if(!r.equals(i))throw new D("Expected "+i+" but encountered "+r+(null!==o?": "+o:""))}}}]),e}(),z=new ArrayBuffer(8),G=new Float64Array(z),B=new Int32Array(z),V=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getM",value:function(){return N.NaN}},{key:"setOrdinate",value:function(t,n){switch(t){case e.X:this.x=n;break;case e.Y:this.y=n;break;case e.Z:this.setZ(n);break;default:throw new b("Invalid ordinate index: "+t)}}},{key:"equals2D",value:function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!P.equalsWithTolerance(this.x,e.x,n)&&!!P.equalsWithTolerance(this.y,e.y,n)}}},{key:"setM",value:function(t){throw new b("Invalid ordinate index: "+e.M)}},{key:"getZ",value:function(){return this.z}},{key:"getOrdinate",value:function(t){switch(t){case e.X:return this.x;case e.Y:return this.y;case e.Z:return this.getZ()}throw new b("Invalid ordinate index: "+t)}},{key:"equals3D",value:function(t){return this.x===t.x&&this.y===t.y&&(this.getZ()===t.getZ()||N.isNaN(this.getZ())&&N.isNaN(t.getZ()))}},{key:"equals",value:function(t){return t instanceof e&&this.equals2D(t)}},{key:"equalInZ",value:function(t,e){return P.equalsWithTolerance(this.getZ(),t.getZ(),e)}},{key:"setX",value:function(t){this.x=t}},{key:"compareTo",value:function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0}},{key:"getX",value:function(){return this.x}},{key:"setZ",value:function(t){this.z=t}},{key:"clone",value:function(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return F.shouldNeverReachHere("this shouldn't happen because this class is Cloneable"),null;throw t}}},{key:"copy",value:function(){return new e(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.getZ()+")"}},{key:"distance3D",value:function(t){var e=this.x-t.x,n=this.y-t.y,i=this.getZ()-t.getZ();return Math.sqrt(e*e+n*n+i*i)}},{key:"getY",value:function(){return this.y}},{key:"setY",value:function(t){this.y=t}},{key:"distance",value:function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)}},{key:"hashCode",value:function(){var t=17;return 37*(t=37*t+e.hashCode(this.x))+e.hashCode(this.y)}},{key:"setCoordinate",value:function(t){this.x=t.x,this.y=t.y,this.z=t.getZ()}},{key:"interfaces_",get:function(){return[E,w,k]}}],[{key:"constructor_",value:function(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)e.constructor_.call(this,0,0);else if(1===arguments.length){var t=arguments[0];e.constructor_.call(this,t.x,t.y,t.getZ())}else if(2===arguments.length){var n=arguments[0],i=arguments[1];e.constructor_.call(this,n,i,e.NULL_ORDINATE)}else if(3===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2];this.x=r,this.y=o,this.z=s}}},{key:"hashCode",value:function(t){return G[0]=t,B[0]^B[1]}}]),e}(),Y=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"compare",value:function(t,n){var i=e.compare(t.x,n.x);if(0!==i)return i;var r=e.compare(t.y,n.y);return 0!==r?r:this._dimensionsToTest<=2?0:e.compare(t.getZ(),n.getZ())}},{key:"interfaces_",get:function(){return[A]}}],[{key:"constructor_",value:function(){if(this._dimensionsToTest=2,0===arguments.length)e.constructor_.call(this,2);else if(1===arguments.length){var t=arguments[0];if(2!==t&&3!==t)throw new b("only 2 or 3 dimensions may be specified");this._dimensionsToTest=t}}},{key:"compare",value:function(t,e){return t<e?-1:t>e?1:N.isNaN(t)?N.isNaN(e)?0:-1:N.isNaN(e)?1:0}}]),e}();V.DimensionalComparator=Y,V.NULL_ORDINATE=N.NaN,V.X=0,V.Y=1,V.Z=2,V.M=3;var q=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getArea",value:function(){return this.getWidth()*this.getHeight()}},{key:"equals",value:function(t){if(!(t instanceof e))return!1;var n=t;return this.isNull()?n.isNull():this._maxx===n.getMaxX()&&this._maxy===n.getMaxY()&&this._minx===n.getMinX()&&this._miny===n.getMinY()}},{key:"intersection",value:function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new e;var n=this._minx>t._minx?this._minx:t._minx,i=this._miny>t._miny?this._miny:t._miny;return new e(n,this._maxx<t._maxx?this._maxx:t._maxx,i,this._maxy<t._maxy?this._maxy:t._maxy)}},{key:"isNull",value:function(){return this._maxx<this._minx}},{key:"getMaxX",value:function(){return this._maxx}},{key:"covers",value:function(){if(1===arguments.length){if(arguments[0]instanceof V){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof e){var n=arguments[0];return!this.isNull()&&!n.isNull()&&n.getMinX()>=this._minx&&n.getMaxX()<=this._maxx&&n.getMinY()>=this._miny&&n.getMaxY()<=this._maxy}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];return!this.isNull()&&i>=this._minx&&i<=this._maxx&&r>=this._miny&&r<=this._maxy}}},{key:"intersects",value:function(){if(1===arguments.length){if(arguments[0]instanceof e){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof V){var n=arguments[0];return this.intersects(n.x,n.y)}}else if(2===arguments.length){if(arguments[0]instanceof V&&arguments[1]instanceof V){var i=arguments[0],r=arguments[1];return!(this.isNull()||(i.x<r.x?i.x:r.x)>this._maxx||(i.x>r.x?i.x:r.x)<this._minx||(i.y<r.y?i.y:r.y)>this._maxy||(i.y>r.y?i.y:r.y)<this._miny)}if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var o=arguments[0],s=arguments[1];return!this.isNull()&&!(o>this._maxx||o<this._minx||s>this._maxy||s<this._miny)}}}},{key:"getMinY",value:function(){return this._miny}},{key:"getDiameter",value:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return Math.sqrt(t*t+e*e)}},{key:"getMinX",value:function(){return this._minx}},{key:"expandToInclude",value:function(){if(1===arguments.length){if(arguments[0]instanceof V){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof e){var n=arguments[0];if(n.isNull())return null;this.isNull()?(this._minx=n.getMinX(),this._maxx=n.getMaxX(),this._miny=n.getMinY(),this._maxy=n.getMaxY()):(n._minx<this._minx&&(this._minx=n._minx),n._maxx>this._maxx&&(this._maxx=n._maxx),n._miny<this._miny&&(this._miny=n._miny),n._maxy>this._maxy&&(this._maxy=n._maxy))}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.isNull()?(this._minx=i,this._maxx=i,this._miny=r,this._maxy=r):(i<this._minx&&(this._minx=i),i>this._maxx&&(this._maxx=i),r<this._miny&&(this._miny=r),r>this._maxy&&(this._maxy=r))}}},{key:"minExtent",value:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e}},{key:"getWidth",value:function(){return this.isNull()?0:this._maxx-this._minx}},{key:"compareTo",value:function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0}},{key:"translate",value:function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)}},{key:"copy",value:function(){return new e(this)}},{key:"toString",value:function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"}},{key:"setToNull",value:function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1}},{key:"disjoint",value:function(t){return!(!this.isNull()&&!t.isNull())||t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny}},{key:"getHeight",value:function(){return this.isNull()?0:this._maxy-this._miny}},{key:"maxExtent",value:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e}},{key:"expandBy",value:function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}}},{key:"contains",value:function(){if(1===arguments.length){if(arguments[0]instanceof e){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof V){var n=arguments[0];return this.covers(n)}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];return this.covers(i,r)}}},{key:"centre",value:function(){return this.isNull()?null:new V((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)}},{key:"init",value:function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof V){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof e){var n=arguments[0];this._minx=n._minx,this._maxx=n._maxx,this._miny=n._miny,this._maxy=n._maxy}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.init(i.x,r.x,i.y,r.y)}else if(4===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2],l=arguments[3];o<s?(this._minx=o,this._maxx=s):(this._minx=s,this._maxx=o),a<l?(this._miny=a,this._maxy=l):(this._miny=l,this._maxy=a)}}},{key:"getMaxY",value:function(){return this._maxy}},{key:"distance",value:function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)}},{key:"hashCode",value:function(){var t=17;return 37*(t=37*(t=37*(t=37*t+V.hashCode(this._minx))+V.hashCode(this._maxx))+V.hashCode(this._miny))+V.hashCode(this._maxy)}},{key:"interfaces_",get:function(){return[E,k]}}],[{key:"constructor_",value:function(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof V){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof e){var n=arguments[0];this.init(n)}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.init(i.x,r.x,i.y,r.y)}else if(4===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2],l=arguments[3];this.init(o,s,a,l)}}},{key:"intersects",value:function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2],s=arguments[3],a=Math.min(o.x,s.x),l=Math.max(o.x,s.x),u=Math.min(i.x,r.x),c=Math.max(i.x,r.x);return!(u>l||c<a||(a=Math.min(o.y,s.y),l=Math.max(o.y,s.y),u=Math.min(i.y,r.y),c=Math.max(i.y,r.y),u>l||c<a))}}}]),e}(),U=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"isGeometryCollection",value:function(){return this.getTypeCode()===e.TYPECODE_GEOMETRYCOLLECTION}},{key:"getFactory",value:function(){return this._factory}},{key:"getGeometryN",value:function(t){return this}},{key:"getArea",value:function(){return 0}},{key:"isRectangle",value:function(){return!1}},{key:"equalsExact",value:function(t){return this===t||this.equalsExact(t,0)}},{key:"geometryChanged",value:function(){this.apply(e.geometryChangedFilter)}},{key:"geometryChangedAction",value:function(){this._envelope=null}},{key:"equalsNorm",value:function(t){return null!==t&&this.norm().equalsExact(t.norm())}},{key:"getLength",value:function(){return 0}},{key:"getNumGeometries",value:function(){return 1}},{key:"compareTo",value:function(){var t;if(1===arguments.length){var e=arguments[0];return t=e,this.getTypeCode()!==t.getTypeCode()?this.getTypeCode()-t.getTypeCode():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(e)}if(2===arguments.length){var n=arguments[0],i=arguments[1];return t=n,this.getTypeCode()!==t.getTypeCode()?this.getTypeCode()-t.getTypeCode():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(n,i)}}},{key:"getUserData",value:function(){return this._userData}},{key:"getSRID",value:function(){return this._SRID}},{key:"getEnvelope",value:function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())}},{key:"checkNotGeometryCollection",value:function(t){if(t.getTypeCode()===e.TYPECODE_GEOMETRYCOLLECTION)throw new b("This method does not support GeometryCollection arguments")}},{key:"equal",value:function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n}},{key:"norm",value:function(){var t=this.copy();return t.normalize(),t}},{key:"reverse",value:function(){var t=this.reverseInternal();return null!=this.envelope&&(t.envelope=this.envelope.copy()),t.setSRID(this.getSRID()),t}},{key:"copy",value:function(){var t=this.copyInternal();return t.envelope=null==this._envelope?null:this._envelope.copy(),t._SRID=this._SRID,t._userData=this._userData,t}},{key:"getPrecisionModel",value:function(){return this._factory.getPrecisionModel()}},{key:"getEnvelopeInternal",value:function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new q(this._envelope)}},{key:"setSRID",value:function(t){this._SRID=t}},{key:"setUserData",value:function(t){this._userData=t}},{key:"compare",value:function(t,e){for(var n=t.iterator(),i=e.iterator();n.hasNext()&&i.hasNext();){var r=n.next(),o=i.next(),s=r.compareTo(o);if(0!==s)return s}return n.hasNext()?1:i.hasNext()?-1:0}},{key:"hashCode",value:function(){return this.getEnvelopeInternal().hashCode()}},{key:"isEquivalentClass",value:function(t){return this.getClass()===t.getClass()}},{key:"isGeometryCollectionOrDerived",value:function(){return this.getTypeCode()===e.TYPECODE_GEOMETRYCOLLECTION||this.getTypeCode()===e.TYPECODE_MULTIPOINT||this.getTypeCode()===e.TYPECODE_MULTILINESTRING||this.getTypeCode()===e.TYPECODE_MULTIPOLYGON}},{key:"interfaces_",get:function(){return[w,E,k]}},{key:"getClass",value:function(){return e}}],[{key:"hasNonEmptyElements",value:function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1}},{key:"hasNullElements",value:function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1}}]),e}();U.constructor_=function(t){t&&(this._envelope=null,this._userData=null,this._factory=t,this._SRID=t.getSRID())},U.TYPECODE_POINT=0,U.TYPECODE_MULTIPOINT=1,U.TYPECODE_LINESTRING=2,U.TYPECODE_LINEARRING=3,U.TYPECODE_MULTILINESTRING=4,U.TYPECODE_POLYGON=5,U.TYPECODE_MULTIPOLYGON=6,U.TYPECODE_GEOMETRYCOLLECTION=7,U.TYPENAME_POINT="Point",U.TYPENAME_MULTIPOINT="MultiPoint",U.TYPENAME_LINESTRING="LineString",U.TYPENAME_LINEARRING="LinearRing",U.TYPENAME_MULTILINESTRING="MultiLineString",U.TYPENAME_POLYGON="Polygon",U.TYPENAME_MULTIPOLYGON="MultiPolygon",U.TYPENAME_GEOMETRYCOLLECTION="GeometryCollection",U.geometryChangedFilter={get interfaces_(){return[x]},filter:function(t){t.geometryChangedAction()}};var X=function(){function e(){t(this,e)}return n(e,null,[{key:"toLocationSymbol",value:function(t){switch(t){case e.EXTERIOR:return"e";case e.BOUNDARY:return"b";case e.INTERIOR:return"i";case e.NONE:return"-"}throw new b("Unknown location value: "+t)}}]),e}();X.INTERIOR=0,X.BOUNDARY=1,X.EXTERIOR=2,X.NONE=-1;var W=function(){function e(){t(this,e)}return n(e,[{key:"add",value:function(){}},{key:"addAll",value:function(){}},{key:"isEmpty",value:function(){}},{key:"iterator",value:function(){}},{key:"size",value:function(){}},{key:"toArray",value:function(){}},{key:"remove",value:function(){}}]),e}(),H=function(e){i(r,e);var n=h(r);function r(e){var i;return t(this,r),(i=n.call(this,e)).name=Object.keys({NoSuchElementException:r})[0],i}return r}(_),Z=function(e){i(r,e);var n=h(r);function r(e){var i;return t(this,r),(i=n.call(this,e)).name=Object.keys({UnsupportedOperationException:r})[0],i}return r}(_),K=function(e){i(o,e);var r=h(o);function o(){return t(this,o),r.apply(this,arguments)}return n(o,[{key:"contains",value:function(){}}]),o}(W),J=function(e,r){i(s,e);var o=h(s);function s(e){var n;return t(this,s),(n=o.call(this)).map=new Map,e instanceof W&&n.addAll(e),n}return n(s,[{key:"contains",value:function(t){var e=t.hashCode?t.hashCode():t;return!!this.map.has(e)}},{key:"add",value:function(t){var e=t.hashCode?t.hashCode():t;return!this.map.has(e)&&!!this.map.set(e,t)}},{key:"addAll",value:function(t){var e,n=v(t);try{for(n.s();!(e=n.n()).done;){var i=e.value;this.add(i)}}catch(t){n.e(t)}finally{n.f()}return!0}},{key:"remove",value:function(){throw new Z}},{key:"size",value:function(){return this.map.size}},{key:"isEmpty",value:function(){return 0===this.map.size}},{key:"toArray",value:function(){return Array.from(this.map.values())}},{key:"iterator",value:function(){return new Q(this.map)}},{key:r,value:function(){return this.map}}]),s}(K,Symbol.iterator),Q=function(){function e(n){t(this,e),this.iterator=n.values();var i=this.iterator.next(),r=i.done,o=i.value;this.done=r,this.value=o}return n(e,[{key:"next",value:function(){if(this.done)throw new H;var t=this.value,e=this.iterator.next(),n=e.done,i=e.value;return this.done=n,this.value=i,t}},{key:"hasNext",value:function(){return!this.done}},{key:"remove",value:function(){throw new Z}}]),e}(),$=function(){function e(){t(this,e)}return n(e,null,[{key:"opposite",value:function(t){return t===e.LEFT?e.RIGHT:t===e.RIGHT?e.LEFT:t}}]),e}();$.ON=0,$.LEFT=1,$.RIGHT=2;var tt=function(e){i(r,e);var n=h(r);function r(e){var i;return t(this,r),(i=n.call(this,e)).name=Object.keys({EmptyStackException:r})[0],i}return r}(_),et=function(e){i(r,e);var n=h(r);function r(e){var i;return t(this,r),(i=n.call(this,e)).name=Object.keys({IndexOutOfBoundsException:r})[0],i}return r}(_),nt=function(e){i(o,e);var r=h(o);function o(){return t(this,o),r.apply(this,arguments)}return n(o,[{key:"get",value:function(){}},{key:"set",value:function(){}},{key:"isEmpty",value:function(){}}]),o}(W),it=function(e){i(o,e);var r=h(o);function o(){var e;return t(this,o),(e=r.call(this)).array=[],e}return n(o,[{key:"add",value:function(t){return this.array.push(t),!0}},{key:"get",value:function(t){if(t<0||t>=this.size())throw new et;return this.array[t]}},{key:"push",value:function(t){return this.array.push(t),t}},{key:"pop",value:function(){if(0===this.array.length)throw new tt;return this.array.pop()}},{key:"peek",value:function(){if(0===this.array.length)throw new tt;return this.array[this.array.length-1]}},{key:"empty",value:function(){return 0===this.array.length}},{key:"isEmpty",value:function(){return this.empty()}},{key:"search",value:function(t){return this.array.indexOf(t)}},{key:"size",value:function(){return this.array.length}},{key:"toArray",value:function(){return this.array.slice()}}]),o}(nt);function rt(t,e){return t.interfaces_&&t.interfaces_.indexOf(e)>-1}var ot=function(){function e(n){t(this,e),this.str=n}return n(e,[{key:"append",value:function(t){this.str+=t}},{key:"setCharAt",value:function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)}},{key:"toString",value:function(){return this.str}}]),e}(),st=function(){function e(n){t(this,e),this.value=n}return n(e,[{key:"intValue",value:function(){return this.value}},{key:"compareTo",value:function(t){return this.value<t?-1:this.value>t?1:0}}],[{key:"compare",value:function(t,e){return t<e?-1:t>e?1:0}},{key:"isNan",value:function(t){return Number.isNaN(t)}},{key:"valueOf",value:function(t){return new e(t)}}]),e}(),at=function(){function e(){t(this,e)}return n(e,null,[{key:"isWhitespace",value:function(t){return t<=32&&t>=0||127===t}},{key:"toUpperCase",value:function(t){return t.toUpperCase()}}]),e}(),lt=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"le",value:function(t){return this._hi<t._hi||this._hi===t._hi&&this._lo<=t._lo}},{key:"extractSignificantDigits",value:function(t,n){var i=this.abs(),r=e.magnitude(i._hi),o=e.TEN.pow(r);(i=i.divide(o)).gt(e.TEN)?(i=i.divide(e.TEN),r+=1):i.lt(e.ONE)&&(i=i.multiply(e.TEN),r-=1);for(var s=r+1,a=new ot,l=e.MAX_PRINT_DIGITS-1,u=0;u<=l;u++){t&&u===s&&a.append(".");var c=Math.trunc(i._hi);if(c<0)break;var h=!1,f=0;c>9?(h=!0,f="9"):f="0"+c,a.append(f),i=i.subtract(e.valueOf(c)).multiply(e.TEN),h&&i.selfAdd(e.TEN);var d=!0,g=e.magnitude(i._hi);if(g<0&&Math.abs(g)>=l-u&&(d=!1),!d)break}return n[0]=r,a.toString()}},{key:"sqr",value:function(){return this.multiply(this)}},{key:"doubleValue",value:function(){return this._hi+this._lo}},{key:"subtract",value:function(){if(arguments[0]instanceof e){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var n=arguments[0];return this.add(-n)}}},{key:"equals",value:function(){if(1===arguments.length&&arguments[0]instanceof e){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}}},{key:"isZero",value:function(){return 0===this._hi&&0===this._lo}},{key:"selfSubtract",value:function(){if(arguments[0]instanceof e){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var n=arguments[0];return this.isNaN()?this:this.selfAdd(-n,0)}}},{key:"getSpecialNumberString",value:function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null}},{key:"min",value:function(t){return this.le(t)?this:t}},{key:"selfDivide",value:function(){if(1===arguments.length){if(arguments[0]instanceof e){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){var n=arguments[0];return this.selfDivide(n,0)}}else if(2===arguments.length){var i=arguments[0],r=arguments[1],o=null,s=null,a=null,l=null,u=null,c=null,h=null,f=null;return u=this._hi/i,f=(o=(c=e.SPLIT*u)-(o=c-u))*(a=(f=e.SPLIT*i)-(a=f-i))-(h=u*i)+o*(l=i-a)+(s=u-o)*a+s*l,f=u+(c=(this._hi-h-f+this._lo-u*r)/i),this._hi=f,this._lo=u-f+c,this}}},{key:"dump",value:function(){return"DD<"+this._hi+", "+this._lo+">"}},{key:"divide",value:function(){if(arguments[0]instanceof e){var t=arguments[0],n=null,i=null,r=null,o=null,s=null,a=null,l=null,u=null;return i=(s=this._hi/t._hi)-(n=(a=e.SPLIT*s)-(n=a-s)),u=n*(r=(u=e.SPLIT*t._hi)-(r=u-t._hi))-(l=s*t._hi)+n*(o=t._hi-r)+i*r+i*o,new e(u=s+(a=(this._hi-l-u+this._lo-s*t._lo)/t._hi),s-u+a)}if("number"==typeof arguments[0]){var c=arguments[0];return N.isNaN(c)?e.createNaN():e.copy(this).selfDivide(c,0)}}},{key:"ge",value:function(t){return this._hi>t._hi||this._hi===t._hi&&this._lo>=t._lo}},{key:"pow",value:function(t){if(0===t)return e.valueOf(1);var n=new e(this),i=e.valueOf(1),r=Math.abs(t);if(r>1)for(;r>0;)r%2==1&&i.selfMultiply(n),(r/=2)>0&&(n=n.sqr());else i=n;return t<0?i.reciprocal():i}},{key:"ceil",value:function(){if(this.isNaN())return e.NaN;var t=Math.ceil(this._hi),n=0;return t===this._hi&&(n=Math.ceil(this._lo)),new e(t,n)}},{key:"compareTo",value:function(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0}},{key:"rint",value:function(){return this.isNaN()?this:this.add(.5).floor()}},{key:"setValue",value:function(){if(arguments[0]instanceof e){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var n=arguments[0];return this.init(n),this}}},{key:"max",value:function(t){return this.ge(t)?this:t}},{key:"sqrt",value:function(){if(this.isZero())return e.valueOf(0);if(this.isNegative())return e.NaN;var t=1/Math.sqrt(this._hi),n=this._hi*t,i=e.valueOf(n),r=this.subtract(i.sqr())._hi*(.5*t);return i.add(r)}},{key:"selfAdd",value:function(){if(1===arguments.length){if(arguments[0]instanceof e){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var n=arguments[0],i=null,r=null,o=null,s=null,a=null,l=null;return s=(o=this._hi+n)-(a=o-this._hi),r=(l=(s=n-a+(this._hi-s))+this._lo)+(o-(i=o+l)),this._hi=i+r,this._lo=r+(i-this._hi),this}}else if(2===arguments.length){var u=arguments[0],c=arguments[1],h=null,f=null,d=null,g=null,p=null,v=null,y=null;g=this._hi+u,f=this._lo+c,p=g-(v=g-this._hi),d=f-(y=f-this._lo);var m=(h=g+(v=(p=u-v+(this._hi-p))+f))+(v=(d=c-y+(this._lo-d))+(v+(g-h))),_=v+(h-m);return this._hi=m,this._lo=_,this}}},{key:"selfMultiply",value:function(){if(1===arguments.length){if(arguments[0]instanceof e){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){var n=arguments[0];return this.selfMultiply(n,0)}}else if(2===arguments.length){var i=arguments[0],r=arguments[1],o=null,s=null,a=null,l=null,u=null,c=null;o=(u=e.SPLIT*this._hi)-this._hi,c=e.SPLIT*i,o=u-o,s=this._hi-o,a=c-i;var h=(u=this._hi*i)+(c=o*(a=c-a)-u+o*(l=i-a)+s*a+s*l+(this._hi*r+this._lo*i)),f=c+(o=u-h);return this._hi=h,this._lo=f,this}}},{key:"selfSqr",value:function(){return this.selfMultiply(this)}},{key:"floor",value:function(){if(this.isNaN())return e.NaN;var t=Math.floor(this._hi),n=0;return t===this._hi&&(n=Math.floor(this._lo)),new e(t,n)}},{key:"negate",value:function(){return this.isNaN()?this:new e(-this._hi,-this._lo)}},{key:"clone",value:function(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return null;throw t}}},{key:"multiply",value:function(){if(arguments[0]instanceof e){var t=arguments[0];return t.isNaN()?e.createNaN():e.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var n=arguments[0];return N.isNaN(n)?e.createNaN():e.copy(this).selfMultiply(n,0)}}},{key:"isNaN",value:function(){return N.isNaN(this._hi)}},{key:"intValue",value:function(){return Math.trunc(this._hi)}},{key:"toString",value:function(){var t=e.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()}},{key:"toStandardNotation",value:function(){var t=this.getSpecialNumberString();if(null!==t)return t;var n=new Array(1).fill(null),i=this.extractSignificantDigits(!0,n),r=n[0]+1,o=i;if("."===i.charAt(0))o="0"+i;else if(r<0)o="0."+e.stringOfChar("0",-r)+i;else if(-1===i.indexOf(".")){var s=r-i.length;o=i+e.stringOfChar("0",s)+".0"}return this.isNegative()?"-"+o:o}},{key:"reciprocal",value:function(){var t,n,i,r,o=null,s=null,a=null,l=null;t=(i=1/this._hi)-(o=(a=e.SPLIT*i)-(o=a-i)),s=(l=e.SPLIT*this._hi)-this._hi;var u=i+(a=(1-(r=i*this._hi)-(l=o*(s=l-s)-r+o*(n=this._hi-s)+t*s+t*n)-i*this._lo)/this._hi);return new e(u,i-u+a)}},{key:"toSciNotation",value:function(){if(this.isZero())return e.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var n=new Array(1).fill(null),i=this.extractSignificantDigits(!1,n),r=e.SCI_NOT_EXPONENT_CHAR+n[0];if("0"===i.charAt(0))throw new IllegalStateException("Found leading zero: "+i);var o="";i.length>1&&(o=i.substring(1));var s=i.charAt(0)+"."+o;return this.isNegative()?"-"+s+r:s+r}},{key:"abs",value:function(){return this.isNaN()?e.NaN:this.isNegative()?this.negate():new e(this)}},{key:"isPositive",value:function(){return this._hi>0||0===this._hi&&this._lo>0}},{key:"lt",value:function(t){return this._hi<t._hi||this._hi===t._hi&&this._lo<t._lo}},{key:"add",value:function(){if(arguments[0]instanceof e){var t=arguments[0];return e.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var n=arguments[0];return e.copy(this).selfAdd(n)}}},{key:"init",value:function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof e){var n=arguments[0];this._hi=n._hi,this._lo=n._lo}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this._hi=i,this._lo=r}}},{key:"gt",value:function(t){return this._hi>t._hi||this._hi===t._hi&&this._lo>t._lo}},{key:"isNegative",value:function(){return this._hi<0||0===this._hi&&this._lo<0}},{key:"trunc",value:function(){return this.isNaN()?e.NaN:this.isPositive()?this.floor():this.ceil()}},{key:"signum",value:function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0}},{key:"interfaces_",get:function(){return[k,E,w]}}],[{key:"constructor_",value:function(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this.init(t)}else if(arguments[0]instanceof e){var n=arguments[0];this.init(n)}else if("string"==typeof arguments[0]){var i=arguments[0];e.constructor_.call(this,e.parse(i))}}else if(2===arguments.length){var r=arguments[0],o=arguments[1];this.init(r,o)}}},{key:"determinant",value:function(){if("number"==typeof arguments[3]&&"number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],n=arguments[1],i=arguments[2],r=arguments[3];return e.determinant(e.valueOf(t),e.valueOf(n),e.valueOf(i),e.valueOf(r))}if(arguments[3]instanceof e&&arguments[2]instanceof e&&arguments[0]instanceof e&&arguments[1]instanceof e){var o=arguments[1],s=arguments[2],a=arguments[3];return arguments[0].multiply(a).selfSubtract(o.multiply(s))}}},{key:"sqr",value:function(t){return e.valueOf(t).selfMultiply(t)}},{key:"valueOf",value:function(){if("string"==typeof arguments[0]){var t=arguments[0];return e.parse(t)}if("number"==typeof arguments[0])return new e(arguments[0])}},{key:"sqrt",value:function(t){return e.valueOf(t).sqrt()}},{key:"parse",value:function(t){for(var n=0,i=t.length;at.isWhitespace(t.charAt(n));)n++;var r=!1;if(n<i){var o=t.charAt(n);"-"!==o&&"+"!==o||(n++,"-"===o&&(r=!0))}for(var s=new e,a=0,l=0,u=0,c=!1;!(n>=i);){var h=t.charAt(n);if(n++,at.isDigit(h)){var f=h-"0";s.selfMultiply(e.TEN),s.selfAdd(f),a++}else{if("."!==h){if("e"===h||"E"===h){var d=t.substring(n);try{u=st.parseInt(d)}catch(e){throw e instanceof NumberFormatException?new NumberFormatException("Invalid exponent "+d+" in string "+t):e}break}throw new NumberFormatException("Unexpected character '"+h+"' at position "+n+" in string "+t)}l=a,c=!0}}var g=s;c||(l=a);var p=a-l-u;if(0===p)g=s;else if(p>0){var v=e.TEN.pow(p);g=s.divide(v)}else if(p<0){var y=e.TEN.pow(-p);g=s.multiply(y)}return r?g.negate():g}},{key:"createNaN",value:function(){return new e(N.NaN,N.NaN)}},{key:"copy",value:function(t){return new e(t)}},{key:"magnitude",value:function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),i=Math.trunc(Math.floor(n));return 10*Math.pow(10,i)<=e&&(i+=1),i}},{key:"stringOfChar",value:function(t,e){for(var n=new ot,i=0;i<e;i++)n.append(t);return n.toString()}}]),e}();lt.PI=new lt(3.141592653589793,12246467991473532e-32),lt.TWO_PI=new lt(6.283185307179586,24492935982947064e-32),lt.PI_2=new lt(1.5707963267948966,6123233995736766e-32),lt.E=new lt(2.718281828459045,14456468917292502e-32),lt.NaN=new lt(N.NaN,N.NaN),lt.EPS=123259516440783e-46,lt.SPLIT=134217729,lt.MAX_PRINT_DIGITS=32,lt.TEN=lt.valueOf(10),lt.ONE=lt.valueOf(1),lt.SCI_NOT_EXPONENT_CHAR="E",lt.SCI_NOT_ZERO="0.0E0";var ut=function(){function e(){t(this,e)}return n(e,null,[{key:"orientationIndex",value:function(t,n,i){var r=e.orientationIndexFilter(t,n,i);if(r<=1)return r;var o=lt.valueOf(n.x).selfAdd(-t.x),s=lt.valueOf(n.y).selfAdd(-t.y),a=lt.valueOf(i.x).selfAdd(-n.x),l=lt.valueOf(i.y).selfAdd(-n.y);return o.selfMultiply(l).selfSubtract(s.selfMultiply(a)).signum()}},{key:"signOfDet2x2",value:function(){if(arguments[3]instanceof lt&&arguments[2]instanceof lt&&arguments[0]instanceof lt&&arguments[1]instanceof lt){var t=arguments[1],e=arguments[2],n=arguments[3];return arguments[0].multiply(n).selfSubtract(t.multiply(e)).signum()}if("number"==typeof arguments[3]&&"number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var i=arguments[0],r=arguments[1],o=arguments[2],s=arguments[3],a=lt.valueOf(i),l=lt.valueOf(r),u=lt.valueOf(o),c=lt.valueOf(s);return a.multiply(c).selfSubtract(l.multiply(u)).signum()}}},{key:"intersection",value:function(t,e,n,i){var r=new lt(t.y).selfSubtract(e.y),o=new lt(e.x).selfSubtract(t.x),s=new lt(t.x).selfMultiply(e.y).selfSubtract(new lt(e.x).selfMultiply(t.y)),a=new lt(n.y).selfSubtract(i.y),l=new lt(i.x).selfSubtract(n.x),u=new lt(n.x).selfMultiply(i.y).selfSubtract(new lt(i.x).selfMultiply(n.y)),c=o.multiply(u).selfSubtract(l.multiply(s)),h=a.multiply(s).selfSubtract(r.multiply(u)),f=r.multiply(l).selfSubtract(a.multiply(o)),d=c.selfDivide(f).doubleValue(),g=h.selfDivide(f).doubleValue();return N.isNaN(d)||N.isInfinite(d)||N.isNaN(g)||N.isInfinite(g)?null:new V(d,g)}},{key:"orientationIndexFilter",value:function(t,n,i){var r=null,o=(t.x-i.x)*(n.y-i.y),s=(t.y-i.y)*(n.x-i.x),a=o-s;if(o>0){if(s<=0)return e.signum(a);r=o+s}else{if(!(o<0))return e.signum(a);if(s>=0)return e.signum(a);r=-o-s}var l=e.DP_SAFE_EPSILON*r;return a>=l||-a>=l?e.signum(a):2}},{key:"signum",value:function(t){return t>0?1:t<0?-1:0}}]),e}();ut.DP_SAFE_EPSILON=1e-15;var ct=function(){function e(){t(this,e)}return n(e,[{key:"getM",value:function(t){if(this.hasM()){var e=this.getDimension()-this.getMeasures();return this.getOrdinate(t,e)}return N.NaN}},{key:"setOrdinate",value:function(t,e,n){}},{key:"getZ",value:function(t){return this.hasZ()?this.getOrdinate(t,2):N.NaN}},{key:"size",value:function(){}},{key:"getOrdinate",value:function(t,e){}},{key:"getCoordinate",value:function(){}},{key:"getCoordinateCopy",value:function(t){}},{key:"createCoordinate",value:function(){}},{key:"getDimension",value:function(){}},{key:"hasM",value:function(){return this.getMeasures()>0}},{key:"getX",value:function(t){}},{key:"hasZ",value:function(){return this.getDimension()-this.getMeasures()>2}},{key:"getMeasures",value:function(){return 0}},{key:"expandEnvelope",value:function(t){}},{key:"copy",value:function(){}},{key:"getY",value:function(t){}},{key:"toCoordinateArray",value:function(){}},{key:"interfaces_",get:function(){return[w]}}]),e}();ct.X=0,ct.Y=1,ct.Z=2,ct.M=3;var ht=function(){function e(){t(this,e)}return n(e,null,[{key:"index",value:function(t,e,n){return ut.orientationIndex(t,e,n)}},{key:"isCCW",value:function(){if(arguments[0]instanceof Array){var t=arguments[0],n=t.length-1;if(n<3)throw new b("Ring has fewer than 4 points, so orientation cannot be determined");for(var i=t[0],r=0,o=1;o<=n;o++){var s=t[o];s.y>i.y&&(i=s,r=o)}var a=r;do{(a-=1)<0&&(a=n)}while(t[a].equals2D(i)&&a!==r);var l=r;do{l=(l+1)%n}while(t[l].equals2D(i)&&l!==r);var u=t[a],c=t[l];if(u.equals2D(i)||c.equals2D(i)||u.equals2D(c))return!1;var h=e.index(u,i,c);return 0===h?u.x>c.x:h>0}if(rt(arguments[0],ct)){var f=arguments[0],d=f.size()-1;if(d<3)throw new b("Ring has fewer than 4 points, so orientation cannot be determined");for(var g=f.getCoordinate(0),p=0,v=1;v<=d;v++){var y=f.getCoordinate(v);y.y>g.y&&(g=y,p=v)}var m=null,_=p;do{(_-=1)<0&&(_=d),m=f.getCoordinate(_)}while(m.equals2D(g)&&_!==p);var x=null,E=p;do{E=(E+1)%d,x=f.getCoordinate(E)}while(x.equals2D(g)&&E!==p);if(m.equals2D(g)||x.equals2D(g)||m.equals2D(x))return!1;var w=e.index(m,g,x);return 0===w?m.x>x.x:w>0}}}]),e}();ht.CLOCKWISE=-1,ht.RIGHT=ht.CLOCKWISE,ht.COUNTERCLOCKWISE=1,ht.LEFT=ht.COUNTERCLOCKWISE,ht.COLLINEAR=0,ht.STRAIGHT=ht.COLLINEAR;var ft=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getCoordinate",value:function(){return this._minCoord}},{key:"getRightmostSide",value:function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n}},{key:"findRightmostEdgeAtVertex",value:function(){var t=this._minDe.getEdge().getCoordinates();F.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],n=t[this._minIndex+1],i=ht.index(this._minCoord,n,e),r=!1;(e.y<this._minCoord.y&&n.y<this._minCoord.y&&i===ht.COUNTERCLOCKWISE||e.y>this._minCoord.y&&n.y>this._minCoord.y&&i===ht.CLOCKWISE)&&(r=!0),r&&(this._minIndex=this._minIndex-1)}},{key:"getRightmostSideOfSegment",value:function(t,e){var n=t.getEdge().getCoordinates();if(e<0||e+1>=n.length)return-1;if(n[e].y===n[e+1].y)return-1;var i=$.LEFT;return n[e].y<n[e+1].y&&(i=$.RIGHT),i}},{key:"getEdge",value:function(){return this._orientedDe}},{key:"checkForRightmostCoordinate",value:function(t){for(var e=t.getEdge().getCoordinates(),n=0;n<e.length-1;n++)(null===this._minCoord||e[n].x>this._minCoord.x)&&(this._minDe=t,this._minIndex=n,this._minCoord=e[n])}},{key:"findRightmostEdgeAtNode",value:function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)}},{key:"findEdge",value:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}F.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===$.LEFT&&(this._orientedDe=this._minDe.getSym())}}],[{key:"constructor_",value:function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null}}]),e}(),dt=function(e){i(o,e);var r=h(o);function o(e,n){var i;return t(this,o),(i=r.call(this,n?e+" [ "+n+" ]":e)).pt=n?new V(n):void 0,i.name=Object.keys({TopologyException:o})[0],i}return n(o,[{key:"getCoordinate",value:function(){return this.pt}}]),o}(j),gt=function(){function e(){t(this,e),this.array=[]}return n(e,[{key:"addLast",value:function(t){this.array.push(t)}},{key:"removeFirst",value:function(){return this.array.shift()}},{key:"isEmpty",value:function(){return 0===this.array.length}}]),e}(),pt=function(e,r){i(s,e);var o=h(s);function s(e){var n;return t(this,s),(n=o.call(this)).array=[],e instanceof W&&n.addAll(e),n}return n(s,[{key:"interfaces_",get:function(){return[nt,W]}},{key:"ensureCapacity",value:function(){}},{key:"add",value:function(t){return 1===arguments.length?this.array.push(t):this.array.splice(arguments[0],0,arguments[1]),!0}},{key:"clear",value:function(){this.array=[]}},{key:"addAll",value:function(t){var e,n=v(t);try{for(n.s();!(e=n.n()).done;){var i=e.value;this.array.push(i)}}catch(t){n.e(t)}finally{n.f()}}},{key:"set",value:function(t,e){var n=this.array[t];return this.array[t]=e,n}},{key:"iterator",value:function(){return new vt(this)}},{key:"get",value:function(t){if(t<0||t>=this.size())throw new et;return this.array[t]}},{key:"isEmpty",value:function(){return 0===this.array.length}},{key:"sort",value:function(t){t?this.array.sort((function(e,n){return t.compare(e,n)})):this.array.sort()}},{key:"size",value:function(){return this.array.length}},{key:"toArray",value:function(){return this.array.slice()}},{key:"remove",value:function(t){for(var e=0,n=this.array.length;e<n;e++)if(this.array[e]===t)return!!this.array.splice(e,1);return!1}},{key:r,value:function(){return this.array.values()}}]),s}(nt,Symbol.iterator),vt=function(){function e(n){t(this,e),this.arrayList=n,this.position=0}return n(e,[{key:"next",value:function(){if(this.position===this.arrayList.size())throw new H;return this.arrayList.get(this.position++)}},{key:"hasNext",value:function(){return this.position<this.arrayList.size()}},{key:"set",value:function(t){return this.arrayList.set(this.position-1,t)}},{key:"remove",value:function(){this.arrayList.remove(this.arrayList.get(this.position))}}]),e}(),yt=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"clearVisitedEdges",value:function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)}},{key:"getRightmostCoordinate",value:function(){return this._rightMostCoord}},{key:"computeNodeDepth",value:function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var i=n.next();if(i.isVisited()||i.getSym().isVisited()){e=i;break}}if(null===e)throw new dt("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var r=t.getEdges().iterator();r.hasNext();){var o=r.next();o.setVisited(!0),this.copySymDepths(o)}}},{key:"computeDepth",value:function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.getNode(),e.getLabel(),e.setEdgeDepths($.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)}},{key:"create",value:function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()}},{key:"findResultEdges",value:function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth($.RIGHT)>=1&&e.getDepth($.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}}},{key:"computeDepths",value:function(t){var e=new J,n=new gt,i=t.getNode();for(n.addLast(i),e.add(i),t.setVisited(!0);!n.isEmpty();){var r=n.removeFirst();e.add(r),this.computeNodeDepth(r);for(var o=r.getEdges().iterator();o.hasNext();){var s=o.next().getSym();if(!s.isVisited()){var a=s.getNode();e.contains(a)||(n.addLast(a),e.add(a))}}}}},{key:"compareTo",value:function(t){var e=t;return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0}},{key:"getEnvelope",value:function(){if(null===this._env){for(var t=new q,e=this._dirEdgeList.iterator();e.hasNext();)for(var n=e.next().getEdge().getCoordinates(),i=0;i<n.length-1;i++)t.expandToInclude(n[i]);this._env=t}return this._env}},{key:"addReachable",value:function(t){var e=new it;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}}},{key:"copySymDepths",value:function(t){var e=t.getSym();e.setDepth($.LEFT,t.getDepth($.RIGHT)),e.setDepth($.RIGHT,t.getDepth($.LEFT))}},{key:"add",value:function(t,e){t.setVisited(!0),this._nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var i=n.next();this._dirEdgeList.add(i);var r=i.getSym().getNode();r.isVisited()||e.push(r)}}},{key:"getNodes",value:function(){return this._nodes}},{key:"getDirectedEdges",value:function(){return this._dirEdgeList}},{key:"interfaces_",get:function(){return[E]}}],[{key:"constructor_",value:function(){this._finder=null,this._dirEdgeList=new pt,this._nodes=new pt,this._rightMostCoord=null,this._env=null,this._finder=new ft}}]),e}(),mt=function(){function e(){t(this,e)}return n(e,null,[{key:"intersection",value:function(t,e,n,i){var r=t.x<e.x?t.x:e.x,o=t.y<e.y?t.y:e.y,s=t.x>e.x?t.x:e.x,a=t.y>e.y?t.y:e.y,l=n.x<i.x?n.x:i.x,u=n.y<i.y?n.y:i.y,c=n.x>i.x?n.x:i.x,h=n.y>i.y?n.y:i.y,f=((r>l?r:l)+(s<c?s:c))/2,d=((o>u?o:u)+(a<h?a:h))/2,g=t.x-f,p=t.y-d,v=e.x-f,y=e.y-d,m=n.x-f,_=n.y-d,b=i.x-f,x=i.y-d,E=p-y,w=v-g,k=g*y-v*p,S=_-x,C=b-m,O=m*x-b*_,I=E*C-S*w,M=(w*O-C*k)/I,R=(S*k-E*O)/I;return N.isNaN(M)||N.isInfinite(M)||N.isNaN(R)||N.isInfinite(R)?null:new V(M+f,R+d)}}]),e}(),_t=function(){function e(){t(this,e)}return n(e,null,[{key:"arraycopy",value:function(t,e,n,i,r){for(var o=0,s=e;s<e+r;s++)n[i+o]=t[s],o++}},{key:"getProperty",value:function(t){return{"line.separator":"\n"}[t]}}]),e}(),bt=function(){function e(){t(this,e)}return n(e,null,[{key:"log10",value:function(t){var n=Math.log(t);return N.isInfinite(n)||N.isNaN(n)?n:n/e.LOG_10}},{key:"min",value:function(t,e,n,i){var r=t;return e<r&&(r=e),n<r&&(r=n),i<r&&(r=i),r}},{key:"clamp",value:function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var i=arguments[0],r=arguments[1],o=arguments[2];return i<r?r:i>o?o:i}}},{key:"wrap",value:function(t,e){return t<0?e- -t%e:t%e}},{key:"max",value:function(){if(3===arguments.length){var t=arguments[1],e=arguments[2],n=arguments[0];return t>n&&(n=t),e>n&&(n=e),n}if(4===arguments.length){var i=arguments[1],r=arguments[2],o=arguments[3],s=arguments[0];return i>s&&(s=i),r>s&&(s=r),o>s&&(s=o),s}}},{key:"average",value:function(t,e){return(t+e)/2}}]),e}();bt.LOG_10=Math.log(10);var xt=function(){function e(){t(this,e)}return n(e,null,[{key:"segmentToSegment",value:function(t,n,i,r){if(t.equals(n))return e.pointToSegment(t,i,r);if(i.equals(r))return e.pointToSegment(r,t,n);var o=!1;if(q.intersects(t,n,i,r)){var s=(n.x-t.x)*(r.y-i.y)-(n.y-t.y)*(r.x-i.x);if(0===s)o=!0;else{var a=(t.y-i.y)*(r.x-i.x)-(t.x-i.x)*(r.y-i.y),l=((t.y-i.y)*(n.x-t.x)-(t.x-i.x)*(n.y-t.y))/s,u=a/s;(u<0||u>1||l<0||l>1)&&(o=!0)}}else o=!0;return o?bt.min(e.pointToSegment(t,i,r),e.pointToSegment(n,i,r),e.pointToSegment(i,t,n),e.pointToSegment(r,t,n)):0}},{key:"pointToSegment",value:function(t,e,n){if(e.x===n.x&&e.y===n.y)return t.distance(e);var i=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),r=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/i;if(r<=0)return t.distance(e);if(r>=1)return t.distance(n);var o=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/i;return Math.abs(o)*Math.sqrt(i)}},{key:"pointToLinePerpendicular",value:function(t,e,n){var i=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),r=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/i;return Math.abs(r)*Math.sqrt(i)}},{key:"pointToSegmentString",value:function(t,n){if(0===n.length)throw new b("Line array must contain at least one vertex");for(var i=t.distance(n[0]),r=0;r<n.length-1;r++){var o=e.pointToSegment(t,n[r],n[r+1]);o<i&&(i=o)}return i}}]),e}(),Et=function(){function e(){t(this,e)}return n(e,[{key:"create",value:function(){if(1===arguments.length)arguments[0]instanceof Array||rt(arguments[0],ct);else if(2===arguments.length);else if(3===arguments.length){var t=arguments[0],e=arguments[1];return this.create(t,e)}}}]),e}(),wt=function(){function e(){t(this,e)}return n(e,[{key:"filter",value:function(t){}}]),e}(),kt=function(){function e(){t(this,e)}return n(e,null,[{key:"ofLine",value:function(t){var e=t.size();if(e<=1)return 0;var n=0,i=new V;t.getCoordinate(0,i);for(var r=i.x,o=i.y,s=1;s<e;s++){t.getCoordinate(s,i);var a=i.x,l=i.y,u=a-r,c=l-o;n+=Math.sqrt(u*u+c*c),r=a,o=l}return n}}]),e}(),St=function e(){t(this,e)},Ct=function(){function e(){t(this,e)}return n(e,null,[{key:"copyCoord",value:function(t,e,n,i){for(var r=Math.min(t.getDimension(),n.getDimension()),o=0;o<r;o++)n.setOrdinate(i,o,t.getOrdinate(e,o))}},{key:"isRing",value:function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,ct.X)===t.getOrdinate(e-1,ct.X)&&t.getOrdinate(0,ct.Y)===t.getOrdinate(e-1,ct.Y)}},{key:"scroll",value:function(){if(2===arguments.length){if(rt(arguments[0],ct)&&Number.isInteger(arguments[1])){var t=arguments[0],n=arguments[1];e.scroll(t,n,e.isRing(t))}else if(rt(arguments[0],ct)&&arguments[1]instanceof V){var i=arguments[0],r=arguments[1],o=e.indexOf(r,i);if(o<=0)return null;e.scroll(i,o)}}else if(3===arguments.length){var s=arguments[0],a=arguments[1],l=arguments[2];if(a<=0)return null;for(var u=s.copy(),c=l?s.size()-1:s.size(),h=0;h<c;h++)for(var f=0;f<s.getDimension();f++)s.setOrdinate(h,f,u.getOrdinate((a+h)%c,f));if(l)for(var d=0;d<s.getDimension();d++)s.setOrdinate(c,d,s.getOrdinate(0,d))}}},{key:"isEqual",value:function(t,e){var n=t.size();if(n!==e.size())return!1;for(var i=Math.min(t.getDimension(),e.getDimension()),r=0;r<n;r++)for(var o=0;o<i;o++){var s=t.getOrdinate(r,o),a=e.getOrdinate(r,o);if(!(t.getOrdinate(r,o)===e.getOrdinate(r,o)||N.isNaN(s)&&N.isNaN(a)))return!1}return!0}},{key:"minCoordinateIndex",value:function(){if(1===arguments.length){var t=arguments[0];return e.minCoordinateIndex(t,0,t.size()-1)}if(3===arguments.length){for(var n=arguments[0],i=arguments[2],r=-1,o=null,s=arguments[1];s<=i;s++){var a=n.getCoordinate(s);(null===o||o.compareTo(a)>0)&&(o=a,r=s)}return r}}},{key:"extend",value:function(t,n,i){var r=t.create(i,n.getDimension()),o=n.size();if(e.copy(n,0,r,0,o),o>0)for(var s=o;s<i;s++)e.copy(n,o-1,r,s,1);return r}},{key:"reverse",value:function(t){for(var n=t.size()-1,i=Math.trunc(n/2),r=0;r<=i;r++)e.swap(t,r,n-r)}},{key:"swap",value:function(t,e,n){if(e===n)return null;for(var i=0;i<t.getDimension();i++){var r=t.getOrdinate(e,i);t.setOrdinate(e,i,t.getOrdinate(n,i)),t.setOrdinate(n,i,r)}}},{key:"copy",value:function(t,n,i,r,o){for(var s=0;s<o;s++)e.copyCoord(t,n+s,i,r+s)}},{key:"ensureValidRing",value:function(t,n){var i=n.size();return 0===i?n:i<=3?e.createClosedRing(t,n,4):n.getOrdinate(0,ct.X)===n.getOrdinate(i-1,ct.X)&&n.getOrdinate(0,ct.Y)===n.getOrdinate(i-1,ct.Y)?n:e.createClosedRing(t,n,i+1)}},{key:"indexOf",value:function(t,e){for(var n=0;n<e.size();n++)if(t.x===e.getOrdinate(n,ct.X)&&t.y===e.getOrdinate(n,ct.Y))return n;return-1}},{key:"createClosedRing",value:function(t,n,i){var r=t.create(i,n.getDimension()),o=n.size();e.copy(n,0,r,0,o);for(var s=o;s<i;s++)e.copy(n,0,r,s,1);return r}},{key:"minCoordinate",value:function(t){for(var e=null,n=0;n<t.size();n++){var i=t.getCoordinate(n);(null===e||e.compareTo(i)>0)&&(e=i)}return e}}]),e}(),Ot=function(){function e(){t(this,e)}return n(e,null,[{key:"toDimensionSymbol",value:function(t){switch(t){case e.FALSE:return e.SYM_FALSE;case e.TRUE:return e.SYM_TRUE;case e.DONTCARE:return e.SYM_DONTCARE;case e.P:return e.SYM_P;case e.L:return e.SYM_L;case e.A:return e.SYM_A}throw new b("Unknown dimension value: "+t)}},{key:"toDimensionValue",value:function(t){switch(at.toUpperCase(t)){case e.SYM_FALSE:return e.FALSE;case e.SYM_TRUE:return e.TRUE;case e.SYM_DONTCARE:return e.DONTCARE;case e.SYM_P:return e.P;case e.SYM_L:return e.L;case e.SYM_A:return e.A}throw new b("Unknown dimension symbol: "+t)}}]),e}();Ot.P=0,Ot.L=1,Ot.A=2,Ot.FALSE=-1,Ot.TRUE=-2,Ot.DONTCARE=-3,Ot.SYM_FALSE="F",Ot.SYM_TRUE="T",Ot.SYM_DONTCARE="*",Ot.SYM_P="0",Ot.SYM_L="1",Ot.SYM_A="2";var It=function(){function e(){t(this,e)}return n(e,[{key:"filter",value:function(t){}}]),e}(),Mt=function(){function e(){t(this,e)}return n(e,[{key:"filter",value:function(t,e){}},{key:"isDone",value:function(){}},{key:"isGeometryChanged",value:function(){}}]),e}(),Rt=function(e){i(s,e);var o=h(s);function s(){var e;return t(this,s),e=o.call(this),s.constructor_.apply(u(e),arguments),e}return n(s,[{key:"computeEnvelopeInternal",value:function(){return this.isEmpty()?new q:this._points.expandEnvelope(new q)}},{key:"isRing",value:function(){return this.isClosed()&&this.isSimple()}},{key:"getCoordinates",value:function(){return this._points.toCoordinateArray()}},{key:"copyInternal",value:function(){return new s(this._points.copy(),this._factory)}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof U){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t;if(this._points.size()!==n._points.size())return!1;for(var i=0;i<this._points.size();i++)if(!this.equal(this._points.getCoordinate(i),n._points.getCoordinate(i),e))return!1;return!0}return f(r(s.prototype),"equalsExact",this).apply(this,arguments)}},{key:"normalize",value:function(){for(var t=0;t<Math.trunc(this._points.size()/2);t++){var e=this._points.size()-1-t;if(!this._points.getCoordinate(t).equals(this._points.getCoordinate(e))){if(this._points.getCoordinate(t).compareTo(this._points.getCoordinate(e))>0){var n=this._points.copy();Ct.reverse(n),this._points=n}return null}}}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this._points.getCoordinate(0)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?Ot.FALSE:0}},{key:"isClosed",value:function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))}},{key:"reverseInternal",value:function(){var t=this._points.copy();return Ct.reverse(t),this.getFactory().createLineString(t)}},{key:"getEndPoint",value:function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)}},{key:"getTypeCode",value:function(){return U.TYPECODE_LINESTRING}},{key:"getDimension",value:function(){return 1}},{key:"getLength",value:function(){return kt.ofLine(this._points)}},{key:"getNumPoints",value:function(){return this._points.size()}},{key:"compareToSameClass",value:function(){if(1===arguments.length){for(var t=arguments[0],e=0,n=0;e<this._points.size()&&n<t._points.size();){var i=this._points.getCoordinate(e).compareTo(t._points.getCoordinate(n));if(0!==i)return i;e++,n++}return e<this._points.size()?1:n<t._points.size()?-1:0}if(2===arguments.length){var r=arguments[0];return arguments[1].compare(this._points,r._points)}}},{key:"apply",value:function(){if(rt(arguments[0],wt))for(var t=arguments[0],e=0;e<this._points.size();e++)t.filter(this._points.getCoordinate(e));else if(rt(arguments[0],Mt)){var n=arguments[0];if(0===this._points.size())return null;for(var i=0;i<this._points.size()&&(n.filter(this._points,i),!n.isDone());i++);n.isGeometryChanged()&&this.geometryChanged()}else(rt(arguments[0],It)||rt(arguments[0],x))&&arguments[0].filter(this)}},{key:"getBoundary",value:function(){throw new Z}},{key:"isEquivalentClass",value:function(t){return t instanceof s}},{key:"getCoordinateN",value:function(t){return this._points.getCoordinate(t)}},{key:"getGeometryType",value:function(){return U.TYPENAME_LINESTRING}},{key:"getCoordinateSequence",value:function(){return this._points}},{key:"isEmpty",value:function(){return 0===this._points.size()}},{key:"init",value:function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new b("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t}},{key:"isCoordinate",value:function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1}},{key:"getStartPoint",value:function(){return this.isEmpty()?null:this.getPointN(0)}},{key:"getPointN",value:function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))}},{key:"interfaces_",get:function(){return[St]}}],[{key:"constructor_",value:function(){if(this._points=null,0===arguments.length);else if(2===arguments.length){var t=arguments[0],e=arguments[1];U.constructor_.call(this,e),this.init(t)}}}]),s}(U),Tt=function e(){t(this,e)},Pt=function(e){i(s,e);var o=h(s);function s(){var e;return t(this,s),e=o.call(this),s.constructor_.apply(u(e),arguments),e}return n(s,[{key:"computeEnvelopeInternal",value:function(){if(this.isEmpty())return new q;var t=new q;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t}},{key:"getCoordinates",value:function(){return this.isEmpty()?[]:[this.getCoordinate()]}},{key:"copyInternal",value:function(){return new s(this._coordinates.copy(),this._factory)}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof U){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&(!(!this.isEmpty()||!t.isEmpty())||this.isEmpty()===t.isEmpty()&&this.equal(t.getCoordinate(),this.getCoordinate(),e))}return f(r(s.prototype),"equalsExact",this).apply(this,arguments)}},{key:"normalize",value:function(){}},{key:"getCoordinate",value:function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null}},{key:"getBoundaryDimension",value:function(){return Ot.FALSE}},{key:"reverseInternal",value:function(){return this.getFactory().createPoint(this._coordinates.copy())}},{key:"getTypeCode",value:function(){return U.TYPECODE_POINT}},{key:"getDimension",value:function(){return 0}},{key:"getNumPoints",value:function(){return this.isEmpty()?0:1}},{key:"getX",value:function(){if(null===this.getCoordinate())throw new IllegalStateException("getX called on empty Point");return this.getCoordinate().x}},{key:"compareToSameClass",value:function(){if(1===arguments.length){var t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length){var e=arguments[0];return arguments[1].compare(this._coordinates,e._coordinates)}}},{key:"apply",value:function(){if(rt(arguments[0],wt)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(rt(arguments[0],Mt)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else(rt(arguments[0],It)||rt(arguments[0],x))&&arguments[0].filter(this)}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection()}},{key:"getGeometryType",value:function(){return U.TYPENAME_POINT}},{key:"getCoordinateSequence",value:function(){return this._coordinates}},{key:"getY",value:function(){if(null===this.getCoordinate())throw new IllegalStateException("getY called on empty Point");return this.getCoordinate().y}},{key:"isEmpty",value:function(){return 0===this._coordinates.size()}},{key:"init",value:function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),F.isTrue(t.size()<=1),this._coordinates=t}},{key:"isSimple",value:function(){return!0}},{key:"interfaces_",get:function(){return[Tt]}}],[{key:"constructor_",value:function(){this._coordinates=null;var t=arguments[0],e=arguments[1];U.constructor_.call(this,e),this.init(t)}}]),s}(U),Lt=function(){function e(){t(this,e)}return n(e,null,[{key:"ofRing",value:function(){if(arguments[0]instanceof Array){var t=arguments[0];return Math.abs(e.ofRingSigned(t))}if(rt(arguments[0],ct)){var n=arguments[0];return Math.abs(e.ofRingSigned(n))}}},{key:"ofRingSigned",value:function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,i=1;i<t.length-1;i++){var r=t[i].x-n,o=t[i+1].y;e+=r*(t[i-1].y-o)}return e/2}if(rt(arguments[0],ct)){var s=arguments[0],a=s.size();if(a<3)return 0;var l=new V,u=new V,c=new V;s.getCoordinate(0,u),s.getCoordinate(1,c);var h=u.x;c.x-=h;for(var f=0,d=1;d<a-1;d++)l.y=u.y,u.x=c.x,u.y=c.y,s.getCoordinate(d+1,c),c.x-=h,f+=u.x*(l.y-c.y);return f/2}}}]),e}(),Nt=function(){function e(){t(this,e)}return n(e,null,[{key:"sort",value:function(){var t=arguments,e=arguments[0];if(1===arguments.length)e.sort((function(t,e){return t.compareTo(e)}));else if(2===arguments.length)e.sort((function(e,n){return t[1].compare(e,n)}));else if(3===arguments.length){var n=e.slice(arguments[1],arguments[2]);n.sort();var i=e.slice(0,arguments[1]).concat(n,e.slice(arguments[2],e.length));e.splice(0,e.length);var r,o=v(i);try{for(o.s();!(r=o.n()).done;){var s=r.value;e.push(s)}}catch(t){o.e(t)}finally{o.f()}}else if(4===arguments.length){var a=e.slice(arguments[1],arguments[2]);a.sort((function(e,n){return t[3].compare(e,n)}));var l=e.slice(0,arguments[1]).concat(a,e.slice(arguments[2],e.length));e.splice(0,e.length);var u,c=v(l);try{for(c.s();!(u=c.n()).done;){var h=u.value;e.push(h)}}catch(t){c.e(t)}finally{c.f()}}}},{key:"asList",value:function(t){var e,n=new pt,i=v(t);try{for(i.s();!(e=i.n()).done;){var r=e.value;n.add(r)}}catch(t){i.e(t)}finally{i.f()}return n}},{key:"copyOf",value:function(t,e){return t.slice(0,e)}}]),e}(),At=function e(){t(this,e)},jt=function(e){i(s,e);var o=h(s);function s(){var e;return t(this,s),e=o.call(this),s.constructor_.apply(u(e),arguments),e}return n(s,[{key:"computeEnvelopeInternal",value:function(){return this._shell.getEnvelopeInternal()}},{key:"getCoordinates",value:function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this._shell.getCoordinates(),i=0;i<n.length;i++)t[++e]=n[i];for(var r=0;r<this._holes.length;r++)for(var o=this._holes[r].getCoordinates(),s=0;s<o.length;s++)t[++e]=o[s];return t}},{key:"getArea",value:function(){var t=0;t+=Lt.ofRing(this._shell.getCoordinateSequence());for(var e=0;e<this._holes.length;e++)t-=Lt.ofRing(this._holes[e].getCoordinateSequence());return t}},{key:"copyInternal",value:function(){for(var t=this._shell.copy(),e=new Array(this._holes.length).fill(null),n=0;n<this._holes.length;n++)e[n]=this._holes[n].copy();return new s(t,e,this._factory)}},{key:"isRectangle",value:function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){var i=t.getX(n);if(i!==e.getMinX()&&i!==e.getMaxX())return!1;var r=t.getY(n);if(r!==e.getMinY()&&r!==e.getMaxY())return!1}for(var o=t.getX(0),s=t.getY(0),a=1;a<=4;a++){var l=t.getX(a),u=t.getY(a);if(l!==o==(u!==s))return!1;o=l,s=u}return!0}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof U){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t,i=this._shell,o=n._shell;if(!i.equalsExact(o,e))return!1;if(this._holes.length!==n._holes.length)return!1;for(var a=0;a<this._holes.length;a++)if(!this._holes[a].equalsExact(n._holes[a],e))return!1;return!0}return f(r(s.prototype),"equalsExact",this).apply(this,arguments)}},{key:"normalize",value:function(){if(0===arguments.length){this._shell=this.normalized(this._shell,!0);for(var t=0;t<this._holes.length;t++)this._holes[t]=this.normalized(this._holes[t],!1);Nt.sort(this._holes)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(e.isEmpty())return null;var i=e.getCoordinateSequence(),r=Ct.minCoordinateIndex(i,0,i.size()-2);Ct.scroll(i,r,!0),ht.isCCW(i)===n&&Ct.reverse(i)}}},{key:"getCoordinate",value:function(){return this._shell.getCoordinate()}},{key:"getNumInteriorRing",value:function(){return this._holes.length}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"reverseInternal",value:function(){for(var t=this.getExteriorRing().reverse(),e=new Array(this.getNumInteriorRing()).fill(null),n=0;n<e.length;n++)e[n]=this.getInteriorRingN(n).reverse();return this.getFactory().createPolygon(t,e)}},{key:"getTypeCode",value:function(){return U.TYPECODE_POLYGON}},{key:"getDimension",value:function(){return 2}},{key:"getLength",value:function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t}},{key:"getNumPoints",value:function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t}},{key:"convexHull",value:function(){return this.getExteriorRing().convexHull()}},{key:"normalized",value:function(t,e){var n=t.copy();return this.normalize(n,e),n}},{key:"compareToSameClass",value:function(){if(1===arguments.length){var t=arguments[0],e=this._shell,n=t._shell;return e.compareToSameClass(n)}if(2===arguments.length){var i=arguments[1],r=arguments[0],o=this._shell,s=r._shell,a=o.compareToSameClass(s,i);if(0!==a)return a;for(var l=this.getNumInteriorRing(),u=r.getNumInteriorRing(),c=0;c<l&&c<u;){var h=this.getInteriorRingN(c),f=r.getInteriorRingN(c),d=h.compareToSameClass(f,i);if(0!==d)return d;c++}return c<l?1:c<u?-1:0}}},{key:"apply",value:function(){if(rt(arguments[0],wt)){var t=arguments[0];this._shell.apply(t);for(var e=0;e<this._holes.length;e++)this._holes[e].apply(t)}else if(rt(arguments[0],Mt)){var n=arguments[0];if(this._shell.apply(n),!n.isDone())for(var i=0;i<this._holes.length&&(this._holes[i].apply(n),!n.isDone());i++);n.isGeometryChanged()&&this.geometryChanged()}else if(rt(arguments[0],It))arguments[0].filter(this);else if(rt(arguments[0],x)){var r=arguments[0];r.filter(this),this._shell.apply(r);for(var o=0;o<this._holes.length;o++)this._holes[o].apply(r)}}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)}},{key:"getGeometryType",value:function(){return U.TYPENAME_POLYGON}},{key:"getExteriorRing",value:function(){return this._shell}},{key:"isEmpty",value:function(){return this._shell.isEmpty()}},{key:"getInteriorRingN",value:function(t){return this._holes[t]}},{key:"interfaces_",get:function(){return[At]}}],[{key:"constructor_",value:function(){this._shell=null,this._holes=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(U.constructor_.call(this,n),null===t&&(t=this.getFactory().createLinearRing()),null===e&&(e=[]),U.hasNullElements(e))throw new b("holes must not contain null elements");if(t.isEmpty()&&U.hasNonEmptyElements(e))throw new b("shell is empty but holes are not");this._shell=t,this._holes=e}}]),s}(U),Dt=function(e){i(o,e);var r=h(o);function o(e){var n;return t(this,o),(n=r.call(this)).array=[],e instanceof W&&n.addAll(e),n}return n(o,[{key:"contains",value:function(t){var e,n=v(this.array);try{for(n.s();!(e=n.n()).done;)if(0===e.value.compareTo(t))return!0}catch(t){n.e(t)}finally{n.f()}return!1}},{key:"add",value:function(t){if(this.contains(t))return!1;for(var e=0,n=this.array.length;e<n;e++)if(1===this.array[e].compareTo(t))return!!this.array.splice(e,0,t);return this.array.push(t),!0}},{key:"addAll",value:function(t){var e,n=v(t);try{for(n.s();!(e=n.n()).done;){var i=e.value;this.add(i)}}catch(t){n.e(t)}finally{n.f()}return!0}},{key:"remove",value:function(){throw new Z}},{key:"size",value:function(){return this.array.length}},{key:"isEmpty",value:function(){return 0===this.array.length}},{key:"toArray",value:function(){return this.array.slice()}},{key:"iterator",value:function(){return new Ft(this.array)}}]),o}(function(e){i(r,e);var n=h(r);function r(){return t(this,r),n.apply(this,arguments)}return r}(K)),Ft=function(){function e(n){t(this,e),this.array=n,this.position=0}return n(e,[{key:"next",value:function(){if(this.position===this.array.length)throw new H;return this.array[this.position++]}},{key:"hasNext",value:function(){return this.position<this.array.length}},{key:"remove",value:function(){throw new Z}}]),e}(),zt=function(e){i(s,e);var o=h(s);function s(){var e;return t(this,s),e=o.call(this),s.constructor_.apply(u(e),arguments),e}return n(s,[{key:"computeEnvelopeInternal",value:function(){for(var t=new q,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t}},{key:"getGeometryN",value:function(t){return this._geometries[t]}},{key:"getCoordinates",value:function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this._geometries.length;n++)for(var i=this._geometries[n].getCoordinates(),r=0;r<i.length;r++)t[++e]=i[r];return t}},{key:"getArea",value:function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t}},{key:"copyInternal",value:function(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new s(t,this._factory)}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof U){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t;if(this._geometries.length!==n._geometries.length)return!1;for(var i=0;i<this._geometries.length;i++)if(!this._geometries[i].equalsExact(n._geometries[i],e))return!1;return!0}return f(r(s.prototype),"equalsExact",this).apply(this,arguments)}},{key:"normalize",value:function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();Nt.sort(this._geometries)}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()}},{key:"getBoundaryDimension",value:function(){for(var t=Ot.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t}},{key:"reverseInternal",value:function(){for(var t=this._geometries.length,e=new pt(t),n=0;n<t;n++)e.add(this._geometries[n].reverse());return this.getFactory().buildGeometry(e)}},{key:"getTypeCode",value:function(){return U.TYPECODE_GEOMETRYCOLLECTION}},{key:"getDimension",value:function(){for(var t=Ot.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t}},{key:"getLength",value:function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t}},{key:"getNumPoints",value:function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t}},{key:"getNumGeometries",value:function(){return this._geometries.length}},{key:"compareToSameClass",value:function(){if(1===arguments.length){var t=arguments[0],e=new Dt(Nt.asList(this._geometries)),n=new Dt(Nt.asList(t._geometries));return this.compare(e,n)}if(2===arguments.length){for(var i=arguments[1],r=arguments[0],o=this.getNumGeometries(),s=r.getNumGeometries(),a=0;a<o&&a<s;){var l=this.getGeometryN(a),u=r.getGeometryN(a),c=l.compareToSameClass(u,i);if(0!==c)return c;a++}return a<o?1:a<s?-1:0}}},{key:"apply",value:function(){if(rt(arguments[0],wt))for(var t=arguments[0],e=0;e<this._geometries.length;e++)this._geometries[e].apply(t);else if(rt(arguments[0],Mt)){var n=arguments[0];if(0===this._geometries.length)return null;for(var i=0;i<this._geometries.length&&(this._geometries[i].apply(n),!n.isDone());i++);n.isGeometryChanged()&&this.geometryChanged()}else if(rt(arguments[0],It)){var r=arguments[0];r.filter(this);for(var o=0;o<this._geometries.length;o++)this._geometries[o].apply(r)}else if(rt(arguments[0],x)){var s=arguments[0];s.filter(this);for(var a=0;a<this._geometries.length;a++)this._geometries[a].apply(s)}}},{key:"getBoundary",value:function(){return U.checkNotGeometryCollection(this),F.shouldNeverReachHere(),null}},{key:"getGeometryType",value:function(){return U.TYPENAME_GEOMETRYCOLLECTION}},{key:"isEmpty",value:function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0}}],[{key:"constructor_",value:function(){if(this._geometries=null,0===arguments.length);else if(2===arguments.length){var t=arguments[0],e=arguments[1];if(U.constructor_.call(this,e),null===t&&(t=[]),U.hasNullElements(t))throw new b("geometries must not contain null elements");this._geometries=t}}}]),s}(U),Gt=function(e){i(s,e);var o=h(s);function s(){var e;return t(this,s),e=o.call(this),s.constructor_.apply(u(e),arguments),e}return n(s,[{key:"copyInternal",value:function(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new s(t,this._factory)}},{key:"isValid",value:function(){return!0}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof U){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&f(r(s.prototype),"equalsExact",this).call(this,t,e)}return f(r(s.prototype),"equalsExact",this).apply(this,arguments)}},{key:"getCoordinate",value:function(){if(1===arguments.length&&Number.isInteger(arguments[0])){var t=arguments[0];return this._geometries[t].getCoordinate()}return f(r(s.prototype),"getCoordinate",this).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return Ot.FALSE}},{key:"getTypeCode",value:function(){return U.TYPECODE_MULTIPOINT}},{key:"getDimension",value:function(){return 0}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection()}},{key:"getGeometryType",value:function(){return U.TYPENAME_MULTIPOINT}},{key:"interfaces_",get:function(){return[Tt]}}],[{key:"constructor_",value:function(){var t=arguments[0],e=arguments[1];zt.constructor_.call(this,t,e)}}]),s}(zt),Bt=function(e){i(s,e);var o=h(s);function s(){var e;return t(this,s),e=o.call(this),s.constructor_.apply(u(e),arguments),e}return n(s,[{key:"copyInternal",value:function(){return new s(this._points.copy(),this._factory)}},{key:"getBoundaryDimension",value:function(){return Ot.FALSE}},{key:"isClosed",value:function(){return!!this.isEmpty()||f(r(s.prototype),"isClosed",this).call(this)}},{key:"reverseInternal",value:function(){var t=this._points.copy();return Ct.reverse(t),this.getFactory().createLinearRing(t)}},{key:"getTypeCode",value:function(){return U.TYPECODE_LINEARRING}},{key:"validateConstruction",value:function(){if(!this.isEmpty()&&!f(r(s.prototype),"isClosed",this).call(this))throw new b("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<s.MINIMUM_VALID_SIZE)throw new b("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")}},{key:"getGeometryType",value:function(){return U.TYPENAME_LINEARRING}}],[{key:"constructor_",value:function(){var t=arguments[0],e=arguments[1];Rt.constructor_.call(this,t,e),this.validateConstruction()}}]),s}(Rt);Bt.MINIMUM_VALID_SIZE=4;var Vt=function(e){i(o,e);var r=h(o);function o(){var e;return t(this,o),e=r.call(this),o.constructor_.apply(u(e),arguments),e}return n(o,[{key:"setOrdinate",value:function(t,e){switch(t){case o.X:this.x=e;break;case o.Y:this.y=e;break;default:throw new b("Invalid ordinate index: "+t)}}},{key:"getZ",value:function(){return V.NULL_ORDINATE}},{key:"getOrdinate",value:function(t){switch(t){case o.X:return this.x;case o.Y:return this.y}throw new b("Invalid ordinate index: "+t)}},{key:"setZ",value:function(t){throw new b("CoordinateXY dimension 2 does not support z-ordinate")}},{key:"copy",value:function(){return new o(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+")"}},{key:"setCoordinate",value:function(t){this.x=t.x,this.y=t.y,this.z=t.getZ()}}],[{key:"constructor_",value:function(){if(0===arguments.length)V.constructor_.call(this);else if(1===arguments.length){if(arguments[0]instanceof o){var t=arguments[0];V.constructor_.call(this,t.x,t.y)}else if(arguments[0]instanceof V){var e=arguments[0];V.constructor_.call(this,e.x,e.y)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];V.constructor_.call(this,n,i,V.NULL_ORDINATE)}}}]),o}(V);Vt.X=0,Vt.Y=1,Vt.Z=-1,Vt.M=-1;var Yt=function(e){i(o,e);var r=h(o);function o(){var e;return t(this,o),e=r.call(this),o.constructor_.apply(u(e),arguments),e}return n(o,[{key:"getM",value:function(){return this._m}},{key:"setOrdinate",value:function(t,e){switch(t){case o.X:this.x=e;break;case o.Y:this.y=e;break;case o.M:this._m=e;break;default:throw new b("Invalid ordinate index: "+t)}}},{key:"setM",value:function(t){this._m=t}},{key:"getZ",value:function(){return V.NULL_ORDINATE}},{key:"getOrdinate",value:function(t){switch(t){case o.X:return this.x;case o.Y:return this.y;case o.M:return this._m}throw new b("Invalid ordinate index: "+t)}},{key:"setZ",value:function(t){throw new b("CoordinateXY dimension 2 does not support z-ordinate")}},{key:"copy",value:function(){return new o(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+" m="+this.getM()+")"}},{key:"setCoordinate",value:function(t){this.x=t.x,this.y=t.y,this.z=t.getZ(),this._m=t.getM()}}],[{key:"constructor_",value:function(){if(this._m=null,0===arguments.length)V.constructor_.call(this),this._m=0;else if(1===arguments.length){if(arguments[0]instanceof o){var t=arguments[0];V.constructor_.call(this,t.x,t.y),this._m=t._m}else if(arguments[0]instanceof V){var e=arguments[0];V.constructor_.call(this,e.x,e.y),this._m=this.getM()}}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];V.constructor_.call(this,n,i,V.NULL_ORDINATE),this._m=r}}}]),o}(V);Yt.X=0,Yt.Y=1,Yt.Z=-1,Yt.M=2;var qt=function(e){i(o,e);var r=h(o);function o(){var e;return t(this,o),e=r.call(this),o.constructor_.apply(u(e),arguments),e}return n(o,[{key:"getM",value:function(){return this._m}},{key:"setOrdinate",value:function(t,e){switch(t){case V.X:this.x=e;break;case V.Y:this.y=e;break;case V.Z:this.z=e;break;case V.M:this._m=e;break;default:throw new b("Invalid ordinate index: "+t)}}},{key:"setM",value:function(t){this._m=t}},{key:"getOrdinate",value:function(t){switch(t){case V.X:return this.x;case V.Y:return this.y;case V.Z:return this.getZ();case V.M:return this.getM()}throw new b("Invalid ordinate index: "+t)}},{key:"copy",value:function(){return new o(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.getZ()+" m="+this.getM()+")"}},{key:"setCoordinate",value:function(t){this.x=t.x,this.y=t.y,this.z=t.getZ(),this._m=t.getM()}}],[{key:"constructor_",value:function(){if(this._m=null,0===arguments.length)V.constructor_.call(this),this._m=0;else if(1===arguments.length){if(arguments[0]instanceof o){var t=arguments[0];V.constructor_.call(this,t),this._m=t._m}else if(arguments[0]instanceof V){var e=arguments[0];V.constructor_.call(this,e),this._m=this.getM()}}else if(4===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],s=arguments[3];V.constructor_.call(this,n,i,r),this._m=s}}}]),o}(V),Ut=function(){function e(){t(this,e)}return n(e,null,[{key:"measures",value:function(t){return t instanceof Vt?0:t instanceof Yt||t instanceof qt?1:0}},{key:"dimension",value:function(t){return t instanceof Vt?2:t instanceof Yt?3:t instanceof qt?4:3}},{key:"create",value:function(){if(1===arguments.length){var t=arguments[0];return e.create(t,0)}if(2===arguments.length){var n=arguments[0],i=arguments[1];return 2===n?new Vt:3===n&&0===i?new V:3===n&&1===i?new Yt:4===n&&1===i?new qt:new V}}}]),e}(),Xt=function(e){i(s,e);var o=h(s);function s(){var e;return t(this,s),e=o.call(this),s.constructor_.apply(u(e),arguments),e}return n(s,[{key:"getCoordinate",value:function(t){return this.get(t)}},{key:"addAll",value:function(){if(2===arguments.length&&"boolean"==typeof arguments[1]&&rt(arguments[0],W)){for(var t=arguments[1],e=!1,n=arguments[0].iterator();n.hasNext();)this.add(n.next(),t),e=!0;return e}return f(r(s.prototype),"addAll",this).apply(this,arguments)}},{key:"clone",value:function(){for(var t=f(r(s.prototype),"clone",this).call(this),e=0;e<this.size();e++)t.add(e,this.get(e).clone());return t}},{key:"toCoordinateArray",value:function(){if(0===arguments.length)return this.toArray(s.coordArrayType);if(1===arguments.length){if(arguments[0])return this.toArray(s.coordArrayType);for(var t=this.size(),e=new Array(t).fill(null),n=0;n<t;n++)e[n]=this.get(t-n-1);return e}}},{key:"add",value:function(){if(1===arguments.length){var t=arguments[0];return f(r(s.prototype),"add",this).call(this,t)}if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var e=arguments[0],n=arguments[1];return this.add(e,n,!0),!0}if(arguments[0]instanceof V&&"boolean"==typeof arguments[1]){var i=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(i))return null;f(r(s.prototype),"add",this).call(this,i)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var o=arguments[0],a=arguments[1];return this.add(o,a),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var l=arguments[0],u=arguments[1];if(arguments[2])for(var c=0;c<l.length;c++)this.add(l[c],u);else for(var h=l.length-1;h>=0;h--)this.add(l[h],u);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof V){var d=arguments[0],g=arguments[1];if(!arguments[2]){var p=this.size();if(p>0){if(d>0&&this.get(d-1).equals2D(g))return null;if(d<p&&this.get(d).equals2D(g))return null}}f(r(s.prototype),"add",this).call(this,d,g)}}else if(4===arguments.length){var v=arguments[0],y=arguments[1],m=arguments[2],_=arguments[3],b=1;m>_&&(b=-1);for(var x=m;x!==_;x+=b)this.add(v[x],y);return!0}}},{key:"closeRing",value:function(){if(this.size()>0){var t=this.get(0).copy();this.add(t,!1)}}}],[{key:"constructor_",value:function(){if(0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.ensureCapacity(t.length),this.add(t,!0)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.ensureCapacity(e.length),this.add(e,n)}}}]),s}(pt);Xt.coordArrayType=new Array(0).fill(null);var Wt=function(){function e(){t(this,e)}return n(e,null,[{key:"isRing",value:function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))}},{key:"ptNotInList",value:function(t,n){for(var i=0;i<t.length;i++){var r=t[i];if(e.indexOf(r,n)<0)return r}return null}},{key:"scroll",value:function(t,n){var i=e.indexOf(n,t);if(i<0)return null;var r=new Array(t.length).fill(null);_t.arraycopy(t,i,r,0,t.length-i),_t.arraycopy(t,0,r,t.length-i,i),_t.arraycopy(r,0,t,0,t.length)}},{key:"equals",value:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];if(i===r)return!0;if(null===i||null===r)return!1;if(i.length!==r.length)return!1;for(var s=0;s<i.length;s++)if(0!==o.compare(i[s],r[s]))return!1;return!0}}},{key:"intersection",value:function(t,e){for(var n=new Xt,i=0;i<t.length;i++)e.intersects(t[i])&&n.add(t[i],!0);return n.toCoordinateArray()}},{key:"measures",value:function(t){if(null===t||0===t.length)return 0;var e,n=0,i=v(t);try{for(i.s();!(e=i.n()).done;){var r=e.value;n=Math.max(n,Ut.measures(r))}}catch(t){i.e(t)}finally{i.f()}return n}},{key:"hasRepeatedPoints",value:function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1}},{key:"removeRepeatedPoints",value:function(t){return e.hasRepeatedPoints(t)?new Xt(t,!1).toCoordinateArray():t}},{key:"reverse",value:function(t){for(var e=t.length-1,n=Math.trunc(e/2),i=0;i<=n;i++){var r=t[i];t[i]=t[e-i],t[e-i]=r}}},{key:"removeNull",value:function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var i=new Array(e).fill(null);if(0===e)return i;for(var r=0,o=0;o<t.length;o++)null!==t[o]&&(i[r++]=t[o]);return i}},{key:"copyDeep",value:function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=t[n].copy();return e}if(5===arguments.length)for(var i=arguments[0],r=arguments[1],o=arguments[2],s=arguments[3],a=arguments[4],l=0;l<a;l++)o[s+l]=i[r+l].copy()}},{key:"isEqualReversed",value:function(t,e){for(var n=0;n<t.length;n++){var i=t[n],r=e[t.length-n-1];if(0!==i.compareTo(r))return!1}return!0}},{key:"envelope",value:function(t){for(var e=new q,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e}},{key:"toCoordinateArray",value:function(t){return t.toArray(e.coordArrayType)}},{key:"dimension",value:function(t){if(null===t||0===t.length)return 3;var e,n=0,i=v(t);try{for(i.s();!(e=i.n()).done;){var r=e.value;n=Math.max(n,Ut.dimension(r))}}catch(t){i.e(t)}finally{i.f()}return n}},{key:"atLeastNCoordinatesOrNothing",value:function(t,e){return e.length>=t?e:[]}},{key:"indexOf",value:function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1}},{key:"increasingDirection",value:function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,i=t[e].compareTo(t[n]);if(0!==i)return i}return 1}},{key:"compare",value:function(t,e){for(var n=0;n<t.length&&n<e.length;){var i=t[n].compareTo(e[n]);if(0!==i)return i;n++}return n<e.length?-1:n<t.length?1:0}},{key:"minCoordinate",value:function(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e}},{key:"extract",value:function(t,e,n){e=bt.clamp(e,0,t.length);var i=(n=bt.clamp(n,-1,t.length))-e+1;n<0&&(i=0),e>=t.length&&(i=0),n<e&&(i=0);var r=new Array(i).fill(null);if(0===i)return r;for(var o=0,s=e;s<=n;s++)r[o++]=t[s];return r}}]),e}(),Ht=function(){function e(){t(this,e)}return n(e,[{key:"compare",value:function(t,e){var n=t,i=e;return Wt.compare(n,i)}},{key:"interfaces_",get:function(){return[A]}}]),e}(),Zt=function(){function e(){t(this,e)}return n(e,[{key:"compare",value:function(t,e){var n=t,i=e;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(0===n.length)return 0;var r=Wt.compare(n,i);return Wt.isEqualReversed(n,i)?0:r}},{key:"OLDcompare",value:function(t,e){var n=t,i=e;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(0===n.length)return 0;for(var r=Wt.increasingDirection(n),o=Wt.increasingDirection(i),s=r>0?0:n.length-1,a=o>0?0:n.length-1,l=0;l<n.length;l++){var u=n[s].compareTo(i[a]);if(0!==u)return u;s+=r,a+=o}return 0}},{key:"interfaces_",get:function(){return[A]}}]),e}();Wt.ForwardComparator=Ht,Wt.BidirectionalComparator=Zt,Wt.coordArrayType=new Array(0).fill(null);var Kt=function(){function e(n){t(this,e),this.str=n}return n(e,[{key:"append",value:function(t){this.str+=t}},{key:"setCharAt",value:function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)}},{key:"toString",value:function(){return this.str}}]),e}(),Jt=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getM",value:function(t){return this.hasM()?this._coordinates[t].getM():N.NaN}},{key:"setOrdinate",value:function(t,e,n){switch(e){case ct.X:this._coordinates[t].x=n;break;case ct.Y:this._coordinates[t].y=n;break;default:this._coordinates[t].setOrdinate(e,n)}}},{key:"getZ",value:function(t){return this.hasZ()?this._coordinates[t].getZ():N.NaN}},{key:"size",value:function(){return this._coordinates.length}},{key:"getOrdinate",value:function(t,e){switch(e){case ct.X:return this._coordinates[t].x;case ct.Y:return this._coordinates[t].y;default:return this._coordinates[t].getOrdinate(e)}}},{key:"getCoordinate",value:function(){if(1===arguments.length){var t=arguments[0];return this._coordinates[t]}if(2===arguments.length){var e=arguments[0];arguments[1].setCoordinate(this._coordinates[e])}}},{key:"getCoordinateCopy",value:function(t){var e=this.createCoordinate();return e.setCoordinate(this._coordinates[t]),e}},{key:"createCoordinate",value:function(){return Ut.create(this.getDimension(),this.getMeasures())}},{key:"getDimension",value:function(){return this._dimension}},{key:"getX",value:function(t){return this._coordinates[t].x}},{key:"getMeasures",value:function(){return this._measures}},{key:"expandEnvelope",value:function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t}},{key:"copy",value:function(){for(var t=new Array(this.size()).fill(null),n=0;n<this._coordinates.length;n++){var i=this.createCoordinate();i.setCoordinate(this._coordinates[n]),t[n]=i}return new e(t,this._dimension,this._measures)}},{key:"toString",value:function(){if(this._coordinates.length>0){var t=new Kt(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"}},{key:"getY",value:function(t){return this._coordinates[t].y}},{key:"toCoordinateArray",value:function(){return this._coordinates}},{key:"interfaces_",get:function(){return[ct,k]}}],[{key:"constructor_",value:function(){if(this._dimension=3,this._measures=0,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];e.constructor_.call(this,t,Wt.dimension(t),Wt.measures(t))}else if(Number.isInteger(arguments[0])){var n=arguments[0];this._coordinates=new Array(n).fill(null);for(var i=0;i<n;i++)this._coordinates[i]=new V}else if(rt(arguments[0],ct)){var r=arguments[0];if(null===r)return this._coordinates=new Array(0).fill(null),null;this._dimension=r.getDimension(),this._measures=r.getMeasures(),this._coordinates=new Array(r.size()).fill(null);for(var o=0;o<this._coordinates.length;o++)this._coordinates[o]=r.getCoordinateCopy(o)}}else if(2===arguments.length){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var s=arguments[0],a=arguments[1];e.constructor_.call(this,s,a,Wt.measures(s))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var l=arguments[0],u=arguments[1];this._coordinates=new Array(l).fill(null),this._dimension=u;for(var c=0;c<l;c++)this._coordinates[c]=Ut.create(u)}}else if(3===arguments.length)if(Number.isInteger(arguments[2])&&arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var h=arguments[0],f=arguments[1],d=arguments[2];this._dimension=f,this._measures=d,this._coordinates=null===h?new Array(0).fill(null):h}else if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var g=arguments[0],p=arguments[1],v=arguments[2];this._coordinates=new Array(g).fill(null),this._dimension=p,this._measures=v;for(var y=0;y<g;y++)this._coordinates[y]=this.createCoordinate()}}}]),e}(),Qt=function(){function e(){t(this,e)}return n(e,[{key:"readResolve",value:function(){return e.instance()}},{key:"create",value:function(){if(1===arguments.length){if(arguments[0]instanceof Array)return new Jt(arguments[0]);if(rt(arguments[0],ct))return new Jt(arguments[0])}else{if(2===arguments.length){var t=arguments[1];return t>3&&(t=3),t<2&&(t=2),new Jt(arguments[0],t)}if(3===arguments.length){var e=arguments[2],n=arguments[1]-e;return e>1&&(e=1),n>3&&(n=3),n<2&&(n=2),new Jt(arguments[0],n+e,e)}}}},{key:"interfaces_",get:function(){return[Et,k]}}],[{key:"instance",value:function(){return e.instanceObject}}]),e}();Qt.instanceObject=new Qt;var $t=function(e){i(s,e);var o=h(s);function s(){var e;return t(this,s),e=o.call(this),s.constructor_.apply(u(e),arguments),e}return n(s,[{key:"copyInternal",value:function(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new s(t,this._factory)}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof U){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&f(r(s.prototype),"equalsExact",this).call(this,t,e)}return f(r(s.prototype),"equalsExact",this).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"getTypeCode",value:function(){return U.TYPECODE_MULTIPOLYGON}},{key:"getDimension",value:function(){return 2}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new pt,e=0;e<this._geometries.length;e++)for(var n=this._geometries[e].getBoundary(),i=0;i<n.getNumGeometries();i++)t.add(n.getGeometryN(i));var r=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(r))}},{key:"getGeometryType",value:function(){return U.TYPENAME_MULTIPOLYGON}},{key:"interfaces_",get:function(){return[At]}}],[{key:"constructor_",value:function(){var t=arguments[0],e=arguments[1];zt.constructor_.call(this,t,e)}}]),s}(zt),te=function(){function e(){t(this,e)}return n(e,[{key:"get",value:function(){}},{key:"put",value:function(){}},{key:"size",value:function(){}},{key:"values",value:function(){}},{key:"entrySet",value:function(){}}]),e}(),ee=function(e){i(o,e);var r=h(o);function o(){var e;return t(this,o),(e=r.call(this)).map=new Map,e}return n(o,[{key:"get",value:function(t){return this.map.get(t)||null}},{key:"put",value:function(t,e){return this.map.set(t,e),e}},{key:"values",value:function(){for(var t=new pt,e=this.map.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t}},{key:"entrySet",value:function(){var t=new J;return this.map.entries().forEach((function(e){return t.add(e)})),t}},{key:"size",value:function(){return this.map.size()}}]),o}(te),ne=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"equals",value:function(t){if(!(t instanceof e))return!1;var n=t;return this._modelType===n._modelType&&this._scale===n._scale}},{key:"compareTo",value:function(t){var e=t,n=this.getMaximumSignificantDigits(),i=e.getMaximumSignificantDigits();return st.compare(n,i)}},{key:"getScale",value:function(){return this._scale}},{key:"isFloating",value:function(){return this._modelType===e.FLOATING||this._modelType===e.FLOATING_SINGLE}},{key:"getType",value:function(){return this._modelType}},{key:"toString",value:function(){var t="UNKNOWN";return this._modelType===e.FLOATING?t="Floating":this._modelType===e.FLOATING_SINGLE?t="Floating-Single":this._modelType===e.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t}},{key:"makePrecise",value:function(){if("number"==typeof arguments[0]){var t=arguments[0];return N.isNaN(t)||this._modelType===e.FLOATING_SINGLE?t:this._modelType===e.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof V){var n=arguments[0];if(this._modelType===e.FLOATING)return null;n.x=this.makePrecise(n.x),n.y=this.makePrecise(n.y)}}},{key:"getMaximumSignificantDigits",value:function(){var t=16;return this._modelType===e.FLOATING?t=16:this._modelType===e.FLOATING_SINGLE?t=6:this._modelType===e.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t}},{key:"setScale",value:function(t){this._scale=Math.abs(t)}},{key:"interfaces_",get:function(){return[k,E]}}],[{key:"constructor_",value:function(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=e.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof ie){var t=arguments[0];this._modelType=t,t===e.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var n=arguments[0];this._modelType=e.FIXED,this.setScale(n)}else if(arguments[0]instanceof e){var i=arguments[0];this._modelType=i._modelType,this._scale=i._scale}}},{key:"mostPrecise",value:function(t,e){return t.compareTo(e)>=0?t:e}}]),e}(),ie=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"readResolve",value:function(){return e.nameToTypeMap.get(this._name)}},{key:"toString",value:function(){return this._name}},{key:"interfaces_",get:function(){return[k]}}],[{key:"constructor_",value:function(){this._name=null;var t=arguments[0];this._name=t,e.nameToTypeMap.put(t,this)}}]),e}();ie.nameToTypeMap=new ee,ne.Type=ie,ne.FIXED=new ie("FIXED"),ne.FLOATING=new ie("FLOATING"),ne.FLOATING_SINGLE=new ie("FLOATING SINGLE"),ne.maximumPreciseValue=9007199254740992;var re=function(e){i(s,e);var o=h(s);function s(){var e;return t(this,s),e=o.call(this),s.constructor_.apply(u(e),arguments),e}return n(s,[{key:"copyInternal",value:function(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new s(t,this._factory)}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof U){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&f(r(s.prototype),"equalsExact",this).call(this,t,e)}return f(r(s.prototype),"equalsExact",this).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?Ot.FALSE:0}},{key:"isClosed",value:function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0}},{key:"getTypeCode",value:function(){return U.TYPECODE_MULTILINESTRING}},{key:"getDimension",value:function(){return 1}},{key:"getBoundary",value:function(){throw new Z}},{key:"getGeometryType",value:function(){return U.TYPENAME_MULTILINESTRING}},{key:"interfaces_",get:function(){return[St]}}],[{key:"constructor_",value:function(){var t=arguments[0],e=arguments[1];zt.constructor_.call(this,t,e)}}]),s}(zt),oe=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"createEmpty",value:function(t){switch(t){case-1:return this.createGeometryCollection();case 0:return this.createPoint();case 1:return this.createLineString();case 2:return this.createPolygon();default:throw new b("Invalid dimension: "+t)}}},{key:"toGeometry",value:function(t){return t.isNull()?this.createPoint():t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new V(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new V(t.getMinX(),t.getMinY()),new V(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new V(t.getMinX(),t.getMinY()),new V(t.getMinX(),t.getMaxY()),new V(t.getMaxX(),t.getMaxY()),new V(t.getMaxX(),t.getMinY()),new V(t.getMinX(),t.getMinY())]),null)}},{key:"createLineString",value:function(){if(0===arguments.length)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLineString(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(rt(arguments[0],ct))return new Rt(arguments[0],this)}}},{key:"createMultiLineString",value:function(){return 0===arguments.length?new re(null,this):1===arguments.length?new re(arguments[0],this):void 0}},{key:"buildGeometry",value:function(t){for(var n=null,i=!1,r=!1,o=t.iterator();o.hasNext();){var s=o.next(),a=s.getTypeCode();null===n&&(n=a),a!==n&&(i=!0),s instanceof zt&&(r=!0)}if(null===n)return this.createGeometryCollection();if(i||r)return this.createGeometryCollection(e.toGeometryArray(t));var l=t.iterator().next();if(t.size()>1){if(l instanceof jt)return this.createMultiPolygon(e.toPolygonArray(t));if(l instanceof Rt)return this.createMultiLineString(e.toLineStringArray(t));if(l instanceof Pt)return this.createMultiPoint(e.toPointArray(t));F.shouldNeverReachHere("Unhandled geometry type: "+l.getGeometryType())}return l}},{key:"createMultiPointFromCoords",value:function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)}},{key:"createPoint",value:function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof V){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(rt(arguments[0],ct))return new Pt(arguments[0],this)}}},{key:"getCoordinateSequenceFactory",value:function(){return this._coordinateSequenceFactory}},{key:"createPolygon",value:function(){if(0===arguments.length)return this.createPolygon(null,null);if(1===arguments.length){if(rt(arguments[0],ct)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof Bt){var n=arguments[0];return this.createPolygon(n,null)}}else if(2===arguments.length)return new jt(arguments[0],arguments[1],this)}},{key:"getSRID",value:function(){return this._SRID}},{key:"createGeometryCollection",value:function(){return 0===arguments.length?new zt(null,this):1===arguments.length?new zt(arguments[0],this):void 0}},{key:"getPrecisionModel",value:function(){return this._precisionModel}},{key:"createLinearRing",value:function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(rt(arguments[0],ct))return new Bt(arguments[0],this)}}},{key:"createMultiPolygon",value:function(){return 0===arguments.length?new $t(null,this):1===arguments.length?new $t(arguments[0],this):void 0}},{key:"createMultiPoint",value:function(){if(0===arguments.length)return new Gt(null,this);if(1===arguments.length){if(arguments[0]instanceof Array)return new Gt(arguments[0],this);if(rt(arguments[0],ct)){var t=arguments[0];if(null===t)return this.createMultiPoint(new Array(0).fill(null));for(var e=new Array(t.size()).fill(null),n=0;n<t.size();n++){var i=this.getCoordinateSequenceFactory().create(1,t.getDimension(),t.getMeasures());Ct.copy(t,n,i,0,1),e[n]=this.createPoint(i)}return this.createMultiPoint(e)}}}},{key:"interfaces_",get:function(){return[k]}}],[{key:"constructor_",value:function(){if(this._precisionModel=null,this._coordinateSequenceFactory=null,this._SRID=null,0===arguments.length)e.constructor_.call(this,new ne,0);else if(1===arguments.length){if(rt(arguments[0],Et)){var t=arguments[0];e.constructor_.call(this,new ne,0,t)}else if(arguments[0]instanceof ne){var n=arguments[0];e.constructor_.call(this,n,0,e.getDefaultCoordinateSequenceFactory())}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];e.constructor_.call(this,i,r,e.getDefaultCoordinateSequenceFactory())}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];this._precisionModel=o,this._coordinateSequenceFactory=a,this._SRID=s}}},{key:"toMultiPolygonArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toGeometryArray",value:function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"getDefaultCoordinateSequenceFactory",value:function(){return Qt.instance()}},{key:"toMultiLineStringArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toLineStringArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toMultiPointArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toLinearRingArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toPointArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toPolygonArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"createPointFromInternalCoord",value:function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)}}]),e}(),se={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"};for(var ae in se)se[ae].toUpperCase();var le=function(){function e(n){t(this,e),this.wkt=n,this.index_=-1}return n(e,[{key:"isAlpha_",value:function(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"}},{key:"isNumeric_",value:function(t,e){return t>="0"&&t<="9"||"."==t&&!(void 0!==e&&e)}},{key:"isWhiteSpace_",value:function(t){return" "==t||"\t"==t||"\r"==t||"\n"==t}},{key:"nextChar_",value:function(){return this.wkt.charAt(++this.index_)}},{key:"nextToken",value:function(){var t,e=this.nextChar_(),n=this.index_,i=e;if("("==e)t=2;else if(","==e)t=5;else if(")"==e)t=3;else if(this.isNumeric_(e)||"-"==e)t=4,i=this.readNumber_();else if(this.isAlpha_(e))t=1,i=this.readText_();else{if(this.isWhiteSpace_(e))return this.nextToken();if(""!==e)throw new Error("Unexpected character: "+e);t=6}return{position:n,value:i,type:t}}},{key:"readNumber_",value:function(){var t,e=this.index_,n=!1,i=!1;do{"."==t?n=!0:"e"!=t&&"E"!=t||(i=!0),t=this.nextChar_()}while(this.isNumeric_(t,n)||!i&&("e"==t||"E"==t)||i&&("-"==t||"+"==t));return parseFloat(this.wkt.substring(e,this.index_--))}},{key:"readText_",value:function(){var t,e=this.index_;do{t=this.nextChar_()}while(this.isAlpha_(t));return this.wkt.substring(e,this.index_--).toUpperCase()}}]),e}(),ue=function(){function e(n,i){t(this,e),this.lexer_=n,this.token_,this.layout_="XY",this.factory=i}return n(e,[{key:"consume_",value:function(){this.token_=this.lexer_.nextToken()}},{key:"isTokenType",value:function(t){return this.token_.type==t}},{key:"match",value:function(t){var e=this.isTokenType(t);return e&&this.consume_(),e}},{key:"parse",value:function(){return this.consume_(),this.parseGeometry_()}},{key:"parseGeometryLayout_",value:function(){var t="XY",e=this.token_;if(this.isTokenType(1)){var n=e.value;"Z"===n?t="XYZ":"M"===n?t="XYM":"ZM"===n&&(t="XYZM"),"XY"!==t&&this.consume_()}return t}},{key:"parseGeometryCollectionText_",value:function(){if(this.match(2)){var t=[];do{t.push(this.parseGeometry_())}while(this.match(5));if(this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePointText_",value:function(){if(this.match(2)){var t=this.parsePoint_();if(this.match(3))return t}else if(this.isEmptyGeometry_())return null;throw new Error(this.formatErrorMessage_())}},{key:"parseLineStringText_",value:function(){if(this.match(2)){var t=this.parsePointList_();if(this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePolygonText_",value:function(){if(this.match(2)){var t=this.parseLineStringTextList_();if(this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiPointText_",value:function(){var t;if(this.match(2)){if(t=2==this.token_.type?this.parsePointTextList_():this.parsePointList_(),this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiLineStringText_",value:function(){if(this.match(2)){var t=this.parseLineStringTextList_();if(this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiPolygonText_",value:function(){if(this.match(2)){var t=this.parsePolygonTextList_();if(this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePoint_",value:function(){for(var t=[],e=this.layout_.length,n=0;n<e;++n){var i=this.token_;if(!this.match(4))break;t.push(i.value)}if(t.length==e)return t;throw new Error(this.formatErrorMessage_())}},{key:"parsePointList_",value:function(){for(var t=[this.parsePoint_()];this.match(5);)t.push(this.parsePoint_());return t}},{key:"parsePointTextList_",value:function(){for(var t=[this.parsePointText_()];this.match(5);)t.push(this.parsePointText_());return t}},{key:"parseLineStringTextList_",value:function(){for(var t=[this.parseLineStringText_()];this.match(5);)t.push(this.parseLineStringText_());return t}},{key:"parsePolygonTextList_",value:function(){for(var t=[this.parsePolygonText_()];this.match(5);)t.push(this.parsePolygonText_());return t}},{key:"isEmptyGeometry_",value:function(){var t=this.isTokenType(1)&&"EMPTY"==this.token_.value;return t&&this.consume_(),t}},{key:"formatErrorMessage_",value:function(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"}},{key:"parseGeometry_",value:function(){var t=this.factory,e=function(t){return a(V,d(t))},n=function(n){var i=n.map((function(n){return t.createLinearRing(n.map(e))}));return i.length>1?t.createPolygon(i[0],i.slice(1)):t.createPolygon(i[0])},i=this.token_;if(this.match(1)){var r=i.value;if(this.layout_=this.parseGeometryLayout_(),"GEOMETRYCOLLECTION"==r){var o=this.parseGeometryCollectionText_();return t.createGeometryCollection(o)}switch(r){case"POINT":var s=this.parsePointText_();return s?t.createPoint(a(V,d(s))):t.createPoint();case"LINESTRING":var l=this.parseLineStringText_().map(e);return t.createLineString(l);case"LINEARRING":var u=this.parseLineStringText_().map(e);return t.createLinearRing(u);case"POLYGON":var c=this.parsePolygonText_();return c&&0!==c.length?n(c):t.createPolygon();case"MULTIPOINT":var h=this.parseMultiPointText_();if(!h||0===h.length)return t.createMultiPoint();var f=h.map(e).map((function(e){return t.createPoint(e)}));return t.createMultiPoint(f);case"MULTILINESTRING":var g=this.parseMultiLineStringText_().map((function(n){return t.createLineString(n.map(e))}));return t.createMultiLineString(g);case"MULTIPOLYGON":var p=this.parseMultiPolygonText_();if(!p||0===p.length)return t.createMultiPolygon();var v=p.map(n);return t.createMultiPolygon(v);default:throw new Error("Invalid geometry type: "+r)}}throw new Error(this.formatErrorMessage_())}}]),e}();function ce(t){if(t.isEmpty())return"";var e=t.getCoordinate(),n=[e.x,e.y];return void 0===e.z||Number.isNaN(e.z)||n.push(e.z),void 0===e.m||Number.isNaN(e.m)||n.push(e.m),n.join(" ")}function he(t){for(var e=t.getCoordinates().map((function(t){var e=[t.x,t.y];return void 0===t.z||Number.isNaN(t.z)||e.push(t.z),void 0===t.m||Number.isNaN(t.m)||e.push(t.m),e})),n=[],i=0,r=e.length;i<r;++i)n.push(e[i].join(" "));return n.join(", ")}function fe(t){var e=[];e.push("("+he(t.getExteriorRing())+")");for(var n=0,i=t.getNumInteriorRing();n<i;++n)e.push("("+he(t.getInteriorRingN(n))+")");return e.join(", ")}var de={Point:ce,LineString:he,LinearRing:he,Polygon:fe,MultiPoint:function(t){for(var e=[],n=0,i=t.getNumGeometries();n<i;++n)e.push("("+ce(t.getGeometryN(n))+")");return e.join(", ")},MultiLineString:function(t){for(var e=[],n=0,i=t.getNumGeometries();n<i;++n)e.push("("+he(t.getGeometryN(n))+")");return e.join(", ")},MultiPolygon:function(t){for(var e=[],n=0,i=t.getNumGeometries();n<i;++n)e.push("("+fe(t.getGeometryN(n))+")");return e.join(", ")},GeometryCollection:function(t){for(var e=[],n=0,i=t.getNumGeometries();n<i;++n)e.push(ge(t.getGeometryN(n)));return e.join(", ")}};function ge(t){var e=t.getGeometryType(),n=de[e];e=e.toUpperCase();var i=function(t){var e="";if(t.isEmpty())return e;var n=t.getCoordinate();return void 0===n.z||Number.isNaN(n.z)||(e+="Z"),void 0===n.m||Number.isNaN(n.m)||(e+="M"),e}(t);return i.length>0&&(e+=" "+i),t.isEmpty()?e+" EMPTY":e+" ("+n(t)+")"}var pe=function(){function e(n){t(this,e),this.geometryFactory=n||new oe,this.precisionModel=this.geometryFactory.getPrecisionModel()}return n(e,[{key:"read",value:function(t){var e=new le(t);return new ue(e,this.geometryFactory).parse()}},{key:"write",value:function(t){return ge(t)}}]),e}(),ve=function(){function e(n){t(this,e),this.parser=new pe(n)}return n(e,[{key:"write",value:function(t){return this.parser.write(t)}}],[{key:"toLineString",value:function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"}}]),e}(),ye=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getIndexAlongSegment",value:function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]}},{key:"getTopologySummary",value:function(){var t=new Kt;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()}},{key:"computeIntersection",value:function(t,e,n,i){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=i,this._result=this.computeIntersect(t,e,n,i)}},{key:"getIntersectionNum",value:function(){return this._result}},{key:"computeIntLineIndex",value:function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map((function(){return Array(2)})),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}}},{key:"isProper",value:function(){return this.hasIntersection()&&this._isProper}},{key:"setPrecisionModel",value:function(t){this._precisionModel=t}},{key:"isInteriorIntersection",value:function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=arguments[0],e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0;return!1}}},{key:"getIntersection",value:function(t){return this._intPt[t]}},{key:"isEndPoint",value:function(){return this.hasIntersection()&&!this._isProper}},{key:"hasIntersection",value:function(){return this._result!==e.NO_INTERSECTION}},{key:"getEdgeDistance",value:function(t,n){return e.computeEdgeDistance(this._intPt[n],this._inputLines[t][0],this._inputLines[t][1])}},{key:"isCollinear",value:function(){return this._result===e.COLLINEAR_INTERSECTION}},{key:"toString",value:function(){return ve.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+ve.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()}},{key:"getEndpoint",value:function(t,e){return this._inputLines[t][e]}},{key:"isIntersection",value:function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1}},{key:"getIntersectionAlongSegment",value:function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]}}],[{key:"constructor_",value:function(){this._result=null,this._inputLines=Array(2).fill().map((function(){return Array(2)})),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new V,this._intPt[1]=new V,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0}},{key:"computeEdgeDistance",value:function(t,e,n){var i=Math.abs(n.x-e.x),r=Math.abs(n.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(n))o=i>r?i:r;else{var s=Math.abs(t.x-e.x),a=Math.abs(t.y-e.y);0!==(o=i>r?s:a)||t.equals(e)||(o=Math.max(s,a))}return F.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o}},{key:"nonRobustComputeEdgeDistance",value:function(t,e,n){var i=t.x-e.x,r=t.y-e.y,o=Math.sqrt(i*i+r*r);return F.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o}}]),e}();ye.DONT_INTERSECT=0,ye.DO_INTERSECT=1,ye.COLLINEAR=2,ye.NO_INTERSECTION=0,ye.POINT_INTERSECTION=1,ye.COLLINEAR_INTERSECTION=2;var me=function(e){i(s,e);var o=h(s);function s(){return t(this,s),o.call(this)}return n(s,[{key:"isInSegmentEnvelopes",value:function(t){var e=new q(this._inputLines[0][0],this._inputLines[0][1]),n=new q(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&n.contains(t)}},{key:"computeIntersection",value:function(){if(3!==arguments.length)return f(r(s.prototype),"computeIntersection",this).apply(this,arguments);var t=arguments[0],e=arguments[1],n=arguments[2];if(this._isProper=!1,q.intersects(e,n,t)&&0===ht.index(e,n,t)&&0===ht.index(n,e,t))return this._isProper=!0,(t.equals(e)||t.equals(n))&&(this._isProper=!1),this._result=ye.POINT_INTERSECTION,null;this._result=ye.NO_INTERSECTION}},{key:"intersection",value:function(t,e,n,i){var r=this.intersectionSafe(t,e,n,i);return this.isInSegmentEnvelopes(r)||(r=new V(s.nearestEndpoint(t,e,n,i))),null!==this._precisionModel&&this._precisionModel.makePrecise(r),r}},{key:"checkDD",value:function(t,e,n,i,r){var o=ut.intersection(t,e,n,i),s=this.isInSegmentEnvelopes(o);_t.out.println("DD in env = "+s+"  --------------------- "+o),r.distance(o)>1e-4&&_t.out.println("Distance = "+r.distance(o))}},{key:"intersectionSafe",value:function(t,e,n,i){var r=mt.intersection(t,e,n,i);return null===r&&(r=s.nearestEndpoint(t,e,n,i)),r}},{key:"computeCollinearIntersection",value:function(t,e,n,i){var r=q.intersects(t,e,n),o=q.intersects(t,e,i),s=q.intersects(n,i,t),a=q.intersects(n,i,e);return r&&o?(this._intPt[0]=n,this._intPt[1]=i,ye.COLLINEAR_INTERSECTION):s&&a?(this._intPt[0]=t,this._intPt[1]=e,ye.COLLINEAR_INTERSECTION):r&&s?(this._intPt[0]=n,this._intPt[1]=t,!n.equals(t)||o||a?ye.COLLINEAR_INTERSECTION:ye.POINT_INTERSECTION):r&&a?(this._intPt[0]=n,this._intPt[1]=e,!n.equals(e)||o||s?ye.COLLINEAR_INTERSECTION:ye.POINT_INTERSECTION):o&&s?(this._intPt[0]=i,this._intPt[1]=t,!i.equals(t)||r||a?ye.COLLINEAR_INTERSECTION:ye.POINT_INTERSECTION):o&&a?(this._intPt[0]=i,this._intPt[1]=e,!i.equals(e)||r||s?ye.COLLINEAR_INTERSECTION:ye.POINT_INTERSECTION):ye.NO_INTERSECTION}},{key:"computeIntersect",value:function(t,e,n,i){if(this._isProper=!1,!q.intersects(t,e,n,i))return ye.NO_INTERSECTION;var r=ht.index(t,e,n),o=ht.index(t,e,i);if(r>0&&o>0||r<0&&o<0)return ye.NO_INTERSECTION;var s=ht.index(n,i,t),a=ht.index(n,i,e);return s>0&&a>0||s<0&&a<0?ye.NO_INTERSECTION:0===r&&0===o&&0===s&&0===a?this.computeCollinearIntersection(t,e,n,i):(0===r||0===o||0===s||0===a?(this._isProper=!1,t.equals2D(n)||t.equals2D(i)?this._intPt[0]=t:e.equals2D(n)||e.equals2D(i)?this._intPt[0]=e:0===r?this._intPt[0]=new V(n):0===o?this._intPt[0]=new V(i):0===s?this._intPt[0]=new V(t):0===a&&(this._intPt[0]=new V(e))):(this._isProper=!0,this._intPt[0]=this.intersection(t,e,n,i)),ye.POINT_INTERSECTION)}}],[{key:"nearestEndpoint",value:function(t,e,n,i){var r=t,o=xt.pointToSegment(t,n,i),s=xt.pointToSegment(e,n,i);return s<o&&(o=s,r=e),(s=xt.pointToSegment(n,t,e))<o&&(o=s,r=n),(s=xt.pointToSegment(i,t,e))<o&&(o=s,r=i),r}}]),s}(ye),_e=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"countSegment",value:function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,i=e.x;return n>i&&(n=e.x,i=t.x),this._p.x>=n&&this._p.x<=i&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var r=ht.index(t,e,this._p);if(r===ht.COLLINEAR)return this._isPointOnSegment=!0,null;e.y<t.y&&(r=-r),r===ht.LEFT&&this._crossingCount++}}},{key:"isPointInPolygon",value:function(){return this.getLocation()!==X.EXTERIOR}},{key:"getLocation",value:function(){return this._isPointOnSegment?X.BOUNDARY:this._crossingCount%2==1?X.INTERIOR:X.EXTERIOR}},{key:"isOnSegment",value:function(){return this._isPointOnSegment}}],[{key:"constructor_",value:function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t}},{key:"locatePointInRing",value:function(){if(arguments[0]instanceof V&&rt(arguments[1],ct)){for(var t=arguments[1],n=new e(arguments[0]),i=new V,r=new V,o=1;o<t.size();o++)if(t.getCoordinate(o,i),t.getCoordinate(o-1,r),n.countSegment(i,r),n.isOnSegment())return n.getLocation();return n.getLocation()}if(arguments[0]instanceof V&&arguments[1]instanceof Array){for(var s=arguments[1],a=new e(arguments[0]),l=1;l<s.length;l++){var u=s[l],c=s[l-1];if(a.countSegment(u,c),a.isOnSegment())return a.getLocation()}return a.getLocation()}}}]),e}(),be=function(){function e(){t(this,e)}return n(e,null,[{key:"isOnLine",value:function(){if(arguments[0]instanceof V&&rt(arguments[1],ct)){for(var t=arguments[0],e=arguments[1],n=new me,i=new V,r=new V,o=e.size(),s=1;s<o;s++)if(e.getCoordinate(s-1,i),e.getCoordinate(s,r),n.computeIntersection(t,i,r),n.hasIntersection())return!0;return!1}if(arguments[0]instanceof V&&arguments[1]instanceof Array){for(var a=arguments[0],l=arguments[1],u=new me,c=1;c<l.length;c++){var h=l[c-1],f=l[c];if(u.computeIntersection(a,h,f),u.hasIntersection())return!0}return!1}}},{key:"locateInRing",value:function(t,e){return _e.locatePointInRing(t,e)}},{key:"isInRing",value:function(t,n){return e.locateInRing(t,n)!==X.EXTERIOR}}]),e}(),xe=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"setAllLocations",value:function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t}},{key:"isNull",value:function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==X.NONE)return!1;return!0}},{key:"setAllLocationsIfNull",value:function(t){for(var e=0;e<this.location.length;e++)this.location[e]===X.NONE&&(this.location[e]=t)}},{key:"isLine",value:function(){return 1===this.location.length}},{key:"merge",value:function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[$.ON]=this.location[$.ON],e[$.LEFT]=X.NONE,e[$.RIGHT]=X.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===X.NONE&&n<t.location.length&&(this.location[n]=t.location[n])}},{key:"getLocations",value:function(){return this.location}},{key:"flip",value:function(){if(this.location.length<=1)return null;var t=this.location[$.LEFT];this.location[$.LEFT]=this.location[$.RIGHT],this.location[$.RIGHT]=t}},{key:"toString",value:function(){var t=new ot;return this.location.length>1&&t.append(X.toLocationSymbol(this.location[$.LEFT])),t.append(X.toLocationSymbol(this.location[$.ON])),this.location.length>1&&t.append(X.toLocationSymbol(this.location[$.RIGHT])),t.toString()}},{key:"setLocations",value:function(t,e,n){this.location[$.ON]=t,this.location[$.LEFT]=e,this.location[$.RIGHT]=n}},{key:"get",value:function(t){return t<this.location.length?this.location[t]:X.NONE}},{key:"isArea",value:function(){return this.location.length>1}},{key:"isAnyNull",value:function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===X.NONE)return!0;return!1}},{key:"setLocation",value:function(){if(1===arguments.length){var t=arguments[0];this.setLocation($.ON,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.location[e]=n}}},{key:"init",value:function(t){this.location=new Array(t).fill(null),this.setAllLocations(X.NONE)}},{key:"isEqualOnSide",value:function(t,e){return this.location[e]===t.location[e]}},{key:"allPositionsEqual",value:function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0}}],[{key:"constructor_",value:function(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];this.init(t.length)}else if(Number.isInteger(arguments[0])){var n=arguments[0];this.init(1),this.location[$.ON]=n}else if(arguments[0]instanceof e){var i=arguments[0];if(this.init(i.location.length),null!==i)for(var r=0;r<this.location.length;r++)this.location[r]=i.location[r]}}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];this.init(3),this.location[$.ON]=o,this.location[$.LEFT]=s,this.location[$.RIGHT]=a}}}]),e}(),Ee=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getGeometryCount",value:function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t}},{key:"setAllLocations",value:function(t,e){this.elt[t].setAllLocations(e)}},{key:"isNull",value:function(t){return this.elt[t].isNull()}},{key:"setAllLocationsIfNull",value:function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}}},{key:"isLine",value:function(t){return this.elt[t].isLine()}},{key:"merge",value:function(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new xe(t.elt[e]):this.elt[e].merge(t.elt[e])}},{key:"flip",value:function(){this.elt[0].flip(),this.elt[1].flip()}},{key:"getLocation",value:function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get($.ON)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}}},{key:"toString",value:function(){var t=new ot;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()}},{key:"isArea",value:function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}}},{key:"isAnyNull",value:function(t){return this.elt[t].isAnyNull()}},{key:"setLocation",value:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation($.ON,e)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this.elt[n].setLocation(i,r)}}},{key:"isEqualOnSide",value:function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)}},{key:"allPositionsEqual",value:function(t,e){return this.elt[t].allPositionsEqual(e)}},{key:"toLine",value:function(t){this.elt[t].isArea()&&(this.elt[t]=new xe(this.elt[t].location[0]))}}],[{key:"constructor_",value:function(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var t=arguments[0];this.elt[0]=new xe(t),this.elt[1]=new xe(t)}else if(arguments[0]instanceof e){var n=arguments[0];this.elt[0]=new xe(n.elt[0]),this.elt[1]=new xe(n.elt[1])}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.elt[0]=new xe(X.NONE),this.elt[1]=new xe(X.NONE),this.elt[i].setLocation(r)}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];this.elt[0]=new xe(o,s,a),this.elt[1]=new xe(o,s,a)}else if(4===arguments.length){var l=arguments[0],u=arguments[1],c=arguments[2],h=arguments[3];this.elt[0]=new xe(X.NONE,X.NONE,X.NONE),this.elt[1]=new xe(X.NONE,X.NONE,X.NONE),this.elt[l].setLocations(u,c,h)}}},{key:"toLineLabel",value:function(t){for(var n=new e(X.NONE),i=0;i<2;i++)n.setLocation(i,t.getLocation(i));return n}}]),e}(),we=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"computeRing",value:function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=ht.isCCW(this._ring.getCoordinates())}},{key:"isIsolated",value:function(){return 1===this._label.getGeometryCount()}},{key:"computePoints",value:function(t){this._startDe=t;var e=t,n=!0;do{if(null===e)throw new dt("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new dt("Directed Edge visited twice during ring-building at "+e.getCoordinate());this._edges.add(e);var i=e.getLabel();F.isTrue(i.isArea()),this.mergeLabel(i),this.addPoints(e.getEdge(),e.isForward(),n),n=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this._startDe)}},{key:"getLinearRing",value:function(){return this._ring}},{key:"getCoordinate",value:function(t){return this._pts.get(t)}},{key:"computeMaxNodeDegree",value:function(){this._maxNodeDegree=0;var t=this._startDe;do{var e=t.getNode().getEdges().getOutgoingDegree(this);e>this._maxNodeDegree&&(this._maxNodeDegree=e),t=this.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2}},{key:"addPoints",value:function(t,e,n){var i=t.getCoordinates();if(e){var r=1;n&&(r=0);for(var o=r;o<i.length;o++)this._pts.add(i[o])}else{var s=i.length-2;n&&(s=i.length-1);for(var a=s;a>=0;a--)this._pts.add(i[a])}}},{key:"isHole",value:function(){return this._isHole}},{key:"setInResult",value:function(){var t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)}},{key:"containsPoint",value:function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!be.isInRing(t,e.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();)if(n.next().containsPoint(t))return!1;return!0}},{key:"addHole",value:function(t){this._holes.add(t)}},{key:"isShell",value:function(){return null===this._shell}},{key:"getLabel",value:function(){return this._label}},{key:"getEdges",value:function(){return this._edges}},{key:"getMaxNodeDegree",value:function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree}},{key:"getShell",value:function(){return this._shell}},{key:"mergeLabel",value:function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[1],n=arguments[0].getLocation(e,$.RIGHT);if(n===X.NONE)return null;if(this._label.getLocation(e)===X.NONE)return this._label.setLocation(e,n),null}}},{key:"setShell",value:function(t){this._shell=t,null!==t&&t.addHole(this)}},{key:"toPolygon",value:function(t){for(var e=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)e[n]=this._holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)}}],[{key:"constructor_",value:function(){if(this._startDe=null,this._maxNodeDegree=-1,this._edges=new pt,this._pts=new pt,this._label=new Ee(X.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new pt,this._geometryFactory=null,0===arguments.length);else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()}}}]),e}(),ke=function(e){i(o,e);var r=h(o);function o(){var e;return t(this,o),e=r.call(this),o.constructor_.apply(u(e),arguments),e}return n(o,[{key:"setEdgeRing",value:function(t,e){t.setMinEdgeRing(e)}},{key:"getNext",value:function(t){return t.getNextMin()}}],[{key:"constructor_",value:function(){var t=arguments[0],e=arguments[1];we.constructor_.call(this,t,e)}}]),o}(we),Se=function(e){i(o,e);var r=h(o);function o(){var e;return t(this,o),e=r.call(this),o.constructor_.apply(u(e),arguments),e}return n(o,[{key:"buildMinimalRings",value:function(){var t=new pt,e=this._startDe;do{if(null===e.getMinEdgeRing()){var n=new ke(e,this._geometryFactory);t.add(n)}e=e.getNext()}while(e!==this._startDe);return t}},{key:"setEdgeRing",value:function(t,e){t.setEdgeRing(e)}},{key:"linkDirectedEdgesForMinimalEdgeRings",value:function(){var t=this._startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)}},{key:"getNext",value:function(t){return t.getNext()}}],[{key:"constructor_",value:function(){var t=arguments[0],e=arguments[1];we.constructor_.call(this,t,e)}}]),o}(we),Ce=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"setVisited",value:function(t){this._isVisited=t}},{key:"setInResult",value:function(t){this._isInResult=t}},{key:"isCovered",value:function(){return this._isCovered}},{key:"isCoveredSet",value:function(){return this._isCoveredSet}},{key:"setLabel",value:function(t){this._label=t}},{key:"getLabel",value:function(){return this._label}},{key:"setCovered",value:function(t){this._isCovered=t,this._isCoveredSet=!0}},{key:"updateIM",value:function(t){F.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)}},{key:"isInResult",value:function(){return this._isInResult}},{key:"isVisited",value:function(){return this._isVisited}}],[{key:"constructor_",value:function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._label=t}}}]),e}(),Oe=function(e){i(s,e);var o=h(s);function s(){var e;return t(this,s),e=o.call(this),s.constructor_.apply(u(e),arguments),e}return n(s,[{key:"isIncidentEdgeInResult",value:function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1}},{key:"isIsolated",value:function(){return 1===this._label.getGeometryCount()}},{key:"getCoordinate",value:function(){return this._coord}},{key:"print",value:function(t){t.println("node "+this._coord+" lbl: "+this._label)}},{key:"computeIM",value:function(t){}},{key:"computeMergedLocation",value:function(t,e){var n=X.NONE;if(n=this._label.getLocation(e),!t.isNull(e)){var i=t.getLocation(e);n!==X.BOUNDARY&&(n=i)}return n}},{key:"setLabel",value:function(){if(2!==arguments.length||!Number.isInteger(arguments[1])||!Number.isInteger(arguments[0]))return f(r(s.prototype),"setLabel",this).apply(this,arguments);var t=arguments[0],e=arguments[1];null===this._label?this._label=new Ee(t,e):this._label.setLocation(t,e)}},{key:"getEdges",value:function(){return this._edges}},{key:"mergeLabel",value:function(){if(arguments[0]instanceof s){var t=arguments[0];this.mergeLabel(t._label)}else if(arguments[0]instanceof Ee)for(var e=arguments[0],n=0;n<2;n++){var i=this.computeMergedLocation(e,n);this._label.getLocation(n)===X.NONE&&this._label.setLocation(n,i)}}},{key:"add",value:function(t){this._edges.insert(t),t.setNode(this)}},{key:"setLabelBoundary",value:function(t){if(null===this._label)return null;var e=X.NONE;null!==this._label&&(e=this._label.getLocation(t));var n=null;switch(e){case X.BOUNDARY:n=X.INTERIOR;break;case X.INTERIOR:default:n=X.BOUNDARY}this._label.setLocation(t,n)}}],[{key:"constructor_",value:function(){this._coord=null,this._edges=null;var t=arguments[0],e=arguments[1];this._coord=t,this._edges=e,this._label=new Ee(0,X.NONE)}}]),s}(Ce);function Ie(t){return null==t?0:t.color}function Me(t){return null==t?null:t.parent}function Re(t,e){null!==t&&(t.color=e)}function Te(t){return null==t?null:t.left}function Pe(t){return null==t?null:t.right}var Le=function(e){i(o,e);var r=h(o);function o(){var e;return t(this,o),(e=r.call(this)).root_=null,e.size_=0,e}return n(o,[{key:"get",value:function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null}},{key:"put",value:function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:0,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,i,r=this.root_;do{if(n=r,(i=t.compareTo(r.key))<0)r=r.left;else{if(!(i>0)){var o=r.value;return r.value=e,o}r=r.right}}while(null!==r);var s={key:t,left:null,right:null,value:e,parent:n,color:0,getValue:function(){return this.value},getKey:function(){return this.key}};return i<0?n.left=s:n.right=s,this.fixAfterInsertion(s),this.size_++,null}},{key:"fixAfterInsertion",value:function(t){var e;for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)Me(t)===Te(Me(Me(t)))?1===Ie(e=Pe(Me(Me(t))))?(Re(Me(t),0),Re(e,0),Re(Me(Me(t)),1),t=Me(Me(t))):(t===Pe(Me(t))&&(t=Me(t),this.rotateLeft(t)),Re(Me(t),0),Re(Me(Me(t)),1),this.rotateRight(Me(Me(t)))):1===Ie(e=Te(Me(Me(t))))?(Re(Me(t),0),Re(e,0),Re(Me(Me(t)),1),t=Me(Me(t))):(t===Te(Me(t))&&(t=Me(t),this.rotateRight(t)),Re(Me(t),0),Re(Me(Me(t)),1),this.rotateLeft(Me(Me(t))));this.root_.color=0}},{key:"values",value:function(){var t=new pt,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=o.successor(e));)t.add(e.value);return t}},{key:"entrySet",value:function(){var t=new J,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=o.successor(e));)t.add(e);return t}},{key:"rotateLeft",value:function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null==t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}}},{key:"rotateRight",value:function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null==t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}}},{key:"getFirstEntry",value:function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t}},{key:"size",value:function(){return this.size_}},{key:"containsKey",value:function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return!0;e=e.right}}return!1}}],[{key:"successor",value:function(t){var e;if(null===t)return null;if(null!==t.right){for(e=t.right;null!==e.left;)e=e.left;return e}e=t.parent;for(var n=t;null!==e&&n===e.right;)n=e,e=e.parent;return e}}]),o}(function(e){i(r,e);var n=h(r);function r(){return t(this,r),n.apply(this,arguments)}return r}(te)),Ne=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"find",value:function(t){return this.nodeMap.get(t)}},{key:"addNode",value:function(){if(arguments[0]instanceof V){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof Oe){var n=arguments[0],i=this.nodeMap.get(n.getCoordinate());return null===i?(this.nodeMap.put(n.getCoordinate(),n),n):(i.mergeLabel(n),i)}}},{key:"print",value:function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)}},{key:"iterator",value:function(){return this.nodeMap.values().iterator()}},{key:"values",value:function(){return this.nodeMap.values()}},{key:"getBoundaryNodes",value:function(t){for(var e=new pt,n=this.iterator();n.hasNext();){var i=n.next();i.getLabel().getLocation(t)===X.BOUNDARY&&e.add(i)}return e}},{key:"add",value:function(t){var e=t.getCoordinate();this.addNode(e).add(t)}}],[{key:"constructor_",value:function(){this.nodeMap=new Le,this.nodeFact=null;var t=arguments[0];this.nodeFact=t}}]),e}(),Ae=function(){function e(){t(this,e)}return n(e,null,[{key:"isNorthern",value:function(t){return t===e.NE||t===e.NW}},{key:"isOpposite",value:function(t,e){return t!==e&&2==(t-e+4)%4}},{key:"commonHalfPlane",value:function(t,e){if(t===e)return t;if(2==(t-e+4)%4)return-1;var n=t<e?t:e;return 0===n&&3===(t>e?t:e)?3:n}},{key:"isInHalfPlane",value:function(t,n){return n===e.SE?t===e.SE||t===e.SW:t===n||t===n+1}},{key:"quadrant",value:function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],n=arguments[1];if(0===t&&0===n)throw new b("Cannot compute the quadrant for point ( "+t+", "+n+" )");return t>=0?n>=0?e.NE:e.SE:n>=0?e.NW:e.SW}if(arguments[0]instanceof V&&arguments[1]instanceof V){var i=arguments[0],r=arguments[1];if(r.x===i.x&&r.y===i.y)throw new b("Cannot compute the quadrant for two identical points "+i);return r.x>=i.x?r.y>=i.y?e.NE:e.SE:r.y>=i.y?e.NW:e.SW}}}]),e}();Ae.NE=0,Ae.NW=1,Ae.SW=2,Ae.SE=3;var je=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"compareDirection",value:function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:ht.index(t._p0,t._p1,this._p1)}},{key:"getDy",value:function(){return this._dy}},{key:"getCoordinate",value:function(){return this._p0}},{key:"setNode",value:function(t){this._node=t}},{key:"print",value:function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),i=n.lastIndexOf("."),r=n.substring(i+1);t.print("  "+r+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)}},{key:"compareTo",value:function(t){var e=t;return this.compareDirection(e)}},{key:"getDirectedCoordinate",value:function(){return this._p1}},{key:"getDx",value:function(){return this._dx}},{key:"getLabel",value:function(){return this._label}},{key:"getEdge",value:function(){return this._edge}},{key:"getQuadrant",value:function(){return this._quadrant}},{key:"getNode",value:function(){return this._node}},{key:"toString",value:function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label}},{key:"computeLabel",value:function(t){}},{key:"init",value:function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=Ae.quadrant(this._dx,this._dy),F.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")}},{key:"interfaces_",get:function(){return[E]}}],[{key:"constructor_",value:function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var t=arguments[0];this._edge=t}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];e.constructor_.call(this,n,i,r,null)}else if(4===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2],l=arguments[3];e.constructor_.call(this,o),this.init(s,a),this._label=l}}}]),e}(),De=function(e){i(s,e);var o=h(s);function s(){var e;return t(this,s),e=o.call(this),s.constructor_.apply(u(e),arguments),e}return n(s,[{key:"getNextMin",value:function(){return this._nextMin}},{key:"getDepth",value:function(t){return this._depth[t]}},{key:"setVisited",value:function(t){this._isVisited=t}},{key:"computeDirectedLabel",value:function(){this._label=new Ee(this._edge.getLabel()),this._isForward||this._label.flip()}},{key:"getNext",value:function(){return this._next}},{key:"setDepth",value:function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new dt("assigned depths do not match",this.getCoordinate());this._depth[t]=e}},{key:"isInteriorAreaEdge",value:function(){for(var t=!0,e=0;e<2;e++)this._label.isArea(e)&&this._label.getLocation(e,$.LEFT)===X.INTERIOR&&this._label.getLocation(e,$.RIGHT)===X.INTERIOR||(t=!1);return t}},{key:"setNextMin",value:function(t){this._nextMin=t}},{key:"print",value:function(t){f(r(s.prototype),"print",this).call(this,t),t.print(" "+this._depth[$.LEFT]+"/"+this._depth[$.RIGHT]),t.print(" ("+this.getDepthDelta()+")"),this._isInResult&&t.print(" inResult")}},{key:"setMinEdgeRing",value:function(t){this._minEdgeRing=t}},{key:"isLineEdge",value:function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,X.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,X.EXTERIOR);return t&&e&&n}},{key:"setEdgeRing",value:function(t){this._edgeRing=t}},{key:"getMinEdgeRing",value:function(){return this._minEdgeRing}},{key:"getDepthDelta",value:function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t}},{key:"setInResult",value:function(t){this._isInResult=t}},{key:"getSym",value:function(){return this._sym}},{key:"isForward",value:function(){return this._isForward}},{key:"getEdge",value:function(){return this._edge}},{key:"printEdge",value:function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)}},{key:"setSym",value:function(t){this._sym=t}},{key:"setVisitedEdge",value:function(t){this.setVisited(t),this._sym.setVisited(t)}},{key:"setEdgeDepths",value:function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var i=1;t===$.LEFT&&(i=-1);var r=$.opposite(t),o=e+n*i;this.setDepth(t,e),this.setDepth(r,o)}},{key:"getEdgeRing",value:function(){return this._edgeRing}},{key:"isInResult",value:function(){return this._isInResult}},{key:"setNext",value:function(t){this._next=t}},{key:"isVisited",value:function(){return this._isVisited}}],[{key:"constructor_",value:function(){this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999];var t=arguments[0],e=arguments[1];if(je.constructor_.call(this,t),this._isForward=e,e)this.init(t.getCoordinate(0),t.getCoordinate(1));else{var n=t.getNumPoints()-1;this.init(t.getCoordinate(n),t.getCoordinate(n-1))}this.computeDirectedLabel()}},{key:"depthFactor",value:function(t,e){return t===X.EXTERIOR&&e===X.INTERIOR?1:t===X.INTERIOR&&e===X.EXTERIOR?-1:0}}]),s}(je),Fe=function(){function e(){t(this,e)}return n(e,[{key:"createNode",value:function(t){return new Oe(t,null)}}]),e}(),ze=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"printEdges",value:function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var n=this._edges.get(e);n.print(t),n.eiList.print(t)}}},{key:"find",value:function(t){return this._nodes.find(t)}},{key:"addNode",value:function(){if(arguments[0]instanceof Oe){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof V){var e=arguments[0];return this._nodes.addNode(e)}}},{key:"getNodeIterator",value:function(){return this._nodes.iterator()}},{key:"linkResultDirectedEdges",value:function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()}},{key:"debugPrintln",value:function(t){_t.out.println(t)}},{key:"isBoundaryNode",value:function(t,e){var n=this._nodes.find(e);if(null===n)return!1;var i=n.getLabel();return null!==i&&i.getLocation(t)===X.BOUNDARY}},{key:"linkAllDirectedEdges",value:function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()}},{key:"matchInSameDirection",value:function(t,e,n,i){return!!t.equals(n)&&ht.index(t,e,i)===ht.COLLINEAR&&Ae.quadrant(t,e)===Ae.quadrant(n,i)}},{key:"getEdgeEnds",value:function(){return this._edgeEndList}},{key:"debugPrint",value:function(t){_t.out.print(t)}},{key:"getEdgeIterator",value:function(){return this._edges.iterator()}},{key:"findEdgeInSameDirection",value:function(t,e){for(var n=0;n<this._edges.size();n++){var i=this._edges.get(n),r=i.getCoordinates();if(this.matchInSameDirection(t,e,r[0],r[1]))return i;if(this.matchInSameDirection(t,e,r[r.length-1],r[r.length-2]))return i}return null}},{key:"insertEdge",value:function(t){this._edges.add(t)}},{key:"findEdgeEnd",value:function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null}},{key:"addEdges",value:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this._edges.add(n);var i=new De(n,!0),r=new De(n,!1);i.setSym(r),r.setSym(i),this.add(i),this.add(r)}}},{key:"add",value:function(t){this._nodes.add(t),this._edgeEndList.add(t)}},{key:"getNodes",value:function(){return this._nodes.values()}},{key:"findEdge",value:function(t,e){for(var n=0;n<this._edges.size();n++){var i=this._edges.get(n),r=i.getCoordinates();if(t.equals(r[0])&&e.equals(r[1]))return i}return null}}],[{key:"constructor_",value:function(){if(this._edges=new pt,this._nodes=null,this._edgeEndList=new pt,0===arguments.length)this._nodes=new Ne(new Fe);else if(1===arguments.length){var t=arguments[0];this._nodes=new Ne(t)}}},{key:"linkResultDirectedEdges",value:function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()}}]),e}(),Ge=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"sortShellsAndHoles",value:function(t,e,n){for(var i=t.iterator();i.hasNext();){var r=i.next();r.isHole()?n.add(r):e.add(r)}}},{key:"computePolygons",value:function(t){for(var e=new pt,n=t.iterator();n.hasNext();){var i=n.next().toPolygon(this._geometryFactory);e.add(i)}return e}},{key:"placeFreeHoles",value:function(t,n){for(var i=n.iterator();i.hasNext();){var r=i.next();if(null===r.getShell()){var o=e.findEdgeRingContaining(r,t);if(null===o)throw new dt("unable to assign hole to a shell",r.getCoordinate(0));r.setShell(o)}}}},{key:"buildMinimalEdgeRings",value:function(t,e,n){for(var i=new pt,r=t.iterator();r.hasNext();){var o=r.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var s=o.buildMinimalRings(),a=this.findShell(s);null!==a?(this.placePolygonHoles(a,s),e.add(a)):n.addAll(s)}else i.add(o)}return i}},{key:"buildMaximalEdgeRings",value:function(t){for(var e=new pt,n=t.iterator();n.hasNext();){var i=n.next();if(i.isInResult()&&i.getLabel().isArea()&&null===i.getEdgeRing()){var r=new Se(i,this._geometryFactory);e.add(r),r.setInResult()}}return e}},{key:"placePolygonHoles",value:function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next();i.isHole()&&i.setShell(t)}}},{key:"getPolygons",value:function(){return this.computePolygons(this._shellList)}},{key:"findShell",value:function(t){for(var e=0,n=null,i=t.iterator();i.hasNext();){var r=i.next();r.isHole()||(n=r,e++)}return F.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n}},{key:"add",value:function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];ze.linkResultDirectedEdges(n);var i=this.buildMaximalEdgeRings(e),r=new pt,o=this.buildMinimalEdgeRings(i,this._shellList,r);this.sortShellsAndHoles(o,this._shellList,r),this.placeFreeHoles(this._shellList,r)}}}],[{key:"constructor_",value:function(){this._geometryFactory=null,this._shellList=new pt;var t=arguments[0];this._geometryFactory=t}},{key:"findEdgeRingContaining",value:function(t,e){for(var n=t.getLinearRing(),i=n.getEnvelopeInternal(),r=n.getCoordinateN(0),o=null,s=null,a=e.iterator();a.hasNext();){var l=a.next(),u=l.getLinearRing(),c=u.getEnvelopeInternal();if(!c.equals(i)&&c.contains(i)){r=Wt.ptNotInList(n.getCoordinates(),u.getCoordinates());var h=!1;be.isInRing(r,u.getCoordinates())&&(h=!0),h&&(null===o||s.contains(c))&&(s=(o=l).getLinearRing().getEnvelopeInternal())}}return o}}]),e}(),Be=function(){function e(){t(this,e)}return n(e,[{key:"getBounds",value:function(){}}]),e}(),Ve=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getItem",value:function(){return this._item}},{key:"getBounds",value:function(){return this._bounds}},{key:"interfaces_",get:function(){return[Be,k]}}],[{key:"constructor_",value:function(){this._bounds=null,this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t,this._item=e}}]),e}(),Ye=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"poll",value:function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t}},{key:"size",value:function(){return this._size}},{key:"reorder",value:function(t){for(var e=null,n=this._items.get(t);2*t<=this._size&&((e=2*t)!==this._size&&this._items.get(e+1).compareTo(this._items.get(e))<0&&e++,this._items.get(e).compareTo(n)<0);t=e)this._items.set(t,this._items.get(e));this._items.set(t,n)}},{key:"clear",value:function(){this._size=0,this._items.clear()}},{key:"peek",value:function(){return this.isEmpty()?null:this._items.get(1)}},{key:"isEmpty",value:function(){return 0===this._size}},{key:"add",value:function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)}}],[{key:"constructor_",value:function(){this._size=null,this._items=null,this._size=0,this._items=new pt,this._items.add(null)}}]),e}(),qe=function(){function e(){t(this,e)}return n(e,[{key:"insert",value:function(t,e){}},{key:"remove",value:function(t,e){}},{key:"query",value:function(){}}]),e}(),Ue=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getLevel",value:function(){return this._level}},{key:"size",value:function(){return this._childBoundables.size()}},{key:"getChildBoundables",value:function(){return this._childBoundables}},{key:"addChildBoundable",value:function(t){F.isTrue(null===this._bounds),this._childBoundables.add(t)}},{key:"isEmpty",value:function(){return this._childBoundables.isEmpty()}},{key:"getBounds",value:function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds}},{key:"interfaces_",get:function(){return[Be,k]}}],[{key:"constructor_",value:function(){if(this._childBoundables=new pt,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._level=t}}}]),e}(),Xe={reverseOrder:function(){return{compare:function(t,e){return e.compareTo(t)}}},min:function(t){return Xe.sort(t),t.get(0)},sort:function(t,e){var n=t.toArray();e?Nt.sort(n,e):Nt.sort(n);for(var i=t.iterator(),r=0,o=n.length;r<o;r++)i.next(),i.set(n[r])},singletonList:function(t){var e=new pt;return e.add(t),e}},We=function(){function e(){t(this,e)}return n(e,null,[{key:"maxDistance",value:function(t,n,i,r,o,s,a,l){var u=e.distance(t,n,o,s);return u=Math.max(u,e.distance(t,n,a,l)),u=Math.max(u,e.distance(i,r,o,s)),Math.max(u,e.distance(i,r,a,l))}},{key:"distance",value:function(t,e,n,i){var r=n-t,o=i-e;return Math.sqrt(r*r+o*o)}},{key:"maximumDistance",value:function(t,n){var i=Math.min(t.getMinX(),n.getMinX()),r=Math.min(t.getMinY(),n.getMinY()),o=Math.max(t.getMaxX(),n.getMaxX()),s=Math.max(t.getMaxY(),n.getMaxY());return e.distance(i,r,o,s)}},{key:"minMaxDistance",value:function(t,n){var i=t.getMinX(),r=t.getMinY(),o=t.getMaxX(),s=t.getMaxY(),a=n.getMinX(),l=n.getMinY(),u=n.getMaxX(),c=n.getMaxY(),h=e.maxDistance(i,r,i,s,a,l,a,c);return h=Math.min(h,e.maxDistance(i,r,i,s,a,l,u,l)),h=Math.min(h,e.maxDistance(i,r,i,s,u,c,a,c)),h=Math.min(h,e.maxDistance(i,r,i,s,u,c,u,l)),h=Math.min(h,e.maxDistance(i,r,o,r,a,l,a,c)),h=Math.min(h,e.maxDistance(i,r,o,r,a,l,u,l)),h=Math.min(h,e.maxDistance(i,r,o,r,u,c,a,c)),h=Math.min(h,e.maxDistance(i,r,o,r,u,c,u,l)),h=Math.min(h,e.maxDistance(o,s,i,s,a,l,a,c)),h=Math.min(h,e.maxDistance(o,s,i,s,a,l,u,l)),h=Math.min(h,e.maxDistance(o,s,i,s,u,c,a,c)),h=Math.min(h,e.maxDistance(o,s,i,s,u,c,u,l)),h=Math.min(h,e.maxDistance(o,s,o,r,a,l,a,c)),h=Math.min(h,e.maxDistance(o,s,o,r,a,l,u,l)),h=Math.min(h,e.maxDistance(o,s,o,r,u,c,a,c)),Math.min(h,e.maxDistance(o,s,o,r,u,c,u,l))}}]),e}(),He=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"maximumDistance",value:function(){return We.maximumDistance(this._boundable1.getBounds(),this._boundable2.getBounds())}},{key:"expandToQueue",value:function(t,n){var i=e.isComposite(this._boundable1),r=e.isComposite(this._boundable2);if(i&&r)return e.area(this._boundable1)>e.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,!1,t,n),null):(this.expand(this._boundable2,this._boundable1,!0,t,n),null);if(i)return this.expand(this._boundable1,this._boundable2,!1,t,n),null;if(r)return this.expand(this._boundable2,this._boundable1,!0,t,n),null;throw new b("neither boundable is composite")}},{key:"isLeaves",value:function(){return!(e.isComposite(this._boundable1)||e.isComposite(this._boundable2))}},{key:"compareTo",value:function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0}},{key:"expand",value:function(t,n,i,r,o){for(var s=t.getChildBoundables().iterator();s.hasNext();){var a=s.next(),l=null;(l=i?new e(n,a,this._itemDistance):new e(a,n,this._itemDistance)).getDistance()<o&&r.add(l)}}},{key:"getBoundable",value:function(t){return 0===t?this._boundable1:this._boundable2}},{key:"getDistance",value:function(){return this._distance}},{key:"distance",value:function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())}},{key:"interfaces_",get:function(){return[E]}}],[{key:"constructor_",value:function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=n,this._distance=this.distance()}},{key:"area",value:function(t){return t.getBounds().getArea()}},{key:"isComposite",value:function(t){return t instanceof Ue}}]),e}(),Ze=function(){function e(){t(this,e)}return n(e,[{key:"visitItem",value:function(t){}}]),e}(),Ke=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"queryInternal",value:function(){if(rt(arguments[2],Ze)&&arguments[0]instanceof Object&&arguments[1]instanceof Ue)for(var t=arguments[0],e=arguments[2],n=arguments[1].getChildBoundables(),i=0;i<n.size();i++){var r=n.get(i);this.getIntersectsOp().intersects(r.getBounds(),t)&&(r instanceof Ue?this.queryInternal(t,r,e):r instanceof Ve?e.visitItem(r.getItem()):F.shouldNeverReachHere())}else if(rt(arguments[2],nt)&&arguments[0]instanceof Object&&arguments[1]instanceof Ue)for(var o=arguments[0],s=arguments[2],a=arguments[1].getChildBoundables(),l=0;l<a.size();l++){var u=a.get(l);this.getIntersectsOp().intersects(u.getBounds(),o)&&(u instanceof Ue?this.queryInternal(o,u,s):u instanceof Ve?s.add(u.getItem()):F.shouldNeverReachHere())}}},{key:"getNodeCapacity",value:function(){return this._nodeCapacity}},{key:"lastNode",value:function(t){return t.get(t.size()-1)}},{key:"size",value:function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();n instanceof Ue?t+=this.size(n):n instanceof Ve&&(t+=1)}return t}}},{key:"removeItem",value:function(t,e){for(var n=null,i=t.getChildBoundables().iterator();i.hasNext();){var r=i.next();r instanceof Ve&&r.getItem()===e&&(n=r)}return null!==n&&(t.getChildBoundables().remove(n),!0)}},{key:"itemsTree",value:function(){if(0===arguments.length){this.build();var t=this.itemsTree(this._root);return null===t?new pt:t}if(1===arguments.length){for(var e=arguments[0],n=new pt,i=e.getChildBoundables().iterator();i.hasNext();){var r=i.next();if(r instanceof Ue){var o=this.itemsTree(r);null!==o&&n.add(o)}else r instanceof Ve?n.add(r.getItem()):F.shouldNeverReachHere()}return n.size()<=0?null:n}}},{key:"insert",value:function(t,e){F.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Ve(t,e))}},{key:"boundablesAtLevel",value:function(){if(1===arguments.length){var t=arguments[0],e=new pt;return this.boundablesAtLevel(t,this._root,e),e}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];if(F.isTrue(n>-2),i.getLevel()===n)return r.add(i),null;for(var o=i.getChildBoundables().iterator();o.hasNext();){var s=o.next();s instanceof Ue?this.boundablesAtLevel(n,s,r):(F.isTrue(s instanceof Ve),-1===n&&r.add(s))}return null}}},{key:"query",value:function(){if(1===arguments.length){var t=arguments[0];this.build();var e=new pt;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.queryInternal(t,this._root,e),e}if(2===arguments.length){var n=arguments[0],i=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),n)&&this.queryInternal(n,this._root,i)}}},{key:"build",value:function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0}},{key:"getRoot",value:function(){return this.build(),this._root}},{key:"remove",value:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],o=this.removeItem(i,r);if(o)return!0;for(var s=null,a=i.getChildBoundables().iterator();a.hasNext();){var l=a.next();if(this.getIntersectsOp().intersects(l.getBounds(),n)&&l instanceof Ue&&(o=this.remove(n,l,r))){s=l;break}}return null!==s&&s.getChildBoundables().isEmpty()&&i.getChildBoundables().remove(s),o}}},{key:"createHigherLevels",value:function(t,e){F.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)}},{key:"depth",value:function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();if(n instanceof Ue){var i=this.depth(n);i>t&&(t=i)}}return t+1}}},{key:"createParentBoundables",value:function(t,e){F.isTrue(!t.isEmpty());var n=new pt;n.add(this.createNode(e));var i=new pt(t);Xe.sort(i,this.getComparator());for(var r=i.iterator();r.hasNext();){var o=r.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(o)}return n}},{key:"isEmpty",value:function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()}},{key:"interfaces_",get:function(){return[k]}}],[{key:"constructor_",value:function(){if(this._root=null,this._built=!1,this._itemBoundables=new pt,this._nodeCapacity=null,0===arguments.length)e.constructor_.call(this,e.DEFAULT_NODE_CAPACITY);else if(1===arguments.length){var t=arguments[0];F.isTrue(t>1,"Node capacity must be greater than 1"),this._nodeCapacity=t}}},{key:"compareDoubles",value:function(t,e){return t>e?1:t<e?-1:0}}]),e}();Ke.IntersectsOp=function(){},Ke.DEFAULT_NODE_CAPACITY=10;var Je=function(){function e(){t(this,e)}return n(e,[{key:"distance",value:function(t,e){}}]),e}(),Qe=function(e){i(s,e);var o=h(s);function s(){var e;return t(this,s),e=o.call(this),s.constructor_.apply(u(e),arguments),e}return n(s,[{key:"createParentBoundablesFromVerticalSlices",value:function(t,e){F.isTrue(t.length>0);for(var n=new pt,i=0;i<t.length;i++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[i],e));return n}},{key:"nearestNeighbourK",value:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.nearestNeighbourK(t,N.POSITIVE_INFINITY,e)}if(3===arguments.length){var n=arguments[0],i=arguments[2],r=arguments[1],o=new Ye;o.add(n);for(var a=new Ye;!o.isEmpty()&&r>=0;){var l=o.poll(),u=l.getDistance();if(u>=r)break;l.isLeaves()?a.size()<i?a.add(l):(a.peek().getDistance()>u&&(a.poll(),a.add(l)),r=a.peek().getDistance()):l.expandToQueue(o,r)}return s.getItems(a)}}},{key:"createNode",value:function(t){return new $e(t)}},{key:"size",value:function(){return 0===arguments.length?f(r(s.prototype),"size",this).call(this):f(r(s.prototype),"size",this).apply(this,arguments)}},{key:"insert",value:function(){if(!(2===arguments.length&&arguments[1]instanceof Object&&arguments[0]instanceof q))return f(r(s.prototype),"insert",this).apply(this,arguments);var t=arguments[0],e=arguments[1];if(t.isNull())return null;f(r(s.prototype),"insert",this).call(this,t,e)}},{key:"getIntersectsOp",value:function(){return s.intersectsOp}},{key:"verticalSlices",value:function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),i=new Array(e).fill(null),r=t.iterator(),o=0;o<e;o++){i[o]=new pt;for(var s=0;r.hasNext()&&s<n;){var a=r.next();i[o].add(a),s++}}return i}},{key:"query",value:function(){if(1===arguments.length){var t=arguments[0];return f(r(s.prototype),"query",this).call(this,t)}if(2===arguments.length){var e=arguments[0],n=arguments[1];f(r(s.prototype),"query",this).call(this,e,n)}}},{key:"getComparator",value:function(){return s.yComparator}},{key:"createParentBoundablesFromVerticalSlice",value:function(t,e){return f(r(s.prototype),"createParentBoundables",this).call(this,t,e)}},{key:"remove",value:function(){if(2===arguments.length&&arguments[1]instanceof Object&&arguments[0]instanceof q){var t=arguments[0],e=arguments[1];return f(r(s.prototype),"remove",this).call(this,t,e)}return f(r(s.prototype),"remove",this).apply(this,arguments)}},{key:"depth",value:function(){return 0===arguments.length?f(r(s.prototype),"depth",this).call(this):f(r(s.prototype),"depth",this).apply(this,arguments)}},{key:"createParentBoundables",value:function(t,e){F.isTrue(!t.isEmpty());var n=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),i=new pt(t);Xe.sort(i,s.xComparator);var r=this.verticalSlices(i,Math.trunc(Math.ceil(Math.sqrt(n))));return this.createParentBoundablesFromVerticalSlices(r,e)}},{key:"nearestNeighbour",value:function(){if(1===arguments.length){if(rt(arguments[0],Je)){var t=arguments[0];if(this.isEmpty())return null;var e=new He(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(e)}if(arguments[0]instanceof He){var n=arguments[0],i=N.POSITIVE_INFINITY,r=null,o=new Ye;for(o.add(n);!o.isEmpty()&&i>0;){var s=o.poll(),a=s.getDistance();if(a>=i)break;s.isLeaves()?(i=a,r=s):s.expandToQueue(o,i)}return null===r?null:[r.getBoundable(0).getItem(),r.getBoundable(1).getItem()]}}else{if(2===arguments.length){var l=arguments[0],u=arguments[1];if(this.isEmpty()||l.isEmpty())return null;var c=new He(this.getRoot(),l.getRoot(),u);return this.nearestNeighbour(c)}if(3===arguments.length){var h=arguments[2],f=new Ve(arguments[0],arguments[1]),d=new He(this.getRoot(),f,h);return this.nearestNeighbour(d)[0]}if(4===arguments.length){var g=arguments[2],p=arguments[3],v=new Ve(arguments[0],arguments[1]),y=new He(this.getRoot(),v,g);return this.nearestNeighbourK(y,p)}}}},{key:"isWithinDistance",value:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=N.POSITIVE_INFINITY,i=new Ye;for(i.add(t);!i.isEmpty();){var r=i.poll(),o=r.getDistance();if(o>e)return!1;if(r.maximumDistance()<=e)return!0;if(r.isLeaves()){if((n=o)<=e)return!0}else r.expandToQueue(i,n)}return!1}if(3===arguments.length){var s=arguments[0],a=arguments[1],l=arguments[2],u=new He(this.getRoot(),s.getRoot(),a);return this.isWithinDistance(u,l)}}},{key:"interfaces_",get:function(){return[qe,k]}}],[{key:"constructor_",value:function(){if(0===arguments.length)s.constructor_.call(this,s.DEFAULT_NODE_CAPACITY);else if(1===arguments.length){var t=arguments[0];Ke.constructor_.call(this,t)}}},{key:"centreX",value:function(t){return s.avg(t.getMinX(),t.getMaxX())}},{key:"avg",value:function(t,e){return(t+e)/2}},{key:"getItems",value:function(t){for(var e=new Array(t.size()).fill(null),n=0;!t.isEmpty();){var i=t.poll();e[n]=i.getBoundable(0).getItem(),n++}return e}},{key:"centreY",value:function(t){return s.avg(t.getMinY(),t.getMaxY())}}]),s}(Ke),$e=function(e){i(o,e);var r=h(o);function o(){var e;return t(this,o),e=r.call(this),o.constructor_.apply(u(e),arguments),e}return n(o,[{key:"computeBounds",value:function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new q(n.getBounds()):t.expandToInclude(n.getBounds())}return t}}],[{key:"constructor_",value:function(){var t=arguments[0];Ue.constructor_.call(this,t)}}]),o}(Ue);Qe.STRtreeNode=$e,Qe.xComparator=new(function(){function e(){t(this,e)}return n(e,[{key:"interfaces_",get:function(){return[A]}},{key:"compare",value:function(t,e){return Ke.compareDoubles(Qe.centreX(t.getBounds()),Qe.centreX(e.getBounds()))}}]),e}()),Qe.yComparator=new(function(){function e(){t(this,e)}return n(e,[{key:"interfaces_",get:function(){return[A]}},{key:"compare",value:function(t,e){return Ke.compareDoubles(Qe.centreY(t.getBounds()),Qe.centreY(e.getBounds()))}}]),e}()),Qe.intersectsOp=new(function(){function e(){t(this,e)}return n(e,[{key:"interfaces_",get:function(){return[IntersectsOp]}},{key:"intersects",value:function(t,e){return t.intersects(e)}}]),e}()),Qe.DEFAULT_NODE_CAPACITY=10;var tn=function(){function e(){t(this,e)}return n(e,null,[{key:"relativeSign",value:function(t,e){return t<e?-1:t>e?1:0}},{key:"compare",value:function(t,n,i){if(n.equals2D(i))return 0;var r=e.relativeSign(n.x,i.x),o=e.relativeSign(n.y,i.y);switch(t){case 0:return e.compareValue(r,o);case 1:return e.compareValue(o,r);case 2:return e.compareValue(o,-r);case 3:return e.compareValue(-r,o);case 4:return e.compareValue(-r,-o);case 5:return e.compareValue(-o,-r);case 6:return e.compareValue(-o,r);case 7:return e.compareValue(r,-o)}return F.shouldNeverReachHere("invalid octant value"),0}},{key:"compareValue",value:function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0}}]),e}(),en=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)}},{key:"compareTo",value:function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:this._isInterior?e._isInterior?tn.compare(this._segmentOctant,this.coord,e.coord):1:-1}},{key:"isEndPoint",value:function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t}},{key:"toString",value:function(){return this.segmentIndex+":"+this.coord.toString()}},{key:"isInterior",value:function(){return this._isInterior}},{key:"interfaces_",get:function(){return[E]}}],[{key:"constructor_",value:function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this._segString=t,this.coord=new V(e),this.segmentIndex=n,this._segmentOctant=i,this._isInterior=!e.equals2D(t.getCoordinate(n))}}]),e}(),nn=function(){function e(){t(this,e)}return n(e,[{key:"hasNext",value:function(){}},{key:"next",value:function(){}},{key:"remove",value:function(){}}]),e}(),rn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getSplitCoordinates",value:function(){var t=new Xt;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next();this.addEdgeCoordinates(n,i,t),n=i}return t.toCoordinateArray()}},{key:"addCollapsedNodes",value:function(){var t=new pt;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this._edge.getCoordinate(n),n)}}},{key:"createSplitEdgePts",value:function(t,e){var n=e.segmentIndex-t.segmentIndex+2;if(2===n)return[new V(t.coord),new V(e.coord)];var i=this._edge.getCoordinate(e.segmentIndex),r=e.isInterior()||!e.coord.equals2D(i);r||n--;var o=new Array(n).fill(null),s=0;o[s++]=new V(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this._edge.getCoordinate(a);return r&&(o[s]=new V(e.coord)),o}},{key:"print",value:function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)}},{key:"findCollapsesFromExistingVertices",value:function(t){for(var e=0;e<this._edge.size()-2;e++){var n=this._edge.getCoordinate(e);this._edge.getCoordinate(e+1);var i=this._edge.getCoordinate(e+2);n.equals2D(i)&&t.add(st.valueOf(e+1))}}},{key:"addEdgeCoordinates",value:function(t,e,n){var i=this.createSplitEdgePts(t,e);n.add(i,!1)}},{key:"iterator",value:function(){return this._nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next(),r=this.createSplitEdge(n,i);t.add(r),n=i}}},{key:"findCollapseIndex",value:function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var i=e.segmentIndex-t.segmentIndex;return e.isInterior()||i--,1===i&&(n[0]=t.segmentIndex+1,!0)}},{key:"findCollapsesFromInsertedNodes",value:function(t){for(var e=new Array(1).fill(null),n=this.iterator(),i=n.next();n.hasNext();){var r=n.next();this.findCollapseIndex(i,r,e)&&t.add(st.valueOf(e[0])),i=r}}},{key:"getEdge",value:function(){return this._edge}},{key:"addEndpoints",value:function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)}},{key:"createSplitEdge",value:function(t,e){var n=this.createSplitEdgePts(t,e);return new ln(n,this._edge.getData())}},{key:"add",value:function(t,e){var n=new en(this._edge,t,e,this._edge.getSegmentOctant(e)),i=this._nodeMap.get(n);return null!==i?(F.isTrue(i.coord.equals2D(t),"Found equal nodes with different coordinates"),i):(this._nodeMap.put(n,n),n)}},{key:"checkSplitEdgesCorrectness",value:function(t){var e=this._edge.getCoordinates(),n=t.get(0).getCoordinate(0);if(!n.equals2D(e[0]))throw new j("bad split edge start point at "+n);var i=t.get(t.size()-1).getCoordinates(),r=i[i.length-1];if(!r.equals2D(e[e.length-1]))throw new j("bad split edge end point at "+r)}}],[{key:"constructor_",value:function(){this._nodeMap=new Le,this._edge=null;var t=arguments[0];this._edge=t}}]),e}(),on=function(){function e(){t(this,e)}return n(e,null,[{key:"octant",value:function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],n=arguments[1];if(0===t&&0===n)throw new b("Cannot compute the octant for point ( "+t+", "+n+" )");var i=Math.abs(t),r=Math.abs(n);return t>=0?n>=0?i>=r?0:1:i>=r?7:6:n>=0?i>=r?3:2:i>=r?4:5}if(arguments[0]instanceof V&&arguments[1]instanceof V){var o=arguments[0],s=arguments[1],a=s.x-o.x,l=s.y-o.y;if(0===a&&0===l)throw new b("Cannot compute the octant for two identical points "+o);return e.octant(a,l)}}}]),e}(),sn=function(){function e(){t(this,e)}return n(e,[{key:"getCoordinates",value:function(){}},{key:"size",value:function(){}},{key:"getCoordinate",value:function(t){}},{key:"isClosed",value:function(){}},{key:"setData",value:function(t){}},{key:"getData",value:function(){}}]),e}(),an=function(){function e(){t(this,e)}return n(e,[{key:"addIntersection",value:function(t,e){}},{key:"interfaces_",get:function(){return[sn]}}]),e}(),ln=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getCoordinates",value:function(){return this._pts}},{key:"size",value:function(){return this._pts.length}},{key:"getCoordinate",value:function(t){return this._pts[t]}},{key:"isClosed",value:function(){return this._pts[0].equals(this._pts[this._pts.length-1])}},{key:"getSegmentOctant",value:function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))}},{key:"setData",value:function(t){this._data=t}},{key:"safeOctant",value:function(t,e){return t.equals2D(e)?0:on.octant(t,e)}},{key:"getData",value:function(){return this._data}},{key:"addIntersection",value:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var n=arguments[1],i=arguments[3],r=new V(arguments[0].getIntersection(i));this.addIntersection(r,n)}}},{key:"toString",value:function(){return ve.toLineString(new Jt(this._pts))}},{key:"getNodeList",value:function(){return this._nodeList}},{key:"addIntersectionNode",value:function(t,e){var n=e,i=n+1;if(i<this._pts.length){var r=this._pts[i];t.equals2D(r)&&(n=i)}return this._nodeList.add(t,n)}},{key:"addIntersections",value:function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++)this.addIntersection(t,e,n,i)}},{key:"interfaces_",get:function(){return[an]}}],[{key:"constructor_",value:function(){this._nodeList=new rn(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e}},{key:"getNodedSubstrings",value:function(){if(1===arguments.length){var t=arguments[0],n=new pt;return e.getNodedSubstrings(t,n),n}if(2===arguments.length)for(var i=arguments[1],r=arguments[0].iterator();r.hasNext();)r.next().getNodeList().addSplitEdges(i)}}]),e}(),un=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"minX",value:function(){return Math.min(this.p0.x,this.p1.x)}},{key:"orientationIndex",value:function(){if(arguments[0]instanceof e){var t=arguments[0],n=ht.index(this.p0,this.p1,t.p0),i=ht.index(this.p0,this.p1,t.p1);return n>=0&&i>=0||n<=0&&i<=0?Math.max(n,i):0}if(arguments[0]instanceof V){var r=arguments[0];return ht.index(this.p0,this.p1,r)}}},{key:"toGeometry",value:function(t){return t.createLineString([this.p0,this.p1])}},{key:"isVertical",value:function(){return this.p0.x===this.p1.x}},{key:"equals",value:function(t){if(!(t instanceof e))return!1;var n=t;return this.p0.equals(n.p0)&&this.p1.equals(n.p1)}},{key:"intersection",value:function(t){var e=new me;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null}},{key:"project",value:function(){if(arguments[0]instanceof V){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new V(t);var n=this.projectionFactor(t),i=new V;return i.x=this.p0.x+n*(this.p1.x-this.p0.x),i.y=this.p0.y+n*(this.p1.y-this.p0.y),i}if(arguments[0]instanceof e){var r=arguments[0],o=this.projectionFactor(r.p0),s=this.projectionFactor(r.p1);if(o>=1&&s>=1)return null;if(o<=0&&s<=0)return null;var a=this.project(r.p0);o<0&&(a=this.p0),o>1&&(a=this.p1);var l=this.project(r.p1);return s<0&&(l=this.p0),s>1&&(l=this.p1),new e(a,l)}}},{key:"normalize",value:function(){this.p1.compareTo(this.p0)<0&&this.reverse()}},{key:"angle",value:function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)}},{key:"getCoordinate",value:function(t){return 0===t?this.p0:this.p1}},{key:"distancePerpendicular",value:function(t){return xt.pointToLinePerpendicular(t,this.p0,this.p1)}},{key:"minY",value:function(){return Math.min(this.p0.y,this.p1.y)}},{key:"midPoint",value:function(){return e.midPoint(this.p0,this.p1)}},{key:"projectionFactor",value:function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,i=e*e+n*n;return i<=0?N.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/i}},{key:"closestPoints",value:function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),i=N.MAX_VALUE,r=null,o=this.closestPoint(t.p0);i=o.distance(t.p0),n[0]=o,n[1]=t.p0;var s=this.closestPoint(t.p1);(r=s.distance(t.p1))<i&&(i=r,n[0]=s,n[1]=t.p1);var a=t.closestPoint(this.p0);(r=a.distance(this.p0))<i&&(i=r,n[0]=this.p0,n[1]=a);var l=t.closestPoint(this.p1);return(r=l.distance(this.p1))<i&&(i=r,n[0]=this.p1,n[1]=l),n}},{key:"closestPoint",value:function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1}},{key:"maxX",value:function(){return Math.max(this.p0.x,this.p1.x)}},{key:"getLength",value:function(){return this.p0.distance(this.p1)}},{key:"compareTo",value:function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)}},{key:"reverse",value:function(){var t=this.p0;this.p0=this.p1,this.p1=t}},{key:"equalsTopo",value:function(t){return this.p0.equals(t.p0)&&this.p1.equals(t.p1)||this.p0.equals(t.p1)&&this.p1.equals(t.p0)}},{key:"lineIntersection",value:function(t){return mt.intersection(this.p0,this.p1,t.p0,t.p1)}},{key:"maxY",value:function(){return Math.max(this.p0.y,this.p1.y)}},{key:"pointAlongOffset",value:function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),i=this.p0.y+t*(this.p1.y-this.p0.y),r=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,s=Math.sqrt(r*r+o*o),a=0,l=0;if(0!==e){if(s<=0)throw new IllegalStateException("Cannot compute offset from zero-length line segment");a=e*r/s,l=e*o/s}return new V(n-l,i+a)}},{key:"setCoordinates",value:function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}}},{key:"segmentFraction",value:function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||N.isNaN(e))&&(e=1),e}},{key:"toString",value:function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"}},{key:"isHorizontal",value:function(){return this.p0.y===this.p1.y}},{key:"reflect",value:function(t){var e=this.p1.getY()-this.p0.getY(),n=this.p0.getX()-this.p1.getX(),i=this.p0.getY()*(this.p1.getX()-this.p0.getX())-this.p0.getX()*(this.p1.getY()-this.p0.getY()),r=e*e+n*n,o=e*e-n*n,s=t.getX(),a=t.getY();return new V((-o*s-2*e*n*a-2*e*i)/r,(o*a-2*e*n*s-2*n*i)/r)}},{key:"distance",value:function(){if(arguments[0]instanceof e){var t=arguments[0];return xt.segmentToSegment(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof V){var n=arguments[0];return xt.pointToSegment(n,this.p0,this.p1)}}},{key:"pointAlong",value:function(t){var e=new V;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e}},{key:"hashCode",value:function(){var t=N.doubleToLongBits(this.p0.x);t^=31*N.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=N.doubleToLongBits(this.p1.x);return n^=31*N.doubleToLongBits(this.p1.y),e^Math.trunc(n)^Math.trunc(n>>32)}},{key:"interfaces_",get:function(){return[E,k]}}],[{key:"constructor_",value:function(){if(this.p0=null,this.p1=null,0===arguments.length)e.constructor_.call(this,new V,new V);else if(1===arguments.length){var t=arguments[0];e.constructor_.call(this,t.p0,t.p1)}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.p0=n,this.p1=i}else if(4===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];e.constructor_.call(this,new V(r,o),new V(s,a))}}},{key:"midPoint",value:function(t,e){return new V((t.x+e.x)/2,(t.y+e.y)/2)}}]),e}(),cn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"overlap",value:function(){if(2===arguments.length);else if(4===arguments.length){var t=arguments[1],e=arguments[2],n=arguments[3];arguments[0].getLineSegment(t,this._overlapSeg1),e.getLineSegment(n,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}}}],[{key:"constructor_",value:function(){this._overlapSeg1=new un,this._overlapSeg2=new un}}]),e}(),hn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getLineSegment",value:function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]}},{key:"computeSelect",value:function(t,e,n,i){var r=this._pts[e],o=this._pts[n];if(n-e==1)return i.select(this,e),null;if(!t.intersects(r,o))return null;var s=Math.trunc((e+n)/2);e<s&&this.computeSelect(t,e,s,i),s<n&&this.computeSelect(t,s,n,i)}},{key:"getCoordinates",value:function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,n=this._start;n<=this._end;n++)t[e++]=this._pts[n];return t}},{key:"computeOverlaps",value:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.computeOverlaps(this._start,this._end,t,t._start,t._end,e)}else if(6===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],o=arguments[3],s=arguments[4],a=arguments[5];if(i-n==1&&s-o==1)return a.overlap(this,n,r,o),null;if(!this.overlaps(n,i,r,o,s))return null;var l=Math.trunc((n+i)/2),u=Math.trunc((o+s)/2);n<l&&(o<u&&this.computeOverlaps(n,l,r,o,u,a),u<s&&this.computeOverlaps(n,l,r,u,s,a)),l<i&&(o<u&&this.computeOverlaps(l,i,r,o,u,a),u<s&&this.computeOverlaps(l,i,r,u,s,a))}}},{key:"setId",value:function(t){this._id=t}},{key:"select",value:function(t,e){this.computeSelect(t,this._start,this._end,e)}},{key:"getEnvelope",value:function(){if(null===this._env){var t=this._pts[this._start],e=this._pts[this._end];this._env=new q(t,e)}return this._env}},{key:"overlaps",value:function(t,e,n,i,r){return q.intersects(this._pts[t],this._pts[e],n._pts[i],n._pts[r])}},{key:"getEndIndex",value:function(){return this._end}},{key:"getStartIndex",value:function(){return this._start}},{key:"getContext",value:function(){return this._context}},{key:"getId",value:function(){return this._id}}],[{key:"constructor_",value:function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this._pts=t,this._start=e,this._end=n,this._context=i}}]),e}(),fn=function(){function e(){t(this,e)}return n(e,null,[{key:"findChainEnd",value:function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var i=Ae.quadrant(t[n],t[n+1]),r=e+1;r<t.length&&(t[r-1].equals2D(t[r])||Ae.quadrant(t[r-1],t[r])===i);)r++;return r-1}},{key:"getChains",value:function(){if(1===arguments.length){var t=arguments[0];return e.getChains(t,null)}if(2===arguments.length){var n=arguments[0],i=arguments[1],r=new pt,o=0;do{var s=e.findChainEnd(n,o),a=new hn(n,o,s,i);r.add(a),o=s}while(o<n.length-1);return r}}}]),e}(),dn=function(){function e(){t(this,e)}return n(e,[{key:"computeNodes",value:function(t){}},{key:"getNodedSubstrings",value:function(){}}]),e}(),gn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"setSegmentIntersector",value:function(t){this._segInt=t}},{key:"interfaces_",get:function(){return[dn]}}],[{key:"constructor_",value:function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}}}]),e}(),pn=function(e){i(o,e);var r=h(o);function o(){var e;return t(this,o),e=r.call(this),o.constructor_.apply(u(e),arguments),e}return n(o,[{key:"getMonotoneChains",value:function(){return this._monoChains}},{key:"getNodedSubstrings",value:function(){return ln.getNodedSubstrings(this._nodedSegStrings)}},{key:"getIndex",value:function(){return this._index}},{key:"add",value:function(t){for(var e=fn.getChains(t.getCoordinates(),t).iterator();e.hasNext();){var n=e.next();n.setId(this._idCounter++),this._index.insert(n.getEnvelope(),n),this._monoChains.add(n)}}},{key:"computeNodes",value:function(t){this._nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()}},{key:"intersectChains",value:function(){for(var t=new vn(this._segInt),e=this._monoChains.iterator();e.hasNext();)for(var n=e.next(),i=this._index.query(n.getEnvelope()).iterator();i.hasNext();){var r=i.next();if(r.getId()>n.getId()&&(n.computeOverlaps(r,t),this._nOverlaps++),this._segInt.isDone())return null}}}],[{key:"constructor_",value:function(){if(this._monoChains=new pt,this._index=new Qe,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0,0===arguments.length);else if(1===arguments.length){var t=arguments[0];gn.constructor_.call(this,t)}}}]),o}(gn),vn=function(e){i(s,e);var o=h(s);function s(){var e;return t(this,s),e=o.call(this),s.constructor_.apply(u(e),arguments),e}return n(s,[{key:"overlap",value:function(){if(4!==arguments.length)return f(r(s.prototype),"overlap",this).apply(this,arguments);var t=arguments[1],e=arguments[2],n=arguments[3],i=arguments[0].getContext(),o=e.getContext();this._si.processIntersections(i,t,o,n)}}],[{key:"constructor_",value:function(){this._si=null;var t=arguments[0];this._si=t}}]),s}(cn);pn.SegmentOverlapAction=vn;var yn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"isDeletable",value:function(t,e,n,i){var r=this._inputLine[t],o=this._inputLine[e],s=this._inputLine[n];return!!this.isConcave(r,o,s)&&!!this.isShallow(r,o,s,i)&&this.isShallowSampled(r,o,t,n,i)}},{key:"deleteShallowConcavities",value:function(){for(var t=1,n=this.findNextNonDeletedIndex(t),i=this.findNextNonDeletedIndex(n),r=!1;i<this._inputLine.length;){var o=!1;this.isDeletable(t,n,i,this._distanceTol)&&(this._isDeleted[n]=e.DELETE,o=!0,r=!0),t=o?i:n,n=this.findNextNonDeletedIndex(t),i=this.findNextNonDeletedIndex(n)}return r}},{key:"isShallowConcavity",value:function(t,e,n,i){return ht.index(t,e,n)===this._angleOrientation&&xt.pointToSegment(e,t,n)<i}},{key:"isShallowSampled",value:function(t,n,i,r,o){var s=Math.trunc((r-i)/e.NUM_PTS_TO_CHECK);s<=0&&(s=1);for(var a=i;a<r;a+=s)if(!this.isShallow(t,n,this._inputLine[a],o))return!1;return!0}},{key:"isConcave",value:function(t,e,n){return ht.index(t,e,n)===this._angleOrientation}},{key:"simplify",value:function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=ht.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()}},{key:"findNextNonDeletedIndex",value:function(t){for(var n=t+1;n<this._inputLine.length&&this._isDeleted[n]===e.DELETE;)n++;return n}},{key:"isShallow",value:function(t,e,n,i){return xt.pointToSegment(e,t,n)<i}},{key:"collapseLine",value:function(){for(var t=new Xt,n=0;n<this._inputLine.length;n++)this._isDeleted[n]!==e.DELETE&&t.add(this._inputLine[n]);return t.toCoordinateArray()}}],[{key:"constructor_",value:function(){this._inputLine=null,this._distanceTol=null,this._isDeleted=null,this._angleOrientation=ht.COUNTERCLOCKWISE;var t=arguments[0];this._inputLine=t}},{key:"simplify",value:function(t,n){return new e(t).simplify(n)}}]),e}();yn.INIT=0,yn.DELETE=1,yn.KEEP=1,yn.NUM_PTS_TO_CHECK=10;var mn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getCoordinates",value:function(){return this._ptList.toArray(e.COORDINATE_ARRAY_TYPE)}},{key:"setPrecisionModel",value:function(t){this._precisionModel=t}},{key:"addPt",value:function(t){var e=new V(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)}},{key:"reverse",value:function(){}},{key:"addPts",value:function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var i=t.length-1;i>=0;i--)this.addPt(t[i])}},{key:"isRedundant",value:function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance}},{key:"toString",value:function(){return(new oe).createLineString(this.getCoordinates()).toString()}},{key:"closeRing",value:function(){if(this._ptList.size()<1)return null;var t=new V(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)}},{key:"setMinimumVertexDistance",value:function(t){this._minimimVertexDistance=t}}],[{key:"constructor_",value:function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new pt}}]),e}();mn.COORDINATE_ARRAY_TYPE=new Array(0).fill(null);var _n=function(){function e(){t(this,e)}return n(e,null,[{key:"toDegrees",value:function(t){return 180*t/Math.PI}},{key:"normalize",value:function(t){for(;t>Math.PI;)t-=e.PI_TIMES_2;for(;t<=-Math.PI;)t+=e.PI_TIMES_2;return t}},{key:"angle",value:function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1],i=n.x-e.x,r=n.y-e.y;return Math.atan2(r,i)}}},{key:"isAcute",value:function(t,e,n){var i=t.x-e.x,r=t.y-e.y;return i*(n.x-e.x)+r*(n.y-e.y)>0}},{key:"isObtuse",value:function(t,e,n){var i=t.x-e.x,r=t.y-e.y;return i*(n.x-e.x)+r*(n.y-e.y)<0}},{key:"interiorAngle",value:function(t,n,i){var r=e.angle(n,t),o=e.angle(n,i);return Math.abs(o-r)}},{key:"normalizePositive",value:function(t){if(t<0){for(;t<0;)t+=e.PI_TIMES_2;t>=e.PI_TIMES_2&&(t=0)}else{for(;t>=e.PI_TIMES_2;)t-=e.PI_TIMES_2;t<0&&(t=0)}return t}},{key:"angleBetween",value:function(t,n,i){var r=e.angle(n,t),o=e.angle(n,i);return e.diff(r,o)}},{key:"diff",value:function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n}},{key:"toRadians",value:function(t){return t*Math.PI/180}},{key:"getTurn",value:function(t,n){var i=Math.sin(n-t);return i>0?e.COUNTERCLOCKWISE:i<0?e.CLOCKWISE:e.NONE}},{key:"angleBetweenOriented",value:function(t,n,i){var r=e.angle(n,t),o=e.angle(n,i)-r;return o<=-Math.PI?o+e.PI_TIMES_2:o>Math.PI?o-e.PI_TIMES_2:o}}]),e}();_n.PI_TIMES_2=2*Math.PI,_n.PI_OVER_2=Math.PI/2,_n.PI_OVER_4=Math.PI/4,_n.COUNTERCLOCKWISE=ht.COUNTERCLOCKWISE,_n.CLOCKWISE=ht.CLOCKWISE,_n.NONE=ht.COLLINEAR;var bn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"addNextSegment",value:function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=ht.index(this._s0,this._s1,this._s2),i=n===ht.CLOCKWISE&&this._side===$.LEFT||n===ht.COUNTERCLOCKWISE&&this._side===$.RIGHT;0===n?this.addCollinear(e):i?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)}},{key:"addLineEndCap",value:function(t,e){var n=new un(t,e),i=new un;this.computeOffsetSegment(n,$.LEFT,this._distance,i);var r=new un;this.computeOffsetSegment(n,$.RIGHT,this._distance,r);var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o);switch(this._bufParams.getEndCapStyle()){case m.CAP_ROUND:this._segList.addPt(i.p1),this.addDirectedFillet(e,a+Math.PI/2,a-Math.PI/2,ht.CLOCKWISE,this._distance),this._segList.addPt(r.p1);break;case m.CAP_FLAT:this._segList.addPt(i.p1),this._segList.addPt(r.p1);break;case m.CAP_SQUARE:var l=new V;l.x=Math.abs(this._distance)*Math.cos(a),l.y=Math.abs(this._distance)*Math.sin(a);var u=new V(i.p1.x+l.x,i.p1.y+l.y),c=new V(r.p1.x+l.x,r.p1.y+l.y);this._segList.addPt(u),this._segList.addPt(c)}}},{key:"getCoordinates",value:function(){return this._segList.getCoordinates()}},{key:"addMitreJoin",value:function(t,e,n,i){var r=mt.intersection(e.p0,e.p1,n.p0,n.p1);if(null!==r&&(i<=0?1:r.distance(t)/Math.abs(i))<=this._bufParams.getMitreLimit())return this._segList.addPt(r),null;this.addLimitedMitreJoin(e,n,i,this._bufParams.getMitreLimit())}},{key:"addOutsideTurn",value:function(t,n){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*e.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===m.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===m.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(n&&this._segList.addPt(this._offset0.p1),this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))}},{key:"createSquare",value:function(t){this._segList.addPt(new V(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new V(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new V(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new V(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()}},{key:"addSegments",value:function(t,e){this._segList.addPts(t,e)}},{key:"addFirstSegment",value:function(){this._segList.addPt(this._offset1.p0)}},{key:"addCornerFillet",value:function(t,e,n,i,r){var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o),l=n.x-t.x,u=n.y-t.y,c=Math.atan2(u,l);i===ht.CLOCKWISE?a<=c&&(a+=2*Math.PI):a>=c&&(a-=2*Math.PI),this._segList.addPt(e),this.addDirectedFillet(t,a,c,i,r),this._segList.addPt(n)}},{key:"addLastSegment",value:function(){this._segList.addPt(this._offset1.p1)}},{key:"initSideSegments",value:function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)}},{key:"addLimitedMitreJoin",value:function(t,e,n,i){var r=this._seg0.p1,o=_n.angle(r,this._seg0.p0),s=_n.angleBetweenOriented(this._seg0.p0,r,this._seg1.p1)/2,a=_n.normalize(o+s),l=_n.normalize(a+Math.PI),u=i*n,c=n-u*Math.abs(Math.sin(s)),h=r.x+u*Math.cos(l),f=r.y+u*Math.sin(l),d=new V(h,f),g=new un(r,d),p=g.pointAlongOffset(1,c),v=g.pointAlongOffset(1,-c);this._side===$.LEFT?(this._segList.addPt(p),this._segList.addPt(v)):(this._segList.addPt(v),this._segList.addPt(p))}},{key:"addDirectedFillet",value:function(t,e,n,i,r){var o=i===ht.CLOCKWISE?-1:1,s=Math.abs(e-n),a=Math.trunc(s/this._filletAngleQuantum+.5);if(a<1)return null;for(var l=s/a,u=new V,c=0;c<a;c++){var h=e+o*c*l;u.x=t.x+r*Math.cos(h),u.y=t.y+r*Math.sin(h),this._segList.addPt(u)}}},{key:"computeOffsetSegment",value:function(t,e,n,i){var r=e===$.LEFT?1:-1,o=t.p1.x-t.p0.x,s=t.p1.y-t.p0.y,a=Math.sqrt(o*o+s*s),l=r*n*o/a,u=r*n*s/a;i.p0.x=t.p0.x-u,i.p0.y=t.p0.y+l,i.p1.x=t.p1.x-u,i.p1.y=t.p1.y+l}},{key:"addInsideTurn",value:function(t,n){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*e.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var i=new V((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(i);var r=new V((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}}},{key:"createCircle",value:function(t){var e=new V(t.x+this._distance,t.y);this._segList.addPt(e),this.addDirectedFillet(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()}},{key:"addBevelJoin",value:function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)}},{key:"init",value:function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new mn,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*e.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)}},{key:"addCollinear",value:function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===m.JOIN_BEVEL||this._bufParams.getJoinStyle()===m.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,ht.CLOCKWISE,this._distance))}},{key:"closeRing",value:function(){this._segList.closeRing()}},{key:"hasNarrowConcaveAngle",value:function(){return this._hasNarrowConcaveAngle}}],[{key:"constructor_",value:function(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new un,this._seg1=new un,this._offset0=new un,this._offset1=new un,this._side=0,this._hasNarrowConcaveAngle=!1;var t=arguments[0],n=arguments[1],i=arguments[2];this._precisionModel=t,this._bufParams=n,this._li=new me,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),n.getQuadrantSegments()>=8&&n.getJoinStyle()===m.JOIN_ROUND&&(this._closingSegLengthFactor=e.MAX_CLOSING_SEG_LEN_FACTOR),this.init(i)}}]),e}();bn.OFFSET_SEGMENT_SEPARATION_FACTOR=.001,bn.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=.001,bn.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1e-6,bn.MAX_CLOSING_SEG_LEN_FACTOR=80;var xn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getOffsetCurve",value:function(t,e){if(this._distance=e,0===e)return null;var n=e<0,i=Math.abs(e),r=this.getSegGen(i);t.length<=1?this.computePointCurve(t[0],r):this.computeOffsetCurve(t,n,r);var o=r.getCoordinates();return n&&Wt.reverse(o),o}},{key:"computeSingleSidedBufferCurve",value:function(t,e,n){var i=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var r=yn.simplify(t,-i),o=r.length-1;n.initSideSegments(r[o],r[o-1],$.LEFT),n.addFirstSegment();for(var s=o-2;s>=0;s--)n.addNextSegment(r[s],!0)}else{n.addSegments(t,!1);var a=yn.simplify(t,i),l=a.length-1;n.initSideSegments(a[0],a[1],$.LEFT),n.addFirstSegment();for(var u=2;u<=l;u++)n.addNextSegment(a[u],!0)}n.addLastSegment(),n.closeRing()}},{key:"computeRingBufferCurve",value:function(t,e,n){var i=this.simplifyTolerance(this._distance);e===$.RIGHT&&(i=-i);var r=yn.simplify(t,i),o=r.length-1;n.initSideSegments(r[o-1],r[0],e);for(var s=1;s<=o;s++){var a=1!==s;n.addNextSegment(r[s],a)}n.closeRing()}},{key:"computeLineBufferCurve",value:function(t,e){var n=this.simplifyTolerance(this._distance),i=yn.simplify(t,n),r=i.length-1;e.initSideSegments(i[0],i[1],$.LEFT);for(var o=2;o<=r;o++)e.addNextSegment(i[o],!0);e.addLastSegment(),e.addLineEndCap(i[r-1],i[r]);var s=yn.simplify(t,-n),a=s.length-1;e.initSideSegments(s[a],s[a-1],$.LEFT);for(var l=a-2;l>=0;l--)e.addNextSegment(s[l],!0);e.addLastSegment(),e.addLineEndCap(s[1],s[0]),e.closeRing()}},{key:"computePointCurve",value:function(t,e){switch(this._bufParams.getEndCapStyle()){case m.CAP_ROUND:e.createCircle(t);break;case m.CAP_SQUARE:e.createSquare(t)}}},{key:"getLineCurve",value:function(t,e){if(this._distance=e,this.isLineOffsetEmpty(e))return null;var n=Math.abs(e),i=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],i);else if(this._bufParams.isSingleSided()){var r=e<0;this.computeSingleSidedBufferCurve(t,r,i)}else this.computeLineBufferCurve(t,i);return i.getCoordinates()}},{key:"getBufferParameters",value:function(){return this._bufParams}},{key:"simplifyTolerance",value:function(t){return t*this._bufParams.getSimplifyFactor()}},{key:"getRingCurve",value:function(t,n,i){if(this._distance=i,t.length<=2)return this.getLineCurve(t,i);if(0===i)return e.copyCoordinates(t);var r=this.getSegGen(i);return this.computeRingBufferCurve(t,n,r),r.getCoordinates()}},{key:"computeOffsetCurve",value:function(t,e,n){var i=this.simplifyTolerance(this._distance);if(e){var r=yn.simplify(t,-i),o=r.length-1;n.initSideSegments(r[o],r[o-1],$.LEFT),n.addFirstSegment();for(var s=o-2;s>=0;s--)n.addNextSegment(r[s],!0)}else{var a=yn.simplify(t,i),l=a.length-1;n.initSideSegments(a[0],a[1],$.LEFT),n.addFirstSegment();for(var u=2;u<=l;u++)n.addNextSegment(a[u],!0)}n.addLastSegment()}},{key:"isLineOffsetEmpty",value:function(t){return 0===t||t<0&&!this._bufParams.isSingleSided()}},{key:"getSegGen",value:function(t){return new bn(this._precisionModel,this._bufParams,t)}}],[{key:"constructor_",value:function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e}},{key:"copyCoordinates",value:function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new V(t[n]);return e}}]),e}(),En=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"findStabbedSegments",value:function(){if(1===arguments.length){for(var t=arguments[0],e=new pt,n=this._subgraphs.iterator();n.hasNext();){var i=n.next(),r=i.getEnvelope();t.y<r.getMinY()||t.y>r.getMaxY()||this.findStabbedSegments(t,i.getDirectedEdges(),e)}return e}if(3===arguments.length)if(rt(arguments[2],nt)&&arguments[0]instanceof V&&arguments[1]instanceof De){for(var o=arguments[0],s=arguments[1],a=arguments[2],l=s.getEdge().getCoordinates(),u=0;u<l.length-1;u++)if(this._seg.p0=l[u],this._seg.p1=l[u+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<o.x||this._seg.isHorizontal()||o.y<this._seg.p0.y||o.y>this._seg.p1.y||ht.index(this._seg.p0,this._seg.p1,o)===ht.RIGHT)){var c=s.getDepth($.LEFT);this._seg.p0.equals(l[u])||(c=s.getDepth($.RIGHT));var h=new wn(this._seg,c);a.add(h)}}else if(rt(arguments[2],nt)&&arguments[0]instanceof V&&rt(arguments[1],nt))for(var f=arguments[0],d=arguments[2],g=arguments[1].iterator();g.hasNext();){var p=g.next();p.isForward()&&this.findStabbedSegments(f,p,d)}}},{key:"getDepth",value:function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:Xe.min(e)._leftDepth}}],[{key:"constructor_",value:function(){this._subgraphs=null,this._seg=new un;var t=arguments[0];this._subgraphs=t}}]),e}(),wn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"compareTo",value:function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==n||0!=(n=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?n:this._upwardSeg.compareTo(e._upwardSeg)}},{key:"compareX",value:function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)}},{key:"toString",value:function(){return this._upwardSeg.toString()}},{key:"interfaces_",get:function(){return[E]}}],[{key:"constructor_",value:function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new un(t),this._leftDepth=e}}]),e}();En.DepthSegment=wn;var kn=function(e){i(o,e);var r=h(o);function o(){var e;return t(this,o),e=r.call(this),o.constructor_.apply(u(e),arguments),e}return n(o,null,[{key:"constructor_",value:function(){_.constructor_.call(this,"Projective point not representable on the Cartesian plane.")}}]),o}(_),Sn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getY",value:function(){var t=this.y/this.w;if(N.isNaN(t)||N.isInfinite(t))throw new kn;return t}},{key:"getX",value:function(){var t=this.x/this.w;if(N.isNaN(t)||N.isInfinite(t))throw new kn;return t}},{key:"getCoordinate",value:function(){var t=new V;return t.x=this.getX(),t.y=this.getY(),t}}],[{key:"constructor_",value:function(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var t=arguments[0];this.x=t.x,this.y=t.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var n=arguments[0],i=arguments[1];this.x=n,this.y=i,this.w=1}else if(arguments[0]instanceof e&&arguments[1]instanceof e){var r=arguments[0],o=arguments[1];this.x=r.y*o.w-o.y*r.w,this.y=o.x*r.w-r.x*o.w,this.w=r.x*o.y-o.x*r.y}else if(arguments[0]instanceof V&&arguments[1]instanceof V){var s=arguments[0],a=arguments[1];this.x=s.y-a.y,this.y=a.x-s.x,this.w=s.x*a.y-a.x*s.y}}else if(3===arguments.length){var l=arguments[0],u=arguments[1],c=arguments[2];this.x=l,this.y=u,this.w=c}else if(4===arguments.length){var h=arguments[0],f=arguments[1],d=arguments[2],g=arguments[3],p=h.y-f.y,v=f.x-h.x,y=h.x*f.y-f.x*h.y,m=d.y-g.y,_=g.x-d.x,b=d.x*g.y-g.x*d.y;this.x=v*b-_*y,this.y=m*y-p*b,this.w=p*_-m*v}}}]),e}(),Cn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"area",value:function(){return e.area(this.p0,this.p1,this.p2)}},{key:"signedArea",value:function(){return e.signedArea(this.p0,this.p1,this.p2)}},{key:"interpolateZ",value:function(t){if(null===t)throw new b("Supplied point is null.");return e.interpolateZ(t,this.p0,this.p1,this.p2)}},{key:"longestSideLength",value:function(){return e.longestSideLength(this.p0,this.p1,this.p2)}},{key:"isAcute",value:function(){return e.isAcute(this.p0,this.p1,this.p2)}},{key:"circumcentre",value:function(){return e.circumcentre(this.p0,this.p1,this.p2)}},{key:"area3D",value:function(){return e.area3D(this.p0,this.p1,this.p2)}},{key:"centroid",value:function(){return e.centroid(this.p0,this.p1,this.p2)}},{key:"inCentre",value:function(){return e.inCentre(this.p0,this.p1,this.p2)}}],[{key:"constructor_",value:function(){this.p0=null,this.p1=null,this.p2=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.p0=t,this.p1=e,this.p2=n}},{key:"area",value:function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)}},{key:"signedArea",value:function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2}},{key:"det",value:function(t,e,n,i){return t*i-e*n}},{key:"interpolateZ",value:function(t,e,n,i){var r=e.x,o=e.y,s=n.x-r,a=i.x-r,l=n.y-o,u=i.y-o,c=s*u-a*l,h=t.x-r,f=t.y-o,d=(u*h-a*f)/c,g=(-l*h+s*f)/c;return e.getZ()+d*(n.getZ()-e.getZ())+g*(i.getZ()-e.getZ())}},{key:"longestSideLength",value:function(t,e,n){var i=t.distance(e),r=e.distance(n),o=n.distance(t),s=i;return r>s&&(s=r),o>s&&(s=o),s}},{key:"circumcentreDD",value:function(t,e,n){var i=lt.valueOf(t.x).subtract(n.x),r=lt.valueOf(t.y).subtract(n.y),o=lt.valueOf(e.x).subtract(n.x),s=lt.valueOf(e.y).subtract(n.y),a=lt.determinant(i,r,o,s).multiply(2),l=i.sqr().add(r.sqr()),u=o.sqr().add(s.sqr()),c=lt.determinant(r,l,s,u),h=lt.determinant(i,l,o,u),f=lt.valueOf(n.x).subtract(c.divide(a)).doubleValue(),d=lt.valueOf(n.y).add(h.divide(a)).doubleValue();return new V(f,d)}},{key:"isAcute",value:function(t,e,n){return!!_n.isAcute(t,e,n)&&!!_n.isAcute(e,n,t)&&!!_n.isAcute(n,t,e)}},{key:"circumcentre",value:function(t,n,i){var r=i.x,o=i.y,s=t.x-r,a=t.y-o,l=n.x-r,u=n.y-o,c=2*e.det(s,a,l,u),h=e.det(a,s*s+a*a,u,l*l+u*u),f=e.det(s,s*s+a*a,l,l*l+u*u);return new V(r-h/c,o+f/c)}},{key:"perpendicularBisector",value:function(t,e){var n=e.x-t.x,i=e.y-t.y,r=new Sn(t.x+n/2,t.y+i/2,1),o=new Sn(t.x-i+n/2,t.y+n+i/2,1);return new Sn(r,o)}},{key:"angleBisector",value:function(t,e,n){var i=e.distance(t),r=i/(i+e.distance(n)),o=n.x-t.x,s=n.y-t.y;return new V(t.x+r*o,t.y+r*s)}},{key:"area3D",value:function(t,e,n){var i=e.x-t.x,r=e.y-t.y,o=e.getZ()-t.getZ(),s=n.x-t.x,a=n.y-t.y,l=n.getZ()-t.getZ(),u=r*l-o*a,c=o*s-i*l,h=i*a-r*s,f=u*u+c*c+h*h;return Math.sqrt(f)/2}},{key:"centroid",value:function(t,e,n){var i=(t.x+e.x+n.x)/3,r=(t.y+e.y+n.y)/3;return new V(i,r)}},{key:"inCentre",value:function(t,e,n){var i=e.distance(n),r=t.distance(n),o=t.distance(e),s=i+r+o,a=(i*t.x+r*e.x+o*n.x)/s,l=(i*t.y+r*e.y+o*n.y)/s;return new V(a,l)}}]),e}(),On=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"addRingSide",value:function(t,e,n,i,r){if(0===e&&t.length<Bt.MINIMUM_VALID_SIZE)return null;var o=i,s=r;t.length>=Bt.MINIMUM_VALID_SIZE&&ht.isCCW(t)&&(o=r,s=i,n=$.opposite(n));var a=this._curveBuilder.getRingCurve(t,n,e);this.addCurve(a,o,s)}},{key:"addRingBothSides",value:function(t,e){this.addRingSide(t,e,$.LEFT,X.EXTERIOR,X.INTERIOR),this.addRingSide(t,e,$.RIGHT,X.INTERIOR,X.EXTERIOR)}},{key:"addPoint",value:function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,X.EXTERIOR,X.INTERIOR)}},{key:"addPolygon",value:function(t){var e=this._distance,n=$.LEFT;this._distance<0&&(e=-this._distance,n=$.RIGHT);var i=t.getExteriorRing(),r=Wt.removeRepeatedPoints(i.getCoordinates());if(this._distance<0&&this.isErodedCompletely(i,this._distance))return null;if(this._distance<=0&&r.length<3)return null;this.addRingSide(r,e,n,X.EXTERIOR,X.INTERIOR);for(var o=0;o<t.getNumInteriorRing();o++){var s=t.getInteriorRingN(o),a=Wt.removeRepeatedPoints(s.getCoordinates());this._distance>0&&this.isErodedCompletely(s,-this._distance)||this.addRingSide(a,e,$.opposite(n),X.INTERIOR,X.EXTERIOR)}}},{key:"isTriangleErodedCompletely",value:function(t,e){var n=new Cn(t[0],t[1],t[2]),i=n.inCentre();return xt.pointToSegment(i,n.p0,n.p1)<Math.abs(e)}},{key:"addLineString",value:function(t){if(this._curveBuilder.isLineOffsetEmpty(this._distance))return null;var e=Wt.removeRepeatedPoints(t.getCoordinates());if(Wt.isRing(e)&&!this._curveBuilder.getBufferParameters().isSingleSided())this.addRingBothSides(e,this._distance);else{var n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,X.EXTERIOR,X.INTERIOR)}}},{key:"addCurve",value:function(t,e,n){if(null===t||t.length<2)return null;var i=new ln(t,new Ee(0,X.BOUNDARY,e,n));this._curveList.add(i)}},{key:"getCurves",value:function(){return this.add(this._inputGeom),this._curveList}},{key:"add",value:function(t){if(t.isEmpty())return null;if(t instanceof jt)this.addPolygon(t);else if(t instanceof Rt)this.addLineString(t);else if(t instanceof Pt)this.addPoint(t);else if(t instanceof Gt)this.addCollection(t);else if(t instanceof re)this.addCollection(t);else if(t instanceof $t)this.addCollection(t);else{if(!(t instanceof zt))throw new Z(t.getGeometryType());this.addCollection(t)}}},{key:"isErodedCompletely",value:function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var i=t.getEnvelopeInternal(),r=Math.min(i.getHeight(),i.getWidth());return e<0&&2*Math.abs(e)>r}},{key:"addCollection",value:function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}}}],[{key:"constructor_",value:function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new pt;var t=arguments[0],e=arguments[1],n=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=n}}]),e}(),In=function(){function e(){t(this,e)}return n(e,[{key:"locate",value:function(t){}}]),e}(),Mn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"next",value:function(){if(this._atStart)return this._atStart=!1,e.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new H;var t=this._parent.getGeometryN(this._index++);return t instanceof zt?(this._subcollectionIterator=new e(t),this._subcollectionIterator.next()):t}},{key:"remove",value:function(){throw new Z(this.getClass().getName())}},{key:"hasNext",value:function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)}},{key:"interfaces_",get:function(){return[nn]}}],[{key:"constructor_",value:function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()}},{key:"isAtomic",value:function(t){return!(t instanceof zt)}}]),e}(),Rn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"locate",value:function(t){return e.locate(t,this._geom)}},{key:"interfaces_",get:function(){return[In]}}],[{key:"constructor_",value:function(){this._geom=null;var t=arguments[0];this._geom=t}},{key:"locatePointInPolygon",value:function(t,n){if(n.isEmpty())return X.EXTERIOR;var i=n.getExteriorRing(),r=e.locatePointInRing(t,i);if(r!==X.INTERIOR)return r;for(var o=0;o<n.getNumInteriorRing();o++){var s=n.getInteriorRingN(o),a=e.locatePointInRing(t,s);if(a===X.BOUNDARY)return X.BOUNDARY;if(a===X.INTERIOR)return X.EXTERIOR}return X.INTERIOR}},{key:"locatePointInRing",value:function(t,e){return e.getEnvelopeInternal().intersects(t)?be.locateInRing(t,e.getCoordinates()):X.EXTERIOR}},{key:"containsPointInPolygon",value:function(t,n){return X.EXTERIOR!==e.locatePointInPolygon(t,n)}},{key:"locateInGeometry",value:function(t,n){if(n instanceof jt)return e.locatePointInPolygon(t,n);if(n instanceof zt)for(var i=new Mn(n);i.hasNext();){var r=i.next();if(r!==n){var o=e.locateInGeometry(t,r);if(o!==X.EXTERIOR)return o}}return X.EXTERIOR}},{key:"isContained",value:function(t,n){return X.EXTERIOR!==e.locate(t,n)}},{key:"locate",value:function(t,n){return n.isEmpty()?X.EXTERIOR:n.getEnvelopeInternal().intersects(t)?e.locateInGeometry(t,n):X.EXTERIOR}}]),e}(),Tn=function(e){i(s,e);var o=h(s);function s(){var e;return t(this,s),e=o.call(this),s.constructor_.apply(u(e),arguments),e}return n(s,[{key:"linkResultDirectedEdges",value:function(){this.getResultAreaEdges();for(var t=null,e=null,n=this._SCANNING_FOR_INCOMING,i=0;i<this._resultAreaEdgeList.size();i++){var r=this._resultAreaEdgeList.get(i),o=r.getSym();if(r.getLabel().isArea())switch(null===t&&r.isInResult()&&(t=r),n){case this._SCANNING_FOR_INCOMING:if(!o.isInResult())continue;e=o,n=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!r.isInResult())continue;e.setNext(r),n=this._SCANNING_FOR_INCOMING}}if(n===this._LINKING_TO_OUTGOING){if(null===t)throw new dt("no outgoing dirEdge found",this.getCoordinate());F.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}}},{key:"insert",value:function(t){var e=t;this.insertEdgeEnd(e,e)}},{key:"getRightmostEdge",value:function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var i=t.get(e-1),r=n.getQuadrant(),o=i.getQuadrant();return Ae.isNorthern(r)&&Ae.isNorthern(o)?n:Ae.isNorthern(r)||Ae.isNorthern(o)?0!==n.getDy()?n:0!==i.getDy()?i:(F.shouldNeverReachHere("found two horizontal edges incident on node"),null):i}},{key:"print",value:function(t){_t.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}}},{key:"getResultAreaEdges",value:function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new pt;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList}},{key:"updateLabelling",value:function(t){for(var e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}}},{key:"linkAllDirectedEdges",value:function(){this.getEdges();for(var t=null,e=null,n=this._edgeList.size()-1;n>=0;n--){var i=this._edgeList.get(n),r=i.getSym();null===e&&(e=r),null!==t&&r.setNext(t),t=i}e.setNext(t)}},{key:"computeDepths",value:function(){if(1===arguments.length){var t=arguments[0],e=this.findIndex(t),n=t.getDepth($.LEFT),i=t.getDepth($.RIGHT),r=this.computeDepths(e+1,this._edgeList.size(),n);if(this.computeDepths(0,e,r)!==i)throw new dt("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){for(var o=arguments[1],s=arguments[2],a=arguments[0];a<o;a++){var l=this._edgeList.get(a);l.setEdgeDepths($.RIGHT,s),s=l.getDepth($.LEFT)}return s}}},{key:"mergeSymLabels",value:function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}}},{key:"linkMinimalDirectedEdges",value:function(t){for(var e=null,n=null,i=this._SCANNING_FOR_INCOMING,r=this._resultAreaEdgeList.size()-1;r>=0;r--){var o=this._resultAreaEdgeList.get(r),s=o.getSym();switch(null===e&&o.getEdgeRing()===t&&(e=o),i){case this._SCANNING_FOR_INCOMING:if(s.getEdgeRing()!==t)continue;n=s,i=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(o.getEdgeRing()!==t)continue;n.setNextMin(o),i=this._SCANNING_FOR_INCOMING}}i===this._LINKING_TO_OUTGOING&&(F.isTrue(null!==e,"found null for first outgoing dirEdge"),F.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),n.setNextMin(e))}},{key:"getOutgoingDegree",value:function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();)e.next().isInResult()&&t++;return t}if(1===arguments.length){for(var n=arguments[0],i=0,r=this.iterator();r.hasNext();)r.next().getEdgeRing()===n&&i++;return i}}},{key:"getLabel",value:function(){return this._label}},{key:"findCoveredLineEdges",value:function(){for(var t=X.NONE,e=this.iterator();e.hasNext();){var n=e.next(),i=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=X.INTERIOR;break}if(i.isInResult()){t=X.EXTERIOR;break}}}if(t===X.NONE)return null;for(var r=t,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getSym();s.isLineEdge()?s.getEdge().setCovered(r===X.INTERIOR):(s.isInResult()&&(r=X.EXTERIOR),a.isInResult()&&(r=X.INTERIOR))}}},{key:"computeLabelling",value:function(t){f(r(s.prototype),"computeLabelling",this).call(this,t),this._label=new Ee(X.NONE);for(var e=this.iterator();e.hasNext();)for(var n=e.next().getEdge().getLabel(),i=0;i<2;i++){var o=n.getLocation(i);o!==X.INTERIOR&&o!==X.BOUNDARY||this._label.setLocation(i,X.INTERIOR)}}}],[{key:"constructor_",value:function(){this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}}]),s}(function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getNextCW",value:function(t){this.getEdges();var e=this._edgeList.indexOf(t),n=e-1;return 0===e&&(n=this._edgeList.size()-1),this._edgeList.get(n)}},{key:"propagateSideLabels",value:function(t){for(var e=X.NONE,n=this.iterator();n.hasNext();){var i=n.next().getLabel();i.isArea(t)&&i.getLocation(t,$.LEFT)!==X.NONE&&(e=i.getLocation(t,$.LEFT))}if(e===X.NONE)return null;for(var r=e,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getLabel();if(a.getLocation(t,$.ON)===X.NONE&&a.setLocation(t,$.ON,r),a.isArea(t)){var l=a.getLocation(t,$.LEFT),u=a.getLocation(t,$.RIGHT);if(u!==X.NONE){if(u!==r)throw new dt("side location conflict",s.getCoordinate());l===X.NONE&&F.shouldNeverReachHere("found single null side (at "+s.getCoordinate()+")"),r=l}else F.isTrue(a.getLocation(t,$.LEFT)===X.NONE,"found single null side"),a.setLocation(t,$.RIGHT,r),a.setLocation(t,$.LEFT,r)}}}},{key:"getCoordinate",value:function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null}},{key:"print",value:function(t){_t.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)}},{key:"isAreaLabelsConsistent",value:function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)}},{key:"checkAreaLabelsConsistent",value:function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,i=e.get(n).getLabel().getLocation(t,$.LEFT);F.isTrue(i!==X.NONE,"Found unlabelled area edge");for(var r=i,o=this.iterator();o.hasNext();){var s=o.next().getLabel();F.isTrue(s.isArea(t),"Found non-area edge");var a=s.getLocation(t,$.LEFT),l=s.getLocation(t,$.RIGHT);if(a===l)return!1;if(l!==r)return!1;r=a}return!0}},{key:"findIndex",value:function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return-1}},{key:"iterator",value:function(){return this.getEdges().iterator()}},{key:"getEdges",value:function(){return null===this._edgeList&&(this._edgeList=new pt(this._edgeMap.values())),this._edgeList}},{key:"getLocation",value:function(t,e,n){return this._ptInAreaLocation[t]===X.NONE&&(this._ptInAreaLocation[t]=Rn.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]}},{key:"toString",value:function(){var t=new ot;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()}},{key:"computeEdgeEndLabels",value:function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)}},{key:"computeLabelling",value:function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var i=n.next().getLabel(),r=0;r<2;r++)i.isLine(r)&&i.getLocation(r)===X.BOUNDARY&&(e[r]=!0);for(var o=this.iterator();o.hasNext();)for(var s=o.next(),a=s.getLabel(),l=0;l<2;l++)if(a.isAnyNull(l)){var u=X.NONE;if(e[l])u=X.EXTERIOR;else{var c=s.getCoordinate();u=this.getLocation(l,c,t)}a.setAllLocationsIfNull(l,u)}}},{key:"getDegree",value:function(){return this._edgeMap.size()}},{key:"insertEdgeEnd",value:function(t,e){this._edgeMap.put(t,e),this._edgeList=null}}],[{key:"constructor_",value:function(){this._edgeMap=new Le,this._edgeList=null,this._ptInAreaLocation=[X.NONE,X.NONE]}}]),e}()),Pn=function(e){i(o,e);var r=h(o);function o(){return t(this,o),r.call(this)}return n(o,[{key:"createNode",value:function(t){return new Oe(t,new Tn)}}]),o}(Fe),Ln=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"compareTo",value:function(t){var n=t;return e.compareOriented(this._pts,this._orientation,n._pts,n._orientation)}},{key:"interfaces_",get:function(){return[E]}}],[{key:"constructor_",value:function(){this._pts=null,this._orientation=null;var t=arguments[0];this._pts=t,this._orientation=e.orientation(t)}},{key:"orientation",value:function(t){return 1===Wt.increasingDirection(t)}},{key:"compareOriented",value:function(t,e,n,i){for(var r=e?1:-1,o=i?1:-1,s=e?t.length:-1,a=i?n.length:-1,l=e?0:t.length-1,u=i?0:n.length-1;;){var c=t[l].compareTo(n[u]);if(0!==c)return c;var h=(l+=r)===s,f=(u+=o)===a;if(h&&!f)return-1;if(!h&&f)return 1;if(h&&f)return 0}}}]),e}(),Nn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"print",value:function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e);e>0&&t.print(","),t.print("(");for(var i=n.getCoordinates(),r=0;r<i.length;r++)r>0&&t.print(","),t.print(i[r].x+" "+i[r].y);t.println(")")}t.print(")  ")}},{key:"addAll",value:function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())}},{key:"findEdgeIndex",value:function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1}},{key:"iterator",value:function(){return this._edges.iterator()}},{key:"getEdges",value:function(){return this._edges}},{key:"get",value:function(t){return this._edges.get(t)}},{key:"findEqualEdge",value:function(t){var e=new Ln(t.getCoordinates());return this._ocaMap.get(e)}},{key:"add",value:function(t){this._edges.add(t);var e=new Ln(t.getCoordinates());this._ocaMap.put(e,t)}}],[{key:"constructor_",value:function(){this._edges=new pt,this._ocaMap=new Le}}]),e}(),An=function(){function e(){t(this,e)}return n(e,[{key:"processIntersections",value:function(t,e,n,i){}},{key:"isDone",value:function(){}}]),e}(),jn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"isTrivialIntersection",value:function(t,n,i,r){if(t===i&&1===this._li.getIntersectionNum()){if(e.isAdjacentSegments(n,r))return!0;if(t.isClosed()){var o=t.size()-1;if(0===n&&r===o||0===r&&n===o)return!0}}return!1}},{key:"getProperIntersectionPoint",value:function(){return this._properIntersectionPoint}},{key:"hasProperInteriorIntersection",value:function(){return this._hasProperInterior}},{key:"getLineIntersector",value:function(){return this._li}},{key:"hasProperIntersection",value:function(){return this._hasProper}},{key:"processIntersections",value:function(t,e,n,i){if(t===n&&e===i)return null;this.numTests++;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[i],a=n.getCoordinates()[i+1];this._li.computeIntersection(r,o,s,a),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,i)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,i,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))}},{key:"hasIntersection",value:function(){return this._hasIntersection}},{key:"isDone",value:function(){return!1}},{key:"hasInteriorIntersection",value:function(){return this._hasInterior}},{key:"interfaces_",get:function(){return[An]}}],[{key:"constructor_",value:function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t}},{key:"isAdjacentSegments",value:function(t,e){return 1===Math.abs(t-e)}}]),e}(),Dn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getSegmentIndex",value:function(){return this.segmentIndex}},{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)}},{key:"compareTo",value:function(t){var e=t;return this.compare(e.segmentIndex,e.dist)}},{key:"isEndPoint",value:function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t}},{key:"toString",value:function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist}},{key:"getDistance",value:function(){return this.dist}},{key:"compare",value:function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0}},{key:"interfaces_",get:function(){return[E]}}],[{key:"constructor_",value:function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new V(t),this.segmentIndex=e,this.dist=n}}]),e}(),Fn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"print",value:function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)}},{key:"iterator",value:function(){return this._nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next(),r=this.createSplitEdge(n,i);t.add(r),n=i}}},{key:"addEndpoints",value:function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)}},{key:"createSplitEdge",value:function(t,e){var n=e.segmentIndex-t.segmentIndex+2,i=this.edge.pts[e.segmentIndex],r=e.dist>0||!e.coord.equals2D(i);r||n--;var o=new Array(n).fill(null),s=0;o[s++]=new V(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this.edge.pts[a];return r&&(o[s]=e.coord),new qn(o,new Ee(this.edge._label))}},{key:"add",value:function(t,e,n){var i=new Dn(t,e,n),r=this._nodeMap.get(i);return null!==r?r:(this._nodeMap.put(i,i),i)}},{key:"isIntersection",value:function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1}}],[{key:"constructor_",value:function(){this._nodeMap=new Le,this.edge=null;var t=arguments[0];this.edge=t}}]),e}(),zn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"isIntersects",value:function(){return!this.isDisjoint()}},{key:"isCovers",value:function(){return(e.isTrue(this._matrix[X.INTERIOR][X.INTERIOR])||e.isTrue(this._matrix[X.INTERIOR][X.BOUNDARY])||e.isTrue(this._matrix[X.BOUNDARY][X.INTERIOR])||e.isTrue(this._matrix[X.BOUNDARY][X.BOUNDARY]))&&this._matrix[X.EXTERIOR][X.INTERIOR]===Ot.FALSE&&this._matrix[X.EXTERIOR][X.BOUNDARY]===Ot.FALSE}},{key:"isCoveredBy",value:function(){return(e.isTrue(this._matrix[X.INTERIOR][X.INTERIOR])||e.isTrue(this._matrix[X.INTERIOR][X.BOUNDARY])||e.isTrue(this._matrix[X.BOUNDARY][X.INTERIOR])||e.isTrue(this._matrix[X.BOUNDARY][X.BOUNDARY]))&&this._matrix[X.INTERIOR][X.EXTERIOR]===Ot.FALSE&&this._matrix[X.BOUNDARY][X.EXTERIOR]===Ot.FALSE}},{key:"set",value:function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<t.length;e++){var n=Math.trunc(e/3),i=e%3;this._matrix[n][i]=Ot.toDimensionValue(t.charAt(e))}else if(3===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2];this._matrix[r][o]=s}}},{key:"isContains",value:function(){return e.isTrue(this._matrix[X.INTERIOR][X.INTERIOR])&&this._matrix[X.EXTERIOR][X.INTERIOR]===Ot.FALSE&&this._matrix[X.EXTERIOR][X.BOUNDARY]===Ot.FALSE}},{key:"setAtLeast",value:function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<t.length;e++){var n=Math.trunc(e/3),i=e%3;this.setAtLeast(n,i,Ot.toDimensionValue(t.charAt(e)))}else if(3===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2];this._matrix[r][o]<s&&(this._matrix[r][o]=s)}}},{key:"setAtLeastIfValid",value:function(t,e,n){t>=0&&e>=0&&this.setAtLeast(t,e,n)}},{key:"isWithin",value:function(){return e.isTrue(this._matrix[X.INTERIOR][X.INTERIOR])&&this._matrix[X.INTERIOR][X.EXTERIOR]===Ot.FALSE&&this._matrix[X.BOUNDARY][X.EXTERIOR]===Ot.FALSE}},{key:"isTouches",value:function(t,n){return t>n?this.isTouches(n,t):(t===Ot.A&&n===Ot.A||t===Ot.L&&n===Ot.L||t===Ot.L&&n===Ot.A||t===Ot.P&&n===Ot.A||t===Ot.P&&n===Ot.L)&&this._matrix[X.INTERIOR][X.INTERIOR]===Ot.FALSE&&(e.isTrue(this._matrix[X.INTERIOR][X.BOUNDARY])||e.isTrue(this._matrix[X.BOUNDARY][X.INTERIOR])||e.isTrue(this._matrix[X.BOUNDARY][X.BOUNDARY]))}},{key:"isOverlaps",value:function(t,n){return t===Ot.P&&n===Ot.P||t===Ot.A&&n===Ot.A?e.isTrue(this._matrix[X.INTERIOR][X.INTERIOR])&&e.isTrue(this._matrix[X.INTERIOR][X.EXTERIOR])&&e.isTrue(this._matrix[X.EXTERIOR][X.INTERIOR]):t===Ot.L&&n===Ot.L&&1===this._matrix[X.INTERIOR][X.INTERIOR]&&e.isTrue(this._matrix[X.INTERIOR][X.EXTERIOR])&&e.isTrue(this._matrix[X.EXTERIOR][X.INTERIOR])}},{key:"isEquals",value:function(t,n){return t===n&&e.isTrue(this._matrix[X.INTERIOR][X.INTERIOR])&&this._matrix[X.INTERIOR][X.EXTERIOR]===Ot.FALSE&&this._matrix[X.BOUNDARY][X.EXTERIOR]===Ot.FALSE&&this._matrix[X.EXTERIOR][X.INTERIOR]===Ot.FALSE&&this._matrix[X.EXTERIOR][X.BOUNDARY]===Ot.FALSE}},{key:"toString",value:function(){for(var t=new Kt("123456789"),e=0;e<3;e++)for(var n=0;n<3;n++)t.setCharAt(3*e+n,Ot.toDimensionSymbol(this._matrix[e][n]));return t.toString()}},{key:"setAll",value:function(t){for(var e=0;e<3;e++)for(var n=0;n<3;n++)this._matrix[e][n]=t}},{key:"get",value:function(t,e){return this._matrix[t][e]}},{key:"transpose",value:function(){var t=this._matrix[1][0];return this._matrix[1][0]=this._matrix[0][1],this._matrix[0][1]=t,t=this._matrix[2][0],this._matrix[2][0]=this._matrix[0][2],this._matrix[0][2]=t,t=this._matrix[2][1],this._matrix[2][1]=this._matrix[1][2],this._matrix[1][2]=t,this}},{key:"matches",value:function(t){if(9!==t.length)throw new b("Should be length 9: "+t);for(var n=0;n<3;n++)for(var i=0;i<3;i++)if(!e.matches(this._matrix[n][i],t.charAt(3*n+i)))return!1;return!0}},{key:"add",value:function(t){for(var e=0;e<3;e++)for(var n=0;n<3;n++)this.setAtLeast(e,n,t.get(e,n))}},{key:"isDisjoint",value:function(){return this._matrix[X.INTERIOR][X.INTERIOR]===Ot.FALSE&&this._matrix[X.INTERIOR][X.BOUNDARY]===Ot.FALSE&&this._matrix[X.BOUNDARY][X.INTERIOR]===Ot.FALSE&&this._matrix[X.BOUNDARY][X.BOUNDARY]===Ot.FALSE}},{key:"isCrosses",value:function(t,n){return t===Ot.P&&n===Ot.L||t===Ot.P&&n===Ot.A||t===Ot.L&&n===Ot.A?e.isTrue(this._matrix[X.INTERIOR][X.INTERIOR])&&e.isTrue(this._matrix[X.INTERIOR][X.EXTERIOR]):t===Ot.L&&n===Ot.P||t===Ot.A&&n===Ot.P||t===Ot.A&&n===Ot.L?e.isTrue(this._matrix[X.INTERIOR][X.INTERIOR])&&e.isTrue(this._matrix[X.EXTERIOR][X.INTERIOR]):t===Ot.L&&n===Ot.L&&0===this._matrix[X.INTERIOR][X.INTERIOR]}},{key:"interfaces_",get:function(){return[w]}}],[{key:"constructor_",value:function(){if(this._matrix=null,0===arguments.length)this._matrix=Array(3).fill().map((function(){return Array(3)})),this.setAll(Ot.FALSE);else if(1===arguments.length)if("string"==typeof arguments[0]){var t=arguments[0];e.constructor_.call(this),this.set(t)}else if(arguments[0]instanceof e){var n=arguments[0];e.constructor_.call(this),this._matrix[X.INTERIOR][X.INTERIOR]=n._matrix[X.INTERIOR][X.INTERIOR],this._matrix[X.INTERIOR][X.BOUNDARY]=n._matrix[X.INTERIOR][X.BOUNDARY],this._matrix[X.INTERIOR][X.EXTERIOR]=n._matrix[X.INTERIOR][X.EXTERIOR],this._matrix[X.BOUNDARY][X.INTERIOR]=n._matrix[X.BOUNDARY][X.INTERIOR],this._matrix[X.BOUNDARY][X.BOUNDARY]=n._matrix[X.BOUNDARY][X.BOUNDARY],this._matrix[X.BOUNDARY][X.EXTERIOR]=n._matrix[X.BOUNDARY][X.EXTERIOR],this._matrix[X.EXTERIOR][X.INTERIOR]=n._matrix[X.EXTERIOR][X.INTERIOR],this._matrix[X.EXTERIOR][X.BOUNDARY]=n._matrix[X.EXTERIOR][X.BOUNDARY],this._matrix[X.EXTERIOR][X.EXTERIOR]=n._matrix[X.EXTERIOR][X.EXTERIOR]}}},{key:"matches",value:function(){if(Number.isInteger(arguments[0])&&"string"==typeof arguments[1]){var t=arguments[0],n=arguments[1];return n===Ot.SYM_DONTCARE||n===Ot.SYM_TRUE&&(t>=0||t===Ot.TRUE)||n===Ot.SYM_FALSE&&t===Ot.FALSE||n===Ot.SYM_P&&t===Ot.P||n===Ot.SYM_L&&t===Ot.L||n===Ot.SYM_A&&t===Ot.A}if("string"==typeof arguments[0]&&"string"==typeof arguments[1]){var i=arguments[1];return new e(arguments[0]).matches(i)}}},{key:"isTrue",value:function(t){return t>=0||t===Ot.TRUE}}]),e}(),Gn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"size",value:function(){return this._size}},{key:"addAll",value:function(t){return null===t||0===t.length?null:(this.ensureCapacity(this._size+t.length),_t.arraycopy(t,0,this._data,this._size,t.length),void(this._size+=t.length))}},{key:"ensureCapacity",value:function(t){if(t<=this._data.length)return null;var e=Math.max(t,2*this._data.length);this._data=Nt.copyOf(this._data,e)}},{key:"toArray",value:function(){var t=new Array(this._size).fill(null);return _t.arraycopy(this._data,0,t,0,this._size),t}},{key:"add",value:function(t){this.ensureCapacity(this._size+1),this._data[this._size]=t,++this._size}}],[{key:"constructor_",value:function(){if(this._data=null,this._size=0,0===arguments.length)e.constructor_.call(this,10);else if(1===arguments.length){var t=arguments[0];this._data=new Array(t).fill(null)}}}]),e}(),Bn=function(){function e(){t(this,e)}return n(e,[{key:"getChainStartIndices",value:function(t){var e=0,n=new Gn(Math.trunc(t.length/2));n.add(e);do{var i=this.findChainEnd(t,e);n.add(i),e=i}while(e<t.length-1);return n.toArray()}},{key:"findChainEnd",value:function(t,e){for(var n=Ae.quadrant(t[e],t[e+1]),i=e+1;i<t.length&&Ae.quadrant(t[i-1],t[i])===n;)i++;return i-1}},{key:"OLDgetChainStartIndices",value:function(t){var n=0,i=new pt;i.add(n);do{var r=this.findChainEnd(t,n);i.add(r),n=r}while(n<t.length-1);return e.toIntArray(i)}}],[{key:"toIntArray",value:function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e}}]),e}(),Vn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getCoordinates",value:function(){return this.pts}},{key:"getMaxX",value:function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n}},{key:"getMinX",value:function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n}},{key:"computeIntersectsForChain",value:function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],i)}else if(6===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],l=arguments[4],u=arguments[5];if(o-r==1&&l-a==1)return u.addIntersections(this.e,r,s.e,a),null;if(!this.overlaps(r,o,s,a,l))return null;var c=Math.trunc((r+o)/2),h=Math.trunc((a+l)/2);r<c&&(a<h&&this.computeIntersectsForChain(r,c,s,a,h,u),h<l&&this.computeIntersectsForChain(r,c,s,h,l,u)),c<o&&(a<h&&this.computeIntersectsForChain(c,o,s,a,h,u),h<l&&this.computeIntersectsForChain(c,o,s,h,l,u))}}},{key:"overlaps",value:function(t,e,n,i,r){return q.intersects(this.pts[t],this.pts[e],n.pts[i],n.pts[r])}},{key:"getStartIndexes",value:function(){return this.startIndex}},{key:"computeIntersects",value:function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var i=0;i<t.startIndex.length-1;i++)this.computeIntersectsForChain(n,t,i,e)}}],[{key:"constructor_",value:function(){this.e=null,this.pts=null,this.startIndex=null;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new Bn;this.startIndex=e.getChainStartIndices(this.pts)}}]),e}(),Yn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getDepth",value:function(t,e){return this._depth[t][e]}},{key:"setDepth",value:function(t,e,n){this._depth[t][e]=n}},{key:"isNull",value:function(){if(0===arguments.length){for(var t=0;t<2;t++)for(var n=0;n<3;n++)if(this._depth[t][n]!==e.NULL_VALUE)return!1;return!0}if(1===arguments.length){var i=arguments[0];return this._depth[i][1]===e.NULL_VALUE}if(2===arguments.length){var r=arguments[0],o=arguments[1];return this._depth[r][o]===e.NULL_VALUE}}},{key:"normalize",value:function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var n=1;n<3;n++){var i=0;this._depth[t][n]>e&&(i=1),this._depth[t][n]=i}}}},{key:"getDelta",value:function(t){return this._depth[t][$.RIGHT]-this._depth[t][$.LEFT]}},{key:"getLocation",value:function(t,e){return this._depth[t][e]<=0?X.EXTERIOR:X.INTERIOR}},{key:"toString",value:function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]}},{key:"add",value:function(){if(1===arguments.length)for(var t=arguments[0],n=0;n<2;n++)for(var i=1;i<3;i++){var r=t.getLocation(n,i);r!==X.EXTERIOR&&r!==X.INTERIOR||(this.isNull(n,i)?this._depth[n][i]=e.depthAtLocation(r):this._depth[n][i]+=e.depthAtLocation(r))}else if(3===arguments.length){var o=arguments[0],s=arguments[1];arguments[2]===X.INTERIOR&&this._depth[o][s]++}}}],[{key:"constructor_",value:function(){this._depth=Array(2).fill().map((function(){return Array(3)}));for(var t=0;t<2;t++)for(var n=0;n<3;n++)this._depth[t][n]=e.NULL_VALUE}},{key:"depthAtLocation",value:function(t){return t===X.EXTERIOR?0:t===X.INTERIOR?1:e.NULL_VALUE}}]),e}();Yn.NULL_VALUE=-1;var qn=function(e){i(s,e);var o=h(s);function s(){var e;return t(this,s),e=o.call(this),s.constructor_.apply(u(e),arguments),e}return n(s,[{key:"getDepth",value:function(){return this._depth}},{key:"getCollapsedEdge",value:function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new s(t,Ee.toLineLabel(this._label))}},{key:"isIsolated",value:function(){return this._isIsolated}},{key:"getCoordinates",value:function(){return this.pts}},{key:"setIsolated",value:function(t){this._isIsolated=t}},{key:"setName",value:function(t){this._name=t}},{key:"equals",value:function(t){if(!(t instanceof s))return!1;var e=t;if(this.pts.length!==e.pts.length)return!1;for(var n=!0,i=!0,r=this.pts.length,o=0;o<this.pts.length;o++)if(this.pts[o].equals2D(e.pts[o])||(n=!1),this.pts[o].equals2D(e.pts[--r])||(i=!1),!n&&!i)return!1;return!0}},{key:"getCoordinate",value:function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}}},{key:"print",value:function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)}},{key:"computeIM",value:function(t){s.updateIM(this._label,t)}},{key:"isCollapsed",value:function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])}},{key:"isClosed",value:function(){return this.pts[0].equals(this.pts[this.pts.length-1])}},{key:"getMaximumSegmentIndex",value:function(){return this.pts.length-1}},{key:"getDepthDelta",value:function(){return this._depthDelta}},{key:"getNumPoints",value:function(){return this.pts.length}},{key:"printReverse",value:function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")}},{key:"getMonotoneChainEdge",value:function(){return null===this._mce&&(this._mce=new Vn(this)),this._mce}},{key:"getEnvelope",value:function(){if(null===this._env){this._env=new q;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env}},{key:"addIntersection",value:function(t,e,n,i){var r=new V(t.getIntersection(i)),o=e,s=t.getEdgeDistance(n,i),a=o+1;if(a<this.pts.length){var l=this.pts[a];r.equals2D(l)&&(o=a,s=0)}this.eiList.add(r,o,s)}},{key:"toString",value:function(){var t=new Kt;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()}},{key:"isPointwiseEqual",value:function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0}},{key:"setDepthDelta",value:function(t){this._depthDelta=t}},{key:"getEdgeIntersectionList",value:function(){return this.eiList}},{key:"addIntersections",value:function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++)this.addIntersection(t,e,n,i)}}],[{key:"constructor_",value:function(){if(this.pts=null,this._env=null,this.eiList=new Fn(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new Yn,this._depthDelta=0,1===arguments.length){var t=arguments[0];s.constructor_.call(this,t,null)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.pts=e,this._label=n}}},{key:"updateIM",value:function(){if(!(2===arguments.length&&arguments[1]instanceof zn&&arguments[0]instanceof Ee))return f(r(s),"updateIM",this).apply(this,arguments);var t=arguments[0],e=arguments[1];e.setAtLeastIfValid(t.getLocation(0,$.ON),t.getLocation(1,$.ON),1),t.isArea()&&(e.setAtLeastIfValid(t.getLocation(0,$.LEFT),t.getLocation(1,$.LEFT),2),e.setAtLeastIfValid(t.getLocation(0,$.RIGHT),t.getLocation(1,$.RIGHT),2))}}]),s}(Ce),Un=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"setWorkingPrecisionModel",value:function(t){this._workingPrecisionModel=t}},{key:"insertUniqueEdge",value:function(t){var n=this._edgeList.findEqualEdge(t);if(null!==n){var i=n.getLabel(),r=t.getLabel();n.isPointwiseEqual(t)||(r=new Ee(t.getLabel())).flip(),i.merge(r);var o=e.depthDelta(r),s=n.getDepthDelta()+o;n.setDepthDelta(s)}else this._edgeList.add(t),t.setDepthDelta(e.depthDelta(t.getLabel()))}},{key:"buildSubgraphs",value:function(t,e){for(var n=new pt,i=t.iterator();i.hasNext();){var r=i.next(),o=r.getRightmostCoordinate(),s=new En(n).getDepth(o);r.computeDepth(s),r.findResultEdges(),n.add(r),e.add(r.getDirectedEdges(),r.getNodes())}}},{key:"createSubgraphs",value:function(t){for(var e=new pt,n=t.getNodes().iterator();n.hasNext();){var i=n.next();if(!i.isVisited()){var r=new yt;r.create(i),e.add(r)}}return Xe.sort(e,Xe.reverseOrder()),e}},{key:"createEmptyResultGeometry",value:function(){return this._geomFact.createPolygon()}},{key:"getNoder",value:function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new pn,n=new me;return n.setPrecisionModel(t),e.setSegmentIntersector(new jn(n)),e}},{key:"buffer",value:function(t,e){var n=this._workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var i=new xn(n,this._bufParams),r=new On(t,e,i).getCurves();if(r.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(r,n),this._graph=new ze(new Pn),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),s=new Ge(this._geomFact);this.buildSubgraphs(o,s);var a=s.getPolygons();return a.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(a)}},{key:"computeNodedEdges",value:function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var i=n.getNodedSubstrings().iterator();i.hasNext();){var r=i.next(),o=r.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var s=r.getData(),a=new qn(r.getCoordinates(),new Ee(s));this.insertUniqueEdge(a)}}}},{key:"setNoder",value:function(t){this._workingNoder=t}}],[{key:"constructor_",value:function(){this._bufParams=null,this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Nn;var t=arguments[0];this._bufParams=t}},{key:"depthDelta",value:function(t){var e=t.getLocation(0,$.LEFT),n=t.getLocation(0,$.RIGHT);return e===X.INTERIOR&&n===X.EXTERIOR?1:e===X.EXTERIOR&&n===X.INTERIOR?-1:0}},{key:"convertSegStrings",value:function(t){for(var e=new oe,n=new pt;t.hasNext();){var i=t.next(),r=e.createLineString(i.getCoordinates());n.add(r)}return e.buildGeometry(n)}}]),e}(),Xn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"rescale",value:function(){if(rt(arguments[0],W))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){for(var n=arguments[0],i=0;i<n.length;i++)n[i].x=n[i].x/this._scaleFactor+this._offsetX,n[i].y=n[i].y/this._scaleFactor+this._offsetY;2===n.length&&n[0].equals2D(n[1])&&_t.out.println(n)}}},{key:"scale",value:function(){if(rt(arguments[0],W)){for(var t=arguments[0],e=new pt(t.size()),n=t.iterator();n.hasNext();){var i=n.next();e.add(new ln(this.scale(i.getCoordinates()),i.getData()))}return e}if(arguments[0]instanceof Array){for(var r=arguments[0],o=new Array(r.length).fill(null),s=0;s<r.length;s++)o[s]=new V(Math.round((r[s].x-this._offsetX)*this._scaleFactor),Math.round((r[s].y-this._offsetY)*this._scaleFactor),r[s].getZ());return Wt.removeRepeatedPoints(o)}}},{key:"isIntegerPrecision",value:function(){return 1===this._scaleFactor}},{key:"getNodedSubstrings",value:function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t}},{key:"computeNodes",value:function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)}},{key:"interfaces_",get:function(){return[dn]}}],[{key:"constructor_",value:function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[0],n=arguments[1];e.constructor_.call(this,t,n,0,0)}else if(4===arguments.length){var i=arguments[0],r=arguments[1];this._noder=i,this._scaleFactor=r,this._isScaled=!this.isIntegerPrecision()}}}]),e}(),Wn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"checkEndPtVertexIntersections",value:function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next().getCoordinates();this.checkEndPtVertexIntersections(e[0],this._segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this._segStrings)}else if(2===arguments.length)for(var n=arguments[0],i=arguments[1].iterator();i.hasNext();)for(var r=i.next().getCoordinates(),o=1;o<r.length-1;o++)if(r[o].equals(n))throw new j("found endpt/interior pt intersection at index "+o+" :pt "+n)}},{key:"checkInteriorIntersections",value:function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),n=this._segStrings.iterator();n.hasNext();){var i=n.next();this.checkInteriorIntersections(e,i)}else if(2===arguments.length)for(var r=arguments[0],o=arguments[1],s=r.getCoordinates(),a=o.getCoordinates(),l=0;l<s.length-1;l++)for(var u=0;u<a.length-1;u++)this.checkInteriorIntersections(r,l,o,u);else if(4===arguments.length){var c=arguments[0],h=arguments[1],f=arguments[2],d=arguments[3];if(c===f&&h===d)return null;var g=c.getCoordinates()[h],p=c.getCoordinates()[h+1],v=f.getCoordinates()[d],y=f.getCoordinates()[d+1];if(this._li.computeIntersection(g,p,v,y),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,g,p)||this.hasInteriorIntersection(this._li,v,y)))throw new j("found non-noded intersection at "+g+"-"+p+" and "+v+"-"+y)}}},{key:"checkValid",value:function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()}},{key:"checkCollapses",value:function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(1===arguments.length)for(var n=arguments[0].getCoordinates(),i=0;i<n.length-2;i++)this.checkCollapse(n[i],n[i+1],n[i+2])}},{key:"hasInteriorIntersection",value:function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++){var r=t.getIntersection(i);if(!r.equals(e)&&!r.equals(n))return!0}return!1}},{key:"checkCollapse",value:function(t,n,i){if(t.equals(i))throw new j("found non-noded collapse at "+e.fact.createLineString([t,n,i]))}}],[{key:"constructor_",value:function(){this._li=new me,this._segStrings=null;var t=arguments[0];this._segStrings=t}}]),e}();Wn.fact=new oe;var Hn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"intersectsScaled",value:function(t,e){var n=Math.min(t.x,e.x),i=Math.max(t.x,e.x),r=Math.min(t.y,e.y),o=Math.max(t.y,e.y),s=this._maxx<n||this._minx>i||this._maxy<r||this._miny>o;if(s)return!1;var a=this.intersectsToleranceSquare(t,e);return F.isTrue(!(s&&a),"Found bad envelope test"),a}},{key:"initCorners",value:function(t){var e=.5;this._minx=t.x-e,this._maxx=t.x+e,this._miny=t.y-e,this._maxy=t.y+e,this._corner[0]=new V(this._maxx,this._maxy),this._corner[1]=new V(this._minx,this._maxy),this._corner[2]=new V(this._minx,this._miny),this._corner[3]=new V(this._maxx,this._miny)}},{key:"intersects",value:function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))}},{key:"scale",value:function(t){return Math.round(t*this._scaleFactor)}},{key:"getCoordinate",value:function(){return this._originalPt}},{key:"copyScaled",value:function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)}},{key:"getSafeEnvelope",value:function(){if(null===this._safeEnv){var t=e.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new q(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv}},{key:"intersectsPixelClosure",value:function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.hasIntersection()))))}},{key:"intersectsToleranceSquare",value:function(t,e){var n=!1,i=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(i=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.isProper()||n&&i||t.equals(this._pt)||e.equals(this._pt)))))}},{key:"addSnappedNode",value:function(t,e){var n=t.getCoordinate(e),i=t.getCoordinate(e+1);return!!this.intersects(n,i)&&(t.addIntersection(this.getCoordinate(),e),!0)}}],[{key:"constructor_",value:function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new b("Scale factor must be non-zero");1!==e&&(this._pt=new V(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new V,this._p1Scaled=new V),this.initCorners(this._pt)}}]),e}();Hn.SAFE_ENV_EXPANSION_FACTOR=.75;var Zn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"select",value:function(){if(1===arguments.length);else if(2===arguments.length){var t=arguments[1];arguments[0].getLineSegment(t,this.selectedSegment),this.select(this.selectedSegment)}}}],[{key:"constructor_",value:function(){this.selectedSegment=new un}}]),e}(),Kn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"snap",value:function(){if(1===arguments.length){var e=arguments[0];return this.snap(e,null,-1)}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2],s=i.getSafeEnvelope(),a=new Jn(i,r,o);return this._index.query(s,new(function(){function e(){t(this,e)}return n(e,[{key:"interfaces_",get:function(){return[Ze]}},{key:"visitItem",value:function(t){t.select(s,a)}}]),e}())),a.isNodeAdded()}}}],[{key:"constructor_",value:function(){this._index=null;var t=arguments[0];this._index=t}}]),e}(),Jn=function(e){i(s,e);var o=h(s);function s(){var e;return t(this,s),e=o.call(this),s.constructor_.apply(u(e),arguments),e}return n(s,[{key:"isNodeAdded",value:function(){return this._isNodeAdded}},{key:"select",value:function(){if(!(2===arguments.length&&Number.isInteger(arguments[1])&&arguments[0]instanceof hn))return f(r(s.prototype),"select",this).apply(this,arguments);var t=arguments[1],e=arguments[0].getContext();if(this._parentEdge===e&&(t===this._hotPixelVertexIndex||t+1===this._hotPixelVertexIndex))return null;this._isNodeAdded|=this._hotPixel.addSnappedNode(e,t)}}],[{key:"constructor_",value:function(){this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._hotPixel=t,this._parentEdge=e,this._hotPixelVertexIndex=n}}]),s}(Zn);Kn.HotPixelSnapAction=Jn;var Qn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"processIntersections",value:function(t,e,n,i){if(t===n&&e===i)return null;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[i],a=n.getCoordinates()[i+1];if(this._li.computeIntersection(r,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var l=0;l<this._li.getIntersectionNum();l++)this._interiorIntersections.add(this._li.getIntersection(l));t.addIntersections(this._li,e,0),n.addIntersections(this._li,i,1)}}},{key:"isDone",value:function(){return!1}},{key:"getInteriorIntersections",value:function(){return this._interiorIntersections}},{key:"interfaces_",get:function(){return[An]}}],[{key:"constructor_",value:function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new pt}}]),e}(),$n=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"checkCorrectness",value:function(t){var e=ln.getNodedSubstrings(t),n=new Wn(e);try{n.checkValid()}catch(t){if(!(t instanceof _))throw t;t.printStackTrace()}}},{key:"getNodedSubstrings",value:function(){return ln.getNodedSubstrings(this._nodedSegStrings)}},{key:"snapRound",value:function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)}},{key:"findInteriorIntersections",value:function(t,e){var n=new Qn(e);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()}},{key:"computeVertexSnaps",value:function(){if(rt(arguments[0],W))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.computeVertexSnaps(e)}else if(arguments[0]instanceof ln)for(var n=arguments[0],i=n.getCoordinates(),r=0;r<i.length;r++){var o=new Hn(i[r],this._scaleFactor,this._li);this._pointSnapper.snap(o,n,r)&&n.addIntersection(i[r],r)}}},{key:"computeNodes",value:function(t){this._nodedSegStrings=t,this._noder=new pn,this._pointSnapper=new Kn(this._noder.getIndex()),this.snapRound(t,this._li)}},{key:"computeIntersectionSnaps",value:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),i=new Hn(n,this._scaleFactor,this._li);this._pointSnapper.snap(i)}}},{key:"interfaces_",get:function(){return[dn]}}],[{key:"constructor_",value:function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new me,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()}}]),e}(),ti=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"bufferFixedPrecision",value:function(t){var e=new Xn(new $n(new ne(1)),t.getScale()),n=new Un(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)}},{key:"bufferReducedPrecision",value:function(){if(0===arguments.length){for(var t=e.MAX_PRECISION_DIGITS;t>=0;t--){try{this.bufferReducedPrecision(t)}catch(t){if(!(t instanceof dt))throw t;this._saveException=t}if(null!==this._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var n=arguments[0],i=e.precisionScaleFactor(this._argGeom,this._distance,n),r=new ne(i);this.bufferFixedPrecision(r)}}},{key:"computeGeometry",value:function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===ne.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()}},{key:"setQuadrantSegments",value:function(t){this._bufParams.setQuadrantSegments(t)}},{key:"bufferOriginalPrecision",value:function(){try{var t=new Un(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof j))throw t;this._saveException=t}}},{key:"getResultGeometry",value:function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry}},{key:"setEndCapStyle",value:function(t){this._bufParams.setEndCapStyle(t)}}],[{key:"constructor_",value:function(){if(this._argGeom=null,this._distance=null,this._bufParams=new m,this._resultGeometry=null,this._saveException=null,1===arguments.length){var t=arguments[0];this._argGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._argGeom=e,this._bufParams=n}}},{key:"bufferOp",value:function(){if(2===arguments.length){var t=arguments[1];return new e(arguments[0]).getResultGeometry(t)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof U&&"number"==typeof arguments[1]){var n=arguments[1],i=arguments[2],r=new e(arguments[0]);return r.setQuadrantSegments(i),r.getResultGeometry(n)}if(arguments[2]instanceof m&&arguments[0]instanceof U&&"number"==typeof arguments[1]){var o=arguments[1];return new e(arguments[0],arguments[2]).getResultGeometry(o)}}else if(4===arguments.length){var s=arguments[1],a=arguments[2],l=arguments[3],u=new e(arguments[0]);return u.setQuadrantSegments(a),u.setEndCapStyle(l),u.getResultGeometry(s)}}},{key:"precisionScaleFactor",value:function(t,e,n){var i=t.getEnvelopeInternal(),r=bt.max(Math.abs(i.getMaxX()),Math.abs(i.getMaxY()),Math.abs(i.getMinX()),Math.abs(i.getMinY()))+2*(e>0?e:0),o=n-Math.trunc(Math.log(r)/Math.log(10)+1);return Math.pow(10,o)}}]),e}();ti.CAP_ROUND=m.CAP_ROUND,ti.CAP_BUTT=m.CAP_FLAT,ti.CAP_FLAT=m.CAP_FLAT,ti.CAP_SQUARE=m.CAP_SQUARE,ti.MAX_PRECISION_DIGITS=12;var ei=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],ni=function(){function e(n){t(this,e),this.geometryFactory=n||new oe}return n(e,[{key:"read",value:function(t){var e,n=(e="string"==typeof t?JSON.parse(t):t).type;if(!ii[n])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==ei.indexOf(n)?ii[n].call(this,e.coordinates):"GeometryCollection"===n?ii[n].call(this,e.geometries):ii[n].call(this,e)}},{key:"write",value:function(t){var e=t.getGeometryType();if(!ri[e])throw new Error("Geometry is not supported");return ri[e].call(this,t)}}]),e}(),ii={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){var i=t.geometry.type;if(!ii[i])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=ii.bbox.call(this,t.bbox)),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.call(this,t.bbox)),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var i=t[n];e.push(a(V,d(i)))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new V(t[0],t[1]),new V(t[2],t[1]),new V(t[2],t[3]),new V(t[0],t[3]),new V(t[0],t[1])])},Point:function(t){var e=a(V,d(t));return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(ii.Point.call(this,t[n]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=ii.coordinates.call(this,t);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(ii.LineString.call(this,t[n]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=ii.coordinates.call(this,t[0]),n=this.geometryFactory.createLinearRing(e),i=[],r=1;r<t.length;++r){var o=t[r],s=ii.coordinates.call(this,o),a=this.geometryFactory.createLinearRing(s);i.push(a)}return this.geometryFactory.createPolygon(n,i)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var i=t[n];e.push(ii.Polygon.call(this,i))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var i=t[n];e.push(this.read(i))}return this.geometryFactory.createGeometryCollection(e)}},ri={coordinate:function(t){var e=[t.x,t.y];return t.z&&e.push(t.z),t.m&&e.push(t.m),e},Point:function(t){return{type:"Point",coordinates:ri.coordinate.call(this,t.getCoordinate())}},MultiPoint:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=t._geometries[n],r=ri.Point.call(this,i);e.push(r.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),i=0;i<n.length;++i){var r=n[i];e.push(ri.coordinate.call(this,r))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=t._geometries[n],r=ri.LineString.call(this,i);e.push(r.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=ri.LineString.call(this,t._shell);e.push(n.coordinates);for(var i=0;i<t._holes.length;++i){var r=t._holes[i],o=ri.LineString.call(this,r);e.push(o.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=t._geometries[n],r=ri.Polygon.call(this,i);e.push(r.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=t._geometries[n],r=i.getGeometryType();e.push(ri[r].call(this,i))}return{type:"GeometryCollection",geometries:e}}};return{BufferOp:ti,GeoJSONReader:function(){function e(n){t(this,e),this.parser=new ni(n||new oe)}return n(e,[{key:"read",value:function(t){return this.parser.read(t)}}]),e}(),GeoJSONWriter:function(){function e(){t(this,e),this.parser=new ni(this.geometryFactory)}return n(e,[{key:"write",value:function(t){return this.parser.write(t)}}]),e}()}}()}(Ln)),Ln.exports),An=pn(Nn);function jn(){return new Dn}function Dn(){this.reset()}Dn.prototype={constructor:Dn,reset:function(){this.s=this.t=0},add:function(t){zn(Fn,t,this.t),zn(this,Fn.s,this.s),this.s?this.t+=Fn.t:this.s=Fn.t},valueOf:function(){return this.s}};var Fn=new Dn;function zn(t,e,n){var i=t.s=e+n,r=i-e,o=i-r;t.t=e-o+(n-r)}var Gn=1e-6,Bn=Math.PI,Vn=Bn/2,Yn=Bn/4,qn=2*Bn,Un=180/Bn,Xn=Bn/180,Wn=Math.abs,Hn=Math.atan,Zn=Math.atan2,Kn=Math.cos,Jn=Math.sin,Qn=Math.sqrt;function $n(t){return t>1?0:t<-1?Bn:Math.acos(t)}function ti(t){return t>1?Vn:t<-1?-Vn:Math.asin(t)}function ei(){}function ni(t,e){t&&ri.hasOwnProperty(t.type)&&ri[t.type](t,e)}var ii={Feature:function(t,e){ni(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)ni(n[i].geometry,e)}},ri={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){oi(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)oi(n[i],e,0)},Polygon:function(t,e){si(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)si(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)ni(n[i],e)}};function oi(t,e,n){var i,r=-1,o=t.length-n;for(e.lineStart();++r<o;)i=t[r],e.point(i[0],i[1],i[2]);e.lineEnd()}function si(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)oi(t[n],e,1);e.polygonEnd()}function ai(t){return[Zn(t[1],t[0]),ti(t[2])]}function li(t){var e=t[0],n=t[1],i=Kn(n);return[i*Kn(e),i*Jn(e),Jn(n)]}function ui(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function ci(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function hi(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function fi(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function di(t){var e=Qn(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function gi(t,e){function n(n,i){return n=t(n,i),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,i){return(n=e.invert(n,i))&&t.invert(n[0],n[1])}),n}function pi(t,e){return[t>Bn?t-qn:t<-Bn?t+qn:t,e]}function vi(t){return function(e,n){return[(e+=t)>Bn?e-qn:e<-Bn?e+qn:e,n]}}function yi(t){var e=vi(t);return e.invert=vi(-t),e}function mi(t,e){var n=Kn(t),i=Jn(t),r=Kn(e),o=Jn(e);function s(t,e){var s=Kn(e),a=Kn(t)*s,l=Jn(t)*s,u=Jn(e),c=u*n+a*i;return[Zn(l*r-c*o,a*n-u*i),ti(c*r+l*o)]}return s.invert=function(t,e){var s=Kn(e),a=Kn(t)*s,l=Jn(t)*s,u=Jn(e),c=u*r-l*o;return[Zn(l*r+u*o,a*n+c*i),ti(c*n-a*i)]},s}function _i(t,e){(e=li(e))[0]-=t,di(e);var n=$n(-e[1]);return((-e[2]<0?-n:n)+qn-Gn)%qn}function bi(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:ei,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function xi(t,e){return Wn(t[0]-e[0])<Gn&&Wn(t[1]-e[1])<Gn}function Ei(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function wi(t,e,n,i,r){var o,s,a=[],l=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,i=t[0],s=t[e];if(xi(i,s)){for(r.lineStart(),o=0;o<e;++o)r.point((i=t[o])[0],i[1]);r.lineEnd()}else a.push(n=new Ei(i,t,null,!0)),l.push(n.o=new Ei(i,null,n,!1)),a.push(n=new Ei(s,t,null,!1)),l.push(n.o=new Ei(s,null,n,!0))}})),a.length){for(l.sort(e),ki(a),ki(l),o=0,s=l.length;o<s;++o)l[o].e=n=!n;for(var u,c,h=a[0];;){for(var f=h,d=!0;f.v;)if((f=f.n)===h)return;u=f.z,r.lineStart();do{if(f.v=f.o.v=!0,f.e){if(d)for(o=0,s=u.length;o<s;++o)r.point((c=u[o])[0],c[1]);else i(f.x,f.n.x,1,r);f=f.n}else{if(d)for(u=f.p.z,o=u.length-1;o>=0;--o)r.point((c=u[o])[0],c[1]);else i(f.x,f.p.x,-1,r);f=f.p}u=(f=f.o).z,d=!d}while(!f.v);r.lineEnd()}}}function ki(t){if(e=t.length){for(var e,n,i=0,r=t[0];++i<e;)r.n=n=t[i],n.p=r,r=n;r.n=n=t[0],n.p=r}}function Si(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Ci(t){for(var e,n,i,r=t.length,o=-1,s=0;++o<r;)s+=t[o].length;for(n=new Array(s);--r>=0;)for(e=(i=t[r]).length;--e>=0;)n[--s]=i[e];return n}jn(),jn(),jn(),pi.invert=pi,function(t){var e;1===t.length&&(e=t,t=function(t,n){return Si(e(t),n)})}(Si);var Oi=1e9,Ii=-Oi;function Mi(t,e,n,i){function r(r,o){return t<=r&&r<=n&&e<=o&&o<=i}function o(r,o,a,u){var c=0,h=0;if(null==r||(c=s(r,a))!==(h=s(o,a))||l(r,o)<0^a>0)do{u.point(0===c||3===c?t:n,c>1?i:e)}while((c=(c+a+4)%4)!==h);else u.point(o[0],o[1])}function s(i,r){return Wn(i[0]-t)<Gn?r>0?0:3:Wn(i[0]-n)<Gn?r>0?2:1:Wn(i[1]-e)<Gn?r>0?1:0:r>0?3:2}function a(t,e){return l(t.x,e.x)}function l(t,e){var n=s(t,1),i=s(e,1);return n!==i?n-i:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(s){var l,u,c,h,f,d,g,p,v,y,m,_=s,b=bi(),x={point:E,lineStart:function(){x.point=w,u&&u.push(c=[]),y=!0,v=!1,g=p=NaN},lineEnd:function(){l&&(w(h,f),d&&v&&b.rejoin(),l.push(b.result())),x.point=E,v&&_.lineEnd()},polygonStart:function(){_=b,l=[],u=[],m=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,r=u.length;n<r;++n)for(var o,s,a=u[n],l=1,c=a.length,h=a[0],f=h[0],d=h[1];l<c;++l)o=f,s=d,f=(h=a[l])[0],d=h[1],s<=i?d>i&&(f-o)*(i-s)>(d-s)*(t-o)&&++e:d<=i&&(f-o)*(i-s)<(d-s)*(t-o)&&--e;return e}(),n=m&&e,r=(l=Ci(l)).length;(n||r)&&(s.polygonStart(),n&&(s.lineStart(),o(null,null,1,s),s.lineEnd()),r&&wi(l,a,e,o,s),s.polygonEnd()),_=s,l=u=c=null}};function E(t,e){r(t,e)&&_.point(t,e)}function w(o,s){var a=r(o,s);if(u&&c.push([o,s]),y)h=o,f=s,d=a,y=!1,a&&(_.lineStart(),_.point(o,s));else if(a&&v)_.point(o,s);else{var l=[g=Math.max(Ii,Math.min(Oi,g)),p=Math.max(Ii,Math.min(Oi,p))],b=[o=Math.max(Ii,Math.min(Oi,o)),s=Math.max(Ii,Math.min(Oi,s))];!function(t,e,n,i,r,o){var s,a=t[0],l=t[1],u=0,c=1,h=e[0]-a,f=e[1]-l;if(s=n-a,h||!(s>0)){if(s/=h,h<0){if(s<u)return;s<c&&(c=s)}else if(h>0){if(s>c)return;s>u&&(u=s)}if(s=r-a,h||!(s<0)){if(s/=h,h<0){if(s>c)return;s>u&&(u=s)}else if(h>0){if(s<u)return;s<c&&(c=s)}if(s=i-l,f||!(s>0)){if(s/=f,f<0){if(s<u)return;s<c&&(c=s)}else if(f>0){if(s>c)return;s>u&&(u=s)}if(s=o-l,f||!(s<0)){if(s/=f,f<0){if(s>c)return;s>u&&(u=s)}else if(f>0){if(s<u)return;s<c&&(c=s)}return u>0&&(t[0]=a+u*h,t[1]=l+u*f),c<1&&(e[0]=a+c*h,e[1]=l+c*f),!0}}}}}(l,b,t,e,n,i)?a&&(_.lineStart(),_.point(o,s),m=!1):(v||(_.lineStart(),_.point(l[0],l[1])),_.point(b[0],b[1]),a||_.lineEnd(),m=!1)}g=o,p=s,v=a}return x}}var Ri=jn();function Ti(t){return t}jn(),jn(),jn();var Pi=1/0,Li=Pi,Ni=-Pi,Ai=Ni,ji={point:function(t,e){t<Pi&&(Pi=t),t>Ni&&(Ni=t),e<Li&&(Li=e),e>Ai&&(Ai=e)},lineStart:ei,lineEnd:ei,polygonStart:ei,polygonEnd:ei,result:function(){var t=[[Pi,Li],[Ni,Ai]];return Ni=Ai=-(Li=Pi=1/0),t}};function Di(t,e,n,i){return function(r,o){var s,a,l,u=e(o),c=r.invert(i[0],i[1]),h=bi(),f=e(h),d=!1,g={point:p,lineStart:y,lineEnd:m,polygonStart:function(){g.point=_,g.lineStart=b,g.lineEnd=x,a=[],s=[]},polygonEnd:function(){g.point=p,g.lineStart=y,g.lineEnd=m,a=Ci(a);var t=function(t,e){var n=e[0],i=e[1],r=[Jn(n),-Kn(n),0],o=0,s=0;Ri.reset();for(var a=0,l=t.length;a<l;++a)if(c=(u=t[a]).length)for(var u,c,h=u[c-1],f=h[0],d=h[1]/2+Yn,g=Jn(d),p=Kn(d),v=0;v<c;++v,f=m,g=b,p=x,h=y){var y=u[v],m=y[0],_=y[1]/2+Yn,b=Jn(_),x=Kn(_),E=m-f,w=E>=0?1:-1,k=w*E,S=k>Bn,C=g*b;if(Ri.add(Zn(C*w*Jn(k),p*x+C*Kn(k))),o+=S?E+w*qn:E,S^f>=n^m>=n){var O=ci(li(h),li(y));di(O);var I=ci(r,O);di(I);var M=(S^E>=0?-1:1)*ti(I[2]);(i>M||i===M&&(O[0]||O[1]))&&(s+=S^E>=0?1:-1)}}return(o<-Gn||o<Gn&&Ri<-Gn)^1&s}(s,c);a.length?(d||(o.polygonStart(),d=!0),wi(a,zi,t,n,o)):t&&(d||(o.polygonStart(),d=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),d&&(o.polygonEnd(),d=!1),a=s=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function p(e,n){var i=r(e,n);t(e=i[0],n=i[1])&&o.point(e,n)}function v(t,e){var n=r(t,e);u.point(n[0],n[1])}function y(){g.point=v,u.lineStart()}function m(){g.point=p,u.lineEnd()}function _(t,e){l.push([t,e]);var n=r(t,e);f.point(n[0],n[1])}function b(){f.lineStart(),l=[]}function x(){_(l[0][0],l[0][1]),f.lineEnd();var t,e,n,i,r=f.clean(),u=h.result(),c=u.length;if(l.pop(),s.push(l),l=null,c)if(1&r){if((e=(n=u[0]).length-1)>0){for(d||(o.polygonStart(),d=!0),o.lineStart(),t=0;t<e;++t)o.point((i=n[t])[0],i[1]);o.lineEnd()}}else c>1&&2&r&&u.push(u.pop().concat(u.shift())),a.push(u.filter(Fi))}return g}}function Fi(t){return t.length>1}function zi(t,e){return((t=t.x)[0]<0?t[1]-Vn-Gn:Vn-t[1])-((e=e.x)[0]<0?e[1]-Vn-Gn:Vn-e[1])}jn();var Gi=Di((function(){return!0}),(function(t){var e,n=NaN,i=NaN,r=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,s){var a=o>0?Bn:-Bn,l=Wn(o-n);Wn(l-Bn)<Gn?(t.point(n,i=(i+s)/2>0?Vn:-Vn),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(a,i),t.point(o,i),e=0):r!==a&&l>=Bn&&(Wn(n-r)<Gn&&(n-=r*Gn),Wn(o-a)<Gn&&(o-=a*Gn),i=function(t,e,n,i){var r,o,s=Jn(t-n);return Wn(s)>Gn?Hn((Jn(e)*(o=Kn(i))*Jn(n)-Jn(i)*(r=Kn(e))*Jn(t))/(r*o*s)):(e+i)/2}(n,i,o,s),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(a,i),e=0),t.point(n=o,i=s),r=a},lineEnd:function(){t.lineEnd(),n=i=NaN},clean:function(){return 2-e}}}),(function(t,e,n,i){var r;if(null==t)r=n*Vn,i.point(-Bn,r),i.point(0,r),i.point(Bn,r),i.point(Bn,0),i.point(Bn,-r),i.point(0,-r),i.point(-Bn,-r),i.point(-Bn,0),i.point(-Bn,r);else if(Wn(t[0]-e[0])>Gn){var o=t[0]<e[0]?Bn:-Bn;r=n*o/2,i.point(-o,r),i.point(0,r),i.point(o,r)}else i.point(e[0],e[1])}),[-Bn,-Vn]);function Bi(t,e){var n=Kn(t),i=n>0,r=Wn(n)>Gn;function o(t,e){return Kn(t)*Kn(e)>n}function s(t,e,i){var r=[1,0,0],o=ci(li(t),li(e)),s=ui(o,o),a=o[0],l=s-a*a;if(!l)return!i&&t;var u=n*s/l,c=-n*a/l,h=ci(r,o),f=fi(r,u);hi(f,fi(o,c));var d=h,g=ui(f,d),p=ui(d,d),v=g*g-p*(ui(f,f)-1);if(!(v<0)){var y=Qn(v),m=fi(d,(-g-y)/p);if(hi(m,f),m=ai(m),!i)return m;var _,b=t[0],x=e[0],E=t[1],w=e[1];x<b&&(_=b,b=x,x=_);var k=x-b,S=Wn(k-Bn)<Gn;if(!S&&w<E&&(_=E,E=w,w=_),S||k<Gn?S?E+w>0^m[1]<(Wn(m[0]-b)<Gn?E:w):E<=m[1]&&m[1]<=w:k>Bn^(b<=m[0]&&m[0]<=x)){var C=fi(d,(-g+y)/p);return hi(C,f),[m,ai(C)]}}}function a(e,n){var r=i?t:Bn-t,o=0;return e<-r?o|=1:e>r&&(o|=2),n<-r?o|=4:n>r&&(o|=8),o}return Di(o,(function(t){var e,n,l,u,c;return{lineStart:function(){u=l=!1,c=1},point:function(h,f){var d,g=[h,f],p=o(h,f),v=i?p?0:a(h,f):p?a(h+(h<0?Bn:-Bn),f):0;if(!e&&(u=l=p)&&t.lineStart(),p!==l&&(!(d=s(e,g))||xi(e,d)||xi(g,d))&&(g[0]+=Gn,g[1]+=Gn,p=o(g[0],g[1])),p!==l)c=0,p?(t.lineStart(),d=s(g,e),t.point(d[0],d[1])):(d=s(e,g),t.point(d[0],d[1]),t.lineEnd()),e=d;else if(r&&e&&i^p){var y;v&n||!(y=s(g,e,!0))||(c=0,i?(t.lineStart(),t.point(y[0][0],y[0][1]),t.point(y[1][0],y[1][1]),t.lineEnd()):(t.point(y[1][0],y[1][1]),t.lineEnd(),t.lineStart(),t.point(y[0][0],y[0][1])))}!p||e&&xi(e,g)||t.point(g[0],g[1]),e=g,l=p,n=v},lineEnd:function(){l&&t.lineEnd(),e=null},clean:function(){return c|(u&&l)<<1}}}),(function(n,i,r,o){!function(t,e,n,i,r,o){if(n){var s=Kn(e),a=Jn(e),l=i*n;null==r?(r=e+i*qn,o=e-l/2):(r=_i(s,r),o=_i(s,o),(i>0?r<o:r>o)&&(r+=i*qn));for(var u,c=r;i>0?c>o:c<o;c-=l)u=ai([s,-a*Kn(c),-a*Jn(c)]),t.point(u[0],u[1])}}(o,t,e,r,n,i)}),i?[0,-t]:[-Bn,t-Bn])}function Vi(t){return function(e){var n=new Yi;for(var i in t)n[i]=t[i];return n.stream=e,n}}function Yi(){}function qi(t,e,n){var i=e[1][0]-e[0][0],r=e[1][1]-e[0][1],o=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=o&&t.clipExtent(null),function(t,e){t&&ii.hasOwnProperty(t.type)?ii[t.type](t,e):ni(t,e)}(n,t.stream(ji));var s=ji.result(),a=Math.min(i/(s[1][0]-s[0][0]),r/(s[1][1]-s[0][1])),l=+e[0][0]+(i-a*(s[1][0]+s[0][0]))/2,u=+e[0][1]+(r-a*(s[1][1]+s[0][1]))/2;return null!=o&&t.clipExtent(o),t.scale(150*a).translate([l,u])}Yi.prototype={constructor:Yi,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Ui=Kn(30*Xn);function Xi(t,e){return+e?function(t,e){function n(i,r,o,s,a,l,u,c,h,f,d,g,p,v){var y=u-i,m=c-r,_=y*y+m*m;if(_>4*e&&p--){var b=s+f,x=a+d,E=l+g,w=Qn(b*b+x*x+E*E),k=ti(E/=w),S=Wn(Wn(E)-1)<Gn||Wn(o-h)<Gn?(o+h)/2:Zn(x,b),C=t(S,k),O=C[0],I=C[1],M=O-i,R=I-r,T=m*M-y*R;(T*T/_>e||Wn((y*M+m*R)/_-.5)>.3||s*f+a*d+l*g<Ui)&&(n(i,r,o,s,a,l,O,I,S,b/=w,x/=w,E,p,v),v.point(O,I),n(O,I,S,b,x,E,u,c,h,f,d,g,p,v))}}return function(e){var i,r,o,s,a,l,u,c,h,f,d,g,p={point:v,lineStart:y,lineEnd:_,polygonStart:function(){e.polygonStart(),p.lineStart=b},polygonEnd:function(){e.polygonEnd(),p.lineStart=y}};function v(n,i){n=t(n,i),e.point(n[0],n[1])}function y(){c=NaN,p.point=m,e.lineStart()}function m(i,r){var o=li([i,r]),s=t(i,r);n(c,h,u,f,d,g,c=s[0],h=s[1],u=i,f=o[0],d=o[1],g=o[2],16,e),e.point(c,h)}function _(){p.point=v,e.lineEnd()}function b(){y(),p.point=x,p.lineEnd=E}function x(t,e){m(i=t,e),r=c,o=h,s=f,a=d,l=g,p.point=m}function E(){n(c,h,u,f,d,g,r,o,i,s,a,l,16,e),p.lineEnd=_,_()}return p}}(t,e):function(t){return Vi({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)}var Wi=Vi({point:function(t,e){this.stream.point(t*Xn,e*Xn)}});function Hi(t){return function(e,n){var i=Kn(e),r=Kn(n),o=t(i*r);return[o*r*Jn(e),o*Jn(n)]}}function Zi(t){return function(e,n){var i=Qn(e*e+n*n),r=t(i),o=Jn(r),s=Kn(r);return[Zn(e*o,i*s),ti(i&&n*o/i)]}}Hi((function(t){return Qn(2/(1+t))})).invert=Zi((function(t){return 2*ti(t/2)}));var Ki=Hi((function(t){return(t=$n(t))&&t/Jn(t)}));function Ji(){return function(t){return function(t){var e,n,i,r,o,s,a,l,u,c,h=150,f=480,d=250,g=0,p=0,v=0,y=0,m=0,_=null,b=Gi,x=null,E=Ti,w=.5,k=Xi(O,w);function S(t){return[(t=o(t[0]*Xn,t[1]*Xn))[0]*h+n,i-t[1]*h]}function C(t){return(t=o.invert((t[0]-n)/h,(i-t[1])/h))&&[t[0]*Un,t[1]*Un]}function O(t,r){return[(t=e(t,r))[0]*h+n,i-t[1]*h]}function I(){o=gi(r=function(t,e,n){return(t%=qn)?e||n?gi(yi(t),mi(e,n)):yi(t):e||n?mi(e,n):pi}(v,y,m),e);var t=e(g,p);return n=f-t[0]*h,i=d+t[1]*h,M()}function M(){return u=c=null,S}return S.stream=function(t){return u&&c===t?u:u=Wi(b(r,k(E(c=t))))},S.clipAngle=function(t){return arguments.length?(b=+t?Bi(_=t*Xn,6*Xn):(_=null,Gi),M()):_*Un},S.clipExtent=function(t){return arguments.length?(E=null==t?(x=s=a=l=null,Ti):Mi(x=+t[0][0],s=+t[0][1],a=+t[1][0],l=+t[1][1]),M()):null==x?null:[[x,s],[a,l]]},S.scale=function(t){return arguments.length?(h=+t,I()):h},S.translate=function(t){return arguments.length?(f=+t[0],d=+t[1],I()):[f,d]},S.center=function(t){return arguments.length?(g=t[0]%360*Xn,p=t[1]%360*Xn,I()):[g*Un,p*Un]},S.rotate=function(t){return arguments.length?(v=t[0]%360*Xn,y=t[1]%360*Xn,m=t.length>2?t[2]%360*Xn:0,I()):[v*Un,y*Un,m*Un]},S.precision=function(t){return arguments.length?(k=Xi(O,w=t*t),M()):Qn(w)},S.fitExtent=function(t,e){return qi(S,t,e)},S.fitSize=function(t,e){return function(t,e,n){return qi(t,[[0,0],e],n)}(S,t,e)},function(){return e=t.apply(this,arguments),S.invert=e.invert&&C,I()}}((function(){return t}))()}(Ki).scale(79.4188).clipAngle(179.999)}function Qi(t,e){return[t,e]}Ki.invert=Zi((function(t){return t})),Qi.invert=Qi;var $i=An.BufferOp,tr=An.GeoJSONReader,er=An.GeoJSONWriter;function nr(t,e,n,i){var r=t.properties||{},o="Feature"===t.type?t.geometry:t;if("GeometryCollection"===o.type){var s=[];return yt(t,(function(t){var r=nr(t,e,n,i);r&&s.push(r)})),R(s)}var a=function(t){var e=Tn(t).geometry.coordinates,n=[-e[0],-e[1]];return Ji().rotate(n).scale(_)}(o),l={type:o.type,coordinates:ir(o.coordinates,a)},u=(new tr).read(l),c=j(D(e,n),"meters"),h=$i.bufferOp(u,c,i);if(!function t(e){return Array.isArray(e[0])?t(e[0]):isNaN(e[0])}((h=(new er).write(h)).coordinates))return E({type:h.type,coordinates:rr(h.coordinates,a)},r)}function ir(t,e){return"object"!==y(t[0])?e(t):t.map((function(t){return ir(t,e)}))}function rr(t,e){return"object"!==y(t[0])?e.invert(t):t.map((function(t){return rr(t,e)}))}function or(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=0,i=0,r=0;return yt(t,(function(t,o,s){var a=e.weight?null==s?void 0:s[e.weight]:void 0;if(!U(a=null==a?1:a))throw new Error("weight value must be a number for feature index "+o);(a=Number(a))>0&&ct(t,(function(t){n+=t[0]*a,i+=t[1]*a,r+=a}))})),k([n/r,i/r],e.properties,e)}function sr(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=0,i=0,r=0;return ct(t,(function(t){n+=t[0],i+=t[1],r++}),!0),k([n/r,i/r],e.properties)}function ar(t,e,n,i,r){var o=i.tolerance||.001,s=0,a=0,l=0,u=0;if(gt(n,(function(e){var n,i=null==(n=e.properties)?void 0:n.weight,r=null==i?1:i;if(!U(r=Number(r)))throw new Error("weight value must be a number");if(r>0){u+=1;var o=r*at(e,t);0===o&&(o=1);var c=r/o;s+=e.geometry.coordinates[0]*c,a+=e.geometry.coordinates[1]*c,l+=c}})),u<1)throw new Error("no features to measure");var c=s/l,h=a/l;return 1===u||0===r||Math.abs(c-e[0])<o&&Math.abs(h-e[1])<o?k([c,h],{medianCandidates:i.medianCandidates}):(i.medianCandidates.push([c,h]),ar([c,h],t,n,i,r-1))}var lr={exports:{}},ur=vn(He),cr=s((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:hr;if(r(this,t),this.data=e,this.length=this.data.length,this.compare=n,this.length>0)for(var i=(this.length>>1)-1;i>=0;i--)this._down(i)}),[{key:"push",value:function(t){this.data.push(t),this.length++,this._up(this.length-1)}},{key:"pop",value:function(){if(0!==this.length){var t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}}},{key:"peek",value:function(){return this.data[0]}},{key:"_up",value:function(t){for(var e=this.data,n=this.compare,i=e[t];t>0;){var r=t-1>>1,o=e[r];if(n(i,o)>=0)break;e[t]=o,t=r}e[t]=i}},{key:"_down",value:function(t){for(var e=this.data,n=this.compare,i=this.length>>1,r=e[t];t<i;){var o=1+(t<<1),s=e[o],a=o+1;if(a<this.length&&n(e[a],s)<0&&(o=a,s=e[a]),n(s,r)>=0)break;e[t]=s,t=o}e[t]=r}}]);function hr(t,e){return t<e?-1:t>e?1:0}var fr,dr,gr,pr,vr,yr,mr,_r=vn(Object.freeze({__proto__:null,default:cr})),br={exports:{}},xr={exports:{}},Er=pn(function(){if(mr)return lr.exports;mr=1;var t=ur,e=_r,n=function(){if(vr)return br.exports;vr=1;var t=(dr||(dr=1,fr=function(t,e,n,i){var r=t[0],o=t[1],s=!1;void 0===n&&(n=0),void 0===i&&(i=e.length);for(var a=(i-n)/2,l=0,u=a-1;l<a;u=l++){var c=e[n+2*l+0],h=e[n+2*l+1],f=e[n+2*u+0],d=e[n+2*u+1];h>o!=d>o&&r<(f-c)*(o-h)/(d-h)+c&&(s=!s)}return s}),fr),e=(pr||(pr=1,gr=function(t,e,n,i){var r=t[0],o=t[1],s=!1;void 0===n&&(n=0),void 0===i&&(i=e.length);for(var a=i-n,l=0,u=a-1;l<a;u=l++){var c=e[l+n][0],h=e[l+n][1],f=e[u+n][0],d=e[u+n][1];h>o!=d>o&&r<(f-c)*(o-h)/(d-h)+c&&(s=!s)}return s}),gr);return br.exports=function(n,i,r,o){return i.length>0&&Array.isArray(i[0])?e(n,i,r,o):t(n,i,r,o)},br.exports.nested=e,br.exports.flat=t,br.exports}(),i=(yr||(yr=1,function(t,e){!function(t){var e=134217729;function n(t,e,n,i,r){var o,s,a,l,u=e[0],c=i[0],h=0,f=0;c>u==c>-u?(o=u,u=e[++h]):(o=c,c=i[++f]);var d=0;if(h<t&&f<n)for(c>u==c>-u?(a=o-((s=u+o)-u),u=e[++h]):(a=o-((s=c+o)-c),c=i[++f]),o=s,0!==a&&(r[d++]=a);h<t&&f<n;)c>u==c>-u?(a=o-((s=o+u)-(l=s-o))+(u-l),u=e[++h]):(a=o-((s=o+c)-(l=s-o))+(c-l),c=i[++f]),o=s,0!==a&&(r[d++]=a);for(;h<t;)a=o-((s=o+u)-(l=s-o))+(u-l),u=e[++h],o=s,0!==a&&(r[d++]=a);for(;f<n;)a=o-((s=o+c)-(l=s-o))+(c-l),c=i[++f],o=s,0!==a&&(r[d++]=a);return 0===o&&0!==d||(r[d++]=o),d}function i(t){return new Float64Array(t)}var r=i(4),o=i(8),s=i(12),a=i(16),l=i(4);t.orient2d=function(t,i,u,c,h,f){var d=(i-f)*(u-h),g=(t-h)*(c-f),p=d-g;if(0===d||0===g||d>0!=g>0)return p;var v=Math.abs(d+g);return Math.abs(p)>=33306690738754716e-32*v?p:-function(t,i,u,c,h,f,d){var g,p,v,y,m,_,b,x,E,w,k,S,C,O,I,M,R,T,P=t-h,L=u-h,N=i-f,A=c-f;m=(I=(x=P-(b=(_=e*P)-(_-P)))*(w=A-(E=(_=e*A)-(_-A)))-((O=P*A)-b*E-x*E-b*w))-(k=I-(R=(x=N-(b=(_=e*N)-(_-N)))*(w=L-(E=(_=e*L)-(_-L)))-((M=N*L)-b*E-x*E-b*w))),r[0]=I-(k+m)+(m-R),m=(C=O-((S=O+k)-(m=S-O))+(k-m))-(k=C-M),r[1]=C-(k+m)+(m-M),m=(T=S+k)-S,r[2]=S-(T-m)+(k-m),r[3]=T;var j=function(t,e){for(var n=e[0],i=1;i<4;i++)n+=e[i];return n}(0,r),D=22204460492503146e-32*d;if(j>=D||-j>=D)return j;if(g=t-(P+(m=t-P))+(m-h),v=u-(L+(m=u-L))+(m-h),p=i-(N+(m=i-N))+(m-f),y=c-(A+(m=c-A))+(m-f),0===g&&0===p&&0===v&&0===y)return j;if(D=11093356479670487e-47*d+33306690738754706e-32*Math.abs(j),(j+=P*y+A*g-(N*v+L*p))>=D||-j>=D)return j;m=(I=(x=g-(b=(_=e*g)-(_-g)))*(w=A-(E=(_=e*A)-(_-A)))-((O=g*A)-b*E-x*E-b*w))-(k=I-(R=(x=p-(b=(_=e*p)-(_-p)))*(w=L-(E=(_=e*L)-(_-L)))-((M=p*L)-b*E-x*E-b*w))),l[0]=I-(k+m)+(m-R),m=(C=O-((S=O+k)-(m=S-O))+(k-m))-(k=C-M),l[1]=C-(k+m)+(m-M),m=(T=S+k)-S,l[2]=S-(T-m)+(k-m),l[3]=T;var F=n(4,r,4,l,o);m=(I=(x=P-(b=(_=e*P)-(_-P)))*(w=y-(E=(_=e*y)-(_-y)))-((O=P*y)-b*E-x*E-b*w))-(k=I-(R=(x=N-(b=(_=e*N)-(_-N)))*(w=v-(E=(_=e*v)-(_-v)))-((M=N*v)-b*E-x*E-b*w))),l[0]=I-(k+m)+(m-R),m=(C=O-((S=O+k)-(m=S-O))+(k-m))-(k=C-M),l[1]=C-(k+m)+(m-M),m=(T=S+k)-S,l[2]=S-(T-m)+(k-m),l[3]=T;var z=n(F,o,4,l,s);m=(I=(x=g-(b=(_=e*g)-(_-g)))*(w=y-(E=(_=e*y)-(_-y)))-((O=g*y)-b*E-x*E-b*w))-(k=I-(R=(x=p-(b=(_=e*p)-(_-p)))*(w=v-(E=(_=e*v)-(_-v)))-((M=p*v)-b*E-x*E-b*w))),l[0]=I-(k+m)+(m-R),m=(C=O-((S=O+k)-(m=S-O))+(k-m))-(k=C-M),l[1]=C-(k+m)+(m-M),m=(T=S+k)-S,l[2]=S-(T-m)+(k-m),l[3]=T;var G=n(z,s,4,l,a);return a[G-1]}(t,i,u,c,h,f,v)},t.orient2dfast=function(t,e,n,i,r,o){return(e-o)*(n-r)-(t-r)*(i-o)},Object.defineProperty(t,"__esModule",{value:!0})}(e)}(0,xr.exports)),xr.exports).orient2d;function r(e,i,r){i=Math.max(0,void 0===i?2:i),r=r||0;var s=function(t){for(var e=t[0],i=t[0],r=t[0],o=t[0],s=0;s<t.length;s++){var a=t[s];a[0]<e[0]&&(e=a),a[0]>r[0]&&(r=a),a[1]<i[1]&&(i=a),a[1]>o[1]&&(o=a)}var l=[e,i,r,o],u=l.slice();for(s=0;s<t.length;s++)n(t[s],l)||u.push(t[s]);return function(t){t.sort(v);for(var e=[],n=0;n<t.length;n++){for(;e.length>=2&&c(e[e.length-2],e[e.length-1],t[n])<=0;)e.pop();e.push(t[n])}for(var i=[],r=t.length-1;r>=0;r--){for(;i.length>=2&&c(i[i.length-2],i[i.length-1],t[r])<=0;)i.pop();i.push(t[r])}return i.pop(),e.pop(),e.concat(i)}(u)}(e),a=new t(16);a.toBBox=function(t){return{minX:t[0],minY:t[1],maxX:t[0],maxY:t[1]}},a.compareMinX=function(t,e){return t[0]-e[0]},a.compareMinY=function(t,e){return t[1]-e[1]},a.load(e);for(var l,u=[],g=0;g<s.length;g++){var p=s[g];a.remove(p),l=f(p,l),u.push(l)}var y=new t(16);for(g=0;g<u.length;g++)y.insert(h(u[g]));for(var m=i*i,_=r*r;u.length;){var b=u.shift(),x=b.p,E=b.next.p,w=d(x,E);if(!(w<_)){var k=w/m;(p=o(a,b.prev.p,x,E,b.next.next.p,k,y))&&Math.min(d(p,x),d(p,E))<=k&&(u.push(b),u.push(f(p,b)),a.remove(p),y.remove(b),y.insert(h(b)),y.insert(h(b.next)))}}b=l;var S=[];do{S.push(b.p),b=b.next}while(b!==l);return S.push(b.p),S}function o(t,n,i,r,o,l,c){for(var h=new e([],s),f=t.data;f;){for(var d=0;d<f.children.length;d++){var p=f.children[d],v=f.leaf?g(p,i,r):a(i,r,p);v>l||h.push({node:p,dist:v})}for(;h.length&&!h.peek().node.children;){var y=h.pop(),m=y.node,_=g(m,n,i),b=g(m,r,o);if(y.dist<_&&y.dist<b&&u(i,m,c)&&u(r,m,c))return m}(f=h.pop())&&(f=f.node)}return null}function s(t,e){return t.dist-e.dist}function a(t,e,n){if(l(t,n)||l(e,n))return 0;var i=p(t[0],t[1],e[0],e[1],n.minX,n.minY,n.maxX,n.minY);if(0===i)return 0;var r=p(t[0],t[1],e[0],e[1],n.minX,n.minY,n.minX,n.maxY);if(0===r)return 0;var o=p(t[0],t[1],e[0],e[1],n.maxX,n.minY,n.maxX,n.maxY);if(0===o)return 0;var s=p(t[0],t[1],e[0],e[1],n.minX,n.maxY,n.maxX,n.maxY);return 0===s?0:Math.min(i,r,o,s)}function l(t,e){return t[0]>=e.minX&&t[0]<=e.maxX&&t[1]>=e.minY&&t[1]<=e.maxY}function u(t,e,n){for(var i,r,o,s,a=Math.min(t[0],e[0]),l=Math.min(t[1],e[1]),u=Math.max(t[0],e[0]),h=Math.max(t[1],e[1]),f=n.search({minX:a,minY:l,maxX:u,maxY:h}),d=0;d<f.length;d++)if(i=f[d].p,r=f[d].next.p,o=t,i!==(s=e)&&r!==o&&c(i,r,o)>0!=c(i,r,s)>0&&c(o,s,i)>0!=c(o,s,r)>0)return!1;return!0}function c(t,e,n){return i(t[0],t[1],e[0],e[1],n[0],n[1])}function h(t){var e=t.p,n=t.next.p;return t.minX=Math.min(e[0],n[0]),t.minY=Math.min(e[1],n[1]),t.maxX=Math.max(e[0],n[0]),t.maxY=Math.max(e[1],n[1]),t}function f(t,e){var n={p:t,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(n.next=e.next,n.prev=e,e.next.prev=n,e.next=n):(n.prev=n,n.next=n),n}function d(t,e){var n=t[0]-e[0],i=t[1]-e[1];return n*n+i*i}function g(t,e,n){var i=e[0],r=e[1],o=n[0]-i,s=n[1]-r;if(0!==o||0!==s){var a=((t[0]-i)*o+(t[1]-r)*s)/(o*o+s*s);a>1?(i=n[0],r=n[1]):a>0&&(i+=o*a,r+=s*a)}return(o=t[0]-i)*o+(s=t[1]-r)*s}function p(t,e,n,i,r,o,s,a){var l,u,c,h,f=n-t,d=i-e,g=s-r,p=a-o,v=t-r,y=e-o,m=f*f+d*d,_=f*g+d*p,b=g*g+p*p,x=f*v+d*y,E=g*v+p*y,w=m*b-_*_,k=w,S=w;0===w?(u=0,k=1,h=E,S=b):(h=m*E-_*x,(u=_*E-b*x)<0?(u=0,h=E,S=b):u>k&&(u=k,h=E+_,S=b)),h<0?(h=0,-x<0?u=0:-x>m?u=k:(u=-x,k=m)):h>S&&(h=S,-x+_<0?u=0:-x+_>m?u=k:(u=-x+_,k=m));var C=(1-(c=0===h?0:h/S))*r+c*s-((1-(l=0===u?0:u/k))*t+l*n),O=(1-c)*o+c*a-((1-l)*e+l*i);return C*C+O*O}function v(t,e){return t[0]===e[0]?t[1]-e[1]:t[0]-e[0]}return e.default&&(e=e.default),lr.exports=r,lr.exports.default=r,lr.exports}());function wr(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.concavity=e.concavity||1/0;var n=[];if(ct(t,(function(t){n.push([t[0],t[1]])})),!n.length)return null;var i=Er(n,e.concavity);return i.length>3?C([i]):null}function kr(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.steps||64,r=n.properties?n.properties:!Array.isArray(t)&&"Feature"===t.type&&t.properties?t.properties:{},o=[],s=0;s<i;s++)o.push(st(t,e,-360*s/i,n).geometry.coordinates);return o.push(o[0]),C([o],r)}function Sr(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return Cr(t);case"FeatureCollection":return function(t){var e={type:"FeatureCollection"};return Object.keys(t).forEach((function(n){switch(n){case"type":case"features":return;default:e[n]=t[n]}})),e.features=t.features.map((function(t){return Cr(t)})),e}(t);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return Ir(t);default:throw new Error("unknown GeoJSON type")}}function Cr(t){var e={type:"Feature"};return Object.keys(t).forEach((function(n){switch(n){case"type":case"properties":case"geometry":return;default:e[n]=t[n]}})),e.properties=Or(t.properties),null==t.geometry?e.geometry=null:e.geometry=Ir(t.geometry),e}function Or(t){var e={};return t?(Object.keys(t).forEach((function(n){var i=t[n];"object"===y(i)?null===i?e[n]=null:Array.isArray(i)?e[n]=i.map((function(t){return t})):e[n]=Or(i):e[n]=i})),e):e}function Ir(t){var e={type:t.type};return t.bbox&&(e.bbox=t.bbox),"GeometryCollection"===t.type?(e.geometries=t.geometries.map((function(t){return Ir(t)})),e):(e.coordinates=function t(e){var n=e;return"object"!==y(n[0])?n.slice():n.map((function(e){return t(e)}))}(t.coordinates),e)}function Mr(t,e){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(null==e)throw new Error("filter is required");var n=[];return gt(t,(function(t){Lr(t.properties,e)&&n.push(t)})),R(n)}function Rr(t,e,n){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(null==e)throw new Error("property is required");for(var i=Pr(t,e),r=Object.keys(i),o=0;o<r.length;o++){for(var s=r[o],a=i[s],l=[],u=0;u<a.length;u++)l.push(t.features[a[u]]);n(R(l),s,o)}}function Tr(t,e,n,i){var r=i;return Rr(t,e,(function(t,e,o){r=0===o&&void 0===i?t:n(r,t,e,o)})),r}function Pr(t,e){var n={};return gt(t,(function(t,i){var r=t.properties||{};if(Object.prototype.hasOwnProperty.call(r,String(e))){var o=r[e];Object.prototype.hasOwnProperty.call(n,o)?n[o].push(i):n[o]=[i]}})),n}function Lr(t,e){if(void 0===t)return!1;var n=y(e);if("number"===n||"string"===n)return Object.prototype.hasOwnProperty.call(t,e);if(Array.isArray(e)){for(var i=0;i<e.length;i++)if(!Lr(t,e[i]))return!1;return!0}return Nr(t,e)}function Nr(t,e){for(var n=Object.keys(e),i=0;i<n.length;i++){var r=n[i];if(t[r]!==e[r])return!1}return!0}function Ar(t,e){if(!e)return{};if(!e.length)return{};for(var n={},i=0;i<e.length;i++){var r=e[i];Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n}var jr,Dr,Fr,zr,Gr,Br,Vr=Object.freeze({__proto__:null,applyFilter:Lr,clusterEach:Rr,clusterReduce:Tr,createBins:Pr,filterProperties:Ar,getCluster:Mr,propertiesContainsFilter:Nr}),Yr=Ae;function qr(){return Dr||(Dr=1,jr={eudist:function(t,e,n){for(var i=t.length,r=0,o=0;o<i;o++){var s=(t[o]||0)-(e[o]||0);r+=s*s}return n?Math.sqrt(r):r},mandist:function(t,e,n){for(var i=t.length,r=0,o=0;o<i;o++)r+=Math.abs((t[o]||0)-(e[o]||0));return n?Math.sqrt(r):r},dist:function(t,e,n){var i=Math.abs(t-e);return n?i:i*i}}),jr}var Ur=pn(function(){if(Br)return Gr;Br=1;var t=qr(),e=function(){if(zr)return Fr;zr=1;var t=qr(),e=t.eudist,n=t.dist;return Fr={kmrand:function(t,e){for(var n={},i=[],r=e<<2,o=t.length,s=t[0].length>0;i.length<e&&r-- >0;){var a=t[Math.floor(Math.random()*o)],l=s?a.join("_"):""+a;n[l]||(n[l]=!0,i.push(a))}if(i.length<e)throw new Error("Error initializating clusters");return i},kmpp:function(t,i){var r=t[0].length?e:n,o=[],s=t.length,a=t[0].length>0,l=t[Math.floor(Math.random()*s)];for(a&&l.join("_"),o.push(l);o.length<i;){for(var u=[],c=o.length,h=0,f=[],d=0;d<s;d++){for(var g=1/0,p=0;p<c;p++){var v=r(t[d],o[p]);v<=g&&(g=v)}u[d]=g}for(var y=0;y<s;y++)h+=u[y];for(var m=0;m<s;m++)f[m]={i:m,v:t[m],pr:u[m]/h,cs:0};f.sort((function(t,e){return t.pr-e.pr})),f[0].cs=f[0].pr;for(var _=1;_<s;_++)f[_].cs=f[_-1].cs+f[_].pr;for(var b=Math.random(),x=0;x<s-1&&f[x++].cs<b;);o.push(f[x-1].v)}return o}}}(),n=t.eudist;t.mandist,t.dist;var i=e.kmrand,r=e.kmpp;function o(t,e,n){n=n||[];for(var i=0;i<t;i++)n[i]=e;return n}return Gr=function(t,e,s,a){var l=[],u=[],c=[],h=[],f=!1,d=a||1e4,g=t.length,p=t[0].length,v=p>0,y=[];if(s)l="kmrand"==s?i(t,e):"kmpp"==s?r(t,e):s;else for(var m={};l.length<e;){var _=Math.floor(Math.random()*g);m[_]||(m[_]=!0,l.push(t[_]))}do{o(e,0,y);for(var b=0;b<g;b++){for(var x=1/0,E=0,w=0;w<e;w++)(h=v?n(t[b],l[w]):Math.abs(t[b]-l[w]))<=x&&(x=h,E=w);c[b]=E,y[E]++}for(var k=[],S=(u=[],0);S<e;S++)k[S]=v?o(p,0,k[S]):0,u[S]=l[S];if(v){for(var C=0;C<e;C++)l[C]=[];for(var O=0;O<g;O++)for(var I=k[c[O]],M=t[O],R=0;R<p;R++)I[R]+=M[R];f=!0;for(var T=0;T<e;T++){for(var P=l[T],L=k[T],N=u[T],A=y[T],j=0;j<p;j++)P[j]=L[j]/A||0;if(f)for(var D=0;D<p;D++)if(N[D]!=P[D]){f=!1;break}}}else{for(var F=0;F<g;F++)k[c[F]]+=t[F];for(var z=0;z<e;z++)l[z]=k[z]/y[z]||0;f=!0;for(var G=0;G<e;G++)if(u[G]!=l[G]){f=!1;break}}f=f||--d<=0}while(!f);return{it:1e4-d,k:e,idxs:c,centroids:l}}}()),Xr=Ae;function Wr(t,e){var n=!1;return R(function(t){if(t.length<3)return[];t.sort(Zr);for(var e,n,i,r,o,s,a=t.length-1,l=t[a].x,u=t[0].x,c=t[a].y,h=c;a--;)t[a].y<c&&(c=t[a].y),t[a].y>h&&(h=t[a].y);var f,d=u-l,g=h-c,p=d>g?d:g,v=.5*(u+l),y=.5*(h+c),m=[new Hr({__sentinel:!0,x:v-20*p,y:y-p},{__sentinel:!0,x:v,y:y+20*p},{__sentinel:!0,x:v+20*p,y:y-p})],_=[],b=[];for(a=t.length;a--;){for(b.length=0,f=m.length;f--;)(d=t[a].x-m[f].x)>0&&d*d>m[f].r?(_.push(m[f]),m.splice(f,1)):d*d+(g=t[a].y-m[f].y)*g>m[f].r||(b.push(m[f].a,m[f].b,m[f].b,m[f].c,m[f].c,m[f].a),m.splice(f,1));for(Kr(b),f=b.length;f;)n=b[--f],e=b[--f],i=t[a],r=n.x-e.x,o=n.y-e.y,s=2*(r*(i.y-n.y)-o*(i.x-n.x)),Math.abs(s)>1e-12&&m.push(new Hr(e,n,i))}for(Array.prototype.push.apply(_,m),a=_.length;a--;)(_[a].a.__sentinel||_[a].b.__sentinel||_[a].c.__sentinel)&&_.splice(a,1);return _}(t.features.map((function(t){var i={x:t.geometry.coordinates[0],y:t.geometry.coordinates[1]};return e?i.z=t.properties[e]:3===t.geometry.coordinates.length&&(n=!0,i.z=t.geometry.coordinates[2]),i}))).map((function(t){var e=[t.a.x,t.a.y],i=[t.b.x,t.b.y],r=[t.c.x,t.c.y],o={};return n?(e.push(t.a.z),i.push(t.b.z),r.push(t.c.z)):o={a:t.a.z,b:t.b.z,c:t.c.z},C([[e,i,r,e]],o)})))}var Hr=s((function t(e,n,i){r(this,t),this.a=e,this.b=n,this.c=i;var o,s,a=n.x-e.x,l=n.y-e.y,u=i.x-e.x,c=i.y-e.y,h=a*(e.x+n.x)+l*(e.y+n.y),f=u*(e.x+i.x)+c*(e.y+i.y),d=2*(a*(i.y-n.y)-l*(i.x-n.x));this.x=(c*h-l*f)/d,this.y=(a*f-u*h)/d,o=this.x-e.x,s=this.y-e.y,this.r=o*o+s*s}));function Zr(t,e){return e.x-t.x}function Kr(t){var e,n,i,r,o,s=t.length;t:for(;s;)for(n=t[--s],e=t[--s],i=s;i;)if(o=t[--i],e===(r=t[--i])&&n===o||e===o&&n===r){t.splice(s,2),t.splice(i,2),s-=2;continue t}}function Jr(t){return t}function Qr(t,e){var n=function(t){if(null==t)return Jr;var e,n,i=t.scale[0],r=t.scale[1],o=t.translate[0],s=t.translate[1];return function(t,a){a||(e=n=0);var l=2,u=t.length,c=new Array(u);for(c[0]=(e+=t[0])*i+o,c[1]=(n+=t[1])*r+s;l<u;)c[l]=t[l],++l;return c}}(t.transform),i=t.arcs;function r(t,e){e.length&&e.pop();for(var r=i[t<0?~t:t],o=0,s=r.length;o<s;++o)e.push(n(r[o],o));t<0&&function(t,e){for(var n,i=t.length,r=i-e;r<--i;)n=t[r],t[r++]=t[i],t[i]=n}(e,s)}function o(t){return n(t)}function s(t){for(var e=[],n=0,i=t.length;n<i;++n)r(t[n],e);return e.length<2&&e.push(e[0]),e}function a(t){for(var e=s(t);e.length<4;)e.push(e[0]);return e}function l(t){return t.map(a)}return function t(e){var n,i=e.type;switch(i){case"GeometryCollection":return{type:i,geometries:e.geometries.map(t)};case"Point":n=o(e.coordinates);break;case"MultiPoint":n=e.coordinates.map(o);break;case"LineString":n=s(e.arcs);break;case"MultiLineString":n=e.arcs.map(s);break;case"Polygon":n=l(e.arcs);break;case"MultiPolygon":n=e.arcs.map(l);break;default:return null}return{type:i,coordinates:n}}(e)}function $r(t){return Qr(t,to.apply(this,arguments))}function to(t,e){var n={},i=[],r=[];function o(t){t.forEach((function(e){e.forEach((function(e){(n[e=e<0?~e:e]||(n[e]=[])).push(t)}))})),i.push(t)}function s(e){return function(t){for(var e,n=-1,i=t.length,r=t[i-1],o=0;++n<i;)e=r,r=t[n],o+=e[0]*r[1]-e[1]*r[0];return Math.abs(o)}(Qr(t,{type:"Polygon",arcs:[e]}).coordinates[0])}return e.forEach((function t(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(t);break;case"Polygon":o(e.arcs);break;case"MultiPolygon":e.arcs.forEach(o)}})),i.forEach((function(t){if(!t._){var e=[],i=[t];for(t._=1,r.push(e);t=i.pop();)e.push(t),t.forEach((function(t){t.forEach((function(t){n[t<0?~t:t].forEach((function(t){t._||(t._=1,i.push(t))}))}))}))}})),i.forEach((function(t){delete t._})),{type:"MultiPolygon",arcs:r.map((function(e){var i,r=[];if(e.forEach((function(t){t.forEach((function(t){t.forEach((function(t){n[t<0?~t:t].length<2&&r.push(t)}))}))})),(i=(r=function(t,e){var n={},i={},r={},o=[],s=-1;function a(t,e){for(var i in t){var r=t[i];delete e[r.start],delete r.start,delete r.end,r.forEach((function(t){n[t<0?~t:t]=1})),o.push(r)}}return e.forEach((function(n,i){var r,o=t.arcs[n<0?~n:n];o.length<3&&!o[1][0]&&!o[1][1]&&(r=e[++s],e[s]=n,e[i]=r)})),e.forEach((function(e){var n,o,s=function(e){var n,i=t.arcs[e<0?~e:e],r=i[0];return t.transform?(n=[0,0],i.forEach((function(t){n[0]+=t[0],n[1]+=t[1]}))):n=i[i.length-1],e<0?[n,r]:[r,n]}(e),a=s[0],l=s[1];if(n=r[a])if(delete r[n.end],n.push(e),n.end=l,o=i[l]){delete i[o.start];var u=o===n?n:n.concat(o);i[u.start=n.start]=r[u.end=o.end]=u}else i[n.start]=r[n.end]=n;else if(n=i[l])if(delete i[n.start],n.unshift(e),n.start=a,o=r[a]){delete r[o.end];var c=o===n?n:o.concat(n);i[c.start=o.start]=r[c.end=n.end]=c}else i[n.start]=r[n.end]=n;else i[(n=[e]).start=a]=r[n.end=l]=n})),a(r,i),a(i,r),e.forEach((function(t){n[t<0?~t:t]||o.push([t])})),o}(t,r)).length)>1)for(var o,a,l=1,u=s(r[0]);l<i;++l)(o=s(r[l]))>u&&(a=r[0],r[0]=r[l],r[l]=a,u=o);return r})).filter((function(t){return t.length>0}))}}var eo=Object.prototype.hasOwnProperty;function no(t,e,n,i,r,o){3===arguments.length&&(i=o=Array,r=null);for(var s=new i(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),a=new o(t),l=t-1,u=0;u<t;++u)s[u]=r;return{set:function(i,o){for(var u=e(i)&l,c=s[u],h=0;c!=r;){if(n(c,i))return a[u]=o;if(++h>=t)throw new Error("full hashmap");c=s[u=u+1&l]}return s[u]=i,a[u]=o,o},maybeSet:function(i,o){for(var u=e(i)&l,c=s[u],h=0;c!=r;){if(n(c,i))return a[u];if(++h>=t)throw new Error("full hashmap");c=s[u=u+1&l]}return s[u]=i,a[u]=o,o},get:function(i,o){for(var u=e(i)&l,c=s[u],h=0;c!=r;){if(n(c,i))return a[u];if(++h>=t)break;c=s[u=u+1&l]}return o},keys:function(){for(var t=[],e=0,n=s.length;e<n;++e){var i=s[e];i!=r&&t.push(i)}return t}}}function io(t,e){return t[0]===e[0]&&t[1]===e[1]}var ro=new ArrayBuffer(16),oo=new Float64Array(ro),so=new Uint32Array(ro);function ao(t){oo[0]=t[0],oo[1]=t[1];var e=so[0]^so[1];return 2147483647&(e<<5^e>>7^so[2]^so[3])}function lo(t,e,n,i){uo(t,e,n),uo(t,e,e+i),uo(t,e+i,n)}function uo(t,e,n){for(var i,r=e+(n---e>>1);e<r;++e,--n)i=t[e],t[e]=t[n],t[n]=i}function co(t){var e={type:"GeometryCollection",geometries:t.features.map(ho)};return null!=t.bbox&&(e.bbox=t.bbox),e}function ho(t){var e,n=fo(t.geometry);for(e in null!=t.id&&(n.id=t.id),null!=t.bbox&&(n.bbox=t.bbox),t.properties){n.properties=t.properties;break}return n}function fo(t){if(null==t)return{type:null};var e="GeometryCollection"===t.type?{type:"GeometryCollection",geometries:t.geometries.map(fo)}:"Point"===t.type||"MultiPoint"===t.type?{type:t.type,coordinates:t.coordinates}:{type:t.type,arcs:t.coordinates};return null!=t.bbox&&(e.bbox=t.bbox),e}function go(t,e){var n=function(t){var e=1/0,n=1/0,i=-1/0,r=-1/0;function o(t){null!=t&&eo.call(s,t.type)&&s[t.type](t)}var s={GeometryCollection:function(t){t.geometries.forEach(o)},Point:function(t){a(t.coordinates)},MultiPoint:function(t){t.coordinates.forEach(a)},LineString:function(t){l(t.arcs)},MultiLineString:function(t){t.arcs.forEach(l)},Polygon:function(t){t.arcs.forEach(l)},MultiPolygon:function(t){t.arcs.forEach(u)}};function a(t){var o=t[0],s=t[1];o<e&&(e=o),o>i&&(i=o),s<n&&(n=s),s>r&&(r=s)}function l(t){t.forEach(a)}function u(t){t.forEach(l)}for(var c in t)o(t[c]);return i>=e&&r>=n?[e,n,i,r]:void 0}(t=function(t){var e,n,i={};for(e in t)i[e]=null==(n=t[e])?{type:null}:("FeatureCollection"===n.type?co:"Feature"===n.type?ho:fo)(n);return i}(t)),i=function(t){var e,n,i,r,o=t.coordinates,s=t.lines,a=t.rings,l=s.length+a.length;for(delete t.lines,delete t.rings,i=0,r=s.length;i<r;++i)for(e=s[i];e=e.next;)++l;for(i=0,r=a.length;i<r;++i)for(n=a[i];n=n.next;)++l;var u=no(2*l*1.4,ao,io),c=t.arcs=[];for(i=0,r=s.length;i<r;++i){e=s[i];do{h(e)}while(e=e.next)}for(i=0,r=a.length;i<r;++i)if((n=a[i]).next)do{h(n)}while(n=n.next);else f(n);function h(t){var e,n,i,r,s,a,l,h;if(i=u.get(e=o[t[0]]))for(l=0,h=i.length;l<h;++l)if(d(r=i[l],t))return t[0]=r[0],void(t[1]=r[1]);if(s=u.get(n=o[t[1]]))for(l=0,h=s.length;l<h;++l)if(g(a=s[l],t))return t[1]=a[0],void(t[0]=a[1]);i?i.push(t):u.set(e,[t]),s?s.push(t):u.set(n,[t]),c.push(t)}function f(t){var e,n,i,r,s;if(n=u.get(o[t[0]]))for(r=0,s=n.length;r<s;++r){if(p(i=n[r],t))return t[0]=i[0],void(t[1]=i[1]);if(v(i,t))return t[0]=i[1],void(t[1]=i[0])}if(n=u.get(e=o[t[0]+y(t)]))for(r=0,s=n.length;r<s;++r){if(p(i=n[r],t))return t[0]=i[0],void(t[1]=i[1]);if(v(i,t))return t[0]=i[1],void(t[1]=i[0])}n?n.push(t):u.set(e,[t]),c.push(t)}function d(t,e){var n=t[0],i=e[0],r=t[1];if(n-r!=i-e[1])return!1;for(;n<=r;++n,++i)if(!io(o[n],o[i]))return!1;return!0}function g(t,e){var n=t[0],i=e[0],r=t[1],s=e[1];if(n-r!=i-s)return!1;for(;n<=r;++n,--s)if(!io(o[n],o[s]))return!1;return!0}function p(t,e){var n=t[0],i=e[0],r=t[1]-n;if(r!==e[1]-i)return!1;for(var s=y(t),a=y(e),l=0;l<r;++l)if(!io(o[n+(l+s)%r],o[i+(l+a)%r]))return!1;return!0}function v(t,e){var n=t[0],i=e[0],r=t[1],s=e[1],a=r-n;if(a!==s-i)return!1;for(var l=y(t),u=a-y(e),c=0;c<a;++c)if(!io(o[n+(c+l)%a],o[s-(c+u)%a]))return!1;return!0}function y(t){for(var e=t[0],n=t[1],i=e,r=i,s=o[i];++i<n;){var a=o[i];(a[0]<s[0]||a[0]===s[0]&&a[1]<s[1])&&(r=i,s=a)}return r-e}return t}(function(t){var e,n,i,r=function(t){var e,n,i,r,o=t.coordinates,s=t.lines,a=t.rings,l=function(){for(var t=no(1.4*o.length,x,E,Int32Array,-1,Int32Array),e=new Int32Array(o.length),n=0,i=o.length;n<i;++n)e[n]=t.maybeSet(n,n);return e}(),u=new Int32Array(o.length),c=new Int32Array(o.length),h=new Int32Array(o.length),f=new Int8Array(o.length),d=0;for(e=0,n=o.length;e<n;++e)u[e]=c[e]=h[e]=-1;for(e=0,n=s.length;e<n;++e){var g=s[e],p=g[0],v=g[1];for(i=l[p],r=l[++p],++d,f[i]=1;++p<=v;)b(e,i,i=r,r=l[p]);++d,f[r]=1}for(e=0,n=o.length;e<n;++e)u[e]=-1;for(e=0,n=a.length;e<n;++e){var y=a[e],m=y[0]+1,_=y[1];for(b(e,l[_-1],i=l[m-1],r=l[m]);++m<=_;)b(e,i,i=r,r=l[m])}function b(t,e,n,i){if(u[n]!==t){u[n]=t;var r=c[n];if(r>=0){var o=h[n];r===e&&o===i||r===i&&o===e||(++d,f[n]=1)}else c[n]=e,h[n]=i}}function x(t){return ao(o[t])}function E(t,e){return io(o[t],o[e])}u=c=h=null;var w,k=function(t,e,n,i,r){3===arguments.length&&(i=Array,r=null);for(var o=new i(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),s=t-1,a=0;a<t;++a)o[a]=r;return{add:function(i){for(var a=e(i)&s,l=o[a],u=0;l!=r;){if(n(l,i))return!0;if(++u>=t)throw new Error("full hashset");l=o[a=a+1&s]}return o[a]=i,!0},has:function(i){for(var a=e(i)&s,l=o[a],u=0;l!=r;){if(n(l,i))return!0;if(++u>=t)break;l=o[a=a+1&s]}return!1},values:function(){for(var t=[],e=0,n=o.length;e<n;++e){var i=o[e];i!=r&&t.push(i)}return t}}}(1.4*d,ao,io);for(e=0,n=o.length;e<n;++e)f[w=l[e]]&&k.add(o[w]);return k}(t),o=t.coordinates,s=t.lines,a=t.rings;for(n=0,i=s.length;n<i;++n)for(var l=s[n],u=l[0],c=l[1];++u<c;)r.has(o[u])&&(e={0:u,1:l[1]},l[1]=u,l=l.next=e);for(n=0,i=a.length;n<i;++n)for(var h=a[n],f=h[0],d=f,g=h[1],p=r.has(o[f]);++d<g;)r.has(o[d])&&(p?(e={0:d,1:h[1]},h[1]=d,h=h.next=e):(lo(o,f,g,g-d),o[g]=o[f],p=!0,d=f));return t}(function(t){var e=-1,n=[],i=[],r=[];function o(t){t&&eo.call(s,t.type)&&s[t.type](t)}var s={GeometryCollection:function(t){t.geometries.forEach(o)},LineString:function(t){t.arcs=a(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(a)},Polygon:function(t){t.arcs=t.arcs.map(l)},MultiPolygon:function(t){t.arcs=t.arcs.map(u)}};function a(t){for(var i=0,o=t.length;i<o;++i)r[++e]=t[i];var s={0:e-o+1,1:e};return n.push(s),s}function l(t){for(var n=0,o=t.length;n<o;++n)r[++e]=t[n];var s={0:e-o+1,1:e};return i.push(s),s}function u(t){return t.map(l)}for(var c in t)o(t[c]);return{type:"Topology",coordinates:r,lines:n,rings:i,objects:t}}(t))),r=i.coordinates,o=no(1.4*i.arcs.length,po,vo);function s(t){t&&eo.call(a,t.type)&&a[t.type](t)}t=i.objects,i.bbox=n,i.arcs=i.arcs.map((function(t,e){return o.set(t,e),r.slice(t[0],t[1]+1)})),delete i.coordinates,r=null;var a={GeometryCollection:function(t){t.geometries.forEach(s)},LineString:function(t){t.arcs=l(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(l)},Polygon:function(t){t.arcs=t.arcs.map(l)},MultiPolygon:function(t){t.arcs=t.arcs.map(u)}};function l(t){var e=[];do{var n=o.get(t);e.push(t[0]<t[1]?n:~n)}while(t=t.next);return e}function u(t){return t.map(l)}for(var c in t)s(t[c]);return i}function po(t){var e,n=t[0],i=t[1];return i<n&&(e=n,n=i,i=e),n+31*i}function vo(t,e){var n,i=t[0],r=t[1],o=e[0],s=e[1];return r<i&&(n=i,i=r,r=n),s<o&&(n=o,o=s,s=n),i===o&&r===s}function yo(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!X(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==it(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=Sr(t));var i=[],r=kt(t,(function(t,e){return function(t,e){var n,i=t.geometry.coordinates,r=e.geometry.coordinates,o=mo(i[0]),s=mo(i[i.length-1]),a=mo(r[0]),l=mo(r[r.length-1]);if(o===l)n=r.concat(i.slice(1));else if(a===s)n=i.concat(r.slice(1));else if(o===a)n=i.slice(1).reverse().concat(r);else{if(s!==l)return null;n=i.concat(r.reverse().slice(1))}return I(n)}(t,e)||(i.push(t),e)}));return r&&i.push(r),i.length?1===i.length?i[0]:T(i.map((function(t){return t.coordinates}))):null}function mo(t){return t[0].toString()+","+t[1].toString()}function _o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!X(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==it(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=Sr(t));var i=function(t){var e={};_t(t,(function(t){e[t.geometry.type]=!0}));var n=Object.keys(e);return 1===n.length?n[0]:null}(t);if(!i)throw new Error("geojson must be homogenous");var r=t;switch(i){case"LineString":return yo(r,e);case"Polygon":return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("FeatureCollection"!==it(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==e.mutate&&void 0!==e.mutate||(t=Sr(t));var n=[];_t(t,(function(t){n.push(t.geometry)}));var i=go({geoms:N(n).geometry});return $r(i,i.objects.geoms.geometries)}(r,e);default:throw new Error(i+" is not supported")}}var bo=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,xo=Math.ceil,Eo=Math.floor,wo="[BigNumber Error] ",ko=wo+"Number primitive has more than 15 significant digits: ",So=1e14,Co=9007199254740991,Oo=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],Io=1e7,Mo=1e9;function Ro(t){var e=0|t;return t>0||t===e?e:e-1}function To(t){for(var e,n,i=1,r=t.length,o=t[0]+"";i<r;){for(n=14-(e=t[i++]+"").length;n--;e="0"+e);o+=e}for(r=o.length;48===o.charCodeAt(--r););return o.slice(0,r+1||1)}function Po(t,e){var n,i,r=t.c,o=e.c,s=t.s,a=e.s,l=t.e,u=e.e;if(!s||!a)return null;if(n=r&&!r[0],i=o&&!o[0],n||i)return n?i?0:-a:s;if(s!=a)return s;if(n=s<0,i=l==u,!r||!o)return i?0:!r^n?1:-1;if(!i)return l>u^n?1:-1;for(a=(l=r.length)<(u=o.length)?l:u,s=0;s<a;s++)if(r[s]!=o[s])return r[s]>o[s]^n?1:-1;return l==u?0:l>u^n?1:-1}function Lo(t,e,n,i){if(t<e||t>n||t!==Eo(t))throw Error(wo+(i||"Argument")+("number"==typeof t?t<e||t>n?" out of range: ":" not an integer: ":" not a primitive number: ")+String(t))}function No(t){var e=t.c.length-1;return Ro(t.e/14)==e&&t.c[e]%2!=0}function Ao(t,e){return(t.length>1?t.charAt(0)+"."+t.slice(1):t)+(e<0?"e":"e+")+e}function jo(t,e,n){var i,r;if(e<0){for(r=n+".";++e;r+=n);t=r+t}else if(++e>(i=t.length)){for(r=n,e-=i;--e;r+=n);t+=r}else e<i&&(t=t.slice(0,e)+"."+t.slice(e));return t}var Do=function t(e){var n,i,r,o,s,a,l,u,c,h,f=O.prototype={constructor:O,toString:null,valueOf:null},d=new O(1),g=20,p=4,v=-7,m=21,_=-1e7,b=1e7,x=!1,E=1,w=0,k={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xa0",suffix:""},S="0123456789abcdefghijklmnopqrstuvwxyz",C=!0;function O(t,e){var n,o,s,a,l,u,c,h,f=this;if(!(f instanceof O))return new O(t,e);if(null==e){if(t&&!0===t._isBigNumber)return f.s=t.s,void(!t.c||t.e>b?f.c=f.e=null:t.e<_?f.c=[f.e=0]:(f.e=t.e,f.c=t.c.slice()));if((u="number"==typeof t)&&0*t==0){if(f.s=1/t<0?(t=-t,-1):1,t===~~t){for(a=0,l=t;l>=10;l/=10,a++);return void(a>b?f.c=f.e=null:(f.e=a,f.c=[t]))}h=String(t)}else{if(!bo.test(h=String(t)))return r(f,h,u);f.s=45==h.charCodeAt(0)?(h=h.slice(1),-1):1}(a=h.indexOf("."))>-1&&(h=h.replace(".","")),(l=h.search(/e/i))>0?(a<0&&(a=l),a+=+h.slice(l+1),h=h.substring(0,l)):a<0&&(a=h.length)}else{if(Lo(e,2,S.length,"Base"),10==e&&C)return T(f=new O(t),g+f.e+1,p);if(h=String(t),u="number"==typeof t){if(0*t!=0)return r(f,h,u,e);if(f.s=1/t<0?(h=h.slice(1),-1):1,O.DEBUG&&h.replace(/^0\.0*|\./,"").length>15)throw Error(ko+t)}else f.s=45===h.charCodeAt(0)?(h=h.slice(1),-1):1;for(n=S.slice(0,e),a=l=0,c=h.length;l<c;l++)if(n.indexOf(o=h.charAt(l))<0){if("."==o){if(l>a){a=c;continue}}else if(!s&&(h==h.toUpperCase()&&(h=h.toLowerCase())||h==h.toLowerCase()&&(h=h.toUpperCase()))){s=!0,l=-1,a=0;continue}return r(f,String(t),u,e)}u=!1,(a=(h=i(h,e,10,f.s)).indexOf("."))>-1?h=h.replace(".",""):a=h.length}for(l=0;48===h.charCodeAt(l);l++);for(c=h.length;48===h.charCodeAt(--c););if(h=h.slice(l,++c)){if(c-=l,u&&O.DEBUG&&c>15&&(t>Co||t!==Eo(t)))throw Error(ko+f.s*t);if((a=a-l-1)>b)f.c=f.e=null;else if(a<_)f.c=[f.e=0];else{if(f.e=a,f.c=[],l=(a+1)%14,a<0&&(l+=14),l<c){for(l&&f.c.push(+h.slice(0,l)),c-=14;l<c;)f.c.push(+h.slice(l,l+=14));l=14-(h=h.slice(l)).length}else l-=c;for(;l--;h+="0");f.c.push(+h)}}else f.c=[f.e=0]}function I(t,e,n,i){var r,o,s,a,l;if(null==n?n=p:Lo(n,0,8),!t.c)return t.toString();if(r=t.c[0],s=t.e,null==e)l=To(t.c),l=1==i||2==i&&(s<=v||s>=m)?Ao(l,s):jo(l,s,"0");else if(o=(t=T(new O(t),e,n)).e,a=(l=To(t.c)).length,1==i||2==i&&(e<=o||o<=v)){for(;a<e;l+="0",a++);l=Ao(l,o)}else if(e-=s,l=jo(l,o,"0"),o+1>a){if(--e>0)for(l+=".";e--;l+="0");}else if((e+=o-a)>0)for(o+1==a&&(l+=".");e--;l+="0");return t.s<0&&r?"-"+l:l}function M(t,e){for(var n,i,r=1,o=new O(t[0]);r<t.length;r++)(!(i=new O(t[r])).s||(n=Po(o,i))===e||0===n&&o.s===e)&&(o=i);return o}function R(t,e,n){for(var i=1,r=e.length;!e[--r];e.pop());for(r=e[0];r>=10;r/=10,i++);return(n=i+14*n-1)>b?t.c=t.e=null:n<_?t.c=[t.e=0]:(t.e=n,t.c=e),t}function T(t,e,n,i){var r,o,s,a,l,u,c,h=t.c,f=Oo;if(h){t:{for(r=1,a=h[0];a>=10;a/=10,r++);if((o=e-r)<0)o+=14,s=e,l=h[u=0],c=Eo(l/f[r-s-1]%10);else if((u=xo((o+1)/14))>=h.length){if(!i)break t;for(;h.length<=u;h.push(0));l=c=0,r=1,s=(o%=14)-14+1}else{for(l=a=h[u],r=1;a>=10;a/=10,r++);c=(s=(o%=14)-14+r)<0?0:Eo(l/f[r-s-1]%10)}if(i=i||e<0||null!=h[u+1]||(s<0?l:l%f[r-s-1]),i=n<4?(c||i)&&(0==n||n==(t.s<0?3:2)):c>5||5==c&&(4==n||i||6==n&&(o>0?s>0?l/f[r-s]:0:h[u-1])%10&1||n==(t.s<0?8:7)),e<1||!h[0])return h.length=0,i?(e-=t.e+1,h[0]=f[(14-e%14)%14],t.e=-e||0):h[0]=t.e=0,t;if(0==o?(h.length=u,a=1,u--):(h.length=u+1,a=f[14-o],h[u]=s>0?Eo(l/f[r-s]%f[s])*a:0),i)for(;;){if(0==u){for(o=1,s=h[0];s>=10;s/=10,o++);for(s=h[0]+=a,a=1;s>=10;s/=10,a++);o!=a&&(t.e++,h[0]==So&&(h[0]=1));break}if(h[u]+=a,h[u]!=So)break;h[u--]=0,a=1}for(o=h.length;0===h[--o];h.pop());}t.e>b?t.c=t.e=null:t.e<_&&(t.c=[t.e=0])}return t}function P(t){var e,n=t.e;return null===n?t.toString():(e=To(t.c),e=n<=v||n>=m?Ao(e,n):jo(e,n,"0"),t.s<0?"-"+e:e)}return O.clone=t,O.ROUND_UP=0,O.ROUND_DOWN=1,O.ROUND_CEIL=2,O.ROUND_FLOOR=3,O.ROUND_HALF_UP=4,O.ROUND_HALF_DOWN=5,O.ROUND_HALF_EVEN=6,O.ROUND_HALF_CEIL=7,O.ROUND_HALF_FLOOR=8,O.EUCLID=9,O.config=O.set=function(t){var e,n;if(null!=t){if("object"!=y(t))throw Error(wo+"Object expected: "+t);if(t.hasOwnProperty(e="DECIMAL_PLACES")&&(Lo(n=t[e],0,Mo,e),g=n),t.hasOwnProperty(e="ROUNDING_MODE")&&(Lo(n=t[e],0,8,e),p=n),t.hasOwnProperty(e="EXPONENTIAL_AT")&&((n=t[e])&&n.pop?(Lo(n[0],-Mo,0,e),Lo(n[1],0,Mo,e),v=n[0],m=n[1]):(Lo(n,-Mo,Mo,e),v=-(m=n<0?-n:n))),t.hasOwnProperty(e="RANGE"))if((n=t[e])&&n.pop)Lo(n[0],-Mo,-1,e),Lo(n[1],1,Mo,e),_=n[0],b=n[1];else{if(Lo(n,-Mo,Mo,e),!n)throw Error(wo+e+" cannot be zero: "+n);_=-(b=n<0?-n:n)}if(t.hasOwnProperty(e="CRYPTO")){if((n=t[e])!==!!n)throw Error(wo+e+" not true or false: "+n);if(n){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw x=!n,Error(wo+"crypto unavailable");x=n}else x=n}if(t.hasOwnProperty(e="MODULO_MODE")&&(Lo(n=t[e],0,9,e),E=n),t.hasOwnProperty(e="POW_PRECISION")&&(Lo(n=t[e],0,Mo,e),w=n),t.hasOwnProperty(e="FORMAT")){if("object"!=y(n=t[e]))throw Error(wo+e+" not an object: "+n);k=n}if(t.hasOwnProperty(e="ALPHABET")){if("string"!=typeof(n=t[e])||/^.?$|[+\-.\s]|(.).*\1/.test(n))throw Error(wo+e+" invalid: "+n);C="0123456789"==n.slice(0,10),S=n}}return{DECIMAL_PLACES:g,ROUNDING_MODE:p,EXPONENTIAL_AT:[v,m],RANGE:[_,b],CRYPTO:x,MODULO_MODE:E,POW_PRECISION:w,FORMAT:k,ALPHABET:S}},O.isBigNumber=function(t){if(!t||!0!==t._isBigNumber)return!1;if(!O.DEBUG)return!0;var e,n,i=t.c,r=t.e,o=t.s;t:if("[object Array]"=={}.toString.call(i)){if((1===o||-1===o)&&r>=-Mo&&r<=Mo&&r===Eo(r)){if(0===i[0]){if(0===r&&1===i.length)return!0;break t}if((e=(r+1)%14)<1&&(e+=14),String(i[0]).length==e){for(e=0;e<i.length;e++)if((n=i[e])<0||n>=So||n!==Eo(n))break t;if(0!==n)return!0}}}else if(null===i&&null===r&&(null===o||1===o||-1===o))return!0;throw Error(wo+"Invalid BigNumber: "+t)},O.maximum=O.max=function(){return M(arguments,-1)},O.minimum=O.min=function(){return M(arguments,1)},O.random=(o=9007199254740992,s=Math.random()*o&2097151?function(){return Eo(Math.random()*o)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(t){var e,n,i,r,o,a=0,l=[],u=new O(d);if(null==t?t=g:Lo(t,0,Mo),r=xo(t/14),x)if(crypto.getRandomValues){for(e=crypto.getRandomValues(new Uint32Array(r*=2));a<r;)(o=131072*e[a]+(e[a+1]>>>11))>=9e15?(n=crypto.getRandomValues(new Uint32Array(2)),e[a]=n[0],e[a+1]=n[1]):(l.push(o%1e14),a+=2);a=r/2}else{if(!crypto.randomBytes)throw x=!1,Error(wo+"crypto unavailable");for(e=crypto.randomBytes(r*=7);a<r;)(o=281474976710656*(31&e[a])+1099511627776*e[a+1]+4294967296*e[a+2]+16777216*e[a+3]+(e[a+4]<<16)+(e[a+5]<<8)+e[a+6])>=9e15?crypto.randomBytes(7).copy(e,a):(l.push(o%1e14),a+=7);a=r/7}if(!x)for(;a<r;)(o=s())<9e15&&(l[a++]=o%1e14);for(t%=14,(r=l[--a])&&t&&(o=Oo[14-t],l[a]=Eo(r/o)*o);0===l[a];l.pop(),a--);if(a<0)l=[i=0];else{for(i=-1;0===l[0];l.splice(0,1),i-=14);for(a=1,o=l[0];o>=10;o/=10,a++);a<14&&(i-=14-a)}return u.e=i,u.c=l,u}),O.sum=function(){for(var t=1,e=arguments,n=new O(e[0]);t<e.length;)n=n.plus(e[t++]);return n},i=function(){var t="0123456789";function e(t,e,n,i){for(var r,o,s=[0],a=0,l=t.length;a<l;){for(o=s.length;o--;s[o]*=e);for(s[0]+=i.indexOf(t.charAt(a++)),r=0;r<s.length;r++)s[r]>n-1&&(null==s[r+1]&&(s[r+1]=0),s[r+1]+=s[r]/n|0,s[r]%=n)}return s.reverse()}return function(i,r,o,s,a){var l,u,c,h,f,d,v,y,m=i.indexOf("."),_=g,b=p;for(m>=0&&(h=w,w=0,i=i.replace(".",""),d=(y=new O(r)).pow(i.length-m),w=h,y.c=e(jo(To(d.c),d.e,"0"),10,o,t),y.e=y.c.length),c=h=(v=e(i,r,o,a?(l=S,t):(l=t,S))).length;0==v[--h];v.pop());if(!v[0])return l.charAt(0);if(m<0?--c:(d.c=v,d.e=c,d.s=s,v=(d=n(d,y,_,b,o)).c,f=d.r,c=d.e),m=v[u=c+_+1],h=o/2,f=f||u<0||null!=v[u+1],f=b<4?(null!=m||f)&&(0==b||b==(d.s<0?3:2)):m>h||m==h&&(4==b||f||6==b&&1&v[u-1]||b==(d.s<0?8:7)),u<1||!v[0])i=f?jo(l.charAt(1),-_,l.charAt(0)):l.charAt(0);else{if(v.length=u,f)for(--o;++v[--u]>o;)v[u]=0,u||(++c,v=[1].concat(v));for(h=v.length;!v[--h];);for(m=0,i="";m<=h;i+=l.charAt(v[m++]));i=jo(i,c,l.charAt(0))}return i}}(),n=function(){function t(t,e,n){var i,r,o,s,a=0,l=t.length,u=e%Io,c=e/Io|0;for(t=t.slice();l--;)a=((r=u*(o=t[l]%Io)+(i=c*o+(s=t[l]/Io|0)*u)%Io*Io+a)/n|0)+(i/Io|0)+c*s,t[l]=r%n;return a&&(t=[a].concat(t)),t}function e(t,e,n,i){var r,o;if(n!=i)o=n>i?1:-1;else for(r=o=0;r<n;r++)if(t[r]!=e[r]){o=t[r]>e[r]?1:-1;break}return o}function n(t,e,n,i){for(var r=0;n--;)t[n]-=r,r=t[n]<e[n]?1:0,t[n]=r*i+t[n]-e[n];for(;!t[0]&&t.length>1;t.splice(0,1));}return function(i,r,o,s,a){var l,u,c,h,f,d,g,p,v,y,m,_,b,x,E,w,k,S=i.s==r.s?1:-1,C=i.c,I=r.c;if(!(C&&C[0]&&I&&I[0]))return new O(i.s&&r.s&&(C?!I||C[0]!=I[0]:I)?C&&0==C[0]||!I?0*S:S/0:NaN);for(v=(p=new O(S)).c=[],S=o+(u=i.e-r.e)+1,a||(a=So,u=Ro(i.e/14)-Ro(r.e/14),S=S/14|0),c=0;I[c]==(C[c]||0);c++);if(I[c]>(C[c]||0)&&u--,S<0)v.push(1),h=!0;else{for(x=C.length,w=I.length,c=0,S+=2,(f=Eo(a/(I[0]+1)))>1&&(I=t(I,f,a),C=t(C,f,a),w=I.length,x=C.length),b=w,m=(y=C.slice(0,w)).length;m<w;y[m++]=0);k=I.slice(),k=[0].concat(k),E=I[0],I[1]>=a/2&&E++;do{if(f=0,(l=e(I,y,w,m))<0){if(_=y[0],w!=m&&(_=_*a+(y[1]||0)),(f=Eo(_/E))>1)for(f>=a&&(f=a-1),g=(d=t(I,f,a)).length,m=y.length;1==e(d,y,g,m);)f--,n(d,w<g?k:I,g,a),g=d.length,l=1;else 0==f&&(l=f=1),g=(d=I.slice()).length;if(g<m&&(d=[0].concat(d)),n(y,d,m,a),m=y.length,-1==l)for(;e(I,y,w,m)<1;)f++,n(y,w<m?k:I,m,a),m=y.length}else 0===l&&(f++,y=[0]);v[c++]=f,y[0]?y[m++]=C[b]||0:(y=[C[b]],m=1)}while((b++<x||null!=y[0])&&S--);h=null!=y[0],v[0]||v.splice(0,1)}if(a==So){for(c=1,S=v[0];S>=10;S/=10,c++);T(p,o+(p.e=c+14*u-1)+1,s,h)}else p.e=u,p.r=+h;return p}}(),a=/^(-?)0([xbo])(?=\w[\w.]*$)/i,l=/^([^.]+)\.$/,u=/^\.([^.]+)$/,c=/^-?(Infinity|NaN)$/,h=/^\s*\+(?=[\w.])|^\s+|\s+$/g,r=function(t,e,n,i){var r,o=n?e:e.replace(h,"");if(c.test(o))t.s=isNaN(o)?null:o<0?-1:1;else{if(!n&&(o=o.replace(a,(function(t,e,n){return r="x"==(n=n.toLowerCase())?16:"b"==n?2:8,i&&i!=r?t:e})),i&&(r=i,o=o.replace(l,"$1").replace(u,"0.$1")),e!=o))return new O(o,r);if(O.DEBUG)throw Error(wo+"Not a"+(i?" base "+i:"")+" number: "+e);t.s=null}t.c=t.e=null},f.absoluteValue=f.abs=function(){var t=new O(this);return t.s<0&&(t.s=1),t},f.comparedTo=function(t,e){return Po(this,new O(t,e))},f.decimalPlaces=f.dp=function(t,e){var n,i,r,o=this;if(null!=t)return Lo(t,0,Mo),null==e?e=p:Lo(e,0,8),T(new O(o),t+o.e+1,e);if(!(n=o.c))return null;if(i=14*((r=n.length-1)-Ro(this.e/14)),r=n[r])for(;r%10==0;r/=10,i--);return i<0&&(i=0),i},f.dividedBy=f.div=function(t,e){return n(this,new O(t,e),g,p)},f.dividedToIntegerBy=f.idiv=function(t,e){return n(this,new O(t,e),0,1)},f.exponentiatedBy=f.pow=function(t,e){var n,i,r,o,s,a,l,u,c=this;if((t=new O(t)).c&&!t.isInteger())throw Error(wo+"Exponent not an integer: "+P(t));if(null!=e&&(e=new O(e)),s=t.e>14,!c.c||!c.c[0]||1==c.c[0]&&!c.e&&1==c.c.length||!t.c||!t.c[0])return u=new O(Math.pow(+P(c),s?t.s*(2-No(t)):+P(t))),e?u.mod(e):u;if(a=t.s<0,e){if(e.c?!e.c[0]:!e.s)return new O(NaN);(i=!a&&c.isInteger()&&e.isInteger())&&(c=c.mod(e))}else{if(t.e>9&&(c.e>0||c.e<-1||(0==c.e?c.c[0]>1||s&&c.c[1]>=24e7:c.c[0]<8e13||s&&c.c[0]<=9999975e7)))return o=c.s<0&&No(t)?-0:0,c.e>-1&&(o=1/o),new O(a?1/o:o);w&&(o=xo(w/14+2))}for(s?(n=new O(.5),a&&(t.s=1),l=No(t)):l=(r=Math.abs(+P(t)))%2,u=new O(d);;){if(l){if(!(u=u.times(c)).c)break;o?u.c.length>o&&(u.c.length=o):i&&(u=u.mod(e))}if(r){if(0===(r=Eo(r/2)))break;l=r%2}else if(T(t=t.times(n),t.e+1,1),t.e>14)l=No(t);else{if(0===(r=+P(t)))break;l=r%2}c=c.times(c),o?c.c&&c.c.length>o&&(c.c.length=o):i&&(c=c.mod(e))}return i?u:(a&&(u=d.div(u)),e?u.mod(e):o?T(u,w,p,void 0):u)},f.integerValue=function(t){var e=new O(this);return null==t?t=p:Lo(t,0,8),T(e,e.e+1,t)},f.isEqualTo=f.eq=function(t,e){return 0===Po(this,new O(t,e))},f.isFinite=function(){return!!this.c},f.isGreaterThan=f.gt=function(t,e){return Po(this,new O(t,e))>0},f.isGreaterThanOrEqualTo=f.gte=function(t,e){return 1===(e=Po(this,new O(t,e)))||0===e},f.isInteger=function(){return!!this.c&&Ro(this.e/14)>this.c.length-2},f.isLessThan=f.lt=function(t,e){return Po(this,new O(t,e))<0},f.isLessThanOrEqualTo=f.lte=function(t,e){return-1===(e=Po(this,new O(t,e)))||0===e},f.isNaN=function(){return!this.s},f.isNegative=function(){return this.s<0},f.isPositive=function(){return this.s>0},f.isZero=function(){return!!this.c&&0==this.c[0]},f.minus=function(t,e){var n,i,r,o,s=this,a=s.s;if(e=(t=new O(t,e)).s,!a||!e)return new O(NaN);if(a!=e)return t.s=-e,s.plus(t);var l=s.e/14,u=t.e/14,c=s.c,h=t.c;if(!l||!u){if(!c||!h)return c?(t.s=-e,t):new O(h?s:NaN);if(!c[0]||!h[0])return h[0]?(t.s=-e,t):new O(c[0]?s:3==p?-0:0)}if(l=Ro(l),u=Ro(u),c=c.slice(),a=l-u){for((o=a<0)?(a=-a,r=c):(u=l,r=h),r.reverse(),e=a;e--;r.push(0));r.reverse()}else for(i=(o=(a=c.length)<(e=h.length))?a:e,a=e=0;e<i;e++)if(c[e]!=h[e]){o=c[e]<h[e];break}if(o&&(r=c,c=h,h=r,t.s=-t.s),(e=(i=h.length)-(n=c.length))>0)for(;e--;c[n++]=0);for(e=So-1;i>a;){if(c[--i]<h[i]){for(n=i;n&&!c[--n];c[n]=e);--c[n],c[i]+=So}c[i]-=h[i]}for(;0==c[0];c.splice(0,1),--u);return c[0]?R(t,c,u):(t.s=3==p?-1:1,t.c=[t.e=0],t)},f.modulo=f.mod=function(t,e){var i,r,o=this;return t=new O(t,e),!o.c||!t.s||t.c&&!t.c[0]?new O(NaN):!t.c||o.c&&!o.c[0]?new O(o):(9==E?(r=t.s,t.s=1,i=n(o,t,0,3),t.s=r,i.s*=r):i=n(o,t,0,E),(t=o.minus(i.times(t))).c[0]||1!=E||(t.s=o.s),t)},f.multipliedBy=f.times=function(t,e){var n,i,r,o,s,a,l,u,c,h,f,d,g,p,v,y=this,m=y.c,_=(t=new O(t,e)).c;if(!(m&&_&&m[0]&&_[0]))return!y.s||!t.s||m&&!m[0]&&!_||_&&!_[0]&&!m?t.c=t.e=t.s=null:(t.s*=y.s,m&&_?(t.c=[0],t.e=0):t.c=t.e=null),t;for(i=Ro(y.e/14)+Ro(t.e/14),t.s*=y.s,(l=m.length)<(h=_.length)&&(g=m,m=_,_=g,r=l,l=h,h=r),r=l+h,g=[];r--;g.push(0));for(p=So,v=Io,r=h;--r>=0;){for(n=0,f=_[r]%v,d=_[r]/v|0,o=r+(s=l);o>r;)n=((u=f*(u=m[--s]%v)+(a=d*u+(c=m[s]/v|0)*f)%v*v+g[o]+n)/p|0)+(a/v|0)+d*c,g[o--]=u%p;g[o]=n}return n?++i:g.splice(0,1),R(t,g,i)},f.negated=function(){var t=new O(this);return t.s=-t.s||null,t},f.plus=function(t,e){var n,i=this,r=i.s;if(e=(t=new O(t,e)).s,!r||!e)return new O(NaN);if(r!=e)return t.s=-e,i.minus(t);var o=i.e/14,s=t.e/14,a=i.c,l=t.c;if(!o||!s){if(!a||!l)return new O(r/0);if(!a[0]||!l[0])return l[0]?t:new O(a[0]?i:0*r)}if(o=Ro(o),s=Ro(s),a=a.slice(),r=o-s){for(r>0?(s=o,n=l):(r=-r,n=a),n.reverse();r--;n.push(0));n.reverse()}for((r=a.length)-(e=l.length)<0&&(n=l,l=a,a=n,e=r),r=0;e;)r=(a[--e]=a[e]+l[e]+r)/So|0,a[e]=So===a[e]?0:a[e]%So;return r&&(a=[r].concat(a),++s),R(t,a,s)},f.precision=f.sd=function(t,e){var n,i,r,o=this;if(null!=t&&t!==!!t)return Lo(t,1,Mo),null==e?e=p:Lo(e,0,8),T(new O(o),t,e);if(!(n=o.c))return null;if(i=14*(r=n.length-1)+1,r=n[r]){for(;r%10==0;r/=10,i--);for(r=n[0];r>=10;r/=10,i++);}return t&&o.e+1>i&&(i=o.e+1),i},f.shiftedBy=function(t){return Lo(t,-9007199254740991,Co),this.times("1e"+t)},f.squareRoot=f.sqrt=function(){var t,e,i,r,o,s=this,a=s.c,l=s.s,u=s.e,c=g+4,h=new O("0.5");if(1!==l||!a||!a[0])return new O(!l||l<0&&(!a||a[0])?NaN:a?s:1/0);if(0==(l=Math.sqrt(+P(s)))||l==1/0?(((e=To(a)).length+u)%2==0&&(e+="0"),l=Math.sqrt(+e),u=Ro((u+1)/2)-(u<0||u%2),i=new O(e=l==1/0?"5e"+u:(e=l.toExponential()).slice(0,e.indexOf("e")+1)+u)):i=new O(l+""),i.c[0])for((l=(u=i.e)+c)<3&&(l=0);;)if(o=i,i=h.times(o.plus(n(s,o,c,1))),To(o.c).slice(0,l)===(e=To(i.c)).slice(0,l)){if(i.e<u&&--l,"9999"!=(e=e.slice(l-3,l+1))&&(r||"4999"!=e)){+e&&(+e.slice(1)||"5"!=e.charAt(0))||(T(i,i.e+g+2,1),t=!i.times(i).eq(s));break}if(!r&&(T(o,o.e+g+2,0),o.times(o).eq(s))){i=o;break}c+=4,l+=4,r=1}return T(i,i.e+g+1,p,t)},f.toExponential=function(t,e){return null!=t&&(Lo(t,0,Mo),t++),I(this,t,e,1)},f.toFixed=function(t,e){return null!=t&&(Lo(t,0,Mo),t=t+this.e+1),I(this,t,e)},f.toFormat=function(t,e,n){var i,r=this;if(null==n)null!=t&&e&&"object"==y(e)?(n=e,e=null):t&&"object"==y(t)?(n=t,t=e=null):n=k;else if("object"!=y(n))throw Error(wo+"Argument not an object: "+n);if(i=r.toFixed(t,e),r.c){var o,s=i.split("."),a=+n.groupSize,l=+n.secondaryGroupSize,u=n.groupSeparator||"",c=s[0],h=s[1],f=r.s<0,d=f?c.slice(1):c,g=d.length;if(l&&(o=a,a=l,l=o,g-=o),a>0&&g>0){for(o=g%a||a,c=d.substr(0,o);o<g;o+=a)c+=u+d.substr(o,a);l>0&&(c+=u+d.slice(o)),f&&(c="-"+c)}i=h?c+(n.decimalSeparator||"")+((l=+n.fractionGroupSize)?h.replace(new RegExp("\\d{"+l+"}\\B","g"),"$&"+(n.fractionGroupSeparator||"")):h):c}return(n.prefix||"")+i+(n.suffix||"")},f.toFraction=function(t){var e,i,r,o,s,a,l,u,c,h,f,g,v=this,y=v.c;if(null!=t&&(!(l=new O(t)).isInteger()&&(l.c||1!==l.s)||l.lt(d)))throw Error(wo+"Argument "+(l.isInteger()?"out of range: ":"not an integer: ")+P(l));if(!y)return new O(v);for(e=new O(d),c=i=new O(d),r=u=new O(d),g=To(y),s=e.e=g.length-v.e-1,e.c[0]=Oo[(a=s%14)<0?14+a:a],t=!t||l.comparedTo(e)>0?s>0?e:c:l,a=b,b=1/0,l=new O(g),u.c[0]=0;h=n(l,e,0,1),1!=(o=i.plus(h.times(r))).comparedTo(t);)i=r,r=o,c=u.plus(h.times(o=c)),u=o,e=l.minus(h.times(o=e)),l=o;return o=n(t.minus(i),r,0,1),u=u.plus(o.times(c)),i=i.plus(o.times(r)),u.s=c.s=v.s,f=n(c,r,s*=2,p).minus(v).abs().comparedTo(n(u,i,s,p).minus(v).abs())<1?[c,r]:[u,i],b=a,f},f.toNumber=function(){return+P(this)},f.toPrecision=function(t,e){return null!=t&&Lo(t,1,Mo),I(this,t,e,2)},f.toString=function(t){var e,n=this,r=n.s,o=n.e;return null===o?r?(e="Infinity",r<0&&(e="-"+e)):e="NaN":(null==t?e=o<=v||o>=m?Ao(To(n.c),o):jo(To(n.c),o,"0"):10===t&&C?e=jo(To((n=T(new O(n),g+o+1,p)).c),n.e,"0"):(Lo(t,2,S.length,"Base"),e=i(jo(To(n.c),o,"0"),10,t,r,!0)),r<0&&n.c[0]&&(e="-"+e)),e},f.valueOf=f.toJSON=function(){return P(this)},f._isBigNumber=!0,f[Symbol.toStringTag]="BigNumber",f[Symbol.for("nodejs.util.inspect.custom")]=f.valueOf,null!=e&&O.set(e),O}(),Fo=function(t){function e(t){return r(this,e),i(this,e,[t])}return c(e,t),s(e)}(s((function t(e){r(this,t),l(this,"key",void 0),l(this,"left",null),l(this,"right",null),this.key=e}))),zo=function(t){function e(t,n){var o;return r(this,e),l(o=i(this,e),"root",null),l(o,"compare",void 0),l(o,"validKey",void 0),l(o,Symbol.toStringTag,"[object Set]"),o.compare=null!=t?t:o.defaultCompare(),o.validKey=null!=n?n:function(t){return null!=t&&null!=t},o}return c(e,t),s(e,[{key:"delete",value:function(t){return!!this.validKey(t)&&null!=this._delete(t)}},{key:"deleteAll",value:function(t){var e,n=a(t);try{for(n.s();!(e=n.n()).done;){var i=e.value;this.delete(i)}}catch(t){n.e(t)}finally{n.f()}}},{key:"forEach",value:function(t){for(var e,n=this[Symbol.iterator]();!(e=n.next()).done;)t(e.value,e.value,this)}},{key:"add",value:function(t){var e=this.splay(t);return 0!=e&&this.addNewRoot(new Fo(t),e),this}},{key:"addAndReturn",value:function(t){var e=this.splay(t);return 0!=e&&this.addNewRoot(new Fo(t),e),this.root.key}},{key:"addAll",value:function(t){var e,n=a(t);try{for(n.s();!(e=n.n()).done;){var i=e.value;this.add(i)}}catch(t){n.e(t)}finally{n.f()}}},{key:"isEmpty",value:function(){return null==this.root}},{key:"isNotEmpty",value:function(){return null!=this.root}},{key:"single",value:function(){if(0==this.size)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}},{key:"first",value:function(){if(0==this.size)throw"Bad state: No element";return this._first().key}},{key:"last",value:function(){if(0==this.size)throw"Bad state: No element";return this._last().key}},{key:"lastBefore",value:function(t){if(null==t)throw"Invalid arguments(s)";if(null==this.root)return null;if(this.splay(t)<0)return this.root.key;var e=this.root.left;if(null==e)return null;for(var n=e.right;null!=n;)n=(e=n).right;return e.key}},{key:"firstAfter",value:function(t){if(null==t)throw"Invalid arguments(s)";if(null==this.root)return null;if(this.splay(t)>0)return this.root.key;var e=this.root.right;if(null==e)return null;for(var n=e.left;null!=n;)n=(e=n).left;return e.key}},{key:"retainAll",value:function(t){var n,i=new e(this.compare,this.validKey),r=this.modificationCount,o=a(t);try{for(o.s();!(n=o.n()).done;){var s=n.value;if(r!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(s)&&0==this.splay(s)&&i.add(this.root.key)}}catch(t){o.e(t)}finally{o.f()}i.size!=this.size&&(this.root=i.root,this.size=i.size,this.modificationCount++)}},{key:"lookup",value:function(t){return this.validKey(t)?0!=this.splay(t)?null:this.root.key:null}},{key:"intersection",value:function(t){var n,i=new e(this.compare,this.validKey),r=a(this);try{for(r.s();!(n=r.n()).done;){var o=n.value;t.has(o)&&i.add(o)}}catch(t){r.e(t)}finally{r.f()}return i}},{key:"difference",value:function(t){var n,i=new e(this.compare,this.validKey),r=a(this);try{for(r.s();!(n=r.n()).done;){var o=n.value;t.has(o)||i.add(o)}}catch(t){r.e(t)}finally{r.f()}return i}},{key:"union",value:function(t){var e=this.clone();return e.addAll(t),e}},{key:"clone",value:function(){var t=new e(this.compare,this.validKey);return t.size=this.size,t.root=this.copyNode(this.root),t}},{key:"copyNode",value:function(t){if(null==t)return null;var e=new Fo(t.key);return function t(e,n){var i,r;do{if(i=e.left,r=e.right,null!=i){var o=new Fo(i.key);n.left=o,t(i,o)}if(null!=r){var s=new Fo(r.key);n.right=s,e=r,n=s}}while(null!=r)}(t,e),e}},{key:"toSet",value:function(){return this.clone()}},{key:"entries",value:function(){return new Vo(this.wrap())}},{key:"keys",value:function(){return this[Symbol.iterator]()}},{key:"values",value:function(){return this[Symbol.iterator]()}},{key:Symbol.iterator,value:function(){return new Bo(this.wrap())}}])}(s((function t(){r(this,t),l(this,"size",0),l(this,"modificationCount",0),l(this,"splayCount",0)}),[{key:"splay",value:function(t){var e=this.root;if(null==e)return this.compare(t,t),-1;for(var n,i=null,r=null,o=null,s=null,a=e,l=this.compare;;)if((n=l(a.key,t))>0){var u=a.left;if(null==u)break;if((n=l(u.key,t))>0&&(a.left=u.right,u.right=a,null==(u=(a=u).left)))break;null==i?r=a:i.left=a,i=a,a=u}else{if(!(n<0))break;var c=a.right;if(null==c)break;if((n=l(c.key,t))<0&&(a.right=c.left,c.left=a,null==(c=(a=c).right)))break;null==o?s=a:o.right=a,o=a,a=c}return null!=o&&(o.right=a.left,a.left=s),null!=i&&(i.left=a.right,a.right=r),this.root!==a&&(this.root=a,this.splayCount++),n}},{key:"splayMin",value:function(t){for(var e=t,n=e.left;null!=n;){var i=n;e.left=i.right,i.right=e,n=(e=i).left}return e}},{key:"splayMax",value:function(t){for(var e=t,n=e.right;null!=n;){var i=n;e.right=i.left,i.left=e,n=(e=i).right}return e}},{key:"_delete",value:function(t){if(null==this.root)return null;if(0!=this.splay(t))return null;var e=this.root,n=e,i=e.left;if(this.size--,null==i)this.root=e.right;else{var r=e.right;(e=this.splayMax(i)).right=r,this.root=e}return this.modificationCount++,n}},{key:"addNewRoot",value:function(t,e){this.size++,this.modificationCount++;var n=this.root;null!=n?(e<0?(t.left=n,t.right=n.right,n.right=null):(t.right=n,t.left=n.left,n.left=null),this.root=t):this.root=t}},{key:"_first",value:function(){var t=this.root;return null==t?null:(this.root=this.splayMin(t),this.root)}},{key:"_last",value:function(){var t=this.root;return null==t?null:(this.root=this.splayMax(t),this.root)}},{key:"clear",value:function(){this.root=null,this.size=0,this.modificationCount++}},{key:"has",value:function(t){return this.validKey(t)&&0==this.splay(t)}},{key:"defaultCompare",value:function(){return function(t,e){return t<e?-1:t>e?1:0}}},{key:"wrap",value:function(){var t=this;return{getRoot:function(){return t.root},setRoot:function(e){t.root=e},getSize:function(){return t.size},getModificationCount:function(){return t.modificationCount},getSplayCount:function(){return t.splayCount},setSplayCount:function(e){t.splayCount=e},splay:function(e){return t.splay(e)},has:function(e){return t.has(e)}}}}])),Go=s((function t(e){r(this,t),l(this,"tree",void 0),l(this,"path",new Array),l(this,"modificationCount",null),l(this,"splayCount",void 0),this.tree=e,this.splayCount=e.getSplayCount()}),[{key:Symbol.iterator,value:function(){return this}},{key:"next",value:function(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}},{key:"current",value:function(){if(!this.path.length)return null;var t=this.path[this.path.length-1];return this.getValue(t)}},{key:"rebuildPath",value:function(t){this.path.splice(0,this.path.length),this.tree.splay(t),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}},{key:"findLeftMostDescendent",value:function(t){for(;null!=t;)this.path.push(t),t=t.left}},{key:"moveNext",value:function(){if(this.modificationCount!=this.tree.getModificationCount()){if(null==this.modificationCount){this.modificationCount=this.tree.getModificationCount();for(var t=this.tree.getRoot();null!=t;)this.path.push(t),t=t.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);var e=this.path[this.path.length-1],n=e.right;if(null!=n){for(;null!=n;)this.path.push(n),n=n.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===e;)e=this.path.pop();return this.path.length>0}}]),Bo=function(t){function e(){return r(this,e),i(this,e,arguments)}return c(e,t),s(e,[{key:"getValue",value:function(t){return t.key}}])}(Go),Vo=function(t){function e(){return r(this,e),i(this,e,arguments)}return c(e,t),s(e,[{key:"getValue",value:function(t){return[t.key,t.key]}}])}(Go),Yo=function(t){return function(){return t}},qo=function(t){var e=t?function(e,n){return n.minus(e).abs().isLessThanOrEqualTo(t)}:Yo(!1);return function(t,n){return e(t,n)?0:t.comparedTo(n)}};function Uo(t){var e=t?function(e,n,i,r,o){return e.exponentiatedBy(2).isLessThanOrEqualTo(r.minus(n).exponentiatedBy(2).plus(o.minus(i).exponentiatedBy(2)).times(t))}:Yo(!1);return function(t,n,i){var r=t.x,o=t.y,s=i.x,a=i.y,l=o.minus(a).times(n.x.minus(s)).minus(r.minus(s).times(n.y.minus(a)));return e(l,r,o,s,a)?0:l.comparedTo(0)}}var Xo=function(t){return t},Wo=function(t){if(t){var e=new zo(qo(t)),n=new zo(qo(t)),i=function(t,e){return e.addAndReturn(t)},r=function(t){return{x:i(t.x,e),y:i(t.y,n)}};return r({x:new Do(0),y:new Do(0)}),r}return Xo},Ho=function(t){return{set:function(t){Zo=Ho(t)},reset:function(){return Ho(t)},compare:qo(t),snap:Wo(t),orient:Uo(t)}},Zo=Ho(),Ko=function(t,e){return t.ll.x.isLessThanOrEqualTo(e.x)&&e.x.isLessThanOrEqualTo(t.ur.x)&&t.ll.y.isLessThanOrEqualTo(e.y)&&e.y.isLessThanOrEqualTo(t.ur.y)},Jo=function(t,e){if(e.ur.x.isLessThan(t.ll.x)||t.ur.x.isLessThan(e.ll.x)||e.ur.y.isLessThan(t.ll.y)||t.ur.y.isLessThan(e.ll.y))return null;var n=t.ll.x.isLessThan(e.ll.x)?e.ll.x:t.ll.x,i=t.ur.x.isLessThan(e.ur.x)?t.ur.x:e.ur.x;return{ll:{x:n,y:t.ll.y.isLessThan(e.ll.y)?e.ll.y:t.ll.y},ur:{x:i,y:t.ur.y.isLessThan(e.ur.y)?t.ur.y:e.ur.y}}},Qo=function(t,e){return t.x.times(e.y).minus(t.y.times(e.x))},$o=function(t,e){return t.x.times(e.x).plus(t.y.times(e.y))},ts=function(t){return $o(t,t).sqrt()},es=function(t,e,n){var i={x:e.x.minus(t.x),y:e.y.minus(t.y)},r={x:n.x.minus(t.x),y:n.y.minus(t.y)};return $o(r,i).div(ts(r)).div(ts(i))},ns=function(t,e,n){return e.y.isZero()?null:{x:t.x.plus(e.x.div(e.y).times(n.minus(t.y))),y:n}},is=function(t,e,n){return e.x.isZero()?null:{x:n,y:t.y.plus(e.y.div(e.x).times(n.minus(t.x)))}},rs=function(){function t(e,n){r(this,t),l(this,"point",void 0),l(this,"isLeft",void 0),l(this,"segment",void 0),l(this,"otherSE",void 0),l(this,"consumedBy",void 0),void 0===e.events?e.events=[this]:e.events.push(this),this.point=e,this.isLeft=n}return s(t,[{key:"link",value:function(t){if(t.point===this.point)throw new Error("Tried to link already linked events");for(var e=t.point.events,n=0,i=e.length;n<i;n++){var r=e[n];this.point.events.push(r),r.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var t=this.point.events.length,e=0;e<t;e++){var n=this.point.events[e];if(void 0===n.segment.consumedBy)for(var i=e+1;i<t;i++){var r=this.point.events[i];void 0===r.consumedBy&&n.otherSE.point.events===r.otherSE.point.events&&n.segment.consume(r.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var t=[],e=0,n=this.point.events.length;e<n;e++){var i=this.point.events[e];i!==this&&!i.segment.ringOut&&i.segment.isInResult()&&t.push(i)}return t}},{key:"getLeftmostComparator",value:function(t){var e=this,n=new Map,i=function(i){var r,o,s,a,l,u=i.otherSE;n.set(i,{sine:(r=e.point,o=t.point,s=u.point,a={x:o.x.minus(r.x),y:o.y.minus(r.y)},l={x:s.x.minus(r.x),y:s.y.minus(r.y)},Qo(l,a).div(ts(l)).div(ts(a))),cosine:es(e.point,t.point,u.point)})};return function(t,e){n.has(t)||i(t),n.has(e)||i(e);var r=n.get(t),o=r.sine,s=r.cosine,a=n.get(e),l=a.sine,u=a.cosine;return o.isGreaterThanOrEqualTo(0)&&l.isGreaterThanOrEqualTo(0)?s.isLessThan(u)?1:s.isGreaterThan(u)?-1:0:o.isLessThan(0)&&l.isLessThan(0)?s.isLessThan(u)?-1:s.isGreaterThan(u)?1:0:l.isLessThan(o)?-1:l.isGreaterThan(o)?1:0}}}],[{key:"compare",value:function(e,n){var i=t.comparePoints(e.point,n.point);return 0!==i?i:(e.point!==n.point&&e.link(n),e.isLeft!==n.isLeft?e.isLeft?1:-1:fs.compare(e.segment,n.segment))}},{key:"comparePoints",value:function(t,e){return t.x.isLessThan(e.x)?-1:t.x.isGreaterThan(e.x)?1:t.y.isLessThan(e.y)?-1:t.y.isGreaterThan(e.y)?1:0}}])}(),os=function(){function t(e){r(this,t),l(this,"events",void 0),l(this,"poly",void 0),l(this,"_isExteriorRing",void 0),l(this,"_enclosingRing",void 0),this.events=e;for(var n=0,i=e.length;n<i;n++)e[n].segment.ringOut=this;this.poly=null}return s(t,[{key:"getGeom",value:function(){for(var t=this.events[0].point,e=[t],n=1,i=this.events.length-1;n<i;n++){var r=this.events[n].point,o=this.events[n+1].point;0!==Zo.orient(r,t,o)&&(e.push(r),t=r)}if(1===e.length)return null;var s=e[0],a=e[1];0===Zo.orient(s,t,a)&&e.shift(),e.push(e[0]);for(var l=this.isExteriorRing()?1:-1,u=this.isExteriorRing()?0:e.length-1,c=this.isExteriorRing()?e.length:-1,h=[],f=u;f!=c;f+=l)h.push([e[f].x.toNumber(),e[f].y.toNumber()]);return h}},{key:"isExteriorRing",value:function(){if(void 0===this._isExteriorRing){var t=this.enclosingRing();this._isExteriorRing=!t||!t.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var t=this.events[0],e=1,n=this.events.length;e<n;e++){var i=this.events[e];rs.compare(t,i)>0&&(t=i)}for(var r=t.segment.prevInResult(),o=r?r.prevInResult():null;;){if(!r)return null;if(!o)return r.ringOut;var s,a;if(o.ringOut!==r.ringOut)return(null===(s=o.ringOut)||void 0===s?void 0:s.enclosingRing())!==r.ringOut?r.ringOut:null===(a=r.ringOut)||void 0===a?void 0:a.enclosingRing();r=o.prevInResult(),o=r?r.prevInResult():null}}}],[{key:"factory",value:function(e){for(var n=[],i=0,r=e.length;i<r;i++){var o=e[i];if(o.isInResult()&&!o.ringOut){for(var s=null,a=o.leftSE,l=o.rightSE,u=[a],c=a.point,h=[];s=a,a=l,u.push(a),a.point!==c;)for(;;){var f=a.getAvailableLinkedEvents();if(0===f.length){var d=u[0].point,g=u[u.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(d.x,", ").concat(d.y,"]. Last matching segment found ends at [").concat(g.x,", ").concat(g.y,"]."))}if(1===f.length){l=f[0].otherSE;break}for(var p=null,v=0,y=h.length;v<y;v++)if(h[v].point===a.point){p=v;break}if(null===p){h.push({index:u.length,point:a.point});var m=a.getLeftmostComparator(s);l=f.sort(m)[0].otherSE;break}var _=h.splice(p)[0],b=u.splice(_.index);b.unshift(b[0].otherSE),n.push(new t(b.reverse()))}n.push(new t(u))}}return n}}])}(),ss=s((function t(e){r(this,t),l(this,"exteriorRing",void 0),l(this,"interiorRings",void 0),this.exteriorRing=e,e.poly=this,this.interiorRings=[]}),[{key:"addInterior",value:function(t){this.interiorRings.push(t),t.poly=this}},{key:"getGeom",value:function(){var t=this.exteriorRing.getGeom();if(null===t)return null;for(var e=[t],n=0,i=this.interiorRings.length;n<i;n++){var r=this.interiorRings[n].getGeom();null!==r&&e.push(r)}return e}}]),as=s((function t(e){r(this,t),l(this,"rings",void 0),l(this,"polys",void 0),this.rings=e,this.polys=this._composePolys(e)}),[{key:"getGeom",value:function(){for(var t=[],e=0,n=this.polys.length;e<n;e++){var i=this.polys[e].getGeom();null!==i&&t.push(i)}return t}},{key:"_composePolys",value:function(t){for(var e=[],n=0,i=t.length;n<i;n++){var r=t[n];if(!r.poly)if(r.isExteriorRing())e.push(new ss(r));else{var o,s=r.enclosingRing();null!=s&&s.poly||e.push(new ss(s)),null==s||null===(o=s.poly)||void 0===o||o.addInterior(r)}}return e}}]),ls=s((function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fs.compare;r(this,t),l(this,"queue",void 0),l(this,"tree",void 0),l(this,"segments",void 0),this.queue=e,this.tree=new zo(n),this.segments=[]}),[{key:"process",value:function(t){var e=t.segment,n=[];if(t.consumedBy)return t.isLeft?this.queue.delete(t.otherSE):this.tree.delete(e),n;t.isLeft&&this.tree.add(e);var i=e,r=e;do{i=this.tree.lastBefore(i)}while(null!=i&&null!=i.consumedBy);do{r=this.tree.firstAfter(r)}while(null!=r&&null!=r.consumedBy);if(t.isLeft){var o=null;if(i){var s=i.getIntersection(e);if(null!==s&&(e.isAnEndpoint(s)||(o=s),!i.isAnEndpoint(s)))for(var a=this._splitSafely(i,s),l=0,u=a.length;l<u;l++)n.push(a[l])}var c=null;if(r){var h=r.getIntersection(e);if(null!==h&&(e.isAnEndpoint(h)||(c=h),!r.isAnEndpoint(h)))for(var f=this._splitSafely(r,h),d=0,g=f.length;d<g;d++)n.push(f[d])}if(null!==o||null!==c){var p=null;p=null===o?c:null===c||rs.comparePoints(o,c)<=0?o:c,this.queue.delete(e.rightSE),n.push(e.rightSE);for(var v=e.split(p),y=0,m=v.length;y<m;y++)n.push(v[y])}n.length>0?(this.tree.delete(e),n.push(t)):(this.segments.push(e),e.prev=i)}else{if(i&&r){var _=i.getIntersection(r);if(null!==_){if(!i.isAnEndpoint(_))for(var b=this._splitSafely(i,_),x=0,E=b.length;x<E;x++)n.push(b[x]);if(!r.isAnEndpoint(_))for(var w=this._splitSafely(r,_),k=0,S=w.length;k<S;k++)n.push(w[k])}}this.tree.delete(e)}return n}},{key:"_splitSafely",value:function(t,e){this.tree.delete(t);var n=t.rightSE;this.queue.delete(n);var i=t.split(e);return i.push(n),void 0===t.consumedBy&&this.tree.add(t),i}}]),us=new(s((function t(){r(this,t),l(this,"type",void 0),l(this,"numMultiPolys",void 0)}),[{key:"run",value:function(t,e,n){us.type=t;for(var i=[new ps(e,!0)],r=0,o=n.length;r<o;r++)i.push(new ps(n[r],!1));if(us.numMultiPolys=i.length,"difference"===us.type)for(var s=i[0],a=1;a<i.length;)null!==Jo(i[a].bbox,s.bbox)?a++:i.splice(a,1);if("intersection"===us.type)for(var l=0,u=i.length;l<u;l++)for(var c=i[l],h=l+1,f=i.length;h<f;h++)if(null===Jo(c.bbox,i[h].bbox))return[];for(var d=new zo(rs.compare),g=0,p=i.length;g<p;g++)for(var v=i[g].getSweepEvents(),y=0,m=v.length;y<m;y++)d.add(v[y]);var _=new ls(d),b=null;for(0!=d.size&&(b=d.first(),d.delete(b));b;){for(var x=_.process(b),E=0,w=x.length;E<w;E++){var k=x[E];void 0===k.consumedBy&&d.add(k)}0!=d.size?(b=d.first(),d.delete(b)):b=null}Zo.reset();var S=os.factory(_.segments);return new as(S).getGeom()}}])),cs=us,hs=0,fs=function(){function t(e,n,i,o){r(this,t),l(this,"id",void 0),l(this,"leftSE",void 0),l(this,"rightSE",void 0),l(this,"rings",void 0),l(this,"windings",void 0),l(this,"ringOut",void 0),l(this,"consumedBy",void 0),l(this,"prev",void 0),l(this,"_prevInResult",void 0),l(this,"_beforeState",void 0),l(this,"_afterState",void 0),l(this,"_isInResult",void 0),this.id=++hs,this.leftSE=e,e.segment=this,e.otherSE=n,this.rightSE=n,n.segment=this,n.otherSE=e,this.rings=i,this.windings=o}return s(t,[{key:"replaceRightSE",value:function(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var t=this.leftSE.point.y,e=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t.isLessThan(e)?t:e},ur:{x:this.rightSE.point.x,y:t.isGreaterThan(e)?t:e}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}},{key:"isAnEndpoint",value:function(t){return t.x.eq(this.leftSE.point.x)&&t.y.eq(this.leftSE.point.y)||t.x.eq(this.rightSE.point.x)&&t.y.eq(this.rightSE.point.y)}},{key:"comparePoint",value:function(t){return Zo.orient(this.leftSE.point,t,this.rightSE.point)}},{key:"getIntersection",value:function(t){var e=this.bbox(),n=t.bbox(),i=Jo(e,n);if(null===i)return null;var r=this.leftSE.point,o=this.rightSE.point,s=t.leftSE.point,a=t.rightSE.point,l=Ko(e,s)&&0===this.comparePoint(s),u=Ko(n,r)&&0===t.comparePoint(r),c=Ko(e,a)&&0===this.comparePoint(a),h=Ko(n,o)&&0===t.comparePoint(o);if(u&&l)return h&&!c?o:!h&&c?a:null;if(u)return c&&r.x.eq(a.x)&&r.y.eq(a.y)?null:r;if(l)return h&&o.x.eq(s.x)&&o.y.eq(s.y)?null:s;if(h&&c)return null;if(h)return o;if(c)return a;var f=function(t,e,n,i){if(e.x.isZero())return is(n,i,t.x);if(i.x.isZero())return is(t,e,n.x);if(e.y.isZero())return ns(n,i,t.y);if(i.y.isZero())return ns(t,e,n.y);var r=Qo(e,i);if(r.isZero())return null;var o={x:n.x.minus(t.x),y:n.y.minus(t.y)},s=Qo(o,e).div(r),a=Qo(o,i).div(r),l=t.x.plus(a.times(e.x)),u=n.x.plus(s.times(i.x)),c=t.y.plus(a.times(e.y)),h=n.y.plus(s.times(i.y));return{x:l.plus(u).div(2),y:c.plus(h).div(2)}}(r,this.vector(),s,t.vector());return null===f?null:Ko(i,f)?Zo.snap(f):null}},{key:"split",value:function(e){var n=[],i=void 0!==e.events,r=new rs(e,!0),o=new rs(e,!1),s=this.rightSE;this.replaceRightSE(o),n.push(o),n.push(r);var a=new t(r,s,this.rings.slice(),this.windings.slice());return rs.comparePoints(a.leftSE.point,a.rightSE.point)>0&&a.swapEvents(),rs.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),i&&(r.checkForConsuming(),o.checkForConsuming()),n}},{key:"swapEvents",value:function(){var t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var e=0,n=this.windings.length;e<n;e++)this.windings[e]*=-1}},{key:"consume",value:function(e){for(var n=this,i=e;n.consumedBy;)n=n.consumedBy;for(;i.consumedBy;)i=i.consumedBy;var r=t.compare(n,i);if(0!==r){if(r>0){var o=n;n=i,i=o}if(n.prev===i){var s=n;n=i,i=s}for(var a=0,l=i.rings.length;a<l;a++){var u=i.rings[a],c=i.windings[a],h=n.rings.indexOf(u);-1===h?(n.rings.push(u),n.windings.push(c)):n.windings[h]+=c}i.rings=null,i.windings=null,i.consumedBy=n,i.leftSE.consumedBy=n.leftSE,i.rightSE.consumedBy=n.rightSE}}},{key:"prevInResult",value:function(){return void 0!==this._prevInResult||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}},{key:"beforeState",value:function(){if(void 0!==this._beforeState)return this._beforeState;if(this.prev){var t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}},{key:"afterState",value:function(){if(void 0!==this._afterState)return this._afterState;var t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};for(var e=this._afterState.rings,n=this._afterState.windings,i=this._afterState.multiPolys,r=0,o=this.rings.length;r<o;r++){var s=this.rings[r],a=this.windings[r],l=e.indexOf(s);-1===l?(e.push(s),n.push(a)):n[l]+=a}for(var u=[],c=[],h=0,f=e.length;h<f;h++)if(0!==n[h]){var d=e[h],g=d.poly;if(-1===c.indexOf(g))if(d.isExterior)u.push(g);else{-1===c.indexOf(g)&&c.push(g);var p=u.indexOf(d.poly);-1!==p&&u.splice(p,1)}}for(var v=0,y=u.length;v<y;v++){var m=u[v].multiPoly;-1===i.indexOf(m)&&i.push(m)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;var t=this.beforeState().multiPolys,e=this.afterState().multiPolys;switch(cs.type){case"union":var n=0===t.length,i=0===e.length;this._isInResult=n!==i;break;case"intersection":var r,o;t.length<e.length?(r=t.length,o=e.length):(r=e.length,o=t.length),this._isInResult=o===cs.numMultiPolys&&r<o;break;case"xor":var s=Math.abs(t.length-e.length);this._isInResult=s%2==1;break;case"difference":var a=function(t){return 1===t.length&&t[0].isSubject};this._isInResult=a(t)!==a(e)}return this._isInResult}}],[{key:"compare",value:function(t,e){var n=t.leftSE.point.x,i=e.leftSE.point.x,r=t.rightSE.point.x,o=e.rightSE.point.x;if(o.isLessThan(n))return 1;if(r.isLessThan(i))return-1;var s=t.leftSE.point.y,a=e.leftSE.point.y,l=t.rightSE.point.y,u=e.rightSE.point.y;if(n.isLessThan(i)){if(a.isLessThan(s)&&a.isLessThan(l))return 1;if(a.isGreaterThan(s)&&a.isGreaterThan(l))return-1;var c=t.comparePoint(e.leftSE.point);if(c<0)return 1;if(c>0)return-1;var h=e.comparePoint(t.rightSE.point);return 0!==h?h:-1}if(n.isGreaterThan(i)){if(s.isLessThan(a)&&s.isLessThan(u))return-1;if(s.isGreaterThan(a)&&s.isGreaterThan(u))return 1;var f=e.comparePoint(t.leftSE.point);if(0!==f)return f;var d=t.comparePoint(e.rightSE.point);return d<0?1:d>0?-1:1}if(s.isLessThan(a))return-1;if(s.isGreaterThan(a))return 1;if(r.isLessThan(o)){var g=e.comparePoint(t.rightSE.point);if(0!==g)return g}if(r.isGreaterThan(o)){var p=t.comparePoint(e.rightSE.point);if(p<0)return 1;if(p>0)return-1}if(!r.eq(o)){var v=l.minus(s),y=r.minus(n),m=u.minus(a),_=o.minus(i);if(v.isGreaterThan(y)&&m.isLessThan(_))return 1;if(v.isLessThan(y)&&m.isGreaterThan(_))return-1}return r.isGreaterThan(o)?1:r.isLessThan(o)||l.isLessThan(u)?-1:l.isGreaterThan(u)?1:t.id<e.id?-1:t.id>e.id?1:0}},{key:"fromRing",value:function(e,n,i){var r,o,s,a=rs.comparePoints(e,n);if(a<0)r=e,o=n,s=1;else{if(!(a>0))throw new Error("Tried to create degenerate segment at [".concat(e.x,", ").concat(e.y,"]"));r=n,o=e,s=-1}return new t(new rs(r,!0),new rs(o,!1),[i],[s])}}])}(),ds=s((function t(e,n,i){if(r(this,t),l(this,"poly",void 0),l(this,"isExterior",void 0),l(this,"segments",void 0),l(this,"bbox",void 0),!Array.isArray(e)||0===e.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=n,this.isExterior=i,this.segments=[],"number"!=typeof e[0][0]||"number"!=typeof e[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var o=Zo.snap({x:new Do(e[0][0]),y:new Do(e[0][1])});this.bbox={ll:{x:o.x,y:o.y},ur:{x:o.x,y:o.y}};for(var s=o,a=1,u=e.length;a<u;a++){if("number"!=typeof e[a][0]||"number"!=typeof e[a][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var c=Zo.snap({x:new Do(e[a][0]),y:new Do(e[a][1])});c.x.eq(s.x)&&c.y.eq(s.y)||(this.segments.push(fs.fromRing(s,c,this)),c.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=c.x),c.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=c.y),c.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=c.x),c.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=c.y),s=c)}o.x.eq(s.x)&&o.y.eq(s.y)||this.segments.push(fs.fromRing(s,o,this))}),[{key:"getSweepEvents",value:function(){for(var t=[],e=0,n=this.segments.length;e<n;e++){var i=this.segments[e];t.push(i.leftSE),t.push(i.rightSE)}return t}}]),gs=s((function t(e,n){if(r(this,t),l(this,"multiPoly",void 0),l(this,"exteriorRing",void 0),l(this,"interiorRings",void 0),l(this,"bbox",void 0),!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new ds(e[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var i=1,o=e.length;i<o;i++){var s=new ds(e[i],this,!1);s.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=s.bbox.ll.x),s.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=s.bbox.ll.y),s.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=s.bbox.ur.x),s.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=s.bbox.ur.y),this.interiorRings.push(s)}this.multiPoly=n}),[{key:"getSweepEvents",value:function(){for(var t=this.exteriorRing.getSweepEvents(),e=0,n=this.interiorRings.length;e<n;e++)for(var i=this.interiorRings[e].getSweepEvents(),r=0,o=i.length;r<o;r++)t.push(i[r]);return t}}]),ps=s((function t(e,n){if(r(this,t),l(this,"isSubject",void 0),l(this,"polys",void 0),l(this,"bbox",void 0),!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"==typeof e[0][0][0]&&(e=[e])}catch(t){}this.polys=[],this.bbox={ll:{x:new Do(Number.POSITIVE_INFINITY),y:new Do(Number.POSITIVE_INFINITY)},ur:{x:new Do(Number.NEGATIVE_INFINITY),y:new Do(Number.NEGATIVE_INFINITY)}};for(var i=0,o=e.length;i<o;i++){var s=new gs(e[i],this);s.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=s.bbox.ll.x),s.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=s.bbox.ll.y),s.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=s.bbox.ur.x),s.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=s.bbox.ur.y),this.polys.push(s)}this.isSubject=n}),[{key:"getSweepEvents",value:function(){for(var t=[],e=0,n=this.polys.length;e<n;e++)for(var i=this.polys[e].getSweepEvents(),r=0,o=i.length;r<o;r++)t.push(i[r]);return t}}]),vs=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return cs.run("union",t,n)},ys=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return cs.run("intersection",t,n)},ms=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return cs.run("difference",t,n)},_s=Zo.set,bs=Object.freeze({__proto__:null,difference:ms,intersection:ys,setPrecision:_s,union:vs,xor:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return cs.run("xor",t,n)}});function xs(t){if(!t)throw new Error("geojson is required");var e=[];return _t(t,(function(t){e.push(t)})),R(e)}function Es(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,i=K(t),r=K(e),o=i[0]-r[0],s=i[1]-r[1];return 1===n?Math.abs(o)+Math.abs(s):Math.pow(Math.pow(o,n)+Math.pow(s,n),1/n)}function ws(t,e){var n,i,r=(e=e||{}).threshold||1e4,o=e.p||2,s=null!=(n=e.binary)&&n,a=e.alpha||-1,l=null!=(i=e.standardization)&&i,u=[];gt(t,(function(t){u.push(sr(t))}));for(var c=[],h=0;h<u.length;h++)c[h]=[];for(var f=0;f<u.length;f++)for(var d=f;d<u.length;d++){f===d&&(c[f][d]=0);var g=Es(u[f],u[d],o);c[f][d]=g,c[d][f]=g}for(var p=0;p<u.length;p++)for(var v=0;v<u.length;v++){var y=c[p][v];0!==y&&(c[p][v]=s?y<=r?1:0:y<=r?Math.pow(y,a):0)}if(l)for(var m=0;m<u.length;m++)for(var _=c[m].reduce((function(t,e){return t+e}),0),b=0;b<u.length;b++)c[m][b]=c[m][b]/_;return c}function ks(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=e<0,o=Y(Math.abs(e),i.units,"meters");r&&(o=-Math.abs(o));var s=K(t),a=function(t,e,n,i){var r=e/(i=void 0===i?_:Number(i)),o=t[0]*Math.PI/180,s=V(t[1]),a=V(n),l=r*Math.cos(a),u=s+l;Math.abs(u)>Math.PI/2&&(u=u>0?Math.PI-u:-Math.PI-u);var c=Math.log(Math.tan(u/2+Math.PI/4)/Math.tan(s/2+Math.PI/4)),h=Math.abs(c)>1e-11?l/c:Math.cos(s);return[(180*(o+r*Math.sin(a)/h)/Math.PI+540)%360-180,180*u/Math.PI]}(s,o,n);return a[0]+=a[0]-s[0]>180?-360:s[0]-a[0]>180?360:0,k(a,i.properties)}function Ss(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=K(t),r=K(e);r[0]+=r[0]-i[0]>180?-360:i[0]-r[0]>180?360:0;var o=function(t,e,n){var i=n=void 0===n?_:Number(n),r=t[1]*Math.PI/180,o=e[1]*Math.PI/180,s=o-r,a=Math.abs(e[0]-t[0])*Math.PI/180;a>Math.PI&&(a-=2*Math.PI);var l=Math.log(Math.tan(o/2+Math.PI/4)/Math.tan(r/2+Math.PI/4)),u=Math.abs(l)>1e-11?s/l:Math.cos(r);return Math.sqrt(s*s+u*u*a*a)*i}(i,r);return Y(o,"meters",n.units)}function Cs(t,e,n){if(!X(n=n||{}))throw new Error("options is invalid");var i=n.pivot,r=n.mutate;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("angle is required");if(0===e)return t;var o=null!=i?i:sr(t);return!1!==r&&void 0!==r||(t=Sr(t)),ct(t,(function(t){var n=lt(o,t)+e,i=Ss(o,t),r=J(ks(o,i,n));t[0]=r[0],t[1]=r[1]})),t}function Os(t,e,n,i){var r=(i=i||{}).steps||64,o=i.units||"kilometers",s=i.angle||0,a=i.pivot||t,l=i.properties||{};if(!t)throw new Error("center is required");if(!e)throw new Error("xSemiAxis is required");if(!n)throw new Error("ySemiAxis is required");if(!X(i))throw new Error("options must be an object");if(!U(r))throw new Error("steps must be a number");if(!U(s))throw new Error("angle must be a number");var u=K(t);if("degrees"!==o){var c=ks(t,e,90,{units:o}),h=ks(t,n,0,{units:o});e=K(c)[0]-u[0],n=K(h)[1]-u[1]}for(var f=[],d=0;d<r;d+=1){var g=-360*d/r,p=e*n/Math.sqrt(Math.pow(n,2)+Math.pow(e,2)*Math.pow(Is(g),2)),v=e*n/Math.sqrt(Math.pow(e,2)+Math.pow(n,2)/Math.pow(Is(g),2));if(g<-90&&g>=-270&&(p=-p),g<-180&&g>=-360&&(v=-v),"degrees"===o){var y=V(s),m=p*Math.cos(y)+v*Math.sin(y),_=v*Math.cos(y)-p*Math.sin(y);p=m,v=_}f.push([p+u[0],v+u[1]])}return f.push(f[0]),"degrees"===o?C([f],l):Cs(C([f],l),s,{pivot:a})}function Is(t){var e=t*Math.PI/180;return Math.tan(e)}function Ms(t){return Dt(Pt(t))}function Rs(t){var e=[];return"FeatureCollection"===t.type?gt(t,(function(t){ct(t,(function(n){e.push(k(n,t.properties))}))})):"Feature"===t.type?ct(t,(function(n){e.push(k(n,t.properties))})):ct(t,(function(t){e.push(k(t))})),R(e)}var Ts=Math.PI/180,Ps=180/Math.PI,Ls=function(t,e){this.lon=t,this.lat=e,this.x=Ts*t,this.y=Ts*e};Ls.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},Ls.prototype.antipode=function(){var t=-1*this.lat,e=this.lon<0?180+this.lon:-1*(180-this.lon);return new Ls(e,t)};var Ns=function(){this.coords=[],this.length=0};Ns.prototype.move_to=function(t){this.length++,this.coords.push(t)};var As=function(t){this.properties=t||{},this.geometries=[]};As.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var t=[],e=0;e<this.geometries.length;e++)t.push(this.geometries[e].coords);return{geometry:{type:"MultiLineString",coordinates:t},type:"Feature",properties:this.properties}},As.prototype.wkt=function(){for(var t="",e="LINESTRING(",n=function(t){e+=t[0]+" "+t[1]+","},i=0;i<this.geometries.length;i++){if(0===this.geometries[i].coords.length)return"LINESTRING(empty)";this.geometries[i].coords.forEach(n),t+=e.substring(0,e.length-1)+")"}return t};var js=function(t,e,n){if(!t||void 0===t.x||void 0===t.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!e||void 0===e.x||void 0===e.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new Ls(t.x,t.y),this.end=new Ls(e.x,e.y),this.properties=n||{};var i=this.start.x-this.end.x,r=this.start.y-this.end.y,o=Math.pow(Math.sin(r/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(i/2),2);if(this.g=2*Math.asin(Math.sqrt(o)),this.g===Math.PI)throw new Error("it appears "+t.view()+" and "+e.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+t+" and "+e)};function Ds(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[];if(yt(t,(function(t){n.push(t.coordinates)})),n.length<2)throw new Error("Must specify at least 2 geometries");var i=ys.apply(bs,[n[0]].concat(p(n.slice(1))));return 0===i.length?null:1===i.length?C(i[0],e.properties):L(i,e.properties)}function Fs(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=JSON.stringify(n.properties||{}),r=g(t,4),o=r[0],s=r[1],a=r[2],l=r[3],u=(s+l)/2,c=(o+a)/2,h=2*e/at([o,u],[a,u],n)*(a-o),f=2*e/at([c,s],[c,l],n)*(l-s),d=h/2,p=2*d,v=Math.sqrt(3)/2*f,y=a-o,m=l-s,_=3/4*p,b=v,x=(y-p)/(p-d/2),E=Math.floor(x),w=(E*_-d/2-y)/2-d/2+_/2,k=Math.floor((m-v)/v),S=(m-k*v)/2,C=k*v-m>v/2;C&&(S-=v/4);for(var O=[],I=[],M=0;M<6;M++){var T=2*Math.PI/6*M;O.push(Math.cos(T)),I.push(Math.sin(T))}for(var P=[],L=0;L<=E;L++)for(var N=0;N<=k;N++){var A=L%2==1;if((0!==N||!A)&&(0!==N||!C)){var j=L*_+o-w,D=N*b+s+S;if(A&&(D-=v/2),!0===n.triangles)Gs([j,D],h/2,f/2,JSON.parse(i),O,I).forEach((function(t){n.mask?Ds(R([n.mask,t]))&&P.push(t):P.push(t)}));else{var F=zs([j,D],h/2,f/2,JSON.parse(i),O,I);n.mask?Ds(R([n.mask,F]))&&P.push(F):P.push(F)}}}return R(P)}function zs(t,e,n,i,r,o){for(var s=[],a=0;a<6;a++){var l=t[0]+e*r[a],u=t[1]+n*o[a];s.push([l,u])}return s.push(s[0].slice()),C([s],i)}function Gs(t,e,n,i,r,o){for(var s=[],a=0;a<6;a++){var l=[];l.push(t),l.push([t[0]+e*r[a],t[1]+n*o[a]]),l.push([t[0]+e*r[(a+1)%6],t[1]+n*o[(a+1)%6]]),l.push(t),s.push(C([l],i))}return s}function Bs(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n.mask&&!n.units&&(n.units="kilometers");for(var i=[],r=t[0],o=t[1],s=t[2],a=t[3],l=e/at([r,o],[s,o],n)*(s-r),u=e/at([r,o],[r,a],n)*(a-o),c=s-r,h=a-o,f=Math.floor(c/l),d=(h-Math.floor(h/u)*u)/2,g=r+(c-f*l)/2;g<=s;){for(var p=o+d;p<=a;){var v=k([g,p],n.properties);n.mask?On(v,n.mask)&&i.push(v):i.push(v),p+=u}g+=l}return R(i)}function Vs(t,e,n){for(var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=[],o=t[0],s=t[1],a=t[2],l=t[3],u=a-o,c=Y(e,i.units,"degrees"),h=l-s,f=Y(n,i.units,"degrees"),d=Math.floor(Math.abs(u)/c),g=Math.floor(Math.abs(h)/f),p=(h-g*f)/2,v=o+(u-d*c)/2,y=0;y<d;y++){for(var m=s+p,_=0;_<g;_++){var b=C([[[v,m],[v,m+f],[v+c,m+f],[v+c,m],[v,m]]],i.properties);i.mask?Te(i.mask,b)&&r.push(b):r.push(b),m+=f}v+=c}return R(r)}function Ys(t,e){return Vs(t,e,e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}function qs(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=[],r=e/at([t[0],t[1]],[t[2],t[1]],n)*(t[2]-t[0]),o=e/at([t[0],t[1]],[t[0],t[3]],n)*(t[3]-t[1]),s=0,a=t[0];a<=t[2];){for(var l=0,u=t[1];u<=t[3];){var c=null,h=null;s%2==0&&l%2==0?(c=C([[[a,u],[a,u+o],[a+r,u],[a,u]]],n.properties),h=C([[[a,u+o],[a+r,u+o],[a+r,u],[a,u+o]]],n.properties)):s%2==0&&l%2==1?(c=C([[[a,u],[a+r,u+o],[a+r,u],[a,u]]],n.properties),h=C([[[a,u],[a,u+o],[a+r,u+o],[a,u]]],n.properties)):l%2==0&&s%2==1?(c=C([[[a,u],[a,u+o],[a+r,u+o],[a,u]]],n.properties),h=C([[[a,u],[a+r,u+o],[a+r,u],[a,u]]],n.properties)):l%2==1&&s%2==1&&(c=C([[[a,u],[a,u+o],[a+r,u],[a,u]]],n.properties),h=C([[[a,u+o],[a+r,u+o],[a+r,u],[a,u+o]]],n.properties)),n.mask?(Ds(R([n.mask,c]))&&i.push(c),Ds(R([n.mask,h]))&&i.push(h)):(i.push(c),i.push(h)),u+=o,l++}s++,a+=r}return R(i)}function Us(t,e,n){return t<e?(n-t)/(e-t):(t-n)/(t-e)}function Xs(t,e,n,i){var r;return n>i&&(r=n,n=i,i=r),t<e?t<n?(n-t)/(e-t):(i-t)/(e-t):t>i?(t-i)/(t-e):(t-n)/(t-e)}function Ws(t,e,n,i){return t<e?(n-t)/(e-t):(t-i)/(t-e)}function Hs(t,e,n,i){return t<e?(i-t)/(e-t):(t-n)/(t-e)}function Zs(){this.successCallback=null,this.verbose=!1,this.polygons=!1,this.polygons_full=!1,this.linearRing=!0,this.noQuadTree=!1,this.noFrame=!1}function Ks(t,e,n,i){var r=[];return t.polygons.forEach((function(t){t.forEach((function(t){t[0]+=e,t[1]+=n})),i.linearRing&&t.push(t[0]),r.push(t)})),r}function Js(t,e,n,i){return 0===n?(t+=1,e+=i[0][1]):1===n?t+=i[0][0]:2===n?e+=i[0][1]:3===n&&(t+=i[0][0],e+=1),[t,e]}function Qs(t,e,n){return 0===n?t++:1===n||(2===n?e++:3===n&&(t++,e++)),[t,e]}function $s(t,e,n,i,r){var o=i,s=r,a=0,l=0;if(this.x=e,this.y=n,this.lowerBound=null,this.upperBound=null,this.childA=null,this.childB=null,this.childC=null,this.childD=null,1===i&&1===r)this.lowerBound=Math.min(t[n][e],t[n][e+1],t[n+1][e+1],t[n+1][e]),this.upperBound=Math.max(t[n][e],t[n][e+1],t[n+1][e+1],t[n+1][e]);else{if(i>1){for(;0!==o;)o>>=1,a++;i===1<<a-1&&a--,o=1<<a-1}if(r>1){for(;0!==s;)s>>=1,l++;r===1<<l-1&&l--,s=1<<l-1}this.childA=new $s(t,e,n,o,s),this.lowerBound=this.childA.lowerBound,this.upperBound=this.childA.upperBound,i-o>0&&(this.childB=new $s(t,e+o,n,i-o,s),this.lowerBound=Math.min(this.lowerBound,this.childB.lowerBound),this.upperBound=Math.max(this.upperBound,this.childB.upperBound),r-s>0&&(this.childC=new $s(t,e+o,n+s,i-o,r-s),this.lowerBound=Math.min(this.lowerBound,this.childC.lowerBound),this.upperBound=Math.max(this.upperBound,this.childC.upperBound))),r-s>0&&(this.childD=new $s(t,e,n+s,o,r-s),this.lowerBound=Math.min(this.lowerBound,this.childD.lowerBound),this.upperBound=Math.max(this.upperBound,this.childD.upperBound))}}function ta(t){var e,n;if(!t)throw new Error("data is required");if(!Array.isArray(t)||!Array.isArray(t[0]))throw new Error("data must be scalar field, i.e. array of arrays");if(t.length<2)throw new Error("data must contain at least two rows");if((n=t[0].length)<2)throw new Error("data must contain at least two columns");for(e=1;e<t.length;e++){if(!Array.isArray(t[e]))throw new Error("Row "+e+" is not an array");if(t[e].length!=n)throw new Error("unequal row lengths detected, please provide a regular grid")}this.data=t,this.root=new $s(t,0,0,t[0].length-1,t.length-1)}function ea(t,e,n){var i,r,o,s=!1,a=!1,l=null,u=null,c=null,h=null,f=null,d=[];if(!t)throw new Error("data is required");if(null==e)throw new Error("threshold is required");if(n&&"object"!==y(n))throw new Error("options must be an object");if(i=function(t){var e,n,i,r,o;for(r=new Zs,t=t||{},o=Object.keys(r),e=0;e<o.length;e++)null!=(i=t[n=o[e]])&&(r[n]=i);return r.polygons_full=!r.polygons,r.interpolate=Us,r}(n),t instanceof ta)l=t,u=t.root,c=t.data,i.noQuadTree||(s=!0);else{if(!Array.isArray(t)||!Array.isArray(t[0]))throw new Error("input is neither array of arrays nor object retrieved from 'QuadTree()'");c=t}if(Array.isArray(e)){for(a=!0,i.noQuadTree||(s=!0),r=0;r<e.length;r++)if(isNaN(+e[r]))throw new Error("threshold["+r+"] is not a number")}else{if(isNaN(+e))throw new Error("threshold must be a number or array of numbers");e=[e]}return s&&!u&&(l=new ta(c),u=l.root,c=l.data),i.verbose&&(i.polygons?console.log("MarchingSquaresJS-isoLines: returning single lines (polygons) for each grid cell"):console.log("MarchingSquaresJS-isoLines: returning line paths (polygons) for entire data grid"),a&&console.log("MarchingSquaresJS-isoLines: multiple lines requested, returning array of line paths instead of lines for a single threshold")),e.forEach((function(t,e){if(f=[],i.threshold=t,i.verbose&&console.log("MarchingSquaresJS-isoLines: computing iso lines for threshold "+t),i.polygons)if(s)u.cellsBelowThreshold(i.threshold,!0).forEach((function(t){f=f.concat(Ks(na(c,t.x,t.y,i),t.x,t.y,i))}));else for(o=0;o<c.length-1;++o)for(e=0;e<c[0].length-1;++e)f=f.concat(Ks(na(c,e,o,i),e,o,i));else{for(h=[],e=0;e<c[0].length-1;++e)h[e]=[];if(s)u.cellsBelowThreshold(i.threshold,!1).forEach((function(t){h[t.x][t.y]=na(c,t.x,t.y,i)}));else for(e=0;e<c[0].length-1;++e)for(o=0;o<c.length-1;++o)h[e][o]=na(c,e,o,i);f=function(t,e,n){var i,r,o,s,a,l,u,c,h,f,d,g,p,v,m,_=[],b=t.length-1,x=t[0].length-1,E=["right","bottom","left","top"],w=[0,-1,0,1],k=[-1,0,1,0],S={bottom:1,left:2,top:3,right:0};return n.noFrame||function(t,e){var n,i,r,o,s;for(n=!0,i=t[0].length,r=t.length,s=0;s<r;s++)if(t[s][0]>=e||t[s][i-1]>=e){n=!1;break}if(n&&(t[r-1][0]>=e||t[r-1][i-1]>=e)&&(n=!1),n)for(o=0;o<i-1;o++)if(t[0][o]>=e||t[r-1][o]>e){n=!1;break}return n}(t,n.threshold)&&(n.linearRing?_.push([[0,0],[0,b],[x,b],[x,0],[0,0]]):_.push([[0,0],[0,b],[x,b],[x,0]])),e.forEach((function(t,C){t.forEach((function(t,O){for(i=null,r=0;r<4;r++)if(i=E[r],"object"===y(t.edges[i])){for(a=[],o=t.edges[i],l=i,u=C,c=O,h=!1,f=[C+o.path[0][0],O+o.path[0][1]],a.push(f);!h&&"object"===y((s=e[u][c]).edges[l]);)if(o=s.edges[l],delete s.edges[l],(d=o.path[1])[0]+=u,d[1]+=c,a.push(d),l=o.move.enter,u+=o.move.x,c+=o.move.y,void 0===e[u]||void 0===e[u][c]){if(!n.linearRing)break;if(g=0,p=0,u===x?(u--,g=0):u<0?(u++,g=2):c===b?(c--,g=3):c<0&&(c++,g=1),u===C&&c===O&&g===S[i]){h=!0,l=i;break}for(;;){if(v=!1,p>4)throw new Error("Direction change counter overflow! This should never happen!");if(void 0!==e[u]&&void 0!==e[u][c]&&(s=e[u][c],m=E[g],"object"===y(s.edges[m]))){o=s.edges[m],a.push(Js(u,c,g,o.path)),l=m,v=!0;break}if(v)break;if(a.push(Qs(u,c,g)),c+=k[g],void 0!==e[u+=w[g]]&&void 0!==e[u][c]||(0===g&&c<0||1===g&&u<0||2===g&&c===b||3===g&&u===x)&&(u-=w[g],c-=k[g],g=(g+1)%4,p++),u===C&&c===O&&g===S[i]){h=!0,l=i;break}}}!n.linearRing||a[a.length-1][0]===f[0]&&a[a.length-1][1]===f[1]||a.push(f),_.push(a)}}))})),_}(c,h,i)}a?d.push(f):d=f,"function"==typeof i.successCallback&&i.successCallback(d,t)})),d}function na(t,e,n,i){var r,o,s,a,l,u,c=0,h=t[n+1][e],f=t[n+1][e+1],d=t[n][e+1],g=t[n][e],p=i.threshold;if(!(isNaN(g)||isNaN(d)||isNaN(f)||isNaN(h))){switch(c|=h>=p?8:0,c|=f>=p?4:0,c|=d>=p?2:0,u={cval:c=+(c|=g>=p?1:0),polygons:[],edges:{},x0:g,x1:d,x2:f,x3:h},c){case 0:i.polygons&&u.polygons.push([[0,0],[0,1],[1,1],[1,0]]);break;case 15:break;case 14:r=i.interpolate(g,h,p),a=i.interpolate(g,d,p),i.polygons_full&&(u.edges.left={path:[[0,r],[a,0]],move:{x:0,y:-1,enter:"top"}}),i.polygons&&u.polygons.push([[0,0],[0,r],[a,0]]);break;case 13:a=i.interpolate(g,d,p),o=i.interpolate(d,f,p),i.polygons_full&&(u.edges.bottom={path:[[a,0],[1,o]],move:{x:1,y:0,enter:"left"}}),i.polygons&&u.polygons.push([[a,0],[1,o],[1,0]]);break;case 11:o=i.interpolate(d,f,p),s=i.interpolate(h,f,p),i.polygons_full&&(u.edges.right={path:[[1,o],[s,1]],move:{x:0,y:1,enter:"bottom"}}),i.polygons&&u.polygons.push([[1,o],[s,1],[1,1]]);break;case 7:r=i.interpolate(g,h,p),s=i.interpolate(h,f,p),i.polygons_full&&(u.edges.top={path:[[s,1],[0,r]],move:{x:-1,y:0,enter:"right"}}),i.polygons&&u.polygons.push([[s,1],[0,r],[0,1]]);break;case 1:r=i.interpolate(g,h,p),a=i.interpolate(g,d,p),i.polygons_full&&(u.edges.bottom={path:[[a,0],[0,r]],move:{x:-1,y:0,enter:"right"}}),i.polygons&&u.polygons.push([[a,0],[0,r],[0,1],[1,1],[1,0]]);break;case 2:a=i.interpolate(g,d,p),o=i.interpolate(d,f,p),i.polygons_full&&(u.edges.right={path:[[1,o],[a,0]],move:{x:0,y:-1,enter:"top"}}),i.polygons&&u.polygons.push([[0,0],[0,1],[1,1],[1,o],[a,0]]);break;case 4:o=i.interpolate(d,f,p),s=i.interpolate(h,f,p),i.polygons_full&&(u.edges.top={path:[[s,1],[1,o]],move:{x:1,y:0,enter:"left"}}),i.polygons&&u.polygons.push([[0,0],[0,1],[s,1],[1,o],[1,0]]);break;case 8:r=i.interpolate(g,h,p),s=i.interpolate(h,f,p),i.polygons_full&&(u.edges.left={path:[[0,r],[s,1]],move:{x:0,y:1,enter:"bottom"}}),i.polygons&&u.polygons.push([[0,0],[0,r],[s,1],[1,1],[1,0]]);break;case 12:r=i.interpolate(g,h,p),o=i.interpolate(d,f,p),i.polygons_full&&(u.edges.left={path:[[0,r],[1,o]],move:{x:1,y:0,enter:"left"}}),i.polygons&&u.polygons.push([[0,0],[0,r],[1,o],[1,0]]);break;case 9:a=i.interpolate(g,d,p),s=i.interpolate(h,f,p),i.polygons_full&&(u.edges.bottom={path:[[a,0],[s,1]],move:{x:0,y:1,enter:"bottom"}}),i.polygons&&u.polygons.push([[a,0],[s,1],[1,1],[1,0]]);break;case 3:r=i.interpolate(g,h,p),o=i.interpolate(d,f,p),i.polygons_full&&(u.edges.right={path:[[1,o],[0,r]],move:{x:-1,y:0,enter:"right"}}),i.polygons&&u.polygons.push([[0,r],[0,1],[1,1],[1,o]]);break;case 6:a=i.interpolate(g,d,p),s=i.interpolate(h,f,p),i.polygons_full&&(u.edges.top={path:[[s,1],[a,0]],move:{x:0,y:-1,enter:"top"}}),i.polygons&&u.polygons.push([[0,0],[0,1],[s,1],[a,0]]);break;case 10:r=i.interpolate(g,h,p),o=i.interpolate(d,f,p),a=i.interpolate(g,d,p),s=i.interpolate(h,f,p),l=(g+d+f+h)/4,i.polygons_full&&(l<p?(u.edges.left={path:[[0,r],[s,1]],move:{x:0,y:1,enter:"bottom"}},u.edges.right={path:[[1,o],[a,0]],move:{x:0,y:-1,enter:"top"}}):(u.edges.right={path:[[1,o],[s,1]],move:{x:0,y:1,enter:"bottom"}},u.edges.left={path:[[0,r],[a,0]],move:{x:0,y:-1,enter:"top"}})),i.polygons&&(l<p?u.polygons.push([[0,0],[0,r],[s,1],[1,1],[1,o],[a,0]]):(u.polygons.push([[0,0],[0,r],[a,0]]),u.polygons.push([[s,1],[1,1],[1,o]])));break;case 5:r=i.interpolate(g,h,p),o=i.interpolate(d,f,p),a=i.interpolate(g,d,p),s=i.interpolate(h,f,p),l=(g+d+f+h)/4,i.polygons_full&&(l<p?(u.edges.bottom={path:[[a,0],[0,r]],move:{x:-1,y:0,enter:"right"}},u.edges.top={path:[[s,1],[1,o]],move:{x:1,y:0,enter:"left"}}):(u.edges.top={path:[[s,1],[0,r]],move:{x:-1,y:0,enter:"right"}},u.edges.bottom={path:[[a,0],[1,o]],move:{x:1,y:0,enter:"left"}})),i.polygons&&(l<p?u.polygons.push([[0,r],[0,1],[s,1],[1,o],[1,0],[a,0]]):(u.polygons.push([[0,r],[0,1],[s,1]]),u.polygons.push([[a,0],[1,o],[1,0]])))}return u}}js.prototype.interpolate=function(t){var e=Math.sin((1-t)*this.g)/Math.sin(this.g),n=Math.sin(t*this.g)/Math.sin(this.g),i=e*Math.cos(this.start.y)*Math.cos(this.start.x)+n*Math.cos(this.end.y)*Math.cos(this.end.x),r=e*Math.cos(this.start.y)*Math.sin(this.start.x)+n*Math.cos(this.end.y)*Math.sin(this.end.x),o=e*Math.sin(this.start.y)+n*Math.sin(this.end.y),s=Ps*Math.atan2(o,Math.sqrt(Math.pow(i,2)+Math.pow(r,2)));return[Ps*Math.atan2(r,i),s]},js.prototype.Arc=function(t,e){var n=[];if(!t||t<=2)n.push([this.start.lon,this.start.lat]),n.push([this.end.lon,this.end.lat]);else for(var i=1/(t-1),r=0;r<t;++r){var o=i*r,s=this.interpolate(o);n.push(s)}for(var a=!1,l=0,u=e&&e.offset?e.offset:10,c=180-u,h=-180+u,f=360-u,d=1;d<n.length;++d){var g=n[d-1][0],p=n[d][0],v=Math.abs(p-g);v>f&&(p>c&&g<h||g>c&&p<h)?a=!0:v>l&&(l=v)}var y=[];if(a&&l<u){var m=[];y.push(m);for(var _=0;_<n.length;++_){var b=parseFloat(n[_][0]);if(_>0&&Math.abs(b-n[_-1][0])>f){var x=parseFloat(n[_-1][0]),E=parseFloat(n[_-1][1]),w=parseFloat(n[_][0]),k=parseFloat(n[_][1]);if(x>-180&&x<h&&180===w&&_+1<n.length&&n[_-1][0]>-180&&n[_-1][0]<h){m.push([-180,n[_][1]]),_++,m.push([n[_][0],n[_][1]]);continue}if(x>c&&x<180&&-180===w&&_+1<n.length&&n[_-1][0]>c&&n[_-1][0]<180){m.push([180,n[_][1]]),_++,m.push([n[_][0],n[_][1]]);continue}if(x<h&&w>c){var S=x;x=w,w=S;var C=E;E=k,k=C}if(x>c&&w<h&&(w+=360),x<=180&&w>=180&&x<w){var O=(180-x)/(w-x),I=O*k+(1-O)*E;m.push([n[_-1][0]>c?180:-180,I]),(m=[]).push([n[_-1][0]>c?-180:180,I]),y.push(m)}else m=[],y.push(m);m.push([b,n[_][1]])}else m.push([n[_][0],n[_][1]])}}else{var M=[];y.push(M);for(var R=0;R<n.length;++R)M.push([n[R][0],n[R][1]])}for(var T=new As(this.properties),P=0;P<y.length;++P){var L=new Ns;T.geometries.push(L);for(var N=y[P],A=0;A<N.length;++A)L.move_to(N[A])}return T},$s.prototype.cellsInBand=function(t,e,n){var i=[];return n=void 0===n||n,this.lowerBound>e||this.upperBound<t||(this.childA||this.childB||this.childC||this.childD?(this.childA&&(i=i.concat(this.childA.cellsInBand(t,e,n))),this.childB&&(i=i.concat(this.childB.cellsInBand(t,e,n))),this.childD&&(i=i.concat(this.childD.cellsInBand(t,e,n))),this.childC&&(i=i.concat(this.childC.cellsInBand(t,e,n)))):(n||this.lowerBound<=t||this.upperBound>=e)&&i.push({x:this.x,y:this.y})),i},$s.prototype.cellsBelowThreshold=function(t,e){var n=[];return e=void 0===e||e,this.lowerBound>t||(this.childA||this.childB||this.childC||this.childD?(this.childA&&(n=n.concat(this.childA.cellsBelowThreshold(t,e))),this.childB&&(n=n.concat(this.childB.cellsBelowThreshold(t,e))),this.childD&&(n=n.concat(this.childD.cellsBelowThreshold(t,e))),this.childC&&(n=n.concat(this.childC.cellsBelowThreshold(t,e)))):(e||this.upperBound>=t)&&n.push({x:this.x,y:this.y})),n};var ia=function(t,e,n,i,r,o){o.polygons&&t.polygons.push([[0,0],[0,1],[1,1],[1,0]])},ra=function(t,e,n,i,r,o){var s=o.interpolate(e,n,o.minV,o.maxV),a=o.interpolate(e,r,o.minV,o.maxV);o.polygons_full&&(t.edges.lb={path:[[0,a],[s,0]],move:{x:0,y:-1,enter:"tl"}}),o.polygons&&t.polygons.push([[0,a],[s,0],[0,0]])},oa=function(t,e,n,i,r,o){var s=o.interpolate(e,n,o.minV,o.maxV),a=o.interpolate(n,i,o.minV,o.maxV);o.polygons_full&&(t.edges.br={path:[[s,0],[1,a]],move:{x:1,y:0,enter:"lb"}}),o.polygons&&t.polygons.push([[s,0],[1,a],[1,0]])},sa=function(t,e,n,i,r,o){var s=o.interpolate(n,i,o.minV,o.maxV),a=o.interpolate(r,i,o.minV,o.maxV);o.polygons_full&&(t.edges.rt={path:[[1,s],[a,1]],move:{x:0,y:1,enter:"br"}}),o.polygons&&t.polygons.push([[1,s],[a,1],[1,1]])},aa=function(t,e,n,i,r,o){var s=o.interpolate(r,i,o.minV,o.maxV),a=o.interpolate(e,r,o.minV,o.maxV);o.polygons_full&&(t.edges.tl={path:[[s,1],[0,a]],move:{x:-1,y:0,enter:"rt"}}),o.polygons&&t.polygons.push([[0,a],[0,1],[s,1]])},la=function(t,e,n,i,r,o){var s=o.interpolate(n,i,o.minV,o.maxV),a=o.interpolate(e,r,o.minV,o.maxV);o.polygons_full&&(t.edges.rt={path:[[1,s],[0,a]],move:{x:-1,y:0,enter:"rt"}}),o.polygons&&t.polygons.push([[0,a],[0,1],[1,1],[1,s]])},ua=function(t,e,n,i,r,o){var s=o.interpolate(e,n,o.minV,o.maxV),a=o.interpolate(r,i,o.minV,o.maxV);o.polygons_full&&(t.edges.br={path:[[s,0],[a,1]],move:{x:0,y:1,enter:"br"}}),o.polygons&&t.polygons.push([[s,0],[a,1],[1,1],[1,0]])},ca=function(t,e,n,i,r,o){var s=o.interpolate(e,r,o.minV,o.maxV),a=o.interpolate(n,i,o.minV,o.maxV);o.polygons_full&&(t.edges.lb={path:[[0,s],[1,a]],move:{x:1,y:0,enter:"lb"}}),o.polygons&&t.polygons.push([[0,0],[0,s],[1,a],[1,0]])},ha=function(t,e,n,i,r,o){var s=o.interpolate(r,i,o.minV,o.maxV),a=o.interpolate(e,n,o.minV,o.maxV);o.polygons_full&&(t.edges.tl={path:[[s,1],[a,0]],move:{x:0,y:-1,enter:"tl"}}),o.polygons&&t.polygons.push([[0,0],[0,1],[s,1],[a,0]])},fa=function(t,e,n,i,r,o){var s=o.interpolate_a(e,n,o.minV,o.maxV),a=o.interpolate_b(e,n,o.minV,o.maxV),l=o.interpolate_a(e,r,o.minV,o.maxV),u=o.interpolate_b(e,r,o.minV,o.maxV);o.polygons_full&&(t.edges.bl={path:[[s,0],[0,l]],move:{x:-1,y:0,enter:"rb"}},t.edges.lt={path:[[0,u],[a,0]],move:{x:0,y:-1,enter:"tr"}}),o.polygons&&t.polygons.push([[s,0],[0,l],[0,u],[a,0]])},da=function(t,e,n,i,r,o){var s=o.interpolate_a(e,n,o.minV,o.maxV),a=o.interpolate_b(e,n,o.minV,o.maxV),l=o.interpolate_a(n,i,o.minV,o.maxV),u=o.interpolate_b(n,i,o.minV,o.maxV);o.polygons_full&&(t.edges.bl={path:[[s,0],[1,u]],move:{x:1,y:0,enter:"lt"}},t.edges.rb={path:[[1,l],[a,0]],move:{x:0,y:-1,enter:"tr"}}),o.polygons&&t.polygons.push([[s,0],[1,u],[1,l],[a,0]])},ga=function(t,e,n,i,r,o){var s=o.interpolate_a(r,i,o.minV,o.maxV),a=o.interpolate_b(r,i,o.minV,o.maxV),l=o.interpolate_b(n,i,o.minV,o.maxV),u=o.interpolate_a(n,i,o.minV,o.maxV);o.polygons_full&&(t.edges.rb={path:[[1,u],[s,1]],move:{x:0,y:1,enter:"bl"}},t.edges.tr={path:[[a,1],[1,l]],move:{x:1,y:0,enter:"lt"}}),o.polygons&&t.polygons.push([[1,u],[s,1],[a,1],[1,l]])},pa=function(t,e,n,i,r,o){var s=o.interpolate_a(r,i,o.minV,o.maxV),a=o.interpolate_b(r,i,o.minV,o.maxV),l=o.interpolate_b(e,r,o.minV,o.maxV),u=o.interpolate_a(e,r,o.minV,o.maxV);o.polygons_full&&(t.edges.tr={path:[[a,1],[0,u]],move:{x:-1,y:0,enter:"rb"}},t.edges.lt={path:[[0,l],[s,1]],move:{x:0,y:1,enter:"bl"}}),o.polygons&&t.polygons.push([[a,1],[0,u],[0,l],[s,1]])},va=function(t,e,n,i,r,o){var s=o.interpolate_a(e,r,o.minV,o.maxV),a=o.interpolate_b(e,r,o.minV,o.maxV),l=o.interpolate_b(n,i,o.minV,o.maxV),u=o.interpolate_a(n,i,o.minV,o.maxV);o.polygons_full&&(t.edges.lt={path:[[0,a],[1,l]],move:{x:1,y:0,enter:"lt"}},t.edges.rb={path:[[1,u],[0,s]],move:{x:-1,y:0,enter:"rb"}}),o.polygons&&t.polygons.push([[0,s],[0,a],[1,l],[1,u]])},ya=function(t,e,n,i,r,o){var s=o.interpolate_a(r,i,o.minV,o.maxV),a=o.interpolate_b(r,i,o.minV,o.maxV),l=o.interpolate_b(e,n,o.minV,o.maxV),u=o.interpolate_a(e,n,o.minV,o.maxV);o.polygons_full&&(t.edges.tr={path:[[a,1],[l,0]],move:{x:0,y:-1,enter:"tr"}},t.edges.bl={path:[[u,0],[s,1]],move:{x:0,y:1,enter:"bl"}}),o.polygons&&t.polygons.push([[u,0],[s,1],[a,1],[l,0]])},ma=function(t,e,n,i,r,o){var s=o.interpolate(r,i,o.minV,o.maxV),a=o.interpolate(n,i,o.minV,o.maxV);o.polygons_full&&(t.edges.tl={path:[[s,1],[1,a]],move:{x:1,y:0,enter:"lb"}}),o.polygons&&t.polygons.push([[0,0],[0,1],[s,1],[1,a],[1,0]])},_a=function(t,e,n,i,r,o){var s=o.interpolate(e,r,o.minV,o.maxV),a=o.interpolate(r,i,o.minV,o.maxV);o.polygons_full&&(t.edges.lb={path:[[0,s],[a,1]],move:{x:0,y:1,enter:"br"}}),o.polygons&&t.polygons.push([[0,0],[0,s],[a,1],[1,1],[1,0]])},ba=function(t,e,n,i,r,o){var s=o.interpolate(e,n,o.minV,o.maxV),a=o.interpolate(n,i,o.minV,o.maxV);o.polygons_full&&(t.edges.rt={path:[[1,a],[s,0]],move:{x:0,y:-1,enter:"tl"}}),o.polygons&&t.polygons.push([[0,0],[0,1],[1,1],[1,a],[s,0]])},xa=function(t,e,n,i,r,o){var s=o.interpolate(e,r,o.minV,o.maxV),a=o.interpolate(e,n,o.minV,o.maxV);o.polygons_full&&(t.edges.br={path:[[a,0],[0,s]],move:{x:-1,y:0,enter:"rt"}}),o.polygons&&t.polygons.push([[0,s],[0,1],[1,1],[1,0],[a,0]])},Ea=function(t,e,n,i,r,o){var s=o.interpolate(e,r,o.minV,o.maxV),a=o.interpolate(r,i,o.minV,o.maxV),l=o.interpolate_b(n,i,o.minV,o.maxV),u=o.interpolate_a(n,i,o.minV,o.maxV);o.polygons_full&&(t.edges.tl={path:[[a,1],[1,l]],move:{x:1,y:0,enter:"lt"}},t.edges.rb={path:[[1,u],[0,s]],move:{x:-1,y:0,enter:"rt"}}),o.polygons&&t.polygons.push([[0,s],[0,1],[a,1],[1,l],[1,u]])},wa=function(t,e,n,i,r,o){var s=o.interpolate(n,i,o.minV,o.maxV),a=o.interpolate_b(e,n,o.minV,o.maxV),l=o.interpolate_a(e,n,o.minV,o.maxV),u=o.interpolate(r,i,o.minV,o.maxV);o.polygons_full&&(t.edges.rt={path:[[1,s],[a,0]],move:{x:0,y:-1,enter:"tr"}},t.edges.bl={path:[[l,0],[u,1]],move:{x:0,y:1,enter:"br"}}),o.polygons&&t.polygons.push([[u,1],[1,1],[1,s],[a,0],[l,0]])},ka=function(t,e,n,i,r,o){var s=o.interpolate(e,n,o.minV,o.maxV),a=o.interpolate_a(e,r,o.minV,o.maxV),l=o.interpolate_b(e,r,o.minV,o.maxV),u=o.interpolate(n,i,o.minV,o.maxV);o.polygons_full&&(t.edges.br={path:[[s,0],[0,a]],move:{x:-1,y:0,enter:"rb"}},t.edges.lt={path:[[0,l],[1,u]],move:{x:1,y:0,enter:"lb"}}),o.polygons&&t.polygons.push([[s,0],[0,a],[0,l],[1,u],[1,0]])},Sa=function(t,e,n,i,r,o){var s=o.interpolate(e,r,o.minV,o.maxV),a=o.interpolate_a(r,i,o.minV,o.maxV),l=o.interpolate_b(r,i,o.minV,o.maxV),u=o.interpolate(e,n,o.minV,o.maxV);o.polygons_full&&(t.edges.lb={path:[[0,s],[a,1]],move:{x:0,y:1,enter:"bl"}},t.edges.tr={path:[[l,1],[u,0]],move:{x:0,y:-1,enter:"tl"}}),o.polygons&&t.polygons.push([[0,0],[0,s],[a,1],[l,1],[u,0]])},Ca=function(t,e,n,i,r,o){var s=o.interpolate(e,r,o.minV,o.maxV),a=o.interpolate(r,i,o.minV,o.maxV),l=o.interpolate_b(e,n,o.minV,o.maxV),u=o.interpolate_a(e,n,o.minV,o.maxV);o.polygons_full&&(t.edges.bl={path:[[u,0],[0,s]],move:{x:-1,y:0,enter:"rt"}},t.edges.tl={path:[[a,1],[l,0]],move:{x:0,y:-1,enter:"tr"}}),o.polygons&&t.polygons.push([[0,s],[0,1],[a,1],[l,0],[u,0]])},Oa=function(t,e,n,i,r,o){var s=o.interpolate_a(e,r,o.minV,o.maxV),a=o.interpolate_b(e,r,o.minV,o.maxV),l=o.interpolate(r,i,o.minV,o.maxV),u=o.interpolate(n,r,o.minV,o.maxV);o.polygons_full&&(t.edges.lt={path:[[0,a],[l,1]],move:{x:0,y:1,enter:"br"}},t.edges.rt={path:[[1,u],[0,s]],move:{x:-1,y:0,enter:"rb"}}),o.polygons&&t.polygons.push([[0,s],[0,a],[l,1],[1,1],[1,u]])},Ia=function(t,e,n,i,r,o){var s=o.interpolate_a(r,i,o.minV,o.maxV),a=o.interpolate_b(r,i,o.minV,o.maxV),l=o.interpolate(n,i,o.minV,o.maxV),u=o.interpolate(e,n,o.minV,o.maxV);o.polygons_full&&(t.edges.br={path:[[u,0],[s,1]],move:{x:0,y:1,enter:"bl"}},t.edges.tr={path:[[a,1],[1,l]],move:{x:1,y:0,enter:"lb"}}),o.polygons&&t.polygons.push([[s,1],[a,1],[1,l],[1,0],[u,0]])},Ma=function(t,e,n,i,r,o){var s=o.interpolate(e,r,o.minV,o.maxV),a=o.interpolate_b(n,i,o.minV,o.maxV),l=o.interpolate_a(n,i,o.minV,o.maxV),u=o.interpolate(e,n,o.minV,o.maxV);o.polygons_full&&(t.edges.lb={path:[[0,s],[1,a]],move:{x:1,y:0,enter:"lt"}},t.edges.rb={path:[[1,l],[u,0]],move:{x:0,y:-1,enter:"tl"}}),o.polygons&&t.polygons.push([[0,0],[0,s],[1,a],[1,l],[u,0]])},Ra=function(t,e,n,i,r,o){var s=o.interpolate(e,r,o.minV,o.maxV),a=o.interpolate_a(r,i,o.minV,o.maxV),l=o.interpolate_b(r,i,o.minV,o.maxV),u=o.interpolate(n,i,o.minV,o.maxV);o.polygons_full&&(t.edges.lb={path:[[0,s],[a,1]],move:{x:0,y:1,enter:"bl"}},t.edges.tr={path:[[l,1],[1,u]],move:{x:1,y:0,enter:"lb"}}),o.polygons&&t.polygons.push([[0,0],[0,s],[a,1],[l,1],[1,u],[1,0]])},Ta=function(t,e,n,i,r,o){var s=o.interpolate(e,n,o.minV,o.maxV),a=o.interpolate_a(e,r,o.minV,o.maxV),l=o.interpolate_b(e,r,o.minV,o.maxV),u=o.interpolate(r,i,o.minV,o.maxV);o.polygons_full&&(t.edges.br={path:[[s,0],[0,a]],move:{x:-1,y:0,enter:"rb"}},t.edges.lt={path:[[0,l],[u,1]],move:{x:0,y:1,enter:"br"}}),o.polygons&&t.polygons.push([[s,0],[0,a],[0,l],[u,1],[1,1],[1,0]])},Pa=function(t,e,n,i,r,o){var s=o.interpolate_a(e,n,o.minV,o.maxV),a=o.interpolate_b(e,n,o.minV,o.maxV),l=o.interpolate(e,r,o.minV,o.maxV),u=o.interpolate(n,i,o.minV,o.maxV);o.polygons_full&&(t.edges.bl={path:[[s,0],[0,l]],move:{x:-1,y:0,enter:"rt"}},t.edges.rt={path:[[1,u],[a,0]],move:{x:0,y:-1,enter:"tr"}}),o.polygons&&t.polygons.push([[s,0],[0,l],[0,1],[1,1],[1,u],[a,0]])},La=function(t,e,n,i,r,o){var s=o.interpolate(e,n,o.minV,o.maxV),a=o.interpolate(r,i,o.minV,o.maxV),l=o.interpolate_b(n,i,o.minV,o.maxV),u=o.interpolate_a(n,i,o.minV,o.maxV);o.polygons_full&&(t.edges.tl={path:[[a,1],[1,l]],move:{x:1,y:0,enter:"lt"}},t.edges.rb={path:[[1,u],[s,0]],move:{x:0,y:-1,enter:"tl"}}),o.polygons&&t.polygons.push([[0,0],[0,1],[a,1],[1,l],[1,u],[s,0]])},Na=function(t,e,n,i,r,o){var s=o.interpolate(e,r,o.minV,o.maxV),a=o.interpolate(r,i,o.minV,o.maxV),l=o.interpolate(n,i,o.minV,o.maxV),u=o.interpolate(e,n,o.minV,o.maxV);o.polygons_full&&(t.edges.lb={path:[[0,s],[a,1]],move:{x:0,y:1,enter:"br"}},t.edges.rt={path:[[1,l],[u,0]],move:{x:0,y:-1,enter:"tl"}}),o.polygons&&t.polygons.push([[0,0],[0,s],[a,1],[1,1],[1,l],[u,0]])},Aa=function(t,e,n,i,r,o){var s=o.interpolate(e,n,o.minV,o.maxV),a=o.interpolate(e,r,o.minV,o.maxV),l=o.interpolate(r,i,o.minV,o.maxV),u=o.interpolate(n,i,o.minV,o.maxV);o.polygons_full&&(t.edges.br={path:[[s,0],[0,a]],move:{x:-1,y:0,enter:"rt"}},t.edges.tl={path:[[l,1],[1,u]],move:{x:1,y:0,enter:"lb"}}),o.polygons&&t.polygons.push([[s,0],[0,a],[0,1],[l,1],[1,u],[1,0]])},ja=function(t,e,n,i,r,o){var s=o.interpolate_a(e,n,o.minV,o.maxV),a=o.interpolate_b(e,n,o.minV,o.maxV),l=o.interpolate_a(e,r,o.minV,o.maxV),u=o.interpolate_b(e,r,o.minV,o.maxV),c=o.interpolate(r,i,o.minV,o.maxV),h=o.interpolate(n,i,o.minV,o.maxV);o.polygons_full&&(t.edges.bl={path:[[s,0],[0,l]],move:{x:-1,y:0,enter:"rb"}},t.edges.lt={path:[[0,u],[c,1]],move:{x:0,y:1,enter:"br"}},t.edges.rt={path:[[1,h],[a,0]],move:{x:0,y:-1,enter:"tr"}}),o.polygons&&t.polygons.push([[s,0],[0,l],[0,u],[c,1],[1,1],[1,h],[a,0]])},Da=function(t,e,n,i,r,o){var s=o.interpolate(e,n,o.minV,o.maxV),a=o.interpolate(e,r,o.minV,o.maxV),l=o.interpolate_a(r,i,o.minV,o.maxV),u=o.interpolate_b(r,i,o.minV,o.maxV),c=o.interpolate_b(n,i,o.minV,o.maxV),h=o.interpolate_a(n,i,o.minV,o.maxV);o.polygons_full&&(t.edges.lb={path:[[0,a],[l,1]],move:{x:0,y:1,enter:"bl"}},t.edges.tr={path:[[u,1],[1,c]],move:{x:1,y:0,enter:"lt"}},t.edges.rb={path:[[1,h],[s,0]],move:{x:0,y:-1,enter:"tl"}}),o.polygons&&t.polygons.push([[0,0],[0,a],[l,1],[u,1],[1,c],[1,h],[s,0]])},Fa=function(t,e,n,i,r,o){var s=o.interpolate_a(e,n,o.minV,o.maxV),a=o.interpolate_b(e,n,o.minV,o.maxV),l=o.interpolate(e,r,o.minV,o.maxV),u=o.interpolate(r,i,o.minV,o.maxV),c=o.interpolate_b(n,i,o.minV,o.maxV),h=o.interpolate_a(n,i,o.minV,o.maxV);o.polygons_full&&(t.edges.bl={path:[[s,0],[0,l]],move:{x:-1,y:0,enter:"rt"}},t.edges.tl={path:[[u,1],[1,c]],move:{x:1,y:0,enter:"lt"}},t.edges.rb={path:[[1,h],[a,0]],move:{x:0,y:-1,enter:"tr"}}),o.polygons&&t.polygons.push([[s,0],[0,l],[0,1],[u,1],[1,c],[1,h],[a,0]])},za=function(t,e,n,i,r,o){var s=o.interpolate(e,n,o.minV,o.maxV),a=o.interpolate_a(e,r,o.minV,o.maxV),l=o.interpolate_b(e,r,o.minV,o.maxV),u=o.interpolate_a(r,i,o.minV,o.maxV),c=o.interpolate_b(r,i,o.minV,o.maxV),h=o.interpolate(n,i,o.minV,o.maxV);o.polygons_full&&(t.edges.br={path:[[s,0],[0,a]],move:{x:-1,y:0,enter:"rb"}},t.edges.lt={path:[[0,l],[u,1]],move:{x:0,y:1,enter:"bl"}},t.edges.tr={path:[[c,1],[1,h]],move:{x:1,y:0,enter:"lb"}}),o.polygons&&t.polygons.push([[s,0],[0,a],[0,l],[u,1],[c,1],[1,h],[1,0]])},Ga=function(t,e,n,i,r,o){var s=o.interpolate_a(e,n,o.minV,o.maxV),a=o.interpolate_b(e,n,o.minV,o.maxV),l=o.interpolate_a(e,r,o.minV,o.maxV),u=o.interpolate_b(e,r,o.minV,o.maxV),c=o.interpolate_a(r,i,o.minV,o.maxV),h=o.interpolate_b(r,i,o.minV,o.maxV),f=o.interpolate_b(n,i,o.minV,o.maxV),d=o.interpolate_a(n,i,o.minV,o.maxV);o.polygons_full&&(t.edges.bl={path:[[s,0],[0,l]],move:{x:-1,y:0,enter:"rb"}},t.edges.lt={path:[[0,u],[c,1]],move:{x:0,y:1,enter:"bl"}},t.edges.tr={path:[[h,1],[1,f]],move:{x:1,y:0,enter:"lt"}},t.edges.rb={path:[[1,d],[a,0]],move:{x:0,y:-1,enter:"tr"}}),o.polygons&&t.polygons.push([[s,0],[0,l],[0,u],[c,1],[h,1],[1,f],[1,d],[a,0]])};function Ba(t,e,n,i){var r,o,s,a=!1,l=null,u=null,c=null,h=null,f=!1,d=[],g=[],p=[];if(!t)throw new Error("data is required");if(null==e)throw new Error("lowerBound is required");if(null==n)throw new Error("bandWidth is required");if(s=function(t){var e,n,i,r,o;for(r=new Zs,t=t||{},o=Object.keys(r),e=0;e<o.length;e++)null!=(i=t[n=o[e]])&&(r[n]=i);return r.polygons_full=!r.polygons,r.interpolate=Xs,r.interpolate_a=Ws,r.interpolate_b=Hs,r}(i),t instanceof ta)l=t,u=t.root,c=t.data,s.noQuadTree||(a=!0);else{if(!Array.isArray(t)||!Array.isArray(t[0]))throw new Error("input is neither array of arrays nor object retrieved from 'QuadTree()'");c=t}if(Array.isArray(e)){for(f=!0,s.noQuadTree||(a=!0),r=0;r<e.length;r++)if(isNaN(+e[r]))throw new Error("lowerBound["+r+"] is not a number");if(Array.isArray(n)){if(e.length!==n.length)throw new Error("lowerBound and bandWidth have unequal lengths");for(r=0;r<n.length;r++)if(isNaN(+n[r]))throw new Error("bandWidth["+r+"] is not a number")}else{if(isNaN(+n))throw new Error("bandWidth must be a number");for(d=[],r=0;r<e.length;r++)d.push(n);n=d}}else{if(isNaN(+e))throw new Error("lowerBound must be a number");if(e=[e],isNaN(+n))throw new Error("bandWidth must be a number");n=[n]}return a&&!u&&(l=new ta(c),u=l.root,c=l.data),s.verbose&&(s.polygons?console.log("MarchingSquaresJS-isoBands: returning single polygons for each grid cell"):console.log("MarchingSquaresJS-isoBands: returning polygon paths for entire data grid"),f&&console.log("MarchingSquaresJS-isoBands: multiple bands requested, returning array of band polygons instead of polygons for a single band")),e.forEach((function(t,e){if(g=[],s.minV=t,s.maxV=t+n[e],s.verbose&&console.log("MarchingSquaresJS-isoBands: computing isobands for ["+t+":"+(t+n[e])+"]"),s.polygons)if(a)u.cellsInBand(s.minV,s.maxV,!0).forEach((function(t){g=g.concat(Ks(Ya(c,t.x,t.y,s),t.x,t.y,s))}));else for(o=0;o<c.length-1;++o)for(r=0;r<c[0].length-1;++r)g=g.concat(Ks(Ya(c,r,o,s),r,o,s));else{for(h=[],r=0;r<c[0].length-1;++r)h[r]=[];if(a)u.cellsInBand(s.minV,s.maxV,!1).forEach((function(t){h[t.x][t.y]=Ya(c,t.x,t.y,s)}));else for(r=0;r<c[0].length-1;++r)for(o=0;o<c.length-1;++o)h[r][o]=Ya(c,r,o,s);g=function(t,e,n){var i,r,o,s,a,l,u,c,h,f,d,g,p,v,m,_,b=[],x=t.length-1,E=t[0].length-1,w=[["rt","rb"],["br","bl"],["lb","lt"],["tl","tr"]],k=[0,-1,0,1],S=[-1,0,1,0],C=["bl","lb","lt","tl","tr","rt","rb","br"],O={bl:1,br:1,lb:2,lt:2,tl:3,tr:3,rt:0,rb:0};return function(t,e,n){var i,r,o,s,a;for(i=!0,r=t[0].length,o=t.length,a=0;a<o;a++)if(t[a][0]<e||t[a][0]>n||t[a][r-1]<e||t[a][r-1]>n){i=!1;break}if(i&&(t[o-1][0]<e||t[o-1][0]>n||t[o-1][r-1]<e||t[o-1][r-1]>n)&&(i=!1),i)for(s=0;s<r-1;s++)if(t[0][s]<e||t[0][s]>n||t[o-1][s]<e||t[o-1][s]>n){i=!1;break}return i}(t,n.minV,n.maxV)&&(n.linearRing?b.push([[0,0],[0,x],[E,x],[E,0],[0,0]]):b.push([[0,0],[0,x],[E,x],[E,0]])),e.forEach((function(t,I){t.forEach((function(t,M){for(i=null,o=0;o<8;o++)if(i=C[o],"object"===y(t.edges[i])){for(r=[],s=t.edges[i],u=i,c=I,h=M,f=!1,d=[I+s.path[0][0],M+s.path[0][1]],r.push(d);!f&&"object"===y((g=e[c][h]).edges[u]);)if(s=g.edges[u],delete g.edges[u],(m=s.path[1])[0]+=c,m[1]+=h,r.push(m),u=s.move.enter,c+=s.move.x,h+=s.move.y,void 0===e[c]||void 0===e[c][h]){if(p=0,v=0,c===E)c--,p=0;else if(c<0)c++,p=2;else if(h===x)h--,p=3;else{if(!(h<0))throw new Error("Left the grid somewhere in the interior!");h++,p=1}if(c===I&&h===M&&p===O[i]){f=!0,u=i;break}for(;;){if(_=!1,v>4)throw new Error("Direction change counter overflow! This should never happen!");if(void 0!==e[c]&&void 0!==e[c][h])for(g=e[c][h],a=0;a<w[p].length;a++)if(l=w[p][a],"object"===y(g.edges[l])){s=g.edges[l],r.push(Js(c,h,p,s.path)),u=l,_=!0;break}if(_)break;if(r.push(Qs(c,h,p)),h+=S[p],void 0!==e[c+=k[p]]&&void 0!==e[c][h]||(0===p&&h<0||1===p&&c<0||2===p&&h===x||3===p&&c===E)&&(c-=k[p],h-=S[p],p=(p+1)%4,v++),c===I&&h===M&&p===O[i]){f=!0,u=i;break}}}!n.linearRing||r[r.length-1][0]===d[0]&&r[r.length-1][1]===d[1]||r.push(d),b.push(r)}}))})),b}(c,h,s)}f?p.push(g):p=g,"function"==typeof s.successCallback&&s.successCallback(p,t,n[e])})),p}function Va(t,e,n,i,r,o){var s=(i+n+e+t)/4;return s>o?2:s<r?0:1}function Ya(t,e,n,i){var r,o,s=0,a=t[n+1][e],l=t[n+1][e+1],u=t[n][e+1],c=t[n][e],h=i.minV,f=i.maxV;if(!(isNaN(c)||isNaN(u)||isNaN(l)||isNaN(a))){switch(s|=a<h?0:a>f?128:64,s|=l<h?0:l>f?32:16,s|=u<h?0:u>f?8:4,o=0,r={cval:s=+(s|=c<h?0:c>f?2:1),polygons:[],edges:{},x0:c,x1:u,x2:l,x3:a,x:e,y:n},s){case 85:ia(r,c,u,l,a,i);case 0:case 170:break;case 169:ra(r,c,u,l,a,i);break;case 166:oa(r,c,u,l,a,i);break;case 154:sa(r,c,u,l,a,i);break;case 106:aa(r,c,u,l,a,i);break;case 1:ra(r,c,u,l,a,i);break;case 4:oa(r,c,u,l,a,i);break;case 16:sa(r,c,u,l,a,i);break;case 64:aa(r,c,u,l,a,i);break;case 168:fa(r,c,u,l,a,i);break;case 162:da(r,c,u,l,a,i);break;case 138:ga(r,c,u,l,a,i);break;case 42:pa(r,c,u,l,a,i);break;case 2:fa(r,c,u,l,a,i);break;case 8:da(r,c,u,l,a,i);break;case 32:ga(r,c,u,l,a,i);break;case 128:pa(r,c,u,l,a,i);break;case 5:ca(r,c,u,l,a,i);break;case 20:ua(r,c,u,l,a,i);break;case 80:la(r,c,u,l,a,i);break;case 65:ha(r,c,u,l,a,i);break;case 165:ca(r,c,u,l,a,i);break;case 150:ua(r,c,u,l,a,i);break;case 90:la(r,c,u,l,a,i);break;case 105:ha(r,c,u,l,a,i);break;case 160:va(r,c,u,l,a,i);break;case 130:ya(r,c,u,l,a,i);break;case 10:va(r,c,u,l,a,i);break;case 40:ya(r,c,u,l,a,i);break;case 101:ma(r,c,u,l,a,i);break;case 149:_a(r,c,u,l,a,i);break;case 86:xa(r,c,u,l,a,i);break;case 89:ba(r,c,u,l,a,i);break;case 69:ma(r,c,u,l,a,i);break;case 21:_a(r,c,u,l,a,i);break;case 84:xa(r,c,u,l,a,i);break;case 81:ba(r,c,u,l,a,i);break;case 96:Ea(r,c,u,l,a,i);break;case 24:wa(r,c,u,l,a,i);break;case 6:ka(r,c,u,l,a,i);break;case 129:Sa(r,c,u,l,a,i);break;case 74:Ea(r,c,u,l,a,i);break;case 146:wa(r,c,u,l,a,i);break;case 164:ka(r,c,u,l,a,i);break;case 41:Sa(r,c,u,l,a,i);break;case 66:Ca(r,c,u,l,a,i);break;case 144:Oa(r,c,u,l,a,i);break;case 36:Ia(r,c,u,l,a,i);break;case 9:Ma(r,c,u,l,a,i);break;case 104:Ca(r,c,u,l,a,i);break;case 26:Oa(r,c,u,l,a,i);break;case 134:Ia(r,c,u,l,a,i);break;case 161:Ma(r,c,u,l,a,i);break;case 37:Ra(r,c,u,l,a,i);break;case 148:Ta(r,c,u,l,a,i);break;case 82:Pa(r,c,u,l,a,i);break;case 73:La(r,c,u,l,a,i);break;case 133:Ra(r,c,u,l,a,i);break;case 22:Ta(r,c,u,l,a,i);break;case 88:Pa(r,c,u,l,a,i);break;case 97:La(r,c,u,l,a,i);break;case 145:case 25:Na(r,c,u,l,a,i);break;case 70:case 100:Aa(r,c,u,l,a,i);break;case 17:0===(o=Va(c,u,l,a,h,f))?(ra(r,c,u,l,a,i),sa(r,c,u,l,a,i)):Na(r,c,u,l,a,i);break;case 68:0===(o=Va(c,u,l,a,h,f))?(aa(r,c,u,l,a,i),oa(r,c,u,l,a,i)):Aa(r,c,u,l,a,i);break;case 153:2===(o=Va(c,u,l,a,h,f))?(ra(r,c,u,l,a,i),sa(r,c,u,l,a,i)):Na(r,c,u,l,a,i);break;case 102:2===(o=Va(c,u,l,a,h,f))?(aa(r,c,u,l,a,i),oa(r,c,u,l,a,i)):Aa(r,c,u,l,a,i);break;case 152:2===(o=Va(c,u,l,a,h,f))?(sa(r,c,u,l,a,i),fa(r,c,u,l,a,i)):ja(r,c,u,l,a,i);break;case 137:2===(o=Va(c,u,l,a,h,f))?(ra(r,c,u,l,a,i),ga(r,c,u,l,a,i)):Da(r,c,u,l,a,i);break;case 98:2===(o=Va(c,u,l,a,h,f))?(aa(r,c,u,l,a,i),da(r,c,u,l,a,i)):Fa(r,c,u,l,a,i);break;case 38:2===(o=Va(c,u,l,a,h,f))?(oa(r,c,u,l,a,i),pa(r,c,u,l,a,i)):za(r,c,u,l,a,i);break;case 18:0===(o=Va(c,u,l,a,h,f))?(sa(r,c,u,l,a,i),fa(r,c,u,l,a,i)):ja(r,c,u,l,a,i);break;case 33:0===(o=Va(c,u,l,a,h,f))?(ra(r,c,u,l,a,i),ga(r,c,u,l,a,i)):Da(r,c,u,l,a,i);break;case 72:0===(o=Va(c,u,l,a,h,f))?(aa(r,c,u,l,a,i),da(r,c,u,l,a,i)):Fa(r,c,u,l,a,i);break;case 132:0===(o=Va(c,u,l,a,h,f))?(oa(r,c,u,l,a,i),pa(r,c,u,l,a,i)):za(r,c,u,l,a,i);break;case 136:0===(o=Va(c,u,l,a,h,f))?(pa(r,c,u,l,a,i),da(r,c,u,l,a,i)):1===o?Ga(r,c,u,l,a,i):(fa(r,c,u,l,a,i),ga(r,c,u,l,a,i));break;case 34:0===(o=Va(c,u,l,a,h,f))?(fa(r,c,u,l,a,i),ga(r,c,u,l,a,i)):1===o?Ga(r,c,u,l,a,i):(pa(r,c,u,l,a,i),da(r,c,u,l,a,i))}return r}}var qa=Object.defineProperty,Ua=Object.getOwnPropertySymbols,Xa=Object.prototype.hasOwnProperty,Wa=Object.prototype.propertyIsEnumerable,Ha=function(t,e,n){return e in t?qa(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n},Za=function(t,e){for(var n in e||(e={}))Xa.call(e,n)&&Ha(t,n,e[n]);if(Ua){var i,r=a(Ua(e));try{for(r.s();!(i=r.n()).done;)n=i.value,Wa.call(e,n)&&Ha(t,n,e[n])}catch(t){r.e(t)}finally{r.f()}}return t};function Ka(t){var e=t.map((function(t){return{ring:t,area:It(C([t]))}}));return e.sort((function(t,e){return e.area-t.area})),e.map((function(t){return t.ring}))}function Ja(t){for(var e=t.map((function(t){return{lrCoordinates:t,grouped:!1}})),n=[];!$a(e);)for(var i=0;i<e.length;i++)if(!e[i].grouped){var r=[];r.push(e[i].lrCoordinates),e[i].grouped=!0;for(var o=C([e[i].lrCoordinates]),s=i+1;s<e.length;s++)e[s].grouped||Qa(C([e[s].lrCoordinates]),o)&&(r.push(e[s].lrCoordinates),e[s].grouped=!0);n.push(r)}return n}function Qa(t,e){for(var n=Rs(t),i=0;i<n.features.length;i++)if(!Bt(n.features[i],e))return!1;return!0}function $a(t){for(var e=0;e<t.length;e++)if(!1===t[e].grouped)return!1;return!0}var tl=Object.defineProperty,el=Object.getOwnPropertySymbols,nl=Object.prototype.hasOwnProperty,il=Object.prototype.propertyIsEnumerable,rl=function(t,e,n){return e in t?tl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n},ol=function(t,e){for(var n in e||(e={}))nl.call(e,n)&&rl(t,n,e[n]);if(el){var i,r=a(el(e));try{for(r.s();!(i=r.n()).done;)n=i.value,il.call(e,n)&&rl(t,n,e[n])}catch(t){r.e(t)}finally{r.f()}}return t};function sl(t,e,n,i,r,o,s,a){var l,u,c,h,f={x:null,y:null,onLine1:!1,onLine2:!1};return 0===(l=(a-o)*(n-t)-(s-r)*(i-e))?null!==f.x&&null!==f.y&&f:(h=(n-t)*(u=e-o)-(i-e)*(c=t-r),u=((s-r)*u-(a-o)*c)/l,c=h/l,f.x=t+u*(n-t),f.y=e+u*(i-e),u>=0&&u<=1&&(f.onLine1=!0),c>=0&&c<=1&&(f.onLine2=!0),!(!f.onLine1||!f.onLine2)&&[f.x,f.y])}function al(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Et(t,(function(t,n){var i=n.geometry.coordinates;return t+at(i[0],i[1],e)}),0)}function ll(t,e,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=r.steps||64,s=ul(n),a=ul(i),l=Array.isArray(t)||"Feature"!==t.type?{}:t.properties;if(s===a)return I(kr(t,e,r).geometry.coordinates[0],l);for(var u=s,c=s<a?a:a+360,h=u,f=[],d=0,g=(c-u)/o;h<=c;)f.push(st(t,e,h,r).geometry.coordinates),h=u+ ++d*g;return I(f,l)}function ul(t){var e=t%360;return e<0&&(e+=360),e}function cl(t,e,n,i){if(!X(i=i||{}))throw new Error("options is invalid");var r,o=[];if("Feature"===t.type)r=t.geometry.coordinates;else{if("LineString"!==t.type)throw new Error("input must be a LineString Feature or Geometry");r=t.coordinates}for(var s,a,l,u=r.length,c=0,h=0;h<r.length&&!(e>=c&&h===r.length-1);h++){if(c>e&&0===o.length){if(!(s=e-c))return o.push(r[h]),I(o);a=ot(r[h],r[h-1])-180,l=st(r[h],s,a,i),o.push(l.geometry.coordinates)}if(c>=n)return(s=n-c)?(a=ot(r[h],r[h-1])-180,l=st(r[h],s,a,i),o.push(l.geometry.coordinates),I(o)):(o.push(r[h]),I(o));if(c>=e&&o.push(r[h]),h===r.length-1)return I(o);c+=at(r[h],r[h+1],i)}if(c<e&&r.length===u)throw new Error("Start position is beyond line");var f=r[r.length-1];return I([f,f])}function hl(t){var e=t[0],n=t[1];return[n[0]-e[0],n[1]-e[1]]}function fl(t,e){return t[0]*e[1]-e[0]*t[1]}function dl(t,e,n){var i=[],r=F(e,n),o=J(t),s=[];return o.forEach((function(t,e){if(e!==o.length-1){var n=(u=t,c=o[e+1],h=r,f=Math.sqrt((u[0]-c[0])*(u[0]-c[0])+(u[1]-c[1])*(u[1]-c[1])),d=u[0]+h*(c[1]-u[1])/f,g=c[0]+h*(c[1]-u[1])/f,[[d,u[1]+h*(u[0]-c[0])/f],[g,c[1]+h*(u[0]-c[0])/f]]);if(i.push(n),e>0){var a=i[e-1],l=function(t,e){return!function(t,e){return 0===fl(hl(t),hl(e))}(t,e)&&function(t,e){var n,i,r=t[0],o=hl(t),s=e[0],a=hl(e),l=fl(o,a);return function(t,e){return[t[0]+e[0],t[1]+e[1]]}(r,function(t,e){return[t*e[0],t*e[1]]}(fl((i=r,[(n=s)[0]-i[0],n[1]-i[1]]),a)/l,o))}(t,e)}(n,a);!1!==l&&(a[1]=l,n[0]=l),s.push(a[0]),e===o.length-2&&(s.push(n[0]),s.push(n[1]))}2===o.length&&(s.push(n[0]),s.push(n[1]))}var u,c,h,f,d,g})),I(s,t.properties)}function gl(t){var e=t[0],n=t[1],i=t[2],r=t[3];if(at(t.slice(0,2),[i,n])>=at(t.slice(0,2),[e,r])){var o=(n+r)/2;return[e,o-(i-e)/2,i,o+(i-e)/2]}var s=(e+i)/2;return[s-(r-n)/2,n,s+(r-n)/2,r]}function pl(t,e){if(!X(e=null!=e?e:{}))throw new Error("options is invalid");var n=e.precision,i=e.coordinates,r=e.mutate;if(n=null==n||isNaN(n)?6:n,i=null==i||isNaN(i)?3:i,!t)throw new Error("<geojson> is required");if("number"!=typeof n)throw new Error("<precision> must be a number");if("number"!=typeof i)throw new Error("<coordinates> must be a number");!1!==r&&void 0!==r||(t=JSON.parse(JSON.stringify(t)));var o=Math.pow(10,n);return ct(t,(function(t){!function(t,e,n){t.length>n&&t.splice(n,t.length);for(var i=0;i<t.length;i++)t[i]=Math.round(t[i]*e)/e}(t,o,i)})),t}function vl(t,e){var n=[],i=Ze();return _t(e,(function(e){if(n.forEach((function(t,e){t.id=e})),n.length){var r=i.search(e);if(r.features.length){var o=ml(e,r);n=n.filter((function(t){return t.id!==o.id})),i.remove(o),gt(yl(o,e),(function(t){n.push(t),i.insert(t)}))}}else(n=yl(t,e).features).forEach((function(t){t.bbox||(t.bbox=gl(Pt(t)))})),i.load(R(n))})),R(n)}function yl(t,e){var n=[],i=J(t)[0],r=J(t)[t.geometry.coordinates.length-1];if(_l(i,K(e))||_l(r,K(e)))return R([t]);var o=Ze(),s=Ke(t);o.load(s);var a=o.search(e);if(!a.features.length)return R([t]);var l=ml(e,a),u=pt(s,(function(t,i,r){var o=J(i)[1],s=K(e);return r===l.id?(t.push(s),n.push(I(t)),_l(s,o)?[s]:[s,o]):(t.push(o),t)}),[i]);return u.length>1&&n.push(I(u)),R(n)}function ml(t,e){if(!e.features.length)throw new Error("lines must contain features");if(1===e.features.length)return e.features[0];var n,i=1/0;return gt(e,(function(e){var r=un(e,t).properties.dist;r<i&&(n=e,i=r)})),n}function _l(t,e){return t[0]===e[0]&&t[1]===e[1]}function bl(t,e,n,i){e=e||("Feature"===t.type?t.properties:{});var r=nt(t),o=r.coordinates,s=r.type;if(!o.length)throw new Error("line must contain coordinates");switch(s){case"LineString":return n&&(o=xl(o)),C([o],e);case"MultiLineString":var a=[],l=0;return o.forEach((function(t){if(n&&(t=xl(t)),i){var e=function(t){var e=t[0],n=t[1],i=t[2],r=t[3];return Math.abs(e-i)*Math.abs(n-r)}(Pt(I(t)));e>l?(a.unshift(t),l=e):a.push(t)}else a.push(t)})),C(a,e);default:throw new Error("geometry type "+s+" is not supported")}}function xl(t){var e=t[0],n=e[0],i=e[1],r=t[t.length-1],o=r[0],s=r[1];return n===o&&i===s||t.push(e),t}function El(t){return L(t)}function wl(t){var e,n=0,i=a(t);try{for(i.s();!(e=i.n()).done;)n+=e.value}catch(t){i.e(t)}finally{i.f()}return n/t.length}var kl=Object.defineProperty,Sl=Object.defineProperties,Cl=Object.getOwnPropertyDescriptors,Ol=Object.getOwnPropertySymbols,Il=Object.prototype.hasOwnProperty,Ml=Object.prototype.propertyIsEnumerable,Rl=function(t,e,n){return e in t?kl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n},Tl=function(t,e){for(var n in e||(e={}))Il.call(e,n)&&Rl(t,n,e[n]);if(Ol){var i,r=a(Ol(e));try{for(r.s();!(i=r.n()).done;)n=i.value,Ml.call(e,n)&&Rl(t,n,e[n])}catch(t){r.e(t)}finally{r.f()}}return t},Pl=function(t,e){return Sl(t,Cl(e))};function Ll(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t)throw new Error("targetPoint is required");if(!e)throw new Error("points is required");var i=1/0,r=0;gt(e,(function(e,o){var s=at(t,e,n);s<i&&(r=o,i=s)}));var o=Sr(e.features[r]);return Pl(Tl({},o),{properties:Pl(Tl({},o.properties),{featureIndex:r,distanceToPoint:i})})}function Nl(t,e){var n,i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=null!=(n=r.method)?n:"geodesic",s=null!=(i=r.units)?i:"kilometers";if(!t)throw new Error("pt is required");if(Array.isArray(t)?t=k(t):"Point"===t.type?t=E(t):tt(t,"Point","point"),!e)throw new Error("line is required");Array.isArray(e)?e=I(e):"LineString"===e.type?e=E(e):tt(e,"LineString","line");var a=1/0,l=t.geometry.coordinates;return xt(e,(function(t){if(t){var e=t.geometry.coordinates[0],n=t.geometry.coordinates[1],i=function(t,e,n,i){if("geodesic"===i.method)return un(I([e,n]).geometry,t,{units:"degrees"}).properties.dist;var r=[n[0]-e[0],n[1]-e[1]],o=Al([t[0]-e[0],t[1]-e[1]],r);if(o<=0)return Ss(t,e,{units:"degrees"});var s=Al(r,r);if(s<=o)return Ss(t,n,{units:"degrees"});var a=o/s;return Ss(t,[e[0]+a*r[0],e[1]+a*r[1]],{units:"degrees"})}(l,e,n,{method:o});i<a&&(a=i)}})),Y(a,"degrees",s)}function Al(t,e){return t[0]*e[0]+t[1]*e[1]}var jl=Object.defineProperty,Dl=Object.getOwnPropertySymbols,Fl=Object.prototype.hasOwnProperty,zl=Object.prototype.propertyIsEnumerable,Gl=function(t,e,n){return e in t?jl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n},Bl=function(t,e){for(var n in e||(e={}))Fl.call(e,n)&&Gl(t,n,e[n]);if(Dl){var i,r=a(Dl(e));try{for(r.s();!(i=r.n()).done;)n=i.value,zl.call(e,n)&&Gl(t,n,e[n])}catch(t){r.e(t)}finally{r.f()}}return t};function Vl(t,e,n,i,r,o){return Math.sqrt((r-n)*(r-n)+(o-i)*(o-i))===Math.sqrt((t-n)*(t-n)+(e-i)*(e-i))+Math.sqrt((r-t)*(r-t)+(o-e)*(o-e))}function Yl(t,e){var n=[];return gt(t,(function(t){var i=!1;if("Point"===t.geometry.type)yt(e,(function(e){Bt(t,e)&&(i=!0)})),i&&n.push(t);else{if("MultiPoint"!==t.geometry.type)throw new Error("Input geometry must be a Point or MultiPoint");var r=[];yt(e,(function(e){ct(t,(function(t){Bt(t,e)&&(i=!0,r.push(t))}))})),i&&n.push(P(r,t.properties))}})),R(n)}function ql(t,e,n){var i=e[0]-t[0],r=e[1]-t[1],o=n[0]-e[0];return function(t){return(t>0)-(t<0)||+t}(i*(n[1]-e[1])-o*r)}function Ul(t,e){return e.geometry.coordinates[0].every((function(e){return Bt(k(e),t)}))}var Xl=s((function t(e){r(this,t),this.id=t.buildId(e),this.coordinates=e,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1}),[{key:"removeInnerEdge",value:function(t){this.innerEdges=this.innerEdges.filter((function(e){return e.from.id!==t.from.id}))}},{key:"removeOuterEdge",value:function(t){this.outerEdges=this.outerEdges.filter((function(e){return e.to.id!==t.to.id}))}},{key:"addOuterEdge",value:function(t){this.outerEdges.push(t),this.outerEdgesSorted=!1}},{key:"sortOuterEdges",value:function(){var t=this;this.outerEdgesSorted||(this.outerEdges.sort((function(e,n){var i=e.to,r=n.to;if(i.coordinates[0]-t.coordinates[0]>=0&&r.coordinates[0]-t.coordinates[0]<0)return 1;if(i.coordinates[0]-t.coordinates[0]<0&&r.coordinates[0]-t.coordinates[0]>=0)return-1;if(i.coordinates[0]-t.coordinates[0]==0&&r.coordinates[0]-t.coordinates[0]==0)return i.coordinates[1]-t.coordinates[1]>=0||r.coordinates[1]-t.coordinates[1]>=0?i.coordinates[1]-r.coordinates[1]:r.coordinates[1]-i.coordinates[1];var o=ql(t.coordinates,i.coordinates,r.coordinates);return o<0?1:o>0?-1:Math.pow(i.coordinates[0]-t.coordinates[0],2)+Math.pow(i.coordinates[1]-t.coordinates[1],2)-(Math.pow(r.coordinates[0]-t.coordinates[0],2)+Math.pow(r.coordinates[1]-t.coordinates[1],2))})),this.outerEdgesSorted=!0)}},{key:"getOuterEdges",value:function(){return this.sortOuterEdges(),this.outerEdges}},{key:"getOuterEdge",value:function(t){return this.sortOuterEdges(),this.outerEdges[t]}},{key:"addInnerEdge",value:function(t){this.innerEdges.push(t)}}],[{key:"buildId",value:function(t){return t.join(",")}}]),Wl=function(){function t(e,n){r(this,t),this.from=e,this.to=n,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)}return s(t,[{key:"getSymetric",value:function(){return this.symetric||(this.symetric=new t(this.to,this.from),this.symetric.symetric=this),this.symetric}},{key:"deleteEdge",value:function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)}},{key:"isEqual",value:function(t){return this.from.id===t.from.id&&this.to.id===t.to.id}},{key:"toString",value:function(){return"Edge { ".concat(this.from.id," -> ").concat(this.to.id," }")}},{key:"toLineString",value:function(){return I([this.from.coordinates,this.to.coordinates])}},{key:"compareTo",value:function(t){return ql(t.from.coordinates,t.to.coordinates,this.to.coordinates)}}])}(),Hl=s((function t(){r(this,t),this.edges=[],this.polygon=void 0,this.envelope=void 0}),[{key:"push",value:function(t){this.edges.push(t),this.polygon=this.envelope=void 0}},{key:"get",value:function(t){return this.edges[t]}},{key:"length",get:function(){return this.edges.length}},{key:"forEach",value:function(t){this.edges.forEach(t)}},{key:"map",value:function(t){return this.edges.map(t)}},{key:"some",value:function(t){return this.edges.some(t)}},{key:"isValid",value:function(){return!0}},{key:"isHole",value:function(){var t=this,e=this.edges.reduce((function(e,n,i){return n.from.coordinates[1]>t.edges[e].from.coordinates[1]&&(e=i),e}),0),n=(0===e?this.length:e)-1,i=(e+1)%this.length,r=ql(this.edges[n].from.coordinates,this.edges[e].from.coordinates,this.edges[i].from.coordinates);return 0===r?this.edges[n].from.coordinates[0]>this.edges[i].from.coordinates[0]:r>0}},{key:"toMultiPoint",value:function(){return P(this.edges.map((function(t){return t.from.coordinates})))}},{key:"toPolygon",value:function(){if(this.polygon)return this.polygon;var t=this.edges.map((function(t){return t.from.coordinates}));return t.push(this.edges[0].from.coordinates),this.polygon=C([t])}},{key:"getEnvelope",value:function(){return this.envelope?this.envelope:this.envelope=Ms(this.toPolygon())}},{key:"inside",value:function(t){return Bt(t,this.toPolygon())}}],[{key:"findEdgeRingContaining",value:function(t,e){var n,i,r=t.getEnvelope();return e.forEach((function(e){var o,s,l,u,c,h,f=e.getEnvelope();if(i&&(n=i.getEnvelope()),s=r,l=(o=f).geometry.coordinates[0].map((function(t){return t[0]})),u=o.geometry.coordinates[0].map((function(t){return t[1]})),c=s.geometry.coordinates[0].map((function(t){return t[0]})),h=s.geometry.coordinates[0].map((function(t){return t[1]})),(Math.max.apply(null,l)!==Math.max.apply(null,c)||Math.max.apply(null,u)!==Math.max.apply(null,h)||Math.min.apply(null,l)!==Math.min.apply(null,c)||Math.min.apply(null,u)!==Math.min.apply(null,h))&&Ul(f,r)){var d,g,p=a(t.map((function(t){return t.from.coordinates})));try{var v=function(){var t=g.value;e.some((function(e){return n=t,i=e.from.coordinates,n[0]===i[0]&&n[1]===i[1];var n,i}))||(d=t)};for(p.s();!(g=p.n()).done;)v()}catch(t){p.e(t)}finally{p.f()}d&&e.inside(k(d))&&(i&&!Ul(n,f)||(i=e))}})),i}}]),Zl=function(){function t(){r(this,t),this.edges=[],this.nodes={}}return s(t,[{key:"getNode",value:function(t){var e=Xl.buildId(t),n=this.nodes[e];return n||(n=this.nodes[e]=new Xl(t)),n}},{key:"addEdge",value:function(t,e){var n=new Wl(t,e),i=n.getSymetric();this.edges.push(n),this.edges.push(i)}},{key:"deleteDangles",value:function(){var t=this;Object.keys(this.nodes).map((function(e){return t.nodes[e]})).forEach((function(e){return t._removeIfDangle(e)}))}},{key:"_removeIfDangle",value:function(t){var e=this;if(t.innerEdges.length<=1){var n=t.getOuterEdges().map((function(t){return t.to}));this.removeNode(t),n.forEach((function(t){return e._removeIfDangle(t)}))}}},{key:"deleteCutEdges",value:function(){var t=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach((function(e){e.label===e.symetric.label&&(t.removeEdge(e.symetric),t.removeEdge(e))}))}},{key:"_computeNextCWEdges",value:function(t){var e=this;void 0===t?Object.keys(this.nodes).forEach((function(t){return e._computeNextCWEdges(e.nodes[t])})):t.getOuterEdges().forEach((function(e,n){t.getOuterEdge((0===n?t.getOuterEdges().length:n)-1).symetric.next=e}))}},{key:"_computeNextCCWEdges",value:function(t,e){for(var n,i,r=t.getOuterEdges(),o=r.length-1;o>=0;--o){var s=r[o],a=s.symetric,l=void 0,u=void 0;s.label===e&&(l=s),a.label===e&&(u=a),l&&u&&(u&&(i=u),l&&(i&&(i.next=l,i=void 0),n||(n=l)))}i&&(i.next=n)}},{key:"_findLabeledEdgeRings",value:function(){var t=[],e=0;return this.edges.forEach((function(n){if(!(n.label>=0)){t.push(n);var i=n;do{i.label=e,i=i.next}while(!n.isEqual(i));e++}})),t}},{key:"getEdgeRings",value:function(){var t=this;this._computeNextCWEdges(),this.edges.forEach((function(t){t.label=void 0})),this._findLabeledEdgeRings().forEach((function(e){t._findIntersectionNodes(e).forEach((function(n){t._computeNextCCWEdges(n,e.label)}))}));var e=[];return this.edges.forEach((function(n){n.ring||e.push(t._findEdgeRing(n))})),e}},{key:"_findIntersectionNodes",value:function(t){var e=[],n=t,i=function(){var i=0;n.from.getOuterEdges().forEach((function(e){e.label===t.label&&++i})),i>1&&e.push(n.from),n=n.next};do{i()}while(!t.isEqual(n));return e}},{key:"_findEdgeRing",value:function(t){var e=t,n=new Hl;do{n.push(e),e.ring=n,e=e.next}while(!t.isEqual(e));return n}},{key:"removeNode",value:function(t){var e=this;t.getOuterEdges().forEach((function(t){return e.removeEdge(t)})),t.innerEdges.forEach((function(t){return e.removeEdge(t)})),delete this.nodes[t.id]}},{key:"removeEdge",value:function(t){this.edges=this.edges.filter((function(e){return!e.isEqual(t)})),t.deleteEdge()}}],[{key:"fromGeoJson",value:function(e){!function(t){if(!t)throw new Error("No geojson passed");if("FeatureCollection"!==t.type&&"GeometryCollection"!==t.type&&"MultiLineString"!==t.type&&"LineString"!==t.type&&"Feature"!==t.type)throw new Error("Invalid input type '".concat(t.type,"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature"))}(e);var n=new t;return _t(e,(function(t){tt(t,"LineString","Graph::fromGeoJson"),ht(t,(function(t,e){if(t){var i=n.getNode(t),r=n.getNode(e);n.addEdge(i,r)}return e}))})),n}}])}();function Kl(t,e){var n,i;ct(t,(function(t,r,o,s,a){if(i!==a)e.push([]);else{var l=n[0],u=n[1],c=t[0],h=t[1];e[a].push([.75*l+.25*c,.75*u+.25*h]),e[a].push([.25*l+.75*c,.25*u+.75*h])}n=t,i=a}),!1),e.forEach((function(t){t.push(t[0])}))}function Jl(t,e){var n,i,r;ct(t,(function(t,o,s,a,l){if(i!==a)e.push([[]]);else if(r!==l)e[a].push([]);else{var u=n[0],c=n[1],h=t[0],f=t[1];e[a][l].push([.75*u+.25*h,.75*c+.25*f]),e[a][l].push([.25*u+.75*h,.25*c+.75*f])}n=t,i=a,r=l}),!1),e.forEach((function(t){t.forEach((function(t){t.push(t[0])}))}))}function Ql(t,e,n,i,r){for(var o=0;o<t.length;o++){var s=t[o],a=t[o+1];o===t.length-1&&(a=t[0]);var l=tu(s,a,e);n<=0&&l>0?tu(e,s,i)<0||(i=s):n>0&&l<=0&&($l(e,s,r)||(r=s)),n=l}return[i,r]}function $l(t,e,n){return tu(t,e,n)>0}function tu(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(n[0]-t[0])*(e[1]-t[1])}function eu(t){return iu(t,"mercator",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}function nu(t){return iu(t,"wgs84",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}function iu(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=(n=n||{}).mutate;if(!t)throw new Error("geojson is required");return Array.isArray(t)&&U(t[0])?t="mercator"===e?ru(t):ou(t):(!0!==i&&(t=Sr(t)),ct(t,(function(t){var n="mercator"===e?ru(t):ou(t);t[0]=n[0],t[1]=n[1]}))),t}function ru(t){var e=Math.PI/180,n=6378137,i=20037508.342789244,r=[n*(Math.abs(t[0])<=180?t[0]:t[0]-360*function(t){return t<0?-1:t>0?1:0}(t[0]))*e,n*Math.log(Math.tan(.25*Math.PI+.5*t[1]*e))];return r[0]>i&&(r[0]=i),r[0]<-i&&(r[0]=-i),r[1]>i&&(r[1]=i),r[1]<-i&&(r[1]=-i),r}function ou(t){var e=180/Math.PI,n=6378137;return[t[0]*e/n,(.5*Math.PI-2*Math.atan(Math.exp(-t[1]/n)))*e]}var su=Object.freeze({__proto__:null,toMercator:eu,toWgs84:nu}),au={20:1.07275,15:1.13795,10:1.22385,5:1.3581,2:1.51743,1:1.62762};function lu(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}function uu(t){var e=[];return function t(n){return 0===n||1===n?1:e[n]>0?e[n]:e[n]=t(n-1)*n}(t)}function cu(t){return fu(t),hu(t)}function hu(t){return Array.isArray(t)?yu(t):t&&t.bbox?yu(t.bbox):[360*vu(),180*vu()]}function fu(t){null!=t&&(Array.isArray(t)?W(t):null!=t.bbox&&W(t.bbox))}function du(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};fu(e.bbox),null==t&&(t=1);for(var n=[],i=0;i<t;i++)n.push(k(hu(e.bbox)));return R(n)}function gu(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};fu(e.bbox),null==t&&(t=1),void 0!==e.bbox&&null!==e.bbox||(e.bbox=[-180,-90,180,90]),U(e.num_vertices)&&void 0!==e.num_vertices||(e.num_vertices=10),U(e.max_radial_length)&&void 0!==e.max_radial_length||(e.max_radial_length=10);var n=Math.abs(e.bbox[0]-e.bbox[2]),i=Math.abs(e.bbox[1]-e.bbox[3]),r=Math.min(n/2,i/2);if(e.max_radial_length>r)throw new Error("max_radial_length is greater than the radius of the bbox");for(var o=[e.bbox[0]+e.max_radial_length,e.bbox[1]+e.max_radial_length,e.bbox[2]-e.max_radial_length,e.bbox[3]-e.max_radial_length],s=[],a=function(){var t,n=[],i=p(Array(e.num_vertices+1)).map(Math.random);i.forEach((function(t,e,n){n[e]=e>0?t+n[e-1]:t})),i.forEach((function(t){t=2*t*Math.PI/i[i.length-1];var r=Math.random();n.push([r*(e.max_radial_length||10)*Math.sin(t),r*(e.max_radial_length||10)*Math.cos(t)])})),n[n.length-1]=n[0],n=n.reverse().map((t=hu(o),function(e){return[e[0]+t[0],e[1]+t[1]]})),s.push(C([n]))},l=0;l<t;l++)a();return R(s)}function pu(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!X(e=e||{}))throw new Error("options is invalid");var n=e.bbox;fu(n);var i=e.num_vertices,r=e.max_length,o=e.max_rotation;null==t&&(t=1),(!U(i)||void 0===i||i<2)&&(i=10),U(r)&&void 0!==r||(r=1e-4),U(o)&&void 0!==o||(o=Math.PI/8);for(var s=[],a=0;a<t;a++){for(var l=[hu(n)],u=0;u<i-1;u++){var c=(0===u?2*Math.random()*Math.PI:Math.tan((l[u][1]-l[u-1][1])/(l[u][0]-l[u-1][0])))+(Math.random()-.5)*o*2,h=Math.random()*r;l.push([l[u][0]+h*Math.cos(c),l[u][1]+h*Math.sin(c)])}s.push(I(l))}return R(s)}function vu(){return Math.random()-.5}function yu(t){return[Math.random()*(t[2]-t[0])+t[0],Math.random()*(t[3]-t[1])+t[1]]}var mu=Object.freeze({__proto__:null,randomLineString:pu,randomPoint:du,randomPolygon:gu,randomPosition:cu});function _u(t,e){switch("Feature"===t.type?t.geometry.type:t.type){case"GeometryCollection":return yt(t,(function(t){_u(t,e)})),t;case"LineString":return bu(J(t),e),t;case"Polygon":return xu(J(t),e),t;case"MultiLineString":return J(t).forEach((function(t){bu(t,e)})),t;case"MultiPolygon":return J(t).forEach((function(t){xu(t,e)})),t;case"Point":case"MultiPoint":return t}}function bu(t,e){zt(t)===e&&t.reverse()}function xu(t,e){zt(t[0])!==e&&t[0].reverse();for(var n=1;n<t.length;n++)zt(t[n])===e&&t[n].reverse()}function Eu(t){var e=t%360;return e<0&&(e+=360),e}function wu(t,e,n){if(!X(n=n||{}))throw new Error("options is invalid");var i=n.origin||"centroid",r=n.mutate||!1;if(!t)throw new Error("geojson required");if("number"!=typeof e||e<=0)throw new Error("invalid factor");var o=Array.isArray(i)||"object"===y(i);return!0!==r&&(t=Sr(t)),"FeatureCollection"!==t.type||o?ku(t,e,i):(gt(t,(function(n,r){t.features[r]=ku(n,e,i)})),t)}function ku(t,e,n){var i="Point"===it(t),r=function(t,e){if(null==e&&(e="centroid"),Array.isArray(e)||"object"===y(e))return K(e);var n=t.bbox?t.bbox:Pt(t,{recompute:!0}),i=n[0],r=n[1],o=n[2],s=n[3];switch(e){case"sw":case"southwest":case"westsouth":case"bottomleft":return k([i,r]);case"se":case"southeast":case"eastsouth":case"bottomright":return k([o,r]);case"nw":case"northwest":case"westnorth":case"topleft":return k([i,s]);case"ne":case"northeast":case"eastnorth":case"topright":return k([o,s]);case"center":return Tn(t);case void 0:case null:case"centroid":return sr(t);default:throw new Error("invalid origin")}}(t,n);return 1===e||i||(ct(t,(function(t){var n=Ss(r,t),i=lt(r,t),o=J(ks(r,n*e,i));t[0]=o[0],t[1]=o[1],3===t.length&&(t[2]*=e)})),delete t.bbox),t}function Su(t){for(var e=t,n=[];e.parent;)n.unshift(e),e=e.parent;return n}var Cu={search:function(t,e,n,i){var r;t.cleanDirty();var o=(i=i||{}).heuristic||Cu.heuristics.manhattan,s=null!=(r=i.closest)&&r,a=new Mu((function(t){return t.f})),l=e;for(e.h=o(e,n),a.push(e);a.size()>0;){var u=a.pop();if(u===n)return Su(u);u.closed=!0;for(var c=t.neighbors(u),h=0,f=c.length;h<f;++h){var d=c[h];if(!d.closed&&!d.isWall()){var g=u.g+d.getCost(u),p=d.visited;(!p||g<d.g)&&(d.visited=!0,d.parent=u,d.h=d.h||o(d,n),d.g=g,d.f=d.g+d.h,t.markDirty(d),s&&(d.h<l.h||d.h===l.h&&d.g<l.g)&&(l=d),p?a.rescoreElement(d):a.push(d))}}}return s?Su(l):[]},heuristics:{manhattan:function(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},diagonal:function(t,e){var n=Math.sqrt(2),i=Math.abs(e.x-t.x),r=Math.abs(e.y-t.y);return 1*(i+r)+(n-2)*Math.min(i,r)}},cleanNode:function(t){t.f=0,t.g=0,t.h=0,t.visited=!1,t.closed=!1,t.parent=null}};function Ou(t,e){e=e||{},this.nodes=[],this.diagonal=!!e.diagonal,this.grid=[];for(var n=0;n<t.length;n++){this.grid[n]=[];for(var i=0,r=t[n];i<r.length;i++){var o=new Iu(n,i,r[i]);this.grid[n][i]=o,this.nodes.push(o)}}this.init()}function Iu(t,e,n){this.x=t,this.y=e,this.weight=n}function Mu(t){this.content=[],this.scoreFunction=t}function Ru(t,e){for(var n=0;n<e.features.length;n++)if(Bt(t,e.features[n]))return!0;return!1}function Tu(t,e,n){var i=e[0],r=e[1],o=n[0]-i,s=n[1]-r;if(0!==o||0!==s){var a=((t[0]-i)*o+(t[1]-r)*s)/(o*o+s*s);a>1?(i=n[0],r=n[1]):a>0&&(i+=o*a,r+=s*a)}return(o=t[0]-i)*o+(s=t[1]-r)*s}function Pu(t,e){var n=t.length-1,i=[t[0]];return function t(e,n,i,r,o){for(var s,a=r,l=n+1;l<i;l++){var u=Tu(e[l],e[n],e[i]);u>a&&(s=l,a=u)}a>r&&(s-n>1&&t(e,n,s,r,o),o.push(e[s]),i-s>1&&t(e,s,i,r,o))}(t,0,n,e,i),i.push(t[n]),i}function Lu(t,e,n){if(t.length<=2)return t;var i=void 0!==e?e*e:1;return Pu(t=n?t:function(t,e){for(var n,i,r,o,s,a=t[0],l=[a],u=1,c=t.length;u<c;u++)r=a,(o=(i=n=t[u])[0]-r[0])*o+(s=i[1]-r[1])*s>e&&(l.push(n),a=n);return a!==n&&l.push(n),l}(t,i),i)}function Nu(t,e,n){return t.map((function(t){if(t.length<4)throw new Error("invalid polygon");for(var i=e,r=Lu(t,i,n);!Au(r);)r=Lu(t,i-=.01*i,n);return r[r.length-1][0]===r[0][0]&&r[r.length-1][1]===r[0][1]||r.push(r[0]),r}))}function Au(t){return!(t.length<3)&&!(3===t.length&&t[2][0]===t[0][0]&&t[2][1]===t[0][1])}function ju(t,e){return{x:t[0]-e[0],y:t[1]-e[1]}}Ou.prototype.init=function(){this.dirtyNodes=[];for(var t=0;t<this.nodes.length;t++)Cu.cleanNode(this.nodes[t])},Ou.prototype.cleanDirty=function(){for(var t=0;t<this.dirtyNodes.length;t++)Cu.cleanNode(this.dirtyNodes[t]);this.dirtyNodes=[]},Ou.prototype.markDirty=function(t){this.dirtyNodes.push(t)},Ou.prototype.neighbors=function(t){var e=[],n=t.x,i=t.y,r=this.grid;return r[n-1]&&r[n-1][i]&&e.push(r[n-1][i]),r[n+1]&&r[n+1][i]&&e.push(r[n+1][i]),r[n]&&r[n][i-1]&&e.push(r[n][i-1]),r[n]&&r[n][i+1]&&e.push(r[n][i+1]),this.diagonal&&(r[n-1]&&r[n-1][i-1]&&e.push(r[n-1][i-1]),r[n+1]&&r[n+1][i-1]&&e.push(r[n+1][i-1]),r[n-1]&&r[n-1][i+1]&&e.push(r[n-1][i+1]),r[n+1]&&r[n+1][i+1]&&e.push(r[n+1][i+1])),e},Ou.prototype.toString=function(){for(var t,e,n,i,r=[],o=this.grid,s=0,a=o.length;s<a;s++){for(t=[],n=0,i=(e=o[s]).length;n<i;n++)t.push(e[n].weight);r.push(t.join(" "))}return r.join("\n")},Iu.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},Iu.prototype.getCost=function(t){return t&&t.x!==this.x&&t.y!==this.y?1.41421*this.weight:this.weight},Iu.prototype.isWall=function(){return 0===this.weight},Mu.prototype={push:function(t){this.content.push(t),this.sinkDown(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),t},remove:function(t){var e=this.content.indexOf(t),n=this.content.pop();e!==this.content.length-1&&(this.content[e]=n,this.scoreFunction(n)<this.scoreFunction(t)?this.sinkDown(e):this.bubbleUp(e))},size:function(){return this.content.length},rescoreElement:function(t){this.sinkDown(this.content.indexOf(t))},sinkDown:function(t){for(var e=this.content[t];t>0;){var n=(t+1>>1)-1,i=this.content[n];if(!(this.scoreFunction(e)<this.scoreFunction(i)))break;this.content[n]=e,this.content[t]=i,t=n}},bubbleUp:function(t){for(var e=this.content.length,n=this.content[t],i=this.scoreFunction(n);;){var r,o=t+1<<1,s=o-1,a=null;if(s<e){var l=this.content[s];(r=this.scoreFunction(l))<i&&(a=s)}if(o<e){var u=this.content[o];this.scoreFunction(u)<(null===a?i:r)&&(a=o)}if(null===a)break;this.content[t]=this.content[a],this.content[a]=n,t=a}}};var Du,Fu={exports:{}},zu=pn(function(){if(Du)return Fu.exports;function t(t,n,r){r=r||2;var o,s,a,c,h,d,g,p=n&&n.length,v=p?n[0]*r:t.length,y=e(t,0,v,r,!0),m=[];if(!y||y.next===y.prev)return m;if(p&&(y=function(t,n,i,r){var o,s,a,c=[];for(o=0,s=n.length;o<s;o++)(a=e(t,n[o]*r,o<s-1?n[o+1]*r:t.length,r,!1))===a.next&&(a.steiner=!0),c.push(f(a));for(c.sort(l),o=0;o<c.length;o++)i=u(c[o],i);return i}(t,n,y,r)),t.length>80*r){o=a=t[0],s=c=t[1];for(var _=r;_<v;_+=r)(h=t[_])<o&&(o=h),(d=t[_+1])<s&&(s=d),h>a&&(a=h),d>c&&(c=d);g=0!==(g=Math.max(a-o,c-s))?32767/g:0}return i(y,m,r,o,s,g,0),m}function e(t,e,n,i,r){var o,s;if(r===S(t,e,n,i)>0)for(o=e;o<n;o+=i)s=E(o,t[o],t[o+1],s);else for(o=n-i;o>=e;o-=i)s=E(o,t[o],t[o+1],s);return s&&v(s,s.next)&&(w(s),s=s.next),s}function n(t,e){if(!t)return t;e||(e=t);var n,i=t;do{if(n=!1,i.steiner||!v(i,i.next)&&0!==p(i.prev,i,i.next))i=i.next;else{if(w(i),(i=e=i.prev)===i.next)break;n=!0}}while(n||i!==e);return e}function i(t,e,l,u,c,f,d){if(t){!d&&f&&function(t,e,n,i){var r=t;do{0===r.z&&(r.z=h(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,n,i,r,o,s,a,l,u=1;do{for(n=t,t=null,o=null,s=0;n;){for(s++,i=n,a=0,e=0;e<u&&(a++,i=i.nextZ);e++);for(l=u;a>0||l>0&&i;)0!==a&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,a--):(r=i,i=i.nextZ,l--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;n=i}o.nextZ=null,u*=2}while(s>1)}(r)}(t,u,c,f);for(var g,p,v=t;t.prev!==t.next;)if(g=t.prev,p=t.next,f?o(t,u,c,f):r(t))e.push(g.i/l|0),e.push(t.i/l|0),e.push(p.i/l|0),w(t),t=p.next,v=p.next;else if((t=p)===v){d?1===d?i(t=s(n(t),e,l),e,l,u,c,f,2):2===d&&a(t,e,l,u,c,f):i(n(t),e,l,u,c,f,1);break}}}function r(t){var e=t.prev,n=t,i=t.next;if(p(e,n,i)>=0)return!1;for(var r=e.x,o=n.x,s=i.x,a=e.y,l=n.y,u=i.y,c=r<o?r<s?r:s:o<s?o:s,h=a<l?a<u?a:u:l<u?l:u,f=r>o?r>s?r:s:o>s?o:s,g=a>l?a>u?a:u:l>u?l:u,v=i.next;v!==e;){if(v.x>=c&&v.x<=f&&v.y>=h&&v.y<=g&&d(r,a,o,l,s,u,v.x,v.y)&&p(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function o(t,e,n,i){var r=t.prev,o=t,s=t.next;if(p(r,o,s)>=0)return!1;for(var a=r.x,l=o.x,u=s.x,c=r.y,f=o.y,g=s.y,v=a<l?a<u?a:u:l<u?l:u,y=c<f?c<g?c:g:f<g?f:g,m=a>l?a>u?a:u:l>u?l:u,_=c>f?c>g?c:g:f>g?f:g,b=h(v,y,e,n,i),x=h(m,_,e,n,i),E=t.prevZ,w=t.nextZ;E&&E.z>=b&&w&&w.z<=x;){if(E.x>=v&&E.x<=m&&E.y>=y&&E.y<=_&&E!==r&&E!==s&&d(a,c,l,f,u,g,E.x,E.y)&&p(E.prev,E,E.next)>=0)return!1;if(E=E.prevZ,w.x>=v&&w.x<=m&&w.y>=y&&w.y<=_&&w!==r&&w!==s&&d(a,c,l,f,u,g,w.x,w.y)&&p(w.prev,w,w.next)>=0)return!1;w=w.nextZ}for(;E&&E.z>=b;){if(E.x>=v&&E.x<=m&&E.y>=y&&E.y<=_&&E!==r&&E!==s&&d(a,c,l,f,u,g,E.x,E.y)&&p(E.prev,E,E.next)>=0)return!1;E=E.prevZ}for(;w&&w.z<=x;){if(w.x>=v&&w.x<=m&&w.y>=y&&w.y<=_&&w!==r&&w!==s&&d(a,c,l,f,u,g,w.x,w.y)&&p(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function s(t,e,i){var r=t;do{var o=r.prev,s=r.next.next;!v(o,s)&&y(o,r,r.next,s)&&b(o,s)&&b(s,o)&&(e.push(o.i/i|0),e.push(r.i/i|0),e.push(s.i/i|0),w(r),w(r.next),r=t=s),r=r.next}while(r!==t);return n(r)}function a(t,e,r,o,s,a){var l=t;do{for(var u=l.next.next;u!==l.prev;){if(l.i!==u.i&&g(l,u)){var c=x(l,u);return l=n(l,l.next),c=n(c,c.next),i(l,e,r,o,s,a,0),void i(c,e,r,o,s,a,0)}u=u.next}l=l.next}while(l!==t)}function l(t,e){return t.x-e.x}function u(t,e){var i=function(t,e){var n,i=e,r=t.x,o=t.y,s=-1/0;do{if(o<=i.y&&o>=i.next.y&&i.next.y!==i.y){var a=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(a<=r&&a>s&&(s=a,n=i.x<i.next.x?i:i.next,a===r))return n}i=i.next}while(i!==e);if(!n)return null;var l,u=n,h=n.x,f=n.y,g=1/0;i=n;do{r>=i.x&&i.x>=h&&r!==i.x&&d(o<f?r:s,o,h,f,o<f?s:r,o,i.x,i.y)&&(l=Math.abs(o-i.y)/(r-i.x),b(i,t)&&(l<g||l===g&&(i.x>n.x||i.x===n.x&&c(n,i)))&&(n=i,g=l)),i=i.next}while(i!==u);return n}(t,e);if(!i)return e;var r=x(i,t);return n(r,r.next),n(i,i.next)}function c(t,e){return p(t.prev,t,e.prev)<0&&p(e.next,t,t.next)<0}function h(t,e,n,i,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*r|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-i)*r|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function f(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function d(t,e,n,i,r,o,s,a){return(r-s)*(e-a)>=(t-s)*(o-a)&&(t-s)*(i-a)>=(n-s)*(e-a)&&(n-s)*(o-a)>=(r-s)*(i-a)}function g(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&y(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(b(t,e)&&b(e,t)&&function(t,e){var n=t,i=!1,r=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==t);return i}(t,e)&&(p(t.prev,t,e.prev)||p(t,e.prev,e))||v(t,e)&&p(t.prev,t,t.next)>0&&p(e.prev,e,e.next)>0)}function p(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function v(t,e){return t.x===e.x&&t.y===e.y}function y(t,e,n,i){var r=_(p(t,e,n)),o=_(p(t,e,i)),s=_(p(n,i,t)),a=_(p(n,i,e));return r!==o&&s!==a||!(0!==r||!m(t,n,e))||!(0!==o||!m(t,i,e))||!(0!==s||!m(n,t,i))||!(0!==a||!m(n,e,i))}function m(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function _(t){return t>0?1:t<0?-1:0}function b(t,e){return p(t.prev,t,t.next)<0?p(t,e,t.next)>=0&&p(t,t.prev,e)>=0:p(t,e,t.prev)<0||p(t,t.next,e)<0}function x(t,e){var n=new k(t.i,t.x,t.y),i=new k(e.i,e.x,e.y),r=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function E(t,e,n,i){var r=new k(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function w(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function k(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function S(t,e,n,i){for(var r=0,o=e,s=n-i;o<n;o+=i)r+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return r}return Du=1,Fu.exports=t,Fu.exports.default=t,t.deviation=function(t,e,n,i){var r=e&&e.length,o=r?e[0]*n:t.length,s=Math.abs(S(t,0,o,n));if(r)for(var a=0,l=e.length;a<l;a++){var u=e[a]*n,c=a<l-1?e[a+1]*n:t.length;s-=Math.abs(S(t,u,c,n))}var h=0;for(a=0;a<i.length;a+=3){var f=i[a]*n,d=i[a+1]*n,g=i[a+2]*n;h+=Math.abs((t[f]-t[g])*(t[d+1]-t[f+1])-(t[f]-t[d])*(t[g+1]-t[f+1]))}return 0===s&&0===h?0:Math.abs((h-s)/s)},t.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},i=0,r=0;r<t.length;r++){for(var o=0;o<t[r].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[r][o][s]);r>0&&(i+=t[r-1].length,n.holes.push(i))}return n},Fu.exports}());function Gu(t){var e=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},i=0,r=0;r<t.length;r++){for(var o=0;o<t[r].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[r][o][s]);r>0&&(i+=t[r-1].length,n.holes.push(i))}return n}(t),n=zu(e.vertices,e.holes,2),i=[],r=[];n.forEach((function(t,i){var o=n[i];r.push([e.vertices[2*o],e.vertices[2*o+1]])}));for(var o=0;o<r.length;o+=3){var s=r.slice(o,o+3);s.push(r[o]),i.push(C([s]))}return i}function Bu(t,e){if(!t||!e)return!1;if(t.length!==e.length)return!1;for(var n=0,i=t.length;n<i;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!Bu(t[n],e[n]))return!1}else if(t[n]!==e[n])return!1;return!0}function Vu(t){if("Feature"!=t.type)throw new Error("The input must a geojson object of type Feature");if(void 0===t.geometry||null==t.geometry)throw new Error("The input must a geojson object with a non-empty geometry");if("Polygon"!=t.geometry.type)throw new Error("The input must be a geojson Polygon");for(var e=t.geometry.coordinates.length,n=[],i=0;i<e;i++){var r=t.geometry.coordinates[i];Wu(r[0],r[r.length-1])||r.push(r[0]);for(var o=0;o<r.length-1;o++)n.push(r[o])}if(!function(t){for(var e={},n=1,i=0,r=t.length;i<r;++i){if(Object.prototype.hasOwnProperty.call(e,t[i])){n=0;break}e[t[i]]=1}return n}(n))throw new Error("The input polygon may not have duplicate vertices (except for the first and last vertex of each ring)");var s=n.length,a=function(t,e,n){if("Polygon"!==t.geometry.type)throw new Error("The input feature must be a Polygon");void 0===n&&(n=1);var i=t.geometry.coordinates,r=[],o={};if(n){for(var s=[],a=0;a<i.length;a++)for(var l=0;l<i[a].length-1;l++)s.push(p(a,l));var u=new Ae;u.load(s)}for(var c=0;c<i.length;c++)for(var h=0;h<i[c].length-1;h++)if(n)u.search(p(c,h)).forEach((function(t){var e=t.ring,n=t.edge;g(c,h,e,n)}));else for(var f=0;f<i.length;f++)for(var d=0;d<i[f].length-1;d++)g(c,h,f,d);return e||(r={type:"Feature",geometry:{type:"MultiPoint",coordinates:r}}),r;function g(t,n,s,a){var l,u,c=i[t][n],h=i[t][n+1],f=i[s][a],d=i[s][a+1],g=function(t,e,n,i){if(Bu(t,n)||Bu(t,i)||Bu(e,n)||Bu(i,n))return null;var r=t[0],o=t[1],s=e[0],a=e[1],l=n[0],u=n[1],c=i[0],h=i[1],f=(r-s)*(u-h)-(o-a)*(l-c);return 0===f?null:[((r*a-o*s)*(l-c)-(r-s)*(l*h-u*c))/f,((r*a-o*s)*(u-h)-(o-a)*(l*h-u*c))/f]}(c,h,f,d);if(null!==g&&(l=h[0]!==c[0]?(g[0]-c[0])/(h[0]-c[0]):(g[1]-c[1])/(h[1]-c[1]),u=d[0]!==f[0]?(g[0]-f[0])/(d[0]-f[0]):(g[1]-f[1])/(d[1]-f[1]),!(l>=1||l<=0||u>=1||u<=0))){var p=g,v=!o[p];v&&(o[p]=!0),e?r.push(e(g,t,n,c,h,l,s,a,f,d,u,v)):r.push(g)}}function p(t,e){var n,r,o,s,a=i[t][e],l=i[t][e+1];return a[0]<l[0]?(n=a[0],r=l[0]):(n=l[0],r=a[0]),a[1]<l[1]?(o=a[1],s=l[1]):(o=l[1],s=a[1]),{minX:n,minY:o,maxX:r,maxY:s,ring:t,edge:e}}}(t,(function(t,e,n,i,r,o,s,a,l,u,c,h){return[t,e,n,i,r,o,s,a,l,u,c,h]})),l=a.length;if(0==l){var u=[];for(i=0;i<e;i++)u.push(C([t.geometry.coordinates[i]],{parent:-1,winding:Xu(t.geometry.coordinates[i])}));var c=R(u);return F(),z(),c}var h=[],f=[];for(i=0;i<e;i++)for(h.push([]),o=0;o<t.geometry.coordinates[i].length-1;o++)h[i].push([new Yu(t.geometry.coordinates[i][Hu(o+1,t.geometry.coordinates[i].length-1)],1,[i,o],[i,Hu(o+1,t.geometry.coordinates[i].length-1)],void 0)]),f.push(new qu(t.geometry.coordinates[i][o],[i,Hu(o-1,t.geometry.coordinates[i].length-1)],[i,o],void 0,void 0,!1,!0));for(i=0;i<l;i++)h[a[i][1]][a[i][2]].push(new Yu(a[i][0],a[i][5],[a[i][1],a[i][2]],[a[i][6],a[i][7]],void 0)),a[i][11]&&f.push(new qu(a[i][0],[a[i][1],a[i][2]],[a[i][6],a[i][7]],void 0,void 0,!0,!0));var d=f.length;for(i=0;i<h.length;i++)for(o=0;o<h[i].length;o++)h[i][o].sort((function(t,e){return t.param<e.param?-1:1}));var g=[];for(i=0;i<d;i++)g.push({minX:f[i].coord[0],minY:f[i].coord[1],maxX:f[i].coord[0],maxY:f[i].coord[1],index:i});var p=new Ae;for(p.load(g),i=0;i<h.length;i++)for(o=0;o<h[i].length;o++)for(var v=0;v<h[i][o].length;v++){m=v==h[i][o].length-1?h[i][Hu(o+1,t.geometry.coordinates[i].length-1)][0].coord:h[i][o][v+1].coord;var y=p.search({minX:m[0],minY:m[1],maxX:m[0],maxY:m[1]})[0];h[i][o][v].nxtIsectAlongEdgeIn=y.index}for(i=0;i<h.length;i++)for(o=0;o<h[i].length;o++)for(v=0;v<h[i][o].length;v++){var m=h[i][o][v].coord,_=(y=p.search({minX:m[0],minY:m[1],maxX:m[0],maxY:m[1]})[0]).index;_<s?f[_].nxtIsectAlongRingAndEdge2=h[i][o][v].nxtIsectAlongEdgeIn:Wu(f[_].ringAndEdge1,h[i][o][v].ringAndEdgeIn)?f[_].nxtIsectAlongRingAndEdge1=h[i][o][v].nxtIsectAlongEdgeIn:f[_].nxtIsectAlongRingAndEdge2=h[i][o][v].nxtIsectAlongEdgeIn}var b=[];for(i=0,o=0;o<e;o++){var x=i;for(v=0;v<t.geometry.coordinates[o].length-1;v++)f[i].coord[0]<f[x].coord[0]&&(x=i),i++;var E=f[x].nxtIsectAlongRingAndEdge2;for(v=0;v<f.length;v++)if(f[v].nxtIsectAlongRingAndEdge1==x||f[v].nxtIsectAlongRingAndEdge2==x){var w=v;break}var k=Uu([f[w].coord,f[x].coord,f[E].coord],!0)?1:-1;b.push({isect:x,parent:-1,winding:k})}for(b.sort((function(t,e){return f[t.isect].coord>f[e.isect].coord?-1:1})),u=[];b.length>0;){var S=b.pop(),O=S.isect,I=S.parent,M=S.winding,T=u.length,P=[f[O].coord],L=O;if(f[O].ringAndEdge1Walkable)var N=f[O].ringAndEdge1,A=f[O].nxtIsectAlongRingAndEdge1;else N=f[O].ringAndEdge2,A=f[O].nxtIsectAlongRingAndEdge2;for(;!Wu(f[O].coord,f[A].coord);){P.push(f[A].coord);var j=void 0;for(i=0;i<b.length;i++)if(b[i].isect==A){j=i;break}if(null!=j&&b.splice(j,1),Wu(N,f[A].ringAndEdge1)){if(N=f[A].ringAndEdge2,f[A].ringAndEdge2Walkable=!1,f[A].ringAndEdge1Walkable){var D={isect:A};Uu([f[L].coord,f[A].coord,f[f[A].nxtIsectAlongRingAndEdge2].coord],1==M)?(D.parent=I,D.winding=-M):(D.parent=T,D.winding=M),b.push(D)}L=A,A=f[A].nxtIsectAlongRingAndEdge2}else N=f[A].ringAndEdge1,f[A].ringAndEdge1Walkable=!1,f[A].ringAndEdge2Walkable&&(D={isect:A},Uu([f[L].coord,f[A].coord,f[f[A].nxtIsectAlongRingAndEdge1].coord],1==M)?(D.parent=I,D.winding=-M):(D.parent=T,D.winding=M),b.push(D)),L=A,A=f[A].nxtIsectAlongRingAndEdge1}P.push(f[A].coord),u.push(C([P],{index:T,parent:I,winding:M,netWinding:void 0}))}function F(){for(var t=[],e=0;e<c.features.length;e++)-1==c.features[e].properties.parent&&t.push(e);if(t.length>1)for(e=0;e<t.length;e++){for(var n=-1,i=0;i<c.features.length;i++)t[e]!=i&&Bt(c.features[t[e]].geometry.coordinates[0][0],c.features[i],{ignoreBoundary:!0})&&It(c.features[i])<1/0&&(n=i);c.features[t[e]].properties.parent=n}}function z(){for(var t=0;t<c.features.length;t++)if(-1==c.features[t].properties.parent){var e=c.features[t].properties.winding;c.features[t].properties.netWinding=e,G(t,e)}}function G(t,e){for(var n=0;n<c.features.length;n++)if(c.features[n].properties.parent==t){var i=e+c.features[n].properties.winding;c.features[n].properties.netWinding=i,G(n,i)}}return c=R(u),F(),z(),c}var Yu=function(t,e,n,i,r){this.coord=t,this.param=e,this.ringAndEdgeIn=n,this.ringAndEdgeOut=i,this.nxtIsectAlongEdgeIn=r},qu=function(t,e,n,i,r,o,s){this.coord=t,this.ringAndEdge1=e,this.ringAndEdge2=n,this.nxtIsectAlongRingAndEdge1=i,this.nxtIsectAlongRingAndEdge2=r,this.ringAndEdge1Walkable=o,this.ringAndEdge2Walkable=s};function Uu(t,e){if(void 0===e&&(e=!0),3!=t.length)throw new Error("This function requires an array of three points [x,y]");return(t[1][0]-t[0][0])*(t[2][1]-t[0][1])-(t[1][1]-t[0][1])*(t[2][0]-t[0][0])>=0==e}function Xu(t){for(var e=0,n=0;n<t.length-1;n++)t[n][0]<t[e][0]&&(e=n);if(Uu([t[Hu(e-1,t.length-1)],t[e],t[Hu(e+1,t.length-1)]],!0))var i=1;else i=-1;return i}function Wu(t,e){if(!t||!e)return!1;if(t.length!=e.length)return!1;for(var n=0,i=t.length;n<i;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!Wu(t[n],e[n]))return!1}else if(t[n]!=e[n])return!1;return!0}function Hu(t,e){return(t%e+e)%e}function Zu(t){return function(){return t}}function Ku(t){return t[0]}function Ju(t){return t[1]}function Qu(){this._=null}function $u(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function tc(t,e){var n=e,i=e.R,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.R=i.L,n.R&&(n.R.U=n),i.L=n}function ec(t,e){var n=e,i=e.L,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.L=i.R,n.L&&(n.L.U=n),i.R=n}function nc(t){for(;t.L;)t=t.L;return t}function ic(t,e,n,i){var r=[null,null],o=Oc.push(r)-1;return r.left=t,r.right=e,n&&oc(r,t,e,n),i&&oc(r,e,t,i),Sc[t.index].halfedges.push(o),Sc[e.index].halfedges.push(o),r}function rc(t,e,n){var i=[e,n];return i.left=t,i}function oc(t,e,n,i){t[0]||t[1]?t.left===n?t[1]=i:t[0]=i:(t[0]=i,t.left=e,t.right=n)}function sc(t,e,n,i,r){var o,s=t[0],a=t[1],l=s[0],u=s[1],c=0,h=1,f=a[0]-l,d=a[1]-u;if(o=e-l,f||!(o>0)){if(o/=f,f<0){if(o<c)return;o<h&&(h=o)}else if(f>0){if(o>h)return;o>c&&(c=o)}if(o=i-l,f||!(o<0)){if(o/=f,f<0){if(o>h)return;o>c&&(c=o)}else if(f>0){if(o<c)return;o<h&&(h=o)}if(o=n-u,d||!(o>0)){if(o/=d,d<0){if(o<c)return;o<h&&(h=o)}else if(d>0){if(o>h)return;o>c&&(c=o)}if(o=r-u,d||!(o<0)){if(o/=d,d<0){if(o>h)return;o>c&&(c=o)}else if(d>0){if(o<c)return;o<h&&(h=o)}return!(c>0||h<1)||(c>0&&(t[0]=[l+c*f,u+c*d]),h<1&&(t[1]=[l+h*f,u+h*d]),!0)}}}}}function ac(t,e,n,i,r){var o=t[1];if(o)return!0;var s,a,l=t[0],u=t.left,c=t.right,h=u[0],f=u[1],d=c[0],g=c[1],p=(h+d)/2,v=(f+g)/2;if(g===f){if(p<e||p>=i)return;if(h>d){if(l){if(l[1]>=r)return}else l=[p,n];o=[p,r]}else{if(l){if(l[1]<n)return}else l=[p,r];o=[p,n]}}else if(a=v-(s=(h-d)/(g-f))*p,s<-1||s>1)if(h>d){if(l){if(l[1]>=r)return}else l=[(n-a)/s,n];o=[(r-a)/s,r]}else{if(l){if(l[1]<n)return}else l=[(r-a)/s,r];o=[(n-a)/s,n]}else if(f<g){if(l){if(l[0]>=i)return}else l=[e,s*e+a];o=[i,s*i+a]}else{if(l){if(l[0]<e)return}else l=[i,s*i+a];o=[e,s*e+a]}return t[0]=l,t[1]=o,!0}function lc(t,e){var n=t.site,i=e.left,r=e.right;return n===r&&(r=i,i=n),r?Math.atan2(r[1]-i[1],r[0]-i[0]):(n===i?(i=e[1],r=e[0]):(i=e[0],r=e[1]),Math.atan2(i[0]-r[0],r[1]-i[1]))}function uc(t,e){return e[+(e.left!==t.site)]}function cc(t,e){return e[+(e.left===t.site)]}Qu.prototype={constructor:Qu,insert:function(t,e){var n,i,r;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=nc(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(i=n.U).L?(r=i.R)&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.R&&(tc(this,n),n=(t=n).U),n.C=!1,i.C=!0,ec(this,i)):(r=i.L)&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.L&&(ec(this,n),n=(t=n).U),n.C=!1,i.C=!0,tc(this,i)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,i,r=t.U,o=t.L,s=t.R;if(n=o?s?nc(s):o:s,r?r.L===t?r.L=n:r.R=n:this._=n,o&&s?(i=n.C,n.C=t.C,n.L=o,o.U=n,n!==s?(r=n.U,n.U=t.U,t=n.R,r.L=t,n.R=s,s.U=n):(n.U=r,r=n,t=n.R)):(i=t.C,t=n),t&&(t.U=r),!i)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===r.L){if((e=r.R).C&&(e.C=!1,r.C=!0,tc(this,r),e=r.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,ec(this,e),e=r.R),e.C=r.C,r.C=e.R.C=!1,tc(this,r),t=this._;break}}else if((e=r.L).C&&(e.C=!1,r.C=!0,ec(this,r),e=r.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,tc(this,e),e=r.L),e.C=r.C,r.C=e.L.C=!1,ec(this,r),t=this._;break}e.C=!0,t=r,r=r.U}while(!t.C);t&&(t.C=!1)}}};var hc,fc=[];function dc(){$u(this),this.x=this.y=this.arc=this.site=this.cy=null}function gc(t){var e=t.P,n=t.N;if(e&&n){var i=e.site,r=t.site,o=n.site;if(i!==o){var s=r[0],a=r[1],l=i[0]-s,u=i[1]-a,c=o[0]-s,h=o[1]-a,f=2*(l*h-u*c);if(!(f>=-Mc)){var d=l*l+u*u,g=c*c+h*h,p=(h*d-u*g)/f,v=(l*g-c*d)/f,y=fc.pop()||new dc;y.arc=t,y.site=r,y.x=p+s,y.y=(y.cy=v+a)+Math.sqrt(p*p+v*v),t.circle=y;for(var m=null,_=Cc._;_;)if(y.y<_.y||y.y===_.y&&y.x<=_.x){if(!_.L){m=_.P;break}_=_.L}else{if(!_.R){m=_;break}_=_.R}Cc.insert(m,y),m||(hc=y)}}}}function pc(t){var e=t.circle;e&&(e.P||(hc=e.N),Cc.remove(e),fc.push(e),$u(e),t.circle=null)}var vc=[];function yc(){$u(this),this.edge=this.site=this.circle=null}function mc(t){var e=vc.pop()||new yc;return e.site=t,e}function _c(t){pc(t),kc.remove(t),vc.push(t),$u(t)}function bc(t){var e=t.circle,n=e.x,i=e.cy,r=[n,i],o=t.P,s=t.N,a=[t];_c(t);for(var l=o;l.circle&&Math.abs(n-l.circle.x)<Ic&&Math.abs(i-l.circle.cy)<Ic;)o=l.P,a.unshift(l),_c(l),l=o;a.unshift(l),pc(l);for(var u=s;u.circle&&Math.abs(n-u.circle.x)<Ic&&Math.abs(i-u.circle.cy)<Ic;)s=u.N,a.push(u),_c(u),u=s;a.push(u),pc(u);var c,h=a.length;for(c=1;c<h;++c)u=a[c],l=a[c-1],oc(u.edge,l.site,u.site,r);l=a[0],(u=a[h-1]).edge=ic(l.site,u.site,null,r),gc(l),gc(u)}function xc(t){for(var e,n,i,r,o=t[0],s=t[1],a=kc._;a;)if((i=Ec(a,s)-o)>Ic)a=a.L;else{if(!((r=o-wc(a,s))>Ic)){i>-Ic?(e=a.P,n=a):r>-Ic?(e=a,n=a.N):e=n=a;break}if(!a.R){e=a;break}a=a.R}!function(t){Sc[t.index]={site:t,halfedges:[]}}(t);var l=mc(t);if(kc.insert(e,l),e||n){if(e===n)return pc(e),n=mc(e.site),kc.insert(l,n),l.edge=n.edge=ic(e.site,l.site),gc(e),void gc(n);if(n){pc(e),pc(n);var u=e.site,c=u[0],h=u[1],f=t[0]-c,d=t[1]-h,g=n.site,p=g[0]-c,v=g[1]-h,y=2*(f*v-d*p),m=f*f+d*d,_=p*p+v*v,b=[(v*m-d*_)/y+c,(f*_-p*m)/y+h];oc(n.edge,u,g,b),l.edge=ic(u,t,null,b),n.edge=ic(t,g,null,b),gc(e),gc(n)}else l.edge=ic(e.site,l.site)}}function Ec(t,e){var n=t.site,i=n[0],r=n[1],o=r-e;if(!o)return i;var s=t.P;if(!s)return-1/0;var a=(n=s.site)[0],l=n[1],u=l-e;if(!u)return a;var c=a-i,h=1/o-1/u,f=c/u;return h?(-f+Math.sqrt(f*f-2*h*(c*c/(-2*u)-l+u/2+r-o/2)))/h+i:(i+a)/2}function wc(t,e){var n=t.N;if(n)return Ec(n,e);var i=t.site;return i[1]===e?i[0]:1/0}var kc,Sc,Cc,Oc,Ic=1e-6,Mc=1e-12;function Rc(t,e){return e[1]-t[1]||e[0]-t[0]}function Tc(t,e){var n,i,r,o=t.sort(Rc).pop();for(Oc=[],Sc=new Array(t.length),kc=new Qu,Cc=new Qu;;)if(r=hc,o&&(!r||o[1]<r.y||o[1]===r.y&&o[0]<r.x))o[0]===n&&o[1]===i||(xc(o),n=o[0],i=o[1]),o=t.pop();else{if(!r)break;bc(r.arc)}if(function(){for(var t,e,n,i,r=0,o=Sc.length;r<o;++r)if((t=Sc[r])&&(i=(e=t.halfedges).length)){var s=new Array(i),a=new Array(i);for(n=0;n<i;++n)s[n]=n,a[n]=lc(t,Oc[e[n]]);for(s.sort((function(t,e){return a[e]-a[t]})),n=0;n<i;++n)a[n]=e[s[n]];for(n=0;n<i;++n)e[n]=a[n]}}(),e){var s=+e[0][0],a=+e[0][1],l=+e[1][0],u=+e[1][1];!function(t,e,n,i){for(var r,o=Oc.length;o--;)ac(r=Oc[o],t,e,n,i)&&sc(r,t,e,n,i)&&(Math.abs(r[0][0]-r[1][0])>Ic||Math.abs(r[0][1]-r[1][1])>Ic)||delete Oc[o]}(s,a,l,u),function(t,e,n,i){var r,o,s,a,l,u,c,h,f,d,g,p,v=Sc.length,y=!0;for(r=0;r<v;++r)if(o=Sc[r]){for(s=o.site,a=(l=o.halfedges).length;a--;)Oc[l[a]]||l.splice(a,1);for(a=0,u=l.length;a<u;)g=(d=cc(o,Oc[l[a]]))[0],p=d[1],h=(c=uc(o,Oc[l[++a%u]]))[0],f=c[1],(Math.abs(g-h)>Ic||Math.abs(p-f)>Ic)&&(l.splice(a,0,Oc.push(rc(s,d,Math.abs(g-t)<Ic&&i-p>Ic?[t,Math.abs(h-t)<Ic?f:i]:Math.abs(p-i)<Ic&&n-g>Ic?[Math.abs(f-i)<Ic?h:n,i]:Math.abs(g-n)<Ic&&p-e>Ic?[n,Math.abs(h-n)<Ic?f:e]:Math.abs(p-e)<Ic&&g-t>Ic?[Math.abs(f-e)<Ic?h:t,e]:null))-1),++u);u&&(y=!1)}if(y){var m,_,b,x=1/0;for(r=0,y=null;r<v;++r)(o=Sc[r])&&(b=(m=(s=o.site)[0]-t)*m+(_=s[1]-e)*_)<x&&(x=b,y=o);if(y){var E=[t,e],w=[t,i],k=[n,i],S=[n,e];y.halfedges.push(Oc.push(rc(s=y.site,E,w))-1,Oc.push(rc(s,w,k))-1,Oc.push(rc(s,k,S))-1,Oc.push(rc(s,S,E))-1)}}for(r=0;r<v;++r)(o=Sc[r])&&(o.halfedges.length||delete Sc[r])}(s,a,l,u)}this.edges=Oc,this.cells=Sc,kc=Cc=Oc=Sc=null}Tc.prototype={constructor:Tc,polygons:function(){var t=this.edges;return this.cells.map((function(e){var n=e.halfedges.map((function(n){return uc(e,t[n])}));return n.data=e.site.data,n}))},triangles:function(){var t=[],e=this.edges;return this.cells.forEach((function(n,i){if(o=(r=n.halfedges).length)for(var r,o,s,a,l,u,c=n.site,h=-1,f=e[r[o-1]],d=f.left===c?f.right:f.left;++h<o;)s=d,d=(f=e[r[h]]).left===c?f.right:f.left,s&&d&&i<s.index&&i<d.index&&(l=s,u=d,((a=c)[0]-u[0])*(l[1]-a[1])-(a[0]-l[0])*(u[1]-a[1])<0)&&t.push([c.data,s.data,d.data])})),t},links:function(){return this.edges.filter((function(t){return t.right})).map((function(t){return{source:t.left.data,target:t.right.data}}))},find:function(t,e,n){for(var i,r,o=this,s=o._found||0,a=o.cells.length;!(r=o.cells[s]);)if(++s>=a)return null;var l=t-r.site[0],u=e-r.site[1],c=l*l+u*u;do{r=o.cells[i=s],s=null,r.halfedges.forEach((function(n){var i=o.edges[n],a=i.left;if(a!==r.site&&a||(a=i.right)){var l=t-a[0],u=e-a[1],h=l*l+u*u;h<c&&(c=h,s=a.index)}}))}while(null!==s);return o._found=i,null==n||c<=n*n?r.site:null}},t.along=function(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=nt(t).coordinates,r=0,o=0;o<i.length&&!(e>=r&&o===i.length-1);o++){if(r>=e){var s=e-r;if(s){var a=ot(i[o],i[o-1])-180;return st(i[o],s,a,n)}return k(i[o])}r+=at(i[o],i[o+1],n)}return k(i[i.length-1])},t.angle=function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!X(i))throw new Error("options is invalid");if(!t)throw new Error("startPoint is required");if(!e)throw new Error("midPoint is required");if(!n)throw new Error("endPoint is required");var r=t,o=e,s=n,a=z(!0!==i.mercator?ot(o,r):lt(o,r)),l=z(!0!==i.mercator?ot(o,s):lt(o,s));l<a&&(l+=360);var u=l-a;return!0===i.explementary?360-u:u},t.applyFilter=Lr,t.area=It,t.areaFactors=x,t.azimuthToBearing=G,t.bbox=Pt,t.bboxClip=function(t,e){var n=nt(t),i=n.type,r="Feature"===t.type?t.properties:{},o=n.coordinates;switch(i){case"LineString":case"MultiLineString":var s=[];return"LineString"===i&&(o=[o]),o.forEach((function(t){!function(t,e,n){var i,r,o,s,a,l=t.length,u=At(t[0],e),c=[];for(n||(n=[]),i=1;i<l;i++){for(s=t[i-1],r=o=At(a=t[i],e);;){if(!(u|r)){c.push(s),r!==o?(c.push(a),i<l-1&&(n.push(c),c=[])):i===l-1&&c.push(a);break}if(u&r)break;u?u=At(s=Nt(s,a,u,e),e):r=At(a=Nt(s,a,r,e),e)}u=o}c.length&&n.push(c)}(t,e,s)})),1===s.length?I(s[0],r):T(s,r);case"Polygon":return C(jt(o,e),r);case"MultiPolygon":return L(o.map((function(t){return jt(t,e)})),r);default:throw new Error("geometry "+i+" not supported")}},t.bboxPolygon=Dt,t.bearing=ot,t.bearingToAzimuth=z,t.bezierSpline=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.resolution||1e4,i=e.sharpness||.85,r=[],o=nt(t).coordinates.map((function(t){return{x:t[0],y:t[1]}})),s=new Ft({duration:n,points:o,sharpness:i}),a=function(t){var e=s.pos(t);Math.floor(t/100)%2==0&&r.push([e.x,e.y])},l=0;l<s.duration;l+=10)a(l);return a(s.duration),I(r,e.properties)},t.booleanClockwise=zt,t.booleanConcave=function(t){var e=nt(t).coordinates;if(e[0].length<=4)return!1;for(var n=!1,i=e[0].length-1,r=0;r<i;r++){var o=e[0][(r+2)%i][0]-e[0][(r+1)%i][0],s=e[0][(r+2)%i][1]-e[0][(r+1)%i][1],a=e[0][r][0]-e[0][(r+1)%i][0],l=o*(e[0][r][1]-e[0][(r+1)%i][1])-s*a;if(0===r)n=l>0;else if(n!==l>0)return!0}return!1},t.booleanContains=function(t,e){var n=nt(t),i=nt(e),r=n.type,o=i.type,s=n.coordinates,l=i.coordinates;switch(r){case"Point":if("Point"===o)return Xt(s,l);throw new Error("feature2 "+o+" geometry not supported");case"MultiPoint":switch(o){case"Point":return function(t,e){var n,i=!1;for(n=0;n<t.coordinates.length;n++)if(Xt(t.coordinates[n],e.coordinates)){i=!0;break}return i}(n,i);case"MultiPoint":return function(t,e){var n,i=a(e.coordinates);try{for(i.s();!(n=i.n()).done;){var r,o=n.value,s=!1,l=a(t.coordinates);try{for(l.s();!(r=l.n()).done;)if(Xt(o,r.value)){s=!0;break}}catch(t){l.e(t)}finally{l.f()}if(!s)return!1}}catch(t){i.e(t)}finally{i.f()}return!0}(n,i);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"Point":return Vt(i,n,{ignoreEndVertices:!0});case"LineString":return function(t,e){var n,i=!1,r=a(e.coordinates);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(Vt({type:"Point",coordinates:o},t,{ignoreEndVertices:!0})&&(i=!0),!Vt({type:"Point",coordinates:o},t,{ignoreEndVertices:!1}))return!1}}catch(t){r.e(t)}finally{r.f()}return i}(n,i);case"MultiPoint":return function(t,e){var n,i=!1,r=a(e.coordinates);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(Vt(o,t,{ignoreEndVertices:!0})&&(i=!0),!Vt(o,t))return!1}}catch(t){r.e(t)}finally{r.f()}return!!i}(n,i);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"Point":return Bt(i,n,{ignoreBoundary:!0});case"LineString":return function(t,e){var n=!1,i=0;if(!Ut(Pt(t),Pt(e)))return!1;for(;i<e.coordinates.length-1;i++)if(Bt({type:"Point",coordinates:Wt(e.coordinates[i],e.coordinates[i+1])},t,{ignoreBoundary:!0})){n=!0;break}return n}(n,i);case"Polygon":return qt(n,i);case"MultiPoint":return function(t,e){var n,i=a(e.coordinates);try{for(i.s();!(n=i.n()).done;)if(!Bt(n.value,t,{ignoreBoundary:!0}))return!1}catch(t){i.e(t)}finally{i.f()}return!0}(n,i);default:throw new Error("feature2 "+o+" geometry not supported")}case"MultiPolygon":if("Polygon"===o)return function(t,e){return t.coordinates.some((function(t){return qt({type:"Polygon",coordinates:t},e)}))}(n,i);throw new Error("feature2 "+o+" geometry not supported");default:throw new Error("feature1 "+r+" geometry not supported")}},t.booleanCrosses=ue,t.booleanDisjoint=ge,t.booleanEqual=function(t,e){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).precision;if("number"!=typeof(n=null==n||isNaN(n)?6:n)||!(n>=0))throw new Error("precision must be a positive number");return nt(t).type===nt(e).type&&ke(Oe(t),Oe(e),{precision:n})},t.booleanIntersects=Te,t.booleanOverlap=function(t,e){var n=nt(t),i=nt(e),r=n.type,o=i.type;if("MultiPoint"===r&&"MultiPoint"!==o||("LineString"===r||"MultiLineString"===r)&&"LineString"!==o&&"MultiLineString"!==o||("Polygon"===r||"MultiPolygon"===r)&&"Polygon"!==o&&"MultiPolygon"!==o)throw new Error("features must be of the same type");if("Point"===r)throw new Error("Point geometry not supported");if(ke(t,e,{precision:6}))return!1;var s=0;switch(r){case"MultiPoint":for(var a=0;a<n.coordinates.length;a++)for(var l=0;l<i.coordinates.length;l++){var u=n.coordinates[a],c=i.coordinates[l];if(u[0]===c[0]&&u[1]===c[1])return!0}return!1;case"LineString":case"MultiLineString":xt(t,(function(t){xt(e,(function(e){mn(t,e).features.length&&s++}))}));break;case"Polygon":case"MultiPolygon":xt(t,(function(t){xt(e,(function(e){se(t,e).features.length&&s++}))}))}return s>0},t.booleanParallel=function(t,e){if(!t)throw new Error("line1 is required");if(!e)throw new Error("line2 is required");if("LineString"!==xn(t,"line1"))throw new Error("line1 must be a LineString");if("LineString"!==xn(e,"line2"))throw new Error("line2 must be a LineString");for(var n=Ke(Oe(t)).features,i=Ke(Oe(e)).features,r=0;r<n.length;r++){var o=n[r].geometry.coordinates;if(!i[r])break;if(!bn(o,i[r].geometry.coordinates))return!1}return!0},t.booleanPointInPolygon=Bt,t.booleanPointOnLine=Vt,t.booleanTouches=function(t,e){var n=nt(t),i=nt(e),r=n.type,o=i.type;switch(r){case"Point":switch(o){case"LineString":return En(n,i);case"MultiLineString":for(var s=!1,a=0;a<i.coordinates.length;a++)En(n,{type:"LineString",coordinates:i.coordinates[a]})&&(s=!0);return s;case"Polygon":for(var l=0;l<i.coordinates.length;l++)if(Vt(n,{type:"LineString",coordinates:i.coordinates[l]}))return!0;return!1;case"MultiPolygon":for(l=0;l<i.coordinates.length;l++)for(a=0;a<i.coordinates[l].length;a++)if(Vt(n,{type:"LineString",coordinates:i.coordinates[l][a]}))return!0;return!1;default:throw new Error("feature2 "+o+" geometry not supported")}case"MultiPoint":switch(o){case"LineString":for(s=!1,l=0;l<n.coordinates.length;l++)if(s||En({type:"Point",coordinates:n.coordinates[l]},i)&&(s=!0),Vt({type:"Point",coordinates:n.coordinates[l]},i,{ignoreEndVertices:!0}))return!1;return s;case"MultiLineString":for(s=!1,l=0;l<n.coordinates.length;l++)for(a=0;a<i.coordinates.length;a++)if(s||En({type:"Point",coordinates:n.coordinates[l]},{type:"LineString",coordinates:i.coordinates[a]})&&(s=!0),Vt({type:"Point",coordinates:n.coordinates[l]},{type:"LineString",coordinates:i.coordinates[a]},{ignoreEndVertices:!0}))return!1;return s;case"Polygon":for(s=!1,l=0;l<n.coordinates.length;l++)if(s||Vt({type:"Point",coordinates:n.coordinates[l]},{type:"LineString",coordinates:i.coordinates[0]})&&(s=!0),Bt({type:"Point",coordinates:n.coordinates[l]},i,{ignoreBoundary:!0}))return!1;return s;case"MultiPolygon":for(s=!1,l=0;l<n.coordinates.length;l++)for(a=0;a<i.coordinates.length;a++)if(s||Vt({type:"Point",coordinates:n.coordinates[l]},{type:"LineString",coordinates:i.coordinates[a][0]})&&(s=!0),Bt({type:"Point",coordinates:n.coordinates[l]},{type:"Polygon",coordinates:i.coordinates[a]},{ignoreBoundary:!0}))return!1;return s;default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"Point":return En(i,n);case"MultiPoint":for(s=!1,l=0;l<i.coordinates.length;l++)if(s||En({type:"Point",coordinates:i.coordinates[l]},n)&&(s=!0),Vt({type:"Point",coordinates:i.coordinates[l]},n,{ignoreEndVertices:!0}))return!1;return s;case"LineString":var u=!1;if(En({type:"Point",coordinates:n.coordinates[0]},i)&&(u=!0),En({type:"Point",coordinates:n.coordinates[n.coordinates.length-1]},i)&&(u=!0),!1===u)return!1;for(l=0;l<n.coordinates.length;l++)if(Vt({type:"Point",coordinates:n.coordinates[l]},i,{ignoreEndVertices:!0}))return!1;return u;case"MultiLineString":for(u=!1,l=0;l<i.coordinates.length;l++)for(En({type:"Point",coordinates:n.coordinates[0]},{type:"LineString",coordinates:i.coordinates[l]})&&(u=!0),En({type:"Point",coordinates:n.coordinates[n.coordinates.length-1]},{type:"LineString",coordinates:i.coordinates[l]})&&(u=!0),a=0;a<n.coordinates[l].length;a++)if(Vt({type:"Point",coordinates:n.coordinates[a]},{type:"LineString",coordinates:i.coordinates[l]},{ignoreEndVertices:!0}))return!1;return u;case"Polygon":for(s=!1,l=0;l<n.coordinates.length;l++)if(s||Vt({type:"Point",coordinates:n.coordinates[l]},{type:"LineString",coordinates:i.coordinates[0]})&&(s=!0),Bt({type:"Point",coordinates:n.coordinates[l]},i,{ignoreBoundary:!0}))return!1;return s;case"MultiPolygon":for(s=!1,l=0;l<n.coordinates.length;l++){for(a=0;a<i.coordinates.length;a++)s||Vt({type:"Point",coordinates:n.coordinates[l]},{type:"LineString",coordinates:i.coordinates[a][0]})&&(s=!0);if(Bt({type:"Point",coordinates:n.coordinates[l]},i,{ignoreBoundary:!0}))return!1}return s;default:throw new Error("feature2 "+o+" geometry not supported")}case"MultiLineString":switch(o){case"Point":for(l=0;l<n.coordinates.length;l++)if(En(i,{type:"LineString",coordinates:n.coordinates[l]}))return!0;return!1;case"MultiPoint":for(s=!1,l=0;l<n.coordinates.length;l++)for(a=0;a<i.coordinates.length;a++)if(s||En({type:"Point",coordinates:i.coordinates[a]},{type:"LineString",coordinates:n.coordinates[a]})&&(s=!0),Vt({type:"Point",coordinates:i.coordinates[a]},{type:"LineString",coordinates:n.coordinates[a]},{ignoreEndVertices:!0}))return!1;return s;case"LineString":for(u=!1,l=0;l<n.coordinates.length;l++)for(En({type:"Point",coordinates:n.coordinates[l][0]},i)&&(u=!0),En({type:"Point",coordinates:n.coordinates[l][n.coordinates[l].length-1]},i)&&(u=!0),a=0;a<i.coordinates.length;a++)if(Vt({type:"Point",coordinates:i.coordinates[a]},{type:"LineString",coordinates:n.coordinates[l]},{ignoreEndVertices:!0}))return!1;return u;case"MultiLineString":for(u=!1,l=0;l<n.coordinates.length;l++)for(a=0;a<i.coordinates.length;a++){En({type:"Point",coordinates:n.coordinates[l][0]},{type:"LineString",coordinates:i.coordinates[a]})&&(u=!0),En({type:"Point",coordinates:n.coordinates[l][n.coordinates[l].length-1]},{type:"LineString",coordinates:i.coordinates[a]})&&(u=!0);for(var c=0;c<n.coordinates[l].length;c++)if(Vt({type:"Point",coordinates:n.coordinates[l][c]},{type:"LineString",coordinates:i.coordinates[a]},{ignoreEndVertices:!0}))return!1}return u;case"Polygon":for(s=!1,l=0;l<n.coordinates.length;l++)for(a=0;a<n.coordinates.length;a++)if(s||Vt({type:"Point",coordinates:n.coordinates[l][a]},{type:"LineString",coordinates:i.coordinates[0]})&&(s=!0),Bt({type:"Point",coordinates:n.coordinates[l][a]},i,{ignoreBoundary:!0}))return!1;return s;case"MultiPolygon":for(s=!1,l=0;l<i.coordinates[0].length;l++)for(a=0;a<n.coordinates.length;a++)for(c=0;c<n.coordinates[a].length;c++)if(s||Vt({type:"Point",coordinates:n.coordinates[a][c]},{type:"LineString",coordinates:i.coordinates[0][l]})&&(s=!0),Bt({type:"Point",coordinates:n.coordinates[a][c]},{type:"Polygon",coordinates:[i.coordinates[0][l]]},{ignoreBoundary:!0}))return!1;return s;default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"Point":for(l=0;l<n.coordinates.length;l++)if(Vt(i,{type:"LineString",coordinates:n.coordinates[l]}))return!0;return!1;case"MultiPoint":for(s=!1,l=0;l<i.coordinates.length;l++)if(s||Vt({type:"Point",coordinates:i.coordinates[l]},{type:"LineString",coordinates:n.coordinates[0]})&&(s=!0),Bt({type:"Point",coordinates:i.coordinates[l]},n,{ignoreBoundary:!0}))return!1;return s;case"LineString":for(s=!1,l=0;l<i.coordinates.length;l++)if(s||Vt({type:"Point",coordinates:i.coordinates[l]},{type:"LineString",coordinates:n.coordinates[0]})&&(s=!0),Bt({type:"Point",coordinates:i.coordinates[l]},n,{ignoreBoundary:!0}))return!1;return s;case"MultiLineString":for(s=!1,l=0;l<i.coordinates.length;l++)for(a=0;a<i.coordinates[l].length;a++)if(s||Vt({type:"Point",coordinates:i.coordinates[l][a]},{type:"LineString",coordinates:n.coordinates[0]})&&(s=!0),Bt({type:"Point",coordinates:i.coordinates[l][a]},n,{ignoreBoundary:!0}))return!1;return s;case"Polygon":for(s=!1,l=0;l<n.coordinates[0].length;l++)if(s||Vt({type:"Point",coordinates:n.coordinates[0][l]},{type:"LineString",coordinates:i.coordinates[0]})&&(s=!0),Bt({type:"Point",coordinates:n.coordinates[0][l]},i,{ignoreBoundary:!0}))return!1;return s;case"MultiPolygon":for(s=!1,l=0;l<i.coordinates[0].length;l++)for(a=0;a<n.coordinates[0].length;a++)if(s||Vt({type:"Point",coordinates:n.coordinates[0][a]},{type:"LineString",coordinates:i.coordinates[0][l]})&&(s=!0),Bt({type:"Point",coordinates:n.coordinates[0][a]},{type:"Polygon",coordinates:i.coordinates[0][l]},{ignoreBoundary:!0}))return!1;return s;default:throw new Error("feature2 "+o+" geometry not supported")}case"MultiPolygon":switch(o){case"Point":for(l=0;l<n.coordinates[0].length;l++)if(Vt(i,{type:"LineString",coordinates:n.coordinates[0][l]}))return!0;return!1;case"MultiPoint":for(s=!1,l=0;l<n.coordinates[0].length;l++)for(a=0;a<i.coordinates.length;a++)if(s||Vt({type:"Point",coordinates:i.coordinates[a]},{type:"LineString",coordinates:n.coordinates[0][l]})&&(s=!0),Bt({type:"Point",coordinates:i.coordinates[a]},{type:"Polygon",coordinates:n.coordinates[0][l]},{ignoreBoundary:!0}))return!1;return s;case"LineString":for(s=!1,l=0;l<n.coordinates[0].length;l++)for(a=0;a<i.coordinates.length;a++)if(s||Vt({type:"Point",coordinates:i.coordinates[a]},{type:"LineString",coordinates:n.coordinates[0][l]})&&(s=!0),Bt({type:"Point",coordinates:i.coordinates[a]},{type:"Polygon",coordinates:n.coordinates[0][l]},{ignoreBoundary:!0}))return!1;return s;case"MultiLineString":for(s=!1,l=0;l<n.coordinates.length;l++)for(a=0;a<i.coordinates.length;a++)for(c=0;c<i.coordinates[a].length;c++)if(s||Vt({type:"Point",coordinates:i.coordinates[a][c]},{type:"LineString",coordinates:n.coordinates[l][0]})&&(s=!0),Bt({type:"Point",coordinates:i.coordinates[a][c]},{type:"Polygon",coordinates:[n.coordinates[l][0]]},{ignoreBoundary:!0}))return!1;return s;case"Polygon":for(s=!1,l=0;l<n.coordinates[0].length;l++)for(a=0;a<n.coordinates[0][l].length;a++)if(s||Vt({type:"Point",coordinates:n.coordinates[0][l][a]},{type:"LineString",coordinates:i.coordinates[0]})&&(s=!0),Bt({type:"Point",coordinates:n.coordinates[0][l][a]},i,{ignoreBoundary:!0}))return!1;return s;case"MultiPolygon":for(s=!1,l=0;l<n.coordinates[0].length;l++)for(a=0;a<i.coordinates[0].length;a++)for(c=0;c<n.coordinates[0].length;c++)if(s||Vt({type:"Point",coordinates:n.coordinates[0][l][c]},{type:"LineString",coordinates:i.coordinates[0][a]})&&(s=!0),Bt({type:"Point",coordinates:n.coordinates[0][l][c]},{type:"Polygon",coordinates:i.coordinates[0][a]},{ignoreBoundary:!0}))return!1;return s;default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+r+" geometry not supported")}},t.booleanValid=function(t){if(!t.type)return!1;var e=nt(t),n=e.type,i=e.coordinates;switch(n){case"Point":return i.length>1;case"MultiPoint":for(var r=0;r<i.length;r++)if(i[r].length<2)return!1;return!0;case"LineString":if(i.length<2)return!1;for(r=0;r<i.length;r++)if(i[r].length<2)return!1;return!0;case"MultiLineString":if(i.length<2)return!1;for(r=0;r<i.length;r++)if(i[r].length<2)return!1;return!0;case"Polygon":for(r=0;r<e.coordinates.length;r++){if(i[r].length<4)return!1;if(!kn(i[r]))return!1;if(Sn(i[r]))return!1;if(r>0&&se(C([i[0]]),C([i[r]])).features.length>1)return!1}return!0;case"MultiPolygon":for(r=0;r<e.coordinates.length;r++)for(var o=e.coordinates[r],s=0;s<o.length;s++){if(o[s].length<4)return!1;if(!kn(o[s]))return!1;if(Sn(o[s]))return!1;if(0===s&&!Cn(o,e.coordinates,r))return!1;if(s>0&&se(C([o[0]]),C([o[s]])).features.length>1)return!1}return!0;default:return!1}},t.booleanWithin=On,t.buffer=function(t,e,n){var i=(n=n||{}).units||"kilometers",r=n.steps||8;if(!t)throw new Error("geojson is required");if("object"!==y(n))throw new Error("options must be an object");if("number"!=typeof r)throw new Error("steps must be an number");if(void 0===e)throw new Error("radius is required");if(r<=0)throw new Error("steps must be greater than 0");var o=[];switch(t.type){case"GeometryCollection":return yt(t,(function(t){var n=nr(t,e,i,r);n&&o.push(n)})),R(o);case"FeatureCollection":return gt(t,(function(t){var n=nr(t,e,i,r);n&&gt(n,(function(t){t&&o.push(t)}))})),R(o)}return nr(t,e,i,r)},t.center=Tn,t.centerMean=or,t.centerMedian=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!X(e=e||{}))throw new Error("options is invalid");var n=e.counter||10;if(!U(n))throw new Error("counter must be a number");var i=e.weight,r=or(t,{weight:e.weight}),o=R([]);gt(t,(function(t){var e;o.features.push(sr(t,{properties:{weight:null==(e=t.properties)?void 0:e[i]}}))}));var s={tolerance:e.tolerance,medianCandidates:[]};return ar(r.geometry.coordinates,[0,0],o,s,n)},t.centerOfMass=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(it(e)){case"Point":return k(K(e),n.properties);case"Polygon":var i=[];ct(e,(function(t){i.push(t)}));var r,o,s,a,l,u,c,h,f=sr(e,{properties:n.properties}),d=f.geometry.coordinates,g=0,p=0,v=0,y=i.map((function(t){return[t[0]-d[0],t[1]-d[1]]}));for(r=0;r<i.length-1;r++)a=(o=y[r])[0],u=o[1],l=(s=y[r+1])[0],v+=h=a*(c=s[1])-l*u,g+=(a+l)*h,p+=(u+c)*h;if(0===v)return f;var m=1/(.5*v*6);return k([d[0]+m*g,d[1]+m*p],n.properties);default:var _=wr(e);return _?t(_,{properties:n.properties}):sr(e,{properties:n.properties})}},t.centroid=sr,t.circle=kr,t.cleanCoords=Oe,t.clone=Sr,t.cloneProperties=Or,t.clusterEach=Rr,t.clusterReduce=Tr,t.clusters=Vr,t.clustersDbscan=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!0!==n.mutate&&(t=Sr(t));var i=n.minPoints||3,r=F(e,n.units),o=new Yr(t.features.length),s=t.features.map((function(t){return!1})),a=t.features.map((function(t){return!1})),l=t.features.map((function(t){return!1})),u=t.features.map((function(t){return-1}));o.load(t.features.map((function(t,e){var n=g(t.geometry.coordinates,2),i=n[0],r=n[1];return{minX:i,minY:r,maxX:i,maxY:r,index:e}})));var c=function(n){var i=t.features[n],s=g(i.geometry.coordinates,2),a=s[0],l=s[1],u=Math.max(l-r,-90),c=Math.min(l+r,90),h=u<0&&c>0?r:Math.abs(u)<Math.abs(c)?r/Math.cos(V(c)):r/Math.cos(V(u)),f={minX:Math.max(a-h,-360),minY:u,maxX:Math.min(a+h,360),maxY:c};return o.search(f).filter((function(n){var r=n.index,o=t.features[r];return at(i,o,{units:"kilometers"})<=e}))},h=0;return t.features.forEach((function(t,e){if(!s[e]){var n=c(e);if(n.length>=i){var r=h;h++,s[e]=!0,function(t,e){for(var n=0;n<e.length;n++){var r=e[n].index;if(!s[r]){s[r]=!0;var o=c(r);o.length>=i&&e.push.apply(e,p(o))}a[r]||(a[r]=!0,u[r]=t)}}(r,n)}else l[e]=!0}})),t.features.forEach((function(e,n){var i=t.features[n];i.properties||(i.properties={}),u[n]>=0?(i.properties.dbscan=l[n]?"edge":"core",i.properties.cluster=u[n]):i.properties.dbscan="noise"})),t},t.clustersKmeans=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.features.length;e.numberOfClusters=e.numberOfClusters||Math.round(Math.sqrt(n/2)),e.numberOfClusters>n&&(e.numberOfClusters=n),!0!==e.mutate&&(t=Sr(t));var i=vt(t),r=i.slice(0,e.numberOfClusters),o=Ur(i,e.numberOfClusters,r),s={};return o.centroids.forEach((function(t,e){s[e]=t})),gt(t,(function(t,e){var n=o.idxs[e];t.properties.cluster=n,t.properties.centroid=s[n]})),t},t.collect=function(t,e,n,i){var r=new Xr(6),o=e.features.map((function(t){var e;return{minX:t.geometry.coordinates[0],minY:t.geometry.coordinates[1],maxX:t.geometry.coordinates[0],maxY:t.geometry.coordinates[1],property:null==(e=t.properties)?void 0:e[n]}}));return r.load(o),t.features.forEach((function(t){t.properties||(t.properties={});var e=Pt(t),n=r.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}),o=[];n.forEach((function(e){Bt([e.minX,e.minY],t)&&o.push(e.property)})),t.properties[i]=o})),t},t.collectionOf=et,t.combine=function(t){var e={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}};return gt(t,(function(t){var n,i,r,o;switch(null==(o=t.geometry)?void 0:o.type){case"Point":e.MultiPoint.coordinates.push(t.geometry.coordinates),e.MultiPoint.properties.push(t.properties);break;case"MultiPoint":(n=e.MultiPoint.coordinates).push.apply(n,p(t.geometry.coordinates)),e.MultiPoint.properties.push(t.properties);break;case"LineString":e.MultiLineString.coordinates.push(t.geometry.coordinates),e.MultiLineString.properties.push(t.properties);break;case"MultiLineString":(i=e.MultiLineString.coordinates).push.apply(i,p(t.geometry.coordinates)),e.MultiLineString.properties.push(t.properties);break;case"Polygon":e.MultiPolygon.coordinates.push(t.geometry.coordinates),e.MultiPolygon.properties.push(t.properties);break;case"MultiPolygon":(r=e.MultiPolygon.coordinates).push.apply(r,p(t.geometry.coordinates)),e.MultiPolygon.properties.push(t.properties)}})),R(Object.keys(e).filter((function(t){return e[t].coordinates.length})).sort().map((function(t){return E({type:t,coordinates:e[t].coordinates},{collectedProperties:e[t].properties})})))},t.concave=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.maxEdge||1/0,i=function(t){var e=[],n={};return gt(t,(function(t){if(t.geometry){var i=t.geometry.coordinates.join("-");Object.prototype.hasOwnProperty.call(n,i)||(e.push(t),n[i]=!0)}})),R(e)}(t),r=Wr(i);if(r.features=r.features.filter((function(t){var i=t.geometry.coordinates[0][0],r=t.geometry.coordinates[0][1],o=t.geometry.coordinates[0][2],s=at(i,r,e),a=at(r,o,e),l=at(i,o,e);return s<=n&&a<=n&&l<=n})),r.features.length<1)return null;var o=_o(r);return 1===o.coordinates.length&&(o.coordinates=o.coordinates[0],o.type="Polygon"),E(o)},t.containsNumber=Q,t.convertArea=q,t.convertLength=Y,t.convex=wr,t.coordAll=vt,t.coordEach=ct,t.coordReduce=ht,t.createBins=Pr,t.degreesToRadians=V,t.destination=st,t.difference=function(t){var e=[];if(yt(t,(function(t){e.push(t.coordinates)})),e.length<2)throw new Error("Must have at least two features");var n=t.features[0].properties||{},i=ms.apply(bs,[e[0]].concat(p(e.slice(1))));return 0===i.length?null:1===i.length?C(i[0],n):L(i,n)},t.dissolve=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!X(e=e||{}))throw new Error("options is invalid");var n=e.propertyName;et(t,"Polygon","dissolve");var i=[];if(!n)return xs(L(vs.apply(null,t.features.map((function(t){return t.geometry.coordinates})))));var r={};gt(t,(function(t){t.properties&&(Object.prototype.hasOwnProperty.call(r,t.properties[n])||(r[t.properties[n]]=[]),r[t.properties[n]].push(t))}));for(var o=Object.keys(r),s=0;s<o.length;s++){var a=L(vs.apply(null,r[o[s]].map((function(t){return t.geometry.coordinates}))));a&&a.properties&&(a.properties[n]=o[s],i.push(a))}return xs(R(i))},t.distance=at,t.distanceWeight=ws,t.earthRadius=_,t.ellipse=Os,t.envelope=Ms,t.explode=Rs,t.factors=b,t.feature=E,t.featureCollection=R,t.featureEach=gt,t.featureOf=tt,t.featureReduce=pt,t.filterProperties=Ar,t.findPoint=Ct,t.findSegment=St,t.flatten=xs,t.flattenEach=_t,t.flattenReduce=bt,t.flip=function(t,e){var n;if(!X(e=e||{}))throw new Error("options is invalid");var i=null!=(n=e.mutate)&&n;if(!t)throw new Error("geojson is required");return!1!==i&&void 0!==i||(t=Sr(t)),ct(t,(function(t){var e=t[0],n=t[1];t[0]=n,t[1]=e})),t},t.geojsonRbush=Ze,t.geojsonType=$,t.geomEach=yt,t.geomReduce=mt,t.geometry=w,t.geometryCollection=N,t.getCluster=Mr,t.getCoord=K,t.getCoords=J,t.getGeom=nt,t.getType=it,t.greatCircle=function(t,e,n){if("object"!==y(n=n||{}))throw new Error("options is invalid");var i=n.properties,r=n.npoints,o=n.offset;if(t=K(t),e=K(e),i=i||{},r=r||100,t[0]===e[0]&&t[1]===e[1]){var s=Array(r);return s.fill([t[0],t[1]]),I(s,i)}return o=o||10,new js({x:t[0],y:t[1]},{x:e[0],y:e[1]},i).Arc(r,{offset:o}).json()},t.helpers=Z,t.hexGrid=Fs,t.interpolate=function(t,e,n){if("object"!==y(n=n||{}))throw new Error("options is invalid");var i,r=n.gridType,o=n.property,s=n.weight,a=n.bbox;if(!t)throw new Error("points is required");if(et(t,"Point","input must contain Points"),!e)throw new Error("cellSize is required");if(void 0!==s&&"number"!=typeof s)throw new Error("weight must be a number");switch(o=o||"elevation",r=r||"square",s=s||1,W(a=null!=a?a:Pt(t)),r){case"point":case"points":i=Bs(a,e,n);break;case"square":case"squares":i=Ys(a,e,n);break;case"hex":case"hexes":i=Fs(a,e,n);break;case"triangle":case"triangles":i=qs(a,e,n);break;default:throw new Error("invalid gridType")}var l=[];return gt(i,(function(e){var i=0,a=0;gt(t,(function(t){var l,u=at("point"===r?e:sr(e),t,n);if(void 0!==o&&(l=t.properties[o]),void 0===l&&(l=t.geometry.coordinates[2]),void 0===l)throw new Error("zValue is missing");0===u&&(i=l);var c=1/Math.pow(u,s);a+=c,i+=c*l}));var u=Sr(e);u.properties[o]=i/a,l.push(u)})),R(l)},t.intersect=Ds,t.invariant=rt,t.isNumber=U,t.isObject=X,t.isobands=function(t,e,n){if(!X(n=n||{}))throw new Error("options is invalid");var i=n.zProperty||"elevation",r=n.commonProperties||{},o=n.breaksProperties||[];if(et(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks is not an Array");if(!X(r))throw new Error("commonProperties is not an Object");if(!Array.isArray(o))throw new Error("breaksProperties is not an Array");var s=function(t,e){if(!X(e=e||{}))throw new Error("options is invalid");var n=e.zProperty||"elevation",i=e.flip,r=e.flags;et(t,"Point","input must contain Points");for(var o=function(t,e){var n={};return gt(t,(function(t){var e=J(t)[1];n[e]||(n[e]=[]),n[e].push(t)})),Object.keys(n).map((function(t){return n[t].sort((function(t,e){return J(t)[0]-J(e)[0]}))})).sort((function(t,n){return e?J(t[0])[1]-J(n[0])[1]:J(n[0])[1]-J(t[0])[1]}))}(t,i),s=[],a=0;a<o.length;a++){for(var l=o[a],u=[],c=0;c<l.length;c++){var h=l[c];h.properties[n]?u.push(h.properties[n]):u.push(0),!0===r&&(h.properties.matrixPosition=[a,c])}s.push(u)}return s}(t,{zProperty:i,flip:!0}),a=function(t,e,n){for(var i=[],r=1;r<e.length;r++){var o=+e[r-1],s=+e[r],a=Ja(Ka(Ba(t,o,s-o)));i.push(l({groupedRings:a},n,o+"-"+s))}return i}(s,e,i);return R((a=function(t,e,n){var i=Pt(n),r=i[2]-i[0],o=i[3]-i[1],s=i[0],a=i[1],l=e[0].length-1,u=e.length-1,c=r/l,h=o/u;return t.map((function(t){return t.groupedRings=t.groupedRings.map((function(t){return t.map((function(t){return t.map((function(t){return[t[0]*c+s,t[1]*h+a]}))}))})),t}))}(a,s,t)).map((function(t,e){if(o[e]&&!X(o[e]))throw new Error("Each mappedProperty is required to be an Object");var n=Za(Za({},r),o[e]);return n[i]=t[i],L(t.groupedRings,n)})))},t.isolines=function(t,e,n){if(!X(n=n||{}))throw new Error("options is invalid");var i=n.zProperty||"elevation",r=n.commonProperties||{},o=n.breaksProperties||[];if(et(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks must be an Array");if(!X(r))throw new Error("commonProperties must be an Object");if(!Array.isArray(o))throw new Error("breaksProperties must be an Array");var s=function(t,e){if(!X(e=e||{}))throw new Error("options is invalid");var n=e.zProperty||"elevation",i=e.flip,r=e.flags;et(t,"Point","input must contain Points");for(var o=function(t,e){var n={};return gt(t,(function(t){var e=J(t)[1];n[e]||(n[e]=[]),n[e].push(t)})),Object.keys(n).map((function(t){return n[t].sort((function(t,e){return J(t)[0]-J(e)[0]}))})).sort((function(t,n){return e?J(t[0])[1]-J(n[0])[1]:J(n[0])[1]-J(t[0])[1]}))}(t,i),s=[],a=0;a<o.length;a++){for(var l=o[a],u=[],c=0;c<l.length;c++){var h=l[c];h.properties[n]?u.push(h.properties[n]):u.push(0),!0===r&&(h.properties.matrixPosition=[a,c])}s.push(u)}return s}(t,{zProperty:i,flip:!0});return R(function(t,e,n){var i=Pt(n),r=i[2]-i[0],o=i[3]-i[1],s=i[0],a=i[1],l=e[0].length-1,u=e.length-1,c=r/l,h=o/u,f=function(t){t[0]=t[0]*c+s,t[1]=t[1]*h+a};return t.forEach((function(t){ct(t,f)})),t}(function(t,e,n,i,r){for(var o=[],s=0;s<e.length;s++){var a=+e[s],l=ol(ol({},i),r[s]);l[n]=a;var u=T(ea(t,a,{linearRing:!1,noFrame:!0}),l);o.push(u)}return o}(s,e,i,r,o),s,t))},t.kinks=function(t){var e,n,i={type:"FeatureCollection",features:[]};if("LineString"===(n="Feature"===t.type?t.geometry:t).type)e=[n.coordinates];else if("MultiLineString"===n.type)e=n.coordinates;else if("MultiPolygon"===n.type){var r;e=(r=[]).concat.apply(r,p(n.coordinates))}else{if("Polygon"!==n.type)throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");e=n.coordinates}return e.forEach((function(t){e.forEach((function(e){for(var n=0;n<t.length-1;n++)for(var r=n;r<e.length-1;r++){if(t===e){if(1===Math.abs(n-r))continue;if(0===n&&r===t.length-2&&t[n][0]===t[t.length-1][0]&&t[n][1]===t[t.length-1][1])continue}var o=sl(t[n][0],t[n][1],t[n+1][0],t[n+1][1],e[r][0],e[r][1],e[r+1][0],e[r+1][1]);o&&i.features.push(k([o[0],o[1]]))}}))})),i},t.length=al,t.lengthToDegrees=F,t.lengthToRadians=D,t.lineArc=ll,t.lineChunk=function(t,e,n){if(!X(n=n||{}))throw new Error("options is invalid");var i=n.units,r=n.reverse;if(!t)throw new Error("geojson is required");if(e<=0)throw new Error("segmentLength must be greater than 0");var o=[];return _t(t,(function(t){r&&(t.geometry.coordinates=t.geometry.coordinates.reverse()),function(t,e,n,i){var r=al(t,{units:n});if(r<=e)return i(t);var o=r/e;Number.isInteger(o)||(o=Math.floor(o)+1);for(var s=0;s<o;s++)i(cl(t,e*s,e*(s+1),{units:n}))}(t,e,i,(function(t){o.push(t)}))})),R(o)},t.lineEach=wt,t.lineIntersect=se,t.lineOffset=function(t,e,n){if(!X(n=n||{}))throw new Error("options is invalid");var i=n.units;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("distance is required");var r=it(t),o=t.properties;switch(r){case"LineString":return dl(t,e,i);case"MultiLineString":var s=[];return _t(t,(function(t){s.push(dl(t,e,i).geometry.coordinates)})),T(s,o);default:throw new Error("geometry "+r+" is not supported")}},t.lineOverlap=mn,t.lineReduce=kt,t.lineSegment=Ke,t.lineSlice=function(t,e,n){var i=J(n);if("LineString"!==it(n))throw new Error("line must be a LineString");for(var r,o=un(n,t),s=un(n,e),a=[(r=o.properties.index<=s.properties.index?[o,s]:[s,o])[0].geometry.coordinates],l=r[0].properties.index+1;l<r[1].properties.index+1;l++)a.push(i[l]);return a.push(r[1].geometry.coordinates),I(a,n.properties)},t.lineSliceAlong=cl,t.lineSplit=function(t,e){if(!t)throw new Error("line is required");if(!e)throw new Error("splitter is required");var n=it(t),i=it(e);if("LineString"!==n)throw new Error("line must be LineString");if("FeatureCollection"===i)throw new Error("splitter cannot be a FeatureCollection");if("GeometryCollection"===i)throw new Error("splitter cannot be a GeometryCollection");var r=pl(e,{precision:7});switch(i){case"Point":return yl(t,r);case"MultiPoint":return vl(t,r);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return vl(t,se(t,r,{ignoreSelfIntersections:!0}))}},t.lineString=I,t.lineStrings=M,t.lineToPolygon=function(t){var e,n,i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=r.properties,s=null==(e=r.autoComplete)||e,a=null==(n=r.orderCoords)||n;if(null!=(i=r.mutate)&&i||(t=Sr(t)),"FeatureCollection"===t.type){var l=[];return t.features.forEach((function(t){l.push(J(bl(t,{},s,a)))})),L(l,o)}return bl(t,o,s,a)},t.mask=function(t,e,n){var i,r=null!=(i=null==n?void 0:n.mutate)&&i,o=e;e&&!1===r&&(o=Sr(e));var s,a=function(t){var e=[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]];return t&&(e="Feature"===t.type?t.geometry.coordinates:t.coordinates),C(e)}(o);return("FeatureCollection"===t.type?El(2===(s=t).features.length?vs(s.features[0].geometry.coordinates,s.features[1].geometry.coordinates):vs.apply(bs,s.features.map((function(t){return t.geometry.coordinates})))):"Feature"===t.type?El(vs(t.geometry.coordinates)):El(vs(t.coordinates))).geometry.coordinates.forEach((function(t){a.geometry.coordinates.push(t[0])})),a},t.meta=Ot,t.midpoint=function(t,e){return st(t,at(t,e)/2,ot(t,e))},t.moranIndex=function(t,e){var n,i,r=e.inputField,o=e.threshold||1e5,s=e.p||2,l=null!=(n=e.binary)&&n,u=ws(t,{alpha:e.alpha||-1,binary:l,p:s,standardization:null==(i=e.standardization)||i,threshold:o}),c=[];gt(t,(function(t){var e=t.properties||{};c.push(e[r])}));for(var h=wl(c),f=function(t){var e,n=wl(t),i=0,r=a(t);try{for(r.s();!(e=r.n()).done;){var o=e.value;i+=Math.pow(o-n,2)}}catch(t){r.e(t)}finally{r.f()}return i/t.length}(c),d=0,g=0,p=0,v=0,y=u.length,m=0;m<y;m++){for(var _=0,b=0;b<y;b++)d+=u[m][b]*(c[m]-h)*(c[b]-h),g+=u[m][b],p+=Math.pow(u[m][b]+u[b][m],2),_+=u[m][b]+u[b][m];v+=Math.pow(_,2)}var x=d/g/f,E=-1/(y-1),w=(y*y*(p*=.5)-y*v+g*g*3)/((y-1)*(y+1)*(g*g))-E*E,k=Math.sqrt(w);return{expectedMoranIndex:E,moranIndex:x,stdNorm:k,zNorm:(x-E)/k}},t.multiLineString=T,t.multiPoint=P,t.multiPolygon=L,t.nearestNeighborAnalysis=function(t,e){var n=(e=e||{}).studyArea||Dt(Pt(t)),i=e.properties||{},r=e.units||"kilometers",o=[];gt(t,(function(t){o.push(sr(t))}));var s=o.length,a=o.map((function(t,e){return at(t,Ll(t,R(o.filter((function(t,n){return n!==e})))).geometry.coordinates,{units:r})})).reduce((function(t,e){return t+e}),0)/s,l=s/q(It(n),"meters",r),u=1/(2*Math.sqrt(l)),c=.26136/Math.sqrt(s*l);return i.nearestNeighborAnalysis={units:r,arealUnits:r+"\xb2",observedMeanDistance:a,expectedMeanDistance:u,nearestNeighborIndex:a/u,numberOfPoints:s,zScore:(a-u)/c},n.properties=i,n},t.nearestPoint=Ll,t.nearestPointOnLine=un,t.nearestPointToLine=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.units,r=n.properties||{},o=function(t){var e=[];switch(t.geometry?t.geometry.type:t.type){case"GeometryCollection":return yt(t,(function(t){"Point"===t.type&&e.push({type:"Feature",properties:{},geometry:t})})),{type:"FeatureCollection",features:e};case"FeatureCollection":return t.features=t.features.filter((function(t){return"Point"===t.geometry.type})),t;default:throw new Error("points must be a Point Collection")}}(t);if(!o.features.length)throw new Error("points must contain features");if(!e)throw new Error("line is required");if("LineString"!==it(e))throw new Error("line must be a LineString");var s=1/0,a=null;return gt(o,(function(t){var n=Nl(t,e,{units:i});n<s&&(s=n,a=t)})),a&&(a.properties=Bl(Bl(Bl({},{dist:s}),a.properties),r)),a},t.planepoint=function(t,e){var n=K(t),i=nt(e).coordinates[0];if(i.length<4)throw new Error("OuterRing of a Polygon must have 4 or more Positions.");var r="Feature"===e.type&&e.properties||{},o=r.a,s=r.b,a=r.c,l=n[0],u=n[1],c=i[0][0],h=i[0][1],f=void 0!==o?o:i[0][2],d=i[1][0],g=i[1][1],p=void 0!==s?s:i[1][2],v=i[2][0],y=i[2][1],m=void 0!==a?a:i[2][2];return(m*(l-c)*(u-g)+f*(l-d)*(u-y)+p*(l-v)*(u-h)-p*(l-c)*(u-y)-m*(l-d)*(u-h)-f*(l-v)*(u-g))/((l-c)*(u-g)+(l-d)*(u-y)+(l-v)*(u-h)-(l-c)*(u-y)-(l-d)*(u-h)-(l-v)*(u-g))},t.point=k,t.pointGrid=Bs,t.pointOnFeature=function(t){for(var e=function(t){return"FeatureCollection"!==t.type?"Feature"!==t.type?R([E(t)]):R([t]):t}(t),n=Tn(e),i=!1,r=0;!i&&r<e.features.length;){var o=e.features[r].geometry,s=!1;if("Point"===o.type)n.geometry.coordinates[0]===o.coordinates[0]&&n.geometry.coordinates[1]===o.coordinates[1]&&(i=!0);else if("MultiPoint"===o.type)for(var a=!1,l=0;!a&&l<o.coordinates.length;)n.geometry.coordinates[0]===o.coordinates[l][0]&&n.geometry.coordinates[1]===o.coordinates[l][1]&&(i=!0,a=!0),l++;else if("LineString"===o.type)for(var u=0;!s&&u<o.coordinates.length-1;)Vl(n.geometry.coordinates[0],n.geometry.coordinates[1],o.coordinates[u][0],o.coordinates[u][1],o.coordinates[u+1][0],o.coordinates[u+1][1])&&(s=!0,i=!0),u++;else if("MultiLineString"===o.type)for(var c=0;c<o.coordinates.length;){s=!1;for(var h=0,f=o.coordinates[c];!s&&h<f.length-1;)Vl(n.geometry.coordinates[0],n.geometry.coordinates[1],f[h][0],f[h][1],f[h+1][0],f[h+1][1])&&(s=!0,i=!0),h++;c++}else"Polygon"!==o.type&&"MultiPolygon"!==o.type||Bt(n,o)&&(i=!0);r++}if(i)return n;for(var d=R([]),g=0;g<e.features.length;g++)d.features=d.features.concat(Rs(e.features[g]).features);return k(Ll(n,d).geometry.coordinates)},t.pointToLineDistance=Nl,t.pointToPolygonDistance=function t(e,i){var r,o,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=null!=(r=s.method)?r:"geodesic",l=null!=(o=s.units)?o:"kilometers";if(!e)throw new Error("point is required");if(!i)throw new Error("polygon or multi-polygon is required");var u,c=nt(i);if("MultiPolygon"===c.type){var d=c.coordinates.map((function(n){return t(e,C(n),{method:a,units:l})}));return Math.min.apply(Math,p(d.map(Math.abs)))*(Bt(e,i)?-1:1)}if(c.coordinates.length>1){var g=c.coordinates.map((function(n){return t(e,C([n]),{method:a,units:l})})),v=n(u=g)||h(u)||m(u)||f(),y=v[0],_=v.slice(1);if(y>=0)return y;var b=Math.min.apply(Math,p(_));return b<0?Math.abs(b):Math.min(b,Math.abs(y))}var x=ae(c),E=1/0;return _t(x,(function(t){E=Math.min(E,Nl(e,t,{method:a,units:l}))})),Bt(e,c)?-E:E},t.points=S,t.pointsWithinPolygon=Yl,t.polygon=C,t.polygonSmooth=function(t,e){(e=e||{}).iterations=e.iterations||1;var n=e.iterations,i=[];if(!t)throw new Error("inputPolys is required");return yt(t,(function(t,e,r){if("Polygon"===t.type){for(var o=[[]],s=0;s<n;s++){var a=[],l=t;s>0&&(l=C(o).geometry),Kl(l,a),o=a.slice(0)}i.push(C(o,r))}else{if("MultiPolygon"!==t.type)throw new Error("geometry is invalid, must be Polygon or MultiPolygon");for(var u=[[[]]],c=0;c<n;c++){var h=[],f=t;c>0&&(f=L(u).geometry),Jl(f,h),u=h.slice(0)}i.push(L(u,r))}})),R(i)},t.polygonTangents=function(t,e){var n,i=J(t),r=J(e),o=[],s=[],a=Pt(e),l=0,u=null;switch(i[0]>a[0]&&i[0]<a[2]&&i[1]>a[1]&&i[1]<a[3]&&(l=(u=Ll(t,Rs(e))).properties.featureIndex),it(e)){case"Polygon":o=r[0][l],s=r[0][0],null!==u&&u.geometry.coordinates[1]<i[1]&&(s=r[0][l]),n=tu(r[0][0],r[0][r[0].length-1],i);var c=g(Ql(r[0],i,n,o,s),2);o=c[0],s=c[1];break;case"MultiPolygon":for(var h=0,f=0,d=0,p=0;p<r[0].length;p++){h=p;for(var v=!1,y=0;y<r[0][p].length;y++){if(f=y,d===l){v=!0;break}d++}if(v)break}o=r[0][h][f],s=r[0][h][f],n=tu(r[0][0][0],r[0][0][r[0][0].length-1],i),r.forEach((function(t){var e=g(Ql(t[0],i,n,o,s),2);o=e[0],s=e[1]}))}return R([k(o),k(s)])},t.polygonToLine=ae,t.polygonize=function(t){var e=Zl.fromGeoJson(t);e.deleteDangles(),e.deleteCutEdges();var n=[],i=[];return e.getEdgeRings().filter((function(t){return t.isValid()})).forEach((function(t){t.isHole()?n.push(t):i.push(t)})),n.forEach((function(t){Hl.findEdgeRingContaining(t,i)&&i.push(t)})),R(i.map((function(t){return t.toPolygon()})))},t.polygons=O,t.projection=su,t.propEach=ft,t.propReduce=dt,t.propertiesContainsFilter=Nr,t.quadratAnalysis=function(t,e){for(var n=(e=e||{}).studyBbox||Pt(t),i=e.confidenceLevel||20,r=t.features,o=r.length,s=It(Dt(n)),l=Ys(n,Math.sqrt(s/o*2),{units:"meters"}).features,u={},c=0;c<l.length;c++)u[c]={box:Pt(l[c]),cnt:0};var h,f=0,d=a(r);try{for(d.s();!(h=d.n()).done;)for(var g=h.value,p=0,v=Object.keys(u);p<v.length;p++){var y=v[p],m=u[y].box;if(lu(K(g),m)){u[y].cnt+=1,f+=1;break}}}catch(t){d.e(t)}finally{d.f()}for(var _=0,b=0,x=Object.keys(u);b<x.length;b++){var E=u[x[b]].cnt;E>_&&(_=E)}for(var w=[],k=Object.keys(u).length,S=f/k,C=0,O=0;O<_+1;O++)C+=Math.exp(-S)*Math.pow(S,O)/uu(O),w.push(C);for(var I=[],M=0,R=0;R<_+1;R++){for(var T=0,P=Object.keys(u);T<P.length;T++)u[P[T]].cnt===R&&(M+=1);var L=M/k;I.push(L)}for(var N=0,A=0;A<_+1;A++){var j=Math.abs(w[A]-I[A]);j>N&&(N=j)}var D=au[i]/Math.sqrt(k),F={criticalValue:D,isRandom:!0,maxAbsoluteDifference:N,observedDistribution:I};return N>D&&(F.isRandom=!1),F},t.radiansToDegrees=B,t.radiansToLength=j,t.random=mu,t.randomLineString=pu,t.randomPoint=du,t.randomPolygon=gu,t.randomPosition=cu,t.rectangleGrid=Vs,t.rewind=function(t){var e,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!X(i=i||{}))throw new Error("options is invalid");var r=null!=(e=i.mutate)&&e,o=null!=(n=i.reverse)&&n;if(!t)throw new Error("<geojson> is required");if("boolean"!=typeof o)throw new Error("<reverse> must be a boolean");if("boolean"!=typeof r)throw new Error("<mutate> must be a boolean");r||"Point"===t.type||"MultiPoint"===t.type||(t=Sr(t));var s=[];switch(t.type){case"GeometryCollection":return yt(t,(function(t){_u(t,o)})),t;case"FeatureCollection":return gt(t,(function(t){gt(_u(t,o),(function(t){s.push(t)}))})),R(s)}return _u(t,o)},t.rhumbBearing=lt,t.rhumbDestination=ks,t.rhumbDistance=Ss,t.round=A,t.sample=function(t,e){if(!t)throw new Error("fc is required");if(null==e)throw new Error("num is required");if("number"!=typeof e)throw new Error("num must be a number");return R(function(t,e){for(var n,i,r=t.slice(0),o=t.length,s=o-e;o-- >s;)n=r[i=Math.floor((o+1)*Math.random())],r[i]=r[o],r[o]=n;return r.slice(s)}(t.features,e))},t.sector=function(t,e,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(!X(r=r||{}))throw new Error("options is invalid");var o=r.properties;if(!t)throw new Error("center is required");if(null==n)throw new Error("bearing1 is required");if(null==i)throw new Error("bearing2 is required");if(!e)throw new Error("radius is required");if("object"!==y(r))throw new Error("options must be an object");if(Eu(n)===Eu(i))return kr(t,e,r);var s=J(t),a=ll(t,e,n,i,r),l=[[s]];return ct(a,(function(t){l[0].push(t)})),l[0].push(s),C(l,o)},t.segmentEach=xt,t.segmentReduce=Et,t.shortestPath=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!X(n=n||{}))throw new Error("options is invalid");var i=n.obstacles||R([]),r=n.resolution||100;if(!t)throw new Error("start is required");if(!e)throw new Error("end is required");if(r&&(!U(r)||r<=0))throw new Error("options.resolution must be a number, greater than 0");var o=K(t),s=K(e);if(t=k(o),e=k(s),"FeatureCollection"===i.type){if(0===i.features.length)return I([o,s])}else{if("Polygon"!==i.type)throw new Error("invalid obstacles");i=R([E(nt(i))])}var a=i;a.features.push(t),a.features.push(e);var l=g(Pt(wu(Dt(Pt(a)),1.15)),4),u=l[0],c=l[1],h=l[2],f=l[3],d=at([u,c],[h,c],n)/r;a.features.pop(),a.features.pop();for(var p,v,y=d/at([u,c],[h,c],n)*(h-u),m=d/at([u,c],[u,f],n)*(f-c),_=h-u,b=f-c,x=Math.floor(_/y),w=Math.floor(b/m),S=(_-x*y)/2,C=[],O=[],M=1/0,T=1/0,P=f-(b-w*m)/2,L=0;P>=c;){for(var N=[],A=[],j=u+S,D=0;j<=h;){var F=k([j,P]),z=Ru(F,i);N.push(z?0:1),A.push(j+"|"+P);var G=at(F,t);!z&&G<M&&(M=G,p={x:D,y:L});var B=at(F,e);!z&&B<T&&(T=B,v={x:D,y:L}),j+=y,D++}O.push(N),C.push(A),P-=m,L++}var V=new Ou(O,{diagonal:!0}),Y=V.grid[p.y][p.x],q=V.grid[v.y][v.x],W=Cu.search(V,Y,q),H=[o];return W.forEach((function(t){var e=C[t.x][t.y].split("|");H.push([+e[0],+e[1]])})),H.push(s),Oe(I(H))},t.simplify=function(t){var e,n,i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!X(r=null!=r?r:{}))throw new Error("options is invalid");var o=null!=(e=r.tolerance)?e:1,s=null!=(n=r.highQuality)&&n,a=null!=(i=r.mutate)&&i;if(!t)throw new Error("geojson is required");if(o&&o<0)throw new Error("invalid tolerance");return!0!==a&&(t=Sr(t)),yt(t,(function(t){!function(t,e,n){var i=t.type;if("Point"===i||"MultiPoint"===i)return t;if(Oe(t,{mutate:!0}),"GeometryCollection"!==i)switch(i){case"LineString":t.coordinates=Lu(t.coordinates,e,n);break;case"MultiLineString":t.coordinates=t.coordinates.map((function(t){return Lu(t,e,n)}));break;case"Polygon":t.coordinates=Nu(t.coordinates,e,n);break;case"MultiPolygon":t.coordinates=t.coordinates.map((function(t){return Nu(t,e,n)}))}}(t,o,s)})),t},t.square=gl,t.squareGrid=Ys,t.standardDeviationalEllipse=function(t,e){var n;if(!X(e=e||{}))throw new Error("options is invalid");var i=e.steps||64,r=e.weight,o=e.properties||{};if(!U(i))throw new Error("steps must be a number");if(!X(o))throw new Error("properties must be a number");var s=vt(t).length,a=or(t,{weight:r}),l=0,u=0,c=0;gt(t,(function(t){var e,n=r&&(null==(e=t.properties)?void 0:e[r])||1,i=ju(J(t),J(a));l+=Math.pow(i.x,2)*n,u+=Math.pow(i.y,2)*n,c+=i.x*i.y*n}));var h=l-u,f=Math.sqrt(Math.pow(h,2)+4*Math.pow(c,2)),d=2*c,g=Math.atan((h+f)/d),p=180*g/Math.PI,v=0,y=0,m=0;gt(t,(function(t){var e,n=r&&(null==(e=t.properties)?void 0:e[r])||1,i=ju(J(t),J(a));v+=Math.pow(i.x*Math.cos(g)-i.y*Math.sin(g),2)*n,y+=Math.pow(i.x*Math.sin(g)+i.y*Math.cos(g),2)*n,m+=n}));var _=Math.sqrt(2*v/m),b=Math.sqrt(2*y/m),x=Os(a,_,b,{units:"degrees",angle:p,steps:i,properties:o}),E=Yl(t,R([x])),w={meanCenterCoordinates:J(a),semiMajorAxis:_,semiMinorAxis:b,numberOfFeatures:s,angle:p,percentageWithinEllipse:100*vt(E).length/s};return x.properties=null!=(n=x.properties)?n:{},x.properties.standardDeviationalEllipse=w,x},t.tag=function(t,e,n,i){return t=Sr(t),e=Sr(e),gt(t,(function(t){t.properties||(t.properties={}),gt(e,(function(e){t.properties&&e.properties&&void 0===t.properties[i]&&Bt(t,e)&&(t.properties[i]=e.properties[n])}))})),t},t.tesselate=function(t){if(!t.geometry||"Polygon"!==t.geometry.type&&"MultiPolygon"!==t.geometry.type)throw new Error("input must be a Polygon or MultiPolygon");var e={type:"FeatureCollection",features:[]};return"Polygon"===t.geometry.type?e.features=Gu(t.geometry.coordinates):t.geometry.coordinates.forEach((function(t){e.features=e.features.concat(Gu(t))})),e},t.tin=Wr,t.toMercator=eu,t.toWgs84=nu,t.transformRotate=Cs,t.transformScale=wu,t.transformTranslate=function(t,e,n,i){if(!X(i=i||{}))throw new Error("options is invalid");var r=i.units,o=i.zTranslation,s=i.mutate;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("distance is required");if(o&&"number"!=typeof o&&isNaN(o))throw new Error("zTranslation is not a number");if(o=void 0!==o?o:0,0===e&&0===o)return t;if(null==n||isNaN(n))throw new Error("direction is required");return e<0&&(e=-e,n+=180),!1!==s&&void 0!==s||(t=Sr(t)),ct(t,(function(t){var i=J(ks(t,e,n,{units:r}));t[0]=i[0],t[1]=i[1],o&&3===t.length&&(t[2]+=o)})),t},t.triangleGrid=qs,t.truncate=pl,t.union=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[];if(yt(t,(function(t){n.push(t.coordinates)})),n.length<2)throw new Error("Must have at least 2 geometries");var i=vs.apply(bs,[n[0]].concat(p(n.slice(1))));return 0===i.length?null:1===i.length?C(i[0],e.properties):L(i,e.properties)},t.unkinkPolygon=function(t){var e=[];return _t(t,(function(t){"Polygon"===t.geometry.type&&gt(Vu(t),(function(n){e.push(C(n.geometry.coordinates,t.properties))}))})),R(e)},t.validateBBox=W,t.validateId=H,t.voronoi=function(t,e){if(!X(e=e||{}))throw new Error("options is invalid");var n=e.bbox||[-180,-85,180,85];if(!t)throw new Error("points is required");if(!Array.isArray(n))throw new Error("bbox is invalid");return et(t,"Point","points"),R(function(){var t=Ku,e=Ju,n=null;function i(i){return new Tc(i.map((function(n,r){var o=[Math.round(t(n,r,i)/Ic)*Ic,Math.round(e(n,r,i)/Ic)*Ic];return o.index=r,o.data=n,o})),n)}return i.polygons=function(t){return i(t).polygons()},i.links=function(t){return i(t).links()},i.triangles=function(t){return i(t).triangles()},i.x=function(e){return arguments.length?(t="function"==typeof e?e:Zu(+e),i):t},i.y=function(t){return arguments.length?(e="function"==typeof t?t:Zu(+t),i):e},i.extent=function(t){return arguments.length?(n=null==t?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],i):n&&[[n[0][0],n[0][1]],[n[1][0],n[1][1]]]},i.size=function(t){return arguments.length?(n=null==t?null:[[0,0],[+t[0],+t[1]]],i):n&&[n[1][0]-n[0][0],n[1][1]-n[0][1]]},i}().x((function(t){return t.geometry.coordinates[0]})).y((function(t){return t.geometry.coordinates[1]})).extent([[n[0],n[1]],[n[2],n[3]]]).polygons(t.features).map((function(e,n){return Object.assign(function(t){return(t=t.slice()).push(t[0]),C([t])}(e),{properties:Or(t.features[n].properties)})})))}}(e)},function(t,e,n){"use strict";var i=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function s(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach((function(t){i[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(r){return!1}}()?Object.assign:function(t,e){for(var n,a,l=s(t),u=1;u<arguments.length;u++){for(var c in n=Object(arguments[u]))r.call(n,c)&&(l[c]=n[c]);if(i){a=i(n);for(var h=0;h<a.length;h++)o.call(n,a[h])&&(l[a[h]]=n[a[h]])}}return l}},,,function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var i=n(1),r=n.n(i),o=n(46),s=function(){return(s=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};var a="",l=null,u=null,c=null;function h(){a="",null!==l&&l.disconnect(),null!==u&&(window.clearTimeout(u),u=null)}function f(t){return["BUTTON","INPUT","SELECT","TEXTAREA"].includes(t.tagName)&&!t.hasAttribute("disabled")||["A","AREA"].includes(t.tagName)&&t.hasAttribute("href")}function d(){var t=null;if("#"===a)t=document.body;else{var e=a.replace("#","");null===(t=document.getElementById(e))&&"#top"===a&&(t=document.body)}if(null!==t){c(t);var n=t.getAttribute("tabindex");return null!==n||f(t)||t.setAttribute("tabindex",-1),t.focus({preventScroll:!0}),null!==n||f(t)||(t.blur(),t.removeAttribute("tabindex")),h(),!0}return!1}function g(t){return r.a.forwardRef((function(e,n){var i="";"string"===typeof e.to&&e.to.includes("#")?i="#"+e.to.split("#").slice(1).join("#"):"object"===typeof e.to&&"string"===typeof e.to.hash&&(i=e.to.hash);var f={};t===o.c&&(f.isActive=function(t,e){return t&&t.isExact&&e.hash===i});var g=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}(e,["scroll","smooth","timeout","elementId"]);return r.a.createElement(t,s({},f,g,{onClick:function(t){var n;h(),a=e.elementId?"#"+e.elementId:i,e.onClick&&e.onClick(t),""===a||t.defaultPrevented||0!==t.button||e.target&&"_self"!==e.target||t.metaKey||t.altKey||t.ctrlKey||t.shiftKey||(c=e.scroll||function(t){return e.smooth?t.scrollIntoView({behavior:"smooth"}):t.scrollIntoView()},n=e.timeout,window.setTimeout((function(){!1===d()&&(null===l&&(l=new MutationObserver(d)),l.observe(document,{attributes:!0,childList:!0,subtree:!0}),u=window.setTimeout((function(){h()}),n||1e4))}),0))},ref:n}),e.children)}))}var p=g(o.b);g(o.c)},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n(0);function r(t){return Object(i.a)({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 3c0 2 1 3 4 3c2 0 3 1 3 3"},child:[]},{tag:"path",attr:{d:"M21 3c0 2 -1 3 -4 3c-2 0 -3 .333 -3 3"},child:[]},{tag:"path",attr:{d:"M12 18c-1 0 -4 -3 -4 -6c0 -2 1.333 -3 4 -3s4 1 4 3c0 3 -3 6 -4 6"},child:[]},{tag:"path",attr:{d:"M15.185 14.889l.095 -.18a4 4 0 1 1 -6.56 0"},child:[]},{tag:"path",attr:{d:"M17 3c0 1.333 -.333 2.333 -1 3"},child:[]},{tag:"path",attr:{d:"M7 3c0 1.333 .333 2.333 1 3"},child:[]},{tag:"path",attr:{d:"M7 6c-2.667 .667 -4.333 1.667 -5 3"},child:[]},{tag:"path",attr:{d:"M17 6c2.667 .667 4.333 1.667 5 3"},child:[]},{tag:"path",attr:{d:"M8.5 10l-1.5 -1"},child:[]},{tag:"path",attr:{d:"M15.5 10l1.5 -1"},child:[]},{tag:"path",attr:{d:"M12 15h.01"},child:[]}]})(t)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var i=n(1),r=Object.defineProperty,o=(t,e,n)=>((t,e,n)=>e in t?r(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n)(t,"symbol"!==typeof e?e+"":e,n),s=new Map,a=new WeakMap,l=0,u=void 0;function c(t){return Object.keys(t).sort().filter(e=>void 0!==t[e]).map(e=>{return`${e}_${"root"===e?(n=t.root,n?(a.has(n)||(l+=1,a.set(n,l.toString())),a.get(n)):"0"):t[e]}`;var n}).toString()}function h(t){const e=c(t);let n=s.get(e);if(!n){const i=new Map;let r;const o=new IntersectionObserver(e=>{e.forEach(e=>{var n;const o=e.isIntersecting&&r.some(t=>e.intersectionRatio>=t);t.trackVisibility&&"undefined"===typeof e.isVisible&&(e.isVisible=o),null==(n=i.get(e.target))||n.forEach(t=>{t(o,e)})})},t);r=o.thresholds||(Array.isArray(t.threshold)?t.threshold:[t.threshold||0]),n={id:e,observer:o,elements:i},s.set(e,n)}return n}function f(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:u;if("undefined"===typeof window.IntersectionObserver&&void 0!==i){const r=t.getBoundingClientRect();return e(i,{isIntersecting:i,target:t,intersectionRatio:"number"===typeof n.threshold?n.threshold:0,time:0,boundingClientRect:r,intersectionRect:r,rootBounds:r}),()=>{}}const{id:r,observer:o,elements:a}=h(n),l=a.get(t)||[];return a.has(t)||a.set(t,l),l.push(e),o.observe(t),function(){l.splice(l.indexOf(e),1),0===l.length&&(a.delete(t),o.unobserve(t)),0===a.size&&(o.disconnect(),s.delete(r))}}i.Component;function d(){let{threshold:t,delay:e,trackVisibility:n,rootMargin:r,root:o,triggerOnce:s,skip:a,initialInView:l,fallbackInView:u,onChange:c}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var h;const[d,g]=i.useState(null),p=i.useRef(c),[v,y]=i.useState({inView:!!l,entry:void 0});p.current=c,i.useEffect(()=>{if(a||!d)return;let i;return i=f(d,(t,e)=>{y({inView:t,entry:e}),p.current&&p.current(t,e),e.isIntersecting&&s&&i&&(i(),i=void 0)},{root:o,rootMargin:r,threshold:t,trackVisibility:n,delay:e},u),()=>{i&&i()}},[Array.isArray(t)?t.toString():t,d,o,r,s,a,n,u,e]);const m=null==(h=v.entry)?void 0:h.target,_=i.useRef(void 0);d||!m||s||a||_.current===m||(_.current=m,y({inView:!!l,entry:void 0}));const b=[g,v.inView,v.entry];return b.ref=b[0],b.inView=b[1],b.entry=b[2],b}},function(t,e,n){"use strict";var i=n(24),r=n(45),o=n(25),s=n(2),a=n(8),l=n(15);const u="element",c="map",h="offset",f="position",d="positioning";class g extends i.a{constructor(t){super(),this.on,this.once,this.un,this.options=t,this.id=t.id,this.insertFirst=void 0===t.insertFirst||t.insertFirst,this.stopEvent=void 0===t.stopEvent||t.stopEvent,this.element=document.createElement("div"),this.element.className=void 0!==t.className?t.className:"ol-overlay-container "+o.d,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=!0===t.autoPan?{}:t.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(u,this.handleElementChanged),this.addChangeListener(c,this.handleMapChanged),this.addChangeListener(h,this.handleOffsetChanged),this.addChangeListener(f,this.handlePositionChanged),this.addChangeListener(d,this.handlePositioningChanged),void 0!==t.element&&this.setElement(t.element),this.setOffset(void 0!==t.offset?t.offset:[0,0]),this.setPositioning(t.positioning||"top-left"),void 0!==t.position&&this.setPosition(t.position)}getElement(){return this.get(u)}getId(){return this.id}getMap(){return this.get(c)||null}getOffset(){return this.get(h)}getPosition(){return this.get(f)}getPositioning(){return this.get(d)}handleElementChanged(){Object(l.e)(this.element);const t=this.getElement();t&&this.element.appendChild(t)}handleMapChanged(){this.mapPostrenderListenerKey&&(Object(l.f)(this.element),Object(a.c)(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const t=this.getMap();if(t){this.mapPostrenderListenerKey=Object(a.a)(t,r.a.POSTRENDER,this.render,this),this.updatePixelPosition();const e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(t){this.set(u,t)}setMap(t){this.set(c,t)}setOffset(t){this.set(h,t)}setPosition(t){this.set(f,t)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(t){const e=this.getMap();if(!e||!e.getTargetElement()||!this.get(f))return;const n=this.getRect(e.getTargetElement(),e.getSize()),i=this.getElement(),r=this.getRect(i,[Object(l.c)(i),Object(l.b)(i)]),o=void 0===(t=t||{}).margin?20:t.margin;if(!Object(s.g)(n,r)){const i=r[0]-n[0],s=n[2]-r[2],a=r[1]-n[1],l=n[3]-r[3],u=[0,0];if(i<0?u[0]=i-o:s<0&&(u[0]=Math.abs(s)+o),a<0?u[1]=a-o:l<0&&(u[1]=Math.abs(l)+o),0!==u[0]||0!==u[1]){const n=e.getView().getCenterInternal(),i=e.getPixelFromCoordinateInternal(n);if(!i)return;const r=[i[0]+u[0],i[1]+u[1]],o=t.animation||{};e.getView().animateInternal({center:e.getCoordinateFromPixelInternal(r),duration:o.duration,easing:o.easing})}}}getRect(t,e){const n=t.getBoundingClientRect(),i=n.left+window.pageXOffset,r=n.top+window.pageYOffset;return[i,r,i+e[0],r+e[1]]}setPositioning(t){this.set(d,t)}setVisible(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)}updatePixelPosition(){const t=this.getMap(),e=this.getPosition();if(!t||!t.isRendered()||!e)return void this.setVisible(!1);const n=t.getPixelFromCoordinate(e),i=t.getSize();this.updateRenderedPosition(n,i)}updateRenderedPosition(t,e){const n=this.element.style,i=this.getOffset(),r=this.getPositioning();this.setVisible(!0);let o="0%",s="0%";"bottom-right"==r||"center-right"==r||"top-right"==r?o="-100%":"bottom-center"!=r&&"center-center"!=r&&"top-center"!=r||(o="-50%"),"bottom-left"==r||"bottom-center"==r||"bottom-right"==r?s="-100%":"center-left"!=r&&"center-center"!=r&&"center-right"!=r||(s="-50%");const a=`translate(${o}, ${s}) translate(${Math.round(t[0]+i[0])+"px"}, ${Math.round(t[1]+i[1])+"px"})`;this.rendered.transform_!=a&&(this.rendered.transform_=a,n.transform=a)}getOptions(){return this.options}}e.a=g},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n(0);function r(t){return Object(i.a)({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{fill:"#333",d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"},child:[]},{tag:"path",attr:{fill:"#E6E6E6",d:"M512 140c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm32 588c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 0 1 0-96 48.01 48.01 0 0 1 0 96z"},child:[]},{tag:"path",attr:{fill:"#333",d:"M464 336a48 48 0 1 0 96 0 48 48 0 1 0-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"},child:[]}]})(t)}},function(t,e,n){"use strict";var i=n(40),r="preload",o="useInterimTilesOnError";class s extends i.a{constructor(t){t=t||{};const e=Object.assign({},t);delete e.preload,delete e.useInterimTilesOnError,super(e),this.on,this.once,this.un,this.setPreload(void 0!==t.preload?t.preload:0),this.setUseInterimTilesOnError(void 0===t.useInterimTilesOnError||t.useInterimTilesOnError)}getPreload(){return this.get(r)}setPreload(t){this.set(r,t)}getUseInterimTilesOnError(){return this.get(o)}setUseInterimTilesOnError(t){this.set(o,t)}getData(t){return super.getData(t)}}var a=s,l=n(64),u=n(85),c=n(70),h=n(52),f=n(11),d=n(14),g=n(2),p=n(6),v=n(3),y=n(13),m=n(22);class _ extends l.b{constructor(t){super(t),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=Object(g.j)(),this.tmpTileRange_=new h.b(0,0,0,0)}isDrawableTile(t){const e=this.getLayer(),n=t.getState(),i=e.getUseInterimTilesOnError();return n==f.a.LOADED||n==f.a.EMPTY||n==f.a.ERROR&&!i}getTile(t,e,n,i){const r=i.pixelRatio,o=i.viewState.projection,s=this.getLayer();let a=s.getSource().getTile(t,e,n,r,o);return a.getState()==f.a.ERROR&&s.getUseInterimTilesOnError()&&s.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(a)||(a=a.getInterimTile()),a}getData(t){const e=this.frameState;if(!e)return null;const n=this.getLayer(),i=Object(d.a)(e.pixelToCoordinateTransform,t.slice()),r=n.getExtent();if(r&&!Object(g.f)(r,i))return null;const o=e.pixelRatio,s=e.viewState.projection,a=e.viewState,l=n.getRenderSource(),h=l.getTileGridForProjection(a.projection),p=l.getTilePixelRatio(e.pixelRatio);for(let d=h.getZForResolution(a.resolution);d>=h.getMinZoom();--d){const t=h.getTileCoordForCoordAndZ(i,d),e=l.getTile(d,t[1],t[2],o,s);if(!(e instanceof u.a||e instanceof c.a)||e instanceof c.a&&e.getState()===f.a.EMPTY)return null;if(e.getState()!==f.a.LOADED)continue;const n=h.getOrigin(d),r=Object(m.c)(h.getTileSize(d)),g=h.getResolution(d),v=Math.floor(p*((i[0]-n[0])/g-t[1]*r[0])),y=Math.floor(p*((n[1]-i[1])/g-t[2]*r[1])),_=Math.round(p*l.getGutterForProjection(a.projection));return this.getImageData(e.getImage(),v+_,y+_)}return null}loadedTileCallback(t,e,n){return!!this.isDrawableTile(n)&&super.loadedTileCallback(t,e,n)}prepareFrame(t){return!!this.getLayer().getSource()}renderFrame(t,e){const n=t.layerStatesArray[t.layerIndex],i=t.viewState,r=i.projection,o=i.resolution,s=i.center,a=i.rotation,l=t.pixelRatio,u=this.getLayer(),c=u.getSource(),h=c.getRevision(),m=c.getTileGridForProjection(r),_=m.getZForResolution(o,c.zDirection),b=m.getResolution(_);let x=t.extent;const E=t.viewState.resolution,w=c.getTilePixelRatio(l),k=Math.round(Object(g.E)(x)/E*l),S=Math.round(Object(g.z)(x)/E*l),C=n.extent&&Object(p.f)(n.extent,r);C&&(x=Object(g.A)(x,Object(p.f)(n.extent,r)));const O=b*k/2/w,I=b*S/2/w,M=[s[0]-O,s[1]-I,s[0]+O,s[1]+I],R=m.getTileRangeForExtentAndZ(x,_),T={};T[_]={};const P=this.createLoadedTileFinder(c,r,T),L=this.tmpExtent,N=this.tmpTileRange_;this.newTiles_=!1;const A=a?Object(g.B)(i.center,E,a,t.size):void 0;for(let d=R.minX;d<=R.maxX;++d)for(let e=R.minY;e<=R.maxY;++e){if(a&&!m.tileCoordIntersectsViewport([_,d,e],A))continue;const i=this.getTile(_,d,e,t);if(this.isDrawableTile(i)){const e=Object(v.b)(this);if(i.getState()==f.a.LOADED){T[_][i.tileCoord.toString()]=i;let t=i.inTransition(e);t&&1!==n.opacity&&(i.endTransition(e),t=!1),this.newTiles_||!t&&this.renderedTiles.includes(i)||(this.newTiles_=!0)}if(1===i.getAlpha(e,t.time))continue}const r=m.getTileCoordChildTileRange(i.tileCoord,N,L);let o=!1;r&&(o=P(_+1,r)),o||m.forEachTileCoordParentTileRange(i.tileCoord,P,N,L)}const j=b/o*l/w;Object(d.b)(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/l,1/l,a,-k/2,-S/2);const D=Object(d.g)(this.pixelTransform);this.useContainer(e,D,this.getBackground(t));const F=this.context,z=F.canvas;Object(d.d)(this.inversePixelTransform,this.pixelTransform),Object(d.b)(this.tempTransform,k/2,S/2,j,j,0,-k/2,-S/2),z.width!=k||z.height!=S?(z.width=k,z.height=S):this.containerReused||F.clearRect(0,0,k,S),C&&this.clipUnrotated(F,t,C),c.getInterpolate()||(F.imageSmoothingEnabled=!1),this.preRender(F,t),this.renderedTiles.length=0;let G,B,V,Y=Object.keys(T).map(Number);Y.sort(y.f),1!==n.opacity||this.containerReused&&!c.getOpaque(t.viewState.projection)?(G=[],B=[]):Y=Y.reverse();for(let f=Y.length-1;f>=0;--f){const e=Y[f],n=c.getTilePixelSize(e,l,r),i=m.getResolution(e)/b,o=n[0]*i*j,s=n[1]*i*j,a=m.getTileCoordForCoordAndZ(Object(g.C)(M),e),u=m.getTileCoordExtent(a),h=Object(d.a)(this.tempTransform,[w*(u[0]-M[0])/b,w*(M[3]-u[3])/b]),p=w*c.getGutterForProjection(r),y=T[e];for(const r in y){const n=y[r],i=n.tileCoord,l=a[1]-i[1],u=Math.round(h[0]-(l-1)*o),f=a[2]-i[2],d=Math.round(h[1]-(f-1)*s),m=Math.round(h[0]-l*o),b=Math.round(h[1]-f*s),x=u-m,E=d-b,w=_===e,k=w&&1!==n.getAlpha(Object(v.b)(this),t.time);let S=!1;if(!k)if(G){V=[m,b,m+x,b,m+x,b+E,m,b+E];for(let t=0,n=G.length;t<n;++t)if(_!==e&&e<B[t]){const e=G[t];Object(g.F)([m,b,m+x,b+E],[e[0],e[3],e[4],e[7]])&&(S||(F.save(),S=!0),F.beginPath(),F.moveTo(V[0],V[1]),F.lineTo(V[2],V[3]),F.lineTo(V[4],V[5]),F.lineTo(V[6],V[7]),F.moveTo(e[6],e[7]),F.lineTo(e[4],e[5]),F.lineTo(e[2],e[3]),F.lineTo(e[0],e[1]),F.clip())}G.push(V),B.push(e)}else F.clearRect(m,b,x,E);this.drawTileImage(n,t,m,b,x,E,p,w),G&&!k?(S&&F.restore(),this.renderedTiles.unshift(n)):this.renderedTiles.push(n),this.updateUsedTiles(t.usedTiles,c,n)}}return this.renderedRevision=h,this.renderedResolution=b,this.extentChanged=!this.renderedExtent_||!Object(g.o)(this.renderedExtent_,M),this.renderedExtent_=M,this.renderedPixelRatio=l,this.renderedProjection=r,this.manageTilePyramid(t,c,m,l,r,x,_,u.getPreload()),this.scheduleExpireCache(t,c),this.postRender(F,t),n.extent&&F.restore(),F.imageSmoothingEnabled=!0,D!==z.style.transform&&(z.style.transform=D),this.container}drawTileImage(t,e,n,i,r,o,s,a){const l=this.getTileImage(t);if(!l)return;const u=Object(v.b)(this),c=e.layerStatesArray[e.layerIndex],h=c.opacity*(a?t.getAlpha(u,e.time):1),f=h!==this.context.globalAlpha;f&&(this.context.save(),this.context.globalAlpha=h),this.context.drawImage(l,s,s,l.width-2*s,l.height-2*s,n,i,r,o),f&&this.context.restore(),h!==c.opacity?e.animate=!0:a&&t.endTransition(u)}getImage(){const t=this.context;return t?t.canvas:null}getTileImage(t){return t.getImage()}scheduleExpireCache(t,e){if(e.canExpireCache()){const n=function(t,e,n){const i=Object(v.b)(t);i in n.usedTiles&&t.expireCache(n.viewState.projection,n.usedTiles[i])}.bind(null,e);t.postRenderFunctions.push(n)}}updateUsedTiles(t,e,n){const i=Object(v.b)(e);i in t||(t[i]={}),t[i][n.getKey()]=!0}manageTilePyramid(t,e,n,i,r,o,s,a,l){const u=Object(v.b)(e);u in t.wantedTiles||(t.wantedTiles[u]={});const c=t.wantedTiles[u],h=t.tileQueue,d=n.getMinZoom(),p=t.viewState.rotation,y=p?Object(g.B)(t.viewState.center,t.viewState.resolution,p,t.size):void 0;let m,_,b,x,E,w,k=0;for(w=d;w<=s;++w)for(_=n.getTileRangeForExtentAndZ(o,w,_),b=n.getResolution(w),x=_.minX;x<=_.maxX;++x)for(E=_.minY;E<=_.maxY;++E)p&&!n.tileCoordIntersectsViewport([w,x,E],y)||(s-w<=a?(++k,m=e.getTile(w,x,E,i,r),m.getState()==f.a.IDLE&&(c[m.getKey()]=!0,h.isKeyQueued(m.getKey())||h.enqueue([m,u,n.getTileCoordCenter(m.tileCoord),b])),void 0!==l&&l(m)):e.useTile(w,x,E,r));e.updateCacheSize(k,r)}}var b=_;e.a=class extends a{constructor(t){super(t)}createRenderer(){return new b(this)}}},,,function(t,e,n){"use strict";var i=n(89),r=60103,o=60106;e.Fragment=60107,e.StrictMode=60108,e.Profiler=60114;var s=60109,a=60110,l=60112;e.Suspense=60113;var u=60115,c=60116;if("function"===typeof Symbol&&Symbol.for){var h=Symbol.for;r=h("react.element"),o=h("react.portal"),e.Fragment=h("react.fragment"),e.StrictMode=h("react.strict_mode"),e.Profiler=h("react.profiler"),s=h("react.provider"),a=h("react.context"),l=h("react.forward_ref"),e.Suspense=h("react.suspense"),u=h("react.memo"),c=h("react.lazy")}var f="function"===typeof Symbol&&Symbol.iterator;function d(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p={};function v(t,e,n){this.props=t,this.context=e,this.refs=p,this.updater=n||g}function y(){}function m(t,e,n){this.props=t,this.context=e,this.refs=p,this.updater=n||g}v.prototype.isReactComponent={},v.prototype.setState=function(t,e){if("object"!==typeof t&&"function"!==typeof t&&null!=t)throw Error(d(85));this.updater.enqueueSetState(this,t,e,"setState")},v.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},y.prototype=v.prototype;var _=m.prototype=new y;_.constructor=m,i(_,v.prototype),_.isPureReactComponent=!0;var b={current:null},x=Object.prototype.hasOwnProperty,E={key:!0,ref:!0,__self:!0,__source:!0};function w(t,e,n){var i,o={},s=null,a=null;if(null!=e)for(i in void 0!==e.ref&&(a=e.ref),void 0!==e.key&&(s=""+e.key),e)x.call(e,i)&&!E.hasOwnProperty(i)&&(o[i]=e[i]);var l=arguments.length-2;if(1===l)o.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];o.children=u}if(t&&t.defaultProps)for(i in l=t.defaultProps)void 0===o[i]&&(o[i]=l[i]);return{$$typeof:r,type:t,key:s,ref:a,props:o,_owner:b.current}}function k(t){return"object"===typeof t&&null!==t&&t.$$typeof===r}var S=/\/+/g;function C(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,(function(t){return e[t]}))}(""+t.key):e.toString(36)}function O(t,e,n,i,s){var a=typeof t;"undefined"!==a&&"boolean"!==a||(t=null);var l=!1;if(null===t)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case r:case o:l=!0}}if(l)return s=s(l=t),t=""===i?"."+C(l,0):i,Array.isArray(s)?(n="",null!=t&&(n=t.replace(S,"$&/")+"/"),O(s,e,n,"",(function(t){return t}))):null!=s&&(k(s)&&(s=function(t,e){return{$$typeof:r,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(s,n+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(S,"$&/")+"/")+t)),e.push(s)),1;if(l=0,i=""===i?".":i+":",Array.isArray(t))for(var u=0;u<t.length;u++){var c=i+C(a=t[u],u);l+=O(a,e,n,c,s)}else if("function"===typeof(c=function(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=f&&t[f]||t["@@iterator"])?t:null}(t)))for(t=c.call(t),u=0;!(a=t.next()).done;)l+=O(a=a.value,e,n,c=i+C(a,u++),s);else if("object"===a)throw e=""+t,Error(d(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e));return l}function I(t,e,n){if(null==t)return t;var i=[],r=0;return O(t,i,"","",(function(t){return e.call(n,t,r++)})),i}function M(t){if(-1===t._status){var e=t._result;e=e(),t._status=0,t._result=e,e.then((function(e){0===t._status&&(e=e.default,t._status=1,t._result=e)}),(function(e){0===t._status&&(t._status=2,t._result=e)}))}if(1===t._status)return t._result;throw t._result}var R={current:null};function T(){var t=R.current;if(null===t)throw Error(d(321));return t}var P={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:b,IsSomeRendererActing:{current:!1},assign:i};e.Children={map:I,forEach:function(t,e,n){I(t,(function(){e.apply(this,arguments)}),n)},count:function(t){var e=0;return I(t,(function(){e++})),e},toArray:function(t){return I(t,(function(t){return t}))||[]},only:function(t){if(!k(t))throw Error(d(143));return t}},e.Component=v,e.PureComponent=m,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,e.cloneElement=function(t,e,n){if(null===t||void 0===t)throw Error(d(267,t));var o=i({},t.props),s=t.key,a=t.ref,l=t._owner;if(null!=e){if(void 0!==e.ref&&(a=e.ref,l=b.current),void 0!==e.key&&(s=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(c in e)x.call(e,c)&&!E.hasOwnProperty(c)&&(o[c]=void 0===e[c]&&void 0!==u?u[c]:e[c])}var c=arguments.length-2;if(1===c)o.children=n;else if(1<c){u=Array(c);for(var h=0;h<c;h++)u[h]=arguments[h+2];o.children=u}return{$$typeof:r,type:t.type,key:s,ref:a,props:o,_owner:l}},e.createContext=function(t,e){return void 0===e&&(e=null),(t={$$typeof:a,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:s,_context:t},t.Consumer=t},e.createElement=w,e.createFactory=function(t){var e=w.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:l,render:t}},e.isValidElement=k,e.lazy=function(t){return{$$typeof:c,_payload:{_status:-1,_result:t},_init:M}},e.memo=function(t,e){return{$$typeof:u,type:t,compare:void 0===e?null:e}},e.useCallback=function(t,e){return T().useCallback(t,e)},e.useContext=function(t,e){return T().useContext(t,e)},e.useDebugValue=function(){},e.useEffect=function(t,e){return T().useEffect(t,e)},e.useImperativeHandle=function(t,e,n){return T().useImperativeHandle(t,e,n)},e.useLayoutEffect=function(t,e){return T().useLayoutEffect(t,e)},e.useMemo=function(t,e){return T().useMemo(t,e)},e.useReducer=function(t,e,n){return T().useReducer(t,e,n)},e.useRef=function(t){return T().useRef(t)},e.useState=function(t){return T().useState(t)},e.version="17.0.2"},function(t,e,n){"use strict";var i=n(1),r=n(89),o=n(102);function s(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!i)throw Error(s(227));var a=new Set,l={};function u(t,e){c(t,e),c(t+"Capture",e)}function c(t,e){for(l[t]=e,t=0;t<e.length;t++)a.add(e[t])}var h=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d=Object.prototype.hasOwnProperty,g={},p={};function v(t,e,n,i,r,o,s){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){y[t]=new v(t,0,!1,t,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];y[e]=new v(e,1,!1,t[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){y[t]=new v(t,2,!1,t.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){y[t]=new v(t,2,!1,t,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){y[t]=new v(t,3,!1,t.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(t){y[t]=new v(t,3,!0,t,null,!1,!1)})),["capture","download"].forEach((function(t){y[t]=new v(t,4,!1,t,null,!1,!1)})),["cols","rows","size","span"].forEach((function(t){y[t]=new v(t,6,!1,t,null,!1,!1)})),["rowSpan","start"].forEach((function(t){y[t]=new v(t,5,!1,t.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function _(t){return t[1].toUpperCase()}function b(t,e,n,i){var r=y.hasOwnProperty(e)?y[e]:null;(null!==r?0===r.type:!i&&(2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1])))||(function(t,e,n,i){if(null===e||"undefined"===typeof e||function(t,e,n,i){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,r,i)&&(n=null),i||null===r?function(t){return!!d.call(p,t)||!d.call(g,t)&&(f.test(t)?p[t]=!0:(g[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=null===n?3!==r.type&&"":n:(e=r.attributeName,i=r.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(m,_);y[e]=new v(e,1,!1,t,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(m,_);y[e]=new v(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(m,_);y[e]=new v(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(t){y[t]=new v(t,1,!1,t.toLowerCase(),null,!1,!1)})),y.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(t){y[t]=new v(t,1,!1,t.toLowerCase(),null,!0,!0)}));var x=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,E=60103,w=60106,k=60107,S=60108,C=60114,O=60109,I=60110,M=60112,R=60113,T=60120,P=60115,L=60116,N=60121,A=60128,j=60129,D=60130,F=60131;if("function"===typeof Symbol&&Symbol.for){var z=Symbol.for;E=z("react.element"),w=z("react.portal"),k=z("react.fragment"),S=z("react.strict_mode"),C=z("react.profiler"),O=z("react.provider"),I=z("react.context"),M=z("react.forward_ref"),R=z("react.suspense"),T=z("react.suspense_list"),P=z("react.memo"),L=z("react.lazy"),N=z("react.block"),z("react.scope"),A=z("react.opaque.id"),j=z("react.debug_trace_mode"),D=z("react.offscreen"),F=z("react.legacy_hidden")}var G,B="function"===typeof Symbol&&Symbol.iterator;function V(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=B&&t[B]||t["@@iterator"])?t:null}function Y(t){if(void 0===G)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);G=e&&e[1]||""}return"\n"+G+t}var q=!1;function U(t,e){if(!t||q)return"";q=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var i=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){i=l}t.call(e.prototype)}else{try{throw Error()}catch(l){i=l}t()}}catch(l){if(l&&i&&"string"===typeof l.stack){for(var r=l.stack.split("\n"),o=i.stack.split("\n"),s=r.length-1,a=o.length-1;1<=s&&0<=a&&r[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(r[s]!==o[a]){if(1!==s||1!==a)do{if(s--,0>--a||r[s]!==o[a])return"\n"+r[s].replace(" at new "," at ")}while(1<=s&&0<=a);break}}}finally{q=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Y(t):""}function X(t){switch(t.tag){case 5:return Y(t.type);case 16:return Y("Lazy");case 13:return Y("Suspense");case 19:return Y("SuspenseList");case 0:case 2:case 15:return t=U(t.type,!1);case 11:return t=U(t.type.render,!1);case 22:return t=U(t.type._render,!1);case 1:return t=U(t.type,!0);default:return""}}function W(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case k:return"Fragment";case w:return"Portal";case C:return"Profiler";case S:return"StrictMode";case R:return"Suspense";case T:return"SuspenseList"}if("object"===typeof t)switch(t.$$typeof){case I:return(t.displayName||"Context")+".Consumer";case O:return(t._context.displayName||"Context")+".Provider";case M:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case P:return W(t.type);case N:return W(t._render);case L:e=t._payload,t=t._init;try{return W(t(e))}catch(n){}}return null}function H(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function Z(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function K(t){t._valueTracker||(t._valueTracker=function(t){var e=Z(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(t){i=""+t,o.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(t){i=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function J(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=Z(t)?t.checked?"true":"false":t.value),(t=i)!==n&&(e.setValue(t),!0)}function Q(t){if("undefined"===typeof(t=t||("undefined"!==typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function $(t,e){var n=e.checked;return r({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function tt(t,e){var n=null==e.defaultValue?"":e.defaultValue,i=null!=e.checked?e.checked:e.defaultChecked;n=H(null!=e.value?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function et(t,e){null!=(e=e.checked)&&b(t,"checked",e,!1)}function nt(t,e){et(t,e);var n=H(e.value),i=e.type;if(null!=n)"number"===i?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===i||"reset"===i)return void t.removeAttribute("value");e.hasOwnProperty("value")?rt(t,e.type,n):e.hasOwnProperty("defaultValue")&&rt(t,e.type,H(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function it(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!("submit"!==i&&"reset"!==i||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function rt(t,e,n){"number"===e&&Q(t.ownerDocument)===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}function ot(t,e){return t=r({children:void 0},e),(e=function(t){var e="";return i.Children.forEach(t,(function(t){null!=t&&(e+=t)})),e}(e.children))&&(t.children=e),t}function st(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+H(n),e=null,r=0;r<t.length;r++){if(t[r].value===n)return t[r].selected=!0,void(i&&(t[r].defaultSelected=!0));null!==e||t[r].disabled||(e=t[r])}null!==e&&(e.selected=!0)}}function at(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(s(91));return r({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function lt(t,e){var n=e.value;if(null==n){if(n=e.children,e=e.defaultValue,null!=n){if(null!=e)throw Error(s(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(s(93));n=n[0]}e=n}null==e&&(e=""),n=e}t._wrapperState={initialValue:H(n)}}function ut(t,e){var n=H(e.value),i=H(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=i&&(t.defaultValue=""+i)}function ct(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}var ht="http://www.w3.org/1999/xhtml",ft="http://www.w3.org/2000/svg";function dt(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function gt(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?dt(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var pt,vt=function(t){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction((function(){return t(e,n)}))}:t}((function(t,e){if(t.namespaceURI!==ft||"innerHTML"in t)t.innerHTML=e;else{for((pt=pt||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=pt.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}}));function yt(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}var mt={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_t=["Webkit","ms","Moz","O"];function bt(t,e,n){return null==e||"boolean"===typeof e||""===e?"":n||"number"!==typeof e||0===e||mt.hasOwnProperty(t)&&mt[t]?(""+e).trim():e+"px"}function xt(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var i=0===n.indexOf("--"),r=bt(n,e[n],i);"float"===n&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}Object.keys(mt).forEach((function(t){_t.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),mt[e]=mt[t]}))}));var Et=r({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wt(t,e){if(e){if(Et[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(s(137,t));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(s(60));if("object"!==typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=e.style&&"object"!==typeof e.style)throw Error(s(62))}}function kt(t,e){if(-1===t.indexOf("-"))return"string"===typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function St(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}var Ct=null,Ot=null,It=null;function Mt(t){if(t=Qi(t)){if("function"!==typeof Ct)throw Error(s(280));var e=t.stateNode;e&&(e=tr(e),Ct(t.stateNode,t.type,e))}}function Rt(t){Ot?It?It.push(t):It=[t]:Ot=t}function Tt(){if(Ot){var t=Ot,e=It;if(It=Ot=null,Mt(t),e)for(t=0;t<e.length;t++)Mt(e[t])}}function Pt(t,e){return t(e)}function Lt(t,e,n,i,r){return t(e,n,i,r)}function Nt(){}var At=Pt,jt=!1,Dt=!1;function Ft(){null===Ot&&null===It||(Nt(),Tt())}function zt(t,e){var n=t.stateNode;if(null===n)return null;var i=tr(n);if(null===i)return null;n=i[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!i;break t;default:t=!1}if(t)return null;if(n&&"function"!==typeof n)throw Error(s(231,e,typeof n));return n}var Gt=!1;if(h)try{var Bt={};Object.defineProperty(Bt,"passive",{get:function(){Gt=!0}}),window.addEventListener("test",Bt,Bt),window.removeEventListener("test",Bt,Bt)}catch(ou){Gt=!1}function Vt(t,e,n,i,r,o,s,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var Yt=!1,qt=null,Ut=!1,Xt=null,Wt={onError:function(t){Yt=!0,qt=t}};function Ht(t,e,n,i,r,o,s,a,l){Yt=!1,qt=null,Vt.apply(Wt,arguments)}function Zt(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!==(1026&(e=t).flags)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function Kt(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function Jt(t){if(Zt(t)!==t)throw Error(s(188))}function Qt(t){if(!(t=function(t){var e=t.alternate;if(!e){if(null===(e=Zt(t)))throw Error(s(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(null===r)break;var o=r.alternate;if(null===o){if(null!==(i=r.return)){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return Jt(r),t;if(o===i)return Jt(r),e;o=o.sibling}throw Error(s(188))}if(n.return!==i.return)n=r,i=o;else{for(var a=!1,l=r.child;l;){if(l===n){a=!0,n=r,i=o;break}if(l===i){a=!0,i=r,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,i=r;break}if(l===i){a=!0,i=o,n=r;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==i)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?t:e}(t)))return null;for(var e=t;;){if(5===e.tag||6===e.tag)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function $t(t,e){for(var n=t.alternate;null!==e;){if(e===t||e===n)return!0;e=e.return}return!1}var te,ee,ne,ie,re=!1,oe=[],se=null,ae=null,le=null,ue=new Map,ce=new Map,he=[],fe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function de(t,e,n,i,r){return{blockedOn:t,domEventName:e,eventSystemFlags:16|n,nativeEvent:r,targetContainers:[i]}}function ge(t,e){switch(t){case"focusin":case"focusout":se=null;break;case"dragenter":case"dragleave":ae=null;break;case"mouseover":case"mouseout":le=null;break;case"pointerover":case"pointerout":ue.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ce.delete(e.pointerId)}}function pe(t,e,n,i,r,o){return null===t||t.nativeEvent!==o?(t=de(e,n,i,r,o),null!==e&&(null!==(e=Qi(e))&&ee(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,null!==r&&-1===e.indexOf(r)&&e.push(r),t)}function ve(t){var e=Ji(t.target);if(null!==e){var n=Zt(e);if(null!==n)if(13===(e=n.tag)){if(null!==(e=Kt(n)))return t.blockedOn=e,void ie(t.lanePriority,(function(){o.unstable_runWithPriority(t.priority,(function(){ne(n)}))}))}else if(3===e&&n.stateNode.hydrate)return void(t.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}t.blockedOn=null}function ye(t){if(null!==t.blockedOn)return!1;for(var e=t.targetContainers;0<e.length;){var n=Qe(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==n)return null!==(e=Qi(n))&&ee(e),t.blockedOn=n,!1;e.shift()}return!0}function me(t,e,n){ye(t)&&n.delete(e)}function _e(){for(re=!1;0<oe.length;){var t=oe[0];if(null!==t.blockedOn){null!==(t=Qi(t.blockedOn))&&te(t);break}for(var e=t.targetContainers;0<e.length;){var n=Qe(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==n){t.blockedOn=n;break}e.shift()}null===t.blockedOn&&oe.shift()}null!==se&&ye(se)&&(se=null),null!==ae&&ye(ae)&&(ae=null),null!==le&&ye(le)&&(le=null),ue.forEach(me),ce.forEach(me)}function be(t,e){t.blockedOn===e&&(t.blockedOn=null,re||(re=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,_e)))}function xe(t){function e(e){return be(e,t)}if(0<oe.length){be(oe[0],t);for(var n=1;n<oe.length;n++){var i=oe[n];i.blockedOn===t&&(i.blockedOn=null)}}for(null!==se&&be(se,t),null!==ae&&be(ae,t),null!==le&&be(le,t),ue.forEach(e),ce.forEach(e),n=0;n<he.length;n++)(i=he[n]).blockedOn===t&&(i.blockedOn=null);for(;0<he.length&&null===(n=he[0]).blockedOn;)ve(n),null===n.blockedOn&&he.shift()}function Ee(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var we={animationend:Ee("Animation","AnimationEnd"),animationiteration:Ee("Animation","AnimationIteration"),animationstart:Ee("Animation","AnimationStart"),transitionend:Ee("Transition","TransitionEnd")},ke={},Se={};function Ce(t){if(ke[t])return ke[t];if(!we[t])return t;var e,n=we[t];for(e in n)if(n.hasOwnProperty(e)&&e in Se)return ke[t]=n[e];return t}h&&(Se=document.createElement("div").style,"AnimationEvent"in window||(delete we.animationend.animation,delete we.animationiteration.animation,delete we.animationstart.animation),"TransitionEvent"in window||delete we.transitionend.transition);var Oe=Ce("animationend"),Ie=Ce("animationiteration"),Me=Ce("animationstart"),Re=Ce("transitionend"),Te=new Map,Pe=new Map,Le=["abort","abort",Oe,"animationEnd",Ie,"animationIteration",Me,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Re,"transitionEnd","waiting","waiting"];function Ne(t,e){for(var n=0;n<t.length;n+=2){var i=t[n],r=t[n+1];r="on"+(r[0].toUpperCase()+r.slice(1)),Pe.set(i,e),Te.set(i,r),u(r,[i])}}(0,o.unstable_now)();var Ae=8;function je(t){if(0!==(1&t))return Ae=15,1;if(0!==(2&t))return Ae=14,2;if(0!==(4&t))return Ae=13,4;var e=24&t;return 0!==e?(Ae=12,e):0!==(32&t)?(Ae=11,32):0!==(e=192&t)?(Ae=10,e):0!==(256&t)?(Ae=9,256):0!==(e=3584&t)?(Ae=8,e):0!==(4096&t)?(Ae=7,4096):0!==(e=4186112&t)?(Ae=6,e):0!==(e=62914560&t)?(Ae=5,e):67108864&t?(Ae=4,67108864):0!==(134217728&t)?(Ae=3,134217728):0!==(e=805306368&t)?(Ae=2,e):0!==(1073741824&t)?(Ae=1,1073741824):(Ae=8,t)}function De(t,e){var n=t.pendingLanes;if(0===n)return Ae=0;var i=0,r=0,o=t.expiredLanes,s=t.suspendedLanes,a=t.pingedLanes;if(0!==o)i=o,r=Ae=15;else if(0!==(o=134217727&n)){var l=o&~s;0!==l?(i=je(l),r=Ae):0!==(a&=o)&&(i=je(a),r=Ae)}else 0!==(o=n&~s)?(i=je(o),r=Ae):0!==a&&(i=je(a),r=Ae);if(0===i)return 0;if(i=n&((0>(i=31-Ye(i))?0:1<<i)<<1)-1,0!==e&&e!==i&&0===(e&s)){if(je(e),r<=Ae)return e;Ae=r}if(0!==(e=t.entangledLanes))for(t=t.entanglements,e&=i;0<e;)r=1<<(n=31-Ye(e)),i|=t[n],e&=~r;return i}function Fe(t){return 0!==(t=-1073741825&t.pendingLanes)?t:1073741824&t?1073741824:0}function ze(t,e){switch(t){case 15:return 1;case 14:return 2;case 12:return 0===(t=Ge(24&~e))?ze(10,e):t;case 10:return 0===(t=Ge(192&~e))?ze(8,e):t;case 8:return 0===(t=Ge(3584&~e))&&(0===(t=Ge(4186112&~e))&&(t=512)),t;case 2:return 0===(e=Ge(805306368&~e))&&(e=268435456),e}throw Error(s(358,t))}function Ge(t){return t&-t}function Be(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ve(t,e,n){t.pendingLanes|=e;var i=e-1;t.suspendedLanes&=i,t.pingedLanes&=i,(t=t.eventTimes)[e=31-Ye(e)]=n}var Ye=Math.clz32?Math.clz32:function(t){return 0===t?32:31-(qe(t)/Ue|0)|0},qe=Math.log,Ue=Math.LN2;var Xe=o.unstable_UserBlockingPriority,We=o.unstable_runWithPriority,He=!0;function Ze(t,e,n,i){jt||Nt();var r=Je,o=jt;jt=!0;try{Lt(r,t,e,n,i)}finally{(jt=o)||Ft()}}function Ke(t,e,n,i){We(Xe,Je.bind(null,t,e,n,i))}function Je(t,e,n,i){var r;if(He)if((r=0===(4&e))&&0<oe.length&&-1<fe.indexOf(t))t=de(null,t,e,n,i),oe.push(t);else{var o=Qe(t,e,n,i);if(null===o)r&&ge(t,i);else{if(r){if(-1<fe.indexOf(t))return t=de(o,t,e,n,i),void oe.push(t);if(function(t,e,n,i,r){switch(e){case"focusin":return se=pe(se,t,e,n,i,r),!0;case"dragenter":return ae=pe(ae,t,e,n,i,r),!0;case"mouseover":return le=pe(le,t,e,n,i,r),!0;case"pointerover":var o=r.pointerId;return ue.set(o,pe(ue.get(o)||null,t,e,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,ce.set(o,pe(ce.get(o)||null,t,e,n,i,r)),!0}return!1}(o,t,e,n,i))return;ge(t,i)}Ri(t,e,i,null,n)}}}function Qe(t,e,n,i){var r=St(i);if(null!==(r=Ji(r))){var o=Zt(r);if(null===o)r=null;else{var s=o.tag;if(13===s){if(null!==(r=Kt(o)))return r;r=null}else if(3===s){if(o.stateNode.hydrate)return 3===o.tag?o.stateNode.containerInfo:null;r=null}else o!==r&&(r=null)}}return Ri(t,e,i,r,n),null}var $e=null,tn=null,en=null;function nn(){if(en)return en;var t,e,n=tn,i=n.length,r="value"in $e?$e.value:$e.textContent,o=r.length;for(t=0;t<i&&n[t]===r[t];t++);var s=i-t;for(e=1;e<=s&&n[i-e]===r[o-e];e++);return en=r.slice(t,1<e?1-e:void 0)}function rn(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function on(){return!0}function sn(){return!1}function an(t){function e(e,n,i,r,o){for(var s in this._reactName=e,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=o,this.currentTarget=null,t)t.hasOwnProperty(s)&&(e=t[s],this[s]=e?e(r):r[s]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?on:sn,this.isPropagationStopped=sn,this}return r(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=on)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=on)},persist:function(){},isPersistent:on}),e}var ln,un,cn,hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fn=an(hn),dn=r({},hn,{view:0,detail:0}),gn=an(dn),pn=r({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(t){return void 0===t.relatedTarget?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==cn&&(cn&&"mousemove"===t.type?(ln=t.screenX-cn.screenX,un=t.screenY-cn.screenY):un=ln=0,cn=t),ln)},movementY:function(t){return"movementY"in t?t.movementY:un}}),vn=an(pn),yn=an(r({},pn,{dataTransfer:0})),mn=an(r({},dn,{relatedTarget:0})),_n=an(r({},hn,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=an(r({},hn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}})),xn=an(r({},hn,{data:0})),En={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=kn[t])&&!!e[t]}function Cn(){return Sn}var On=an(r({},dn,{key:function(t){if(t.key){var e=En[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=rn(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?wn[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(t){return"keypress"===t.type?rn(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?rn(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}})),In=an(r({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Mn=an(r({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),Rn=an(r({},hn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Tn=an(r({},pn,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0})),Pn=[9,13,27,32],Ln=h&&"CompositionEvent"in window,Nn=null;h&&"documentMode"in document&&(Nn=document.documentMode);var An=h&&"TextEvent"in window&&!Nn,jn=h&&(!Ln||Nn&&8<Nn&&11>=Nn),Dn=String.fromCharCode(32),Fn=!1;function zn(t,e){switch(t){case"keyup":return-1!==Pn.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gn(t){return"object"===typeof(t=t.detail)&&"data"in t?t.data:null}var Bn=!1;var Vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Vn[t.type]:"textarea"===e}function qn(t,e,n,i){Rt(i),0<(e=Pi(e,"onChange")).length&&(n=new fn("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Un=null,Xn=null;function Wn(t){ki(t,0)}function Hn(t){if(J($i(t)))return t}function Zn(t,e){if("change"===t)return e}var Kn=!1;if(h){var Jn;if(h){var Qn="oninput"in document;if(!Qn){var $n=document.createElement("div");$n.setAttribute("oninput","return;"),Qn="function"===typeof $n.oninput}Jn=Qn}else Jn=!1;Kn=Jn&&(!document.documentMode||9<document.documentMode)}function ti(){Un&&(Un.detachEvent("onpropertychange",ei),Xn=Un=null)}function ei(t){if("value"===t.propertyName&&Hn(Xn)){var e=[];if(qn(e,Xn,t,St(t)),t=Wn,jt)t(e);else{jt=!0;try{Pt(t,e)}finally{jt=!1,Ft()}}}}function ni(t,e,n){"focusin"===t?(ti(),Xn=n,(Un=e).attachEvent("onpropertychange",ei)):"focusout"===t&&ti()}function ii(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return Hn(Xn)}function ri(t,e){if("click"===t)return Hn(e)}function oi(t,e){if("input"===t||"change"===t)return Hn(e)}var si="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e},ai=Object.prototype.hasOwnProperty;function li(t,e){if(si(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++)if(!ai.call(e,n[i])||!si(t[n[i]],e[n[i]]))return!1;return!0}function ui(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ci(t,e){var n,i=ui(t);for(t=0;i;){if(3===i.nodeType){if(n=t+i.textContent.length,t<=e&&n>=e)return{node:i,offset:e-t};t=n}t:{for(;i;){if(i.nextSibling){i=i.nextSibling;break t}i=i.parentNode}i=void 0}i=ui(i)}}function hi(){for(var t=window,e=Q();e instanceof t.HTMLIFrameElement;){try{var n="string"===typeof e.contentWindow.location.href}catch(i){n=!1}if(!n)break;e=Q((t=e.contentWindow).document)}return e}function fi(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}var di=h&&"documentMode"in document&&11>=document.documentMode,gi=null,pi=null,vi=null,yi=!1;function mi(t,e,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;yi||null==gi||gi!==Q(i)||("selectionStart"in(i=gi)&&fi(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},vi&&li(vi,i)||(vi=i,0<(i=Pi(pi,"onSelect")).length&&(e=new fn("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=gi)))}Ne("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Ne("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Ne(Le,2);for(var _i="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),bi=0;bi<_i.length;bi++)Pe.set(_i[bi],0);c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ei=new Set("cancel close invalid load scroll toggle".split(" ").concat(xi));function wi(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,function(t,e,n,i,r,o,a,l,u){if(Ht.apply(this,arguments),Yt){if(!Yt)throw Error(s(198));var c=qt;Yt=!1,qt=null,Ut||(Ut=!0,Xt=c)}}(i,e,void 0,t),t.currentTarget=null}function ki(t,e){e=0!==(4&e);for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;t:{var o=void 0;if(e)for(var s=i.length-1;0<=s;s--){var a=i[s],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==o&&r.isPropagationStopped())break t;wi(r,a,u),o=l}else for(s=0;s<i.length;s++){if(l=(a=i[s]).instance,u=a.currentTarget,a=a.listener,l!==o&&r.isPropagationStopped())break t;wi(r,a,u),o=l}}}if(Ut)throw t=Xt,Ut=!1,Xt=null,t}function Si(t,e){var n=er(e),i=t+"__bubble";n.has(i)||(Mi(e,t,2,!1),n.add(i))}var Ci="_reactListening"+Math.random().toString(36).slice(2);function Oi(t){t[Ci]||(t[Ci]=!0,a.forEach((function(e){Ei.has(e)||Ii(e,!1,t,null),Ii(e,!0,t,null)})))}function Ii(t,e,n,i){var r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,o=n;if("selectionchange"===t&&9!==n.nodeType&&(o=n.ownerDocument),null!==i&&!e&&Ei.has(t)){if("scroll"!==t)return;r|=2,o=i}var s=er(o),a=t+"__"+(e?"capture":"bubble");s.has(a)||(e&&(r|=4),Mi(o,t,r,e),s.add(a))}function Mi(t,e,n,i){var r=Pe.get(e);switch(void 0===r?2:r){case 0:r=Ze;break;case 1:r=Ke;break;default:r=Je}n=r.bind(null,e,n,t),r=void 0,!Gt||"touchstart"!==e&&"touchmove"!==e&&"wheel"!==e||(r=!0),i?void 0!==r?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):void 0!==r?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Ri(t,e,n,i,r){var o=i;if(0===(1&e)&&0===(2&e)&&null!==i)t:for(;;){if(null===i)return;var s=i.tag;if(3===s||4===s){var a=i.stateNode.containerInfo;if(a===r||8===a.nodeType&&a.parentNode===r)break;if(4===s)for(s=i.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===r||8===l.nodeType&&l.parentNode===r))return;s=s.return}for(;null!==a;){if(null===(s=Ji(a)))return;if(5===(l=s.tag)||6===l){i=o=s;continue t}a=a.parentNode}}i=i.return}!function(t,e,n){if(Dt)return t(e,n);Dt=!0;try{At(t,e,n)}finally{Dt=!1,Ft()}}((function(){var i=o,r=St(n),s=[];t:{var a=Te.get(t);if(void 0!==a){var l=fn,u=t;switch(t){case"keypress":if(0===rn(n))break t;case"keydown":case"keyup":l=On;break;case"focusin":u="focus",l=mn;break;case"focusout":u="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=vn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=yn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Mn;break;case Oe:case Ie:case Me:l=_n;break;case Re:l=Rn;break;case"scroll":l=gn;break;case"wheel":l=Tn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=In}var c=0!==(4&e),h=!c&&"scroll"===t,f=c?null!==a?a+"Capture":null:a;c=[];for(var d,g=i;null!==g;){var p=(d=g).stateNode;if(5===d.tag&&null!==p&&(d=p,null!==f&&(null!=(p=zt(g,f))&&c.push(Ti(g,p,d)))),h)break;g=g.return}0<c.length&&(a=new l(a,u,null,n,r),s.push({event:a,listeners:c}))}}if(0===(7&e)){if(l="mouseout"===t||"pointerout"===t,(!(a="mouseover"===t||"pointerover"===t)||0!==(16&e)||!(u=n.relatedTarget||n.fromElement)||!Ji(u)&&!u[Zi])&&(l||a)&&(a=r.window===r?r:(a=r.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=i,null!==(u=(u=n.relatedTarget||n.toElement)?Ji(u):null)&&(u!==(h=Zt(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=i),l!==u)){if(c=vn,p="onMouseLeave",f="onMouseEnter",g="mouse","pointerout"!==t&&"pointerover"!==t||(c=In,p="onPointerLeave",f="onPointerEnter",g="pointer"),h=null==l?a:$i(l),d=null==u?a:$i(u),(a=new c(p,g+"leave",l,n,r)).target=h,a.relatedTarget=d,p=null,Ji(r)===i&&((c=new c(f,g+"enter",u,n,r)).target=d,c.relatedTarget=h,p=c),h=p,l&&u)t:{for(f=u,g=0,d=c=l;d;d=Li(d))g++;for(d=0,p=f;p;p=Li(p))d++;for(;0<g-d;)c=Li(c),g--;for(;0<d-g;)f=Li(f),d--;for(;g--;){if(c===f||null!==f&&c===f.alternate)break t;c=Li(c),f=Li(f)}c=null}else c=null;null!==l&&Ni(s,a,l,c,!1),null!==u&&null!==h&&Ni(s,h,u,c,!0)}if("select"===(l=(a=i?$i(i):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var v=Zn;else if(Yn(a))if(Kn)v=oi;else{v=ii;var y=ni}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(v=ri);switch(v&&(v=v(t,i))?qn(s,v,n,r):(y&&y(t,a,i),"focusout"===t&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&rt(a,"number",a.value)),y=i?$i(i):window,t){case"focusin":(Yn(y)||"true"===y.contentEditable)&&(gi=y,pi=i,vi=null);break;case"focusout":vi=pi=gi=null;break;case"mousedown":yi=!0;break;case"contextmenu":case"mouseup":case"dragend":yi=!1,mi(s,n,r);break;case"selectionchange":if(di)break;case"keydown":case"keyup":mi(s,n,r)}var m;if(Ln)t:{switch(t){case"compositionstart":var _="onCompositionStart";break t;case"compositionend":_="onCompositionEnd";break t;case"compositionupdate":_="onCompositionUpdate";break t}_=void 0}else Bn?zn(t,n)&&(_="onCompositionEnd"):"keydown"===t&&229===n.keyCode&&(_="onCompositionStart");_&&(jn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==_?"onCompositionEnd"===_&&Bn&&(m=nn()):(tn="value"in($e=r)?$e.value:$e.textContent,Bn=!0)),0<(y=Pi(i,_)).length&&(_=new xn(_,t,null,n,r),s.push({event:_,listeners:y}),m?_.data=m:null!==(m=Gn(n))&&(_.data=m))),(m=An?function(t,e){switch(t){case"compositionend":return Gn(e);case"keypress":return 32!==e.which?null:(Fn=!0,Dn);case"textInput":return(t=e.data)===Dn&&Fn?null:t;default:return null}}(t,n):function(t,e){if(Bn)return"compositionend"===t||!Ln&&zn(t,e)?(t=nn(),en=tn=$e=null,Bn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return jn&&"ko"!==e.locale?null:e.data;default:return null}}(t,n))&&(0<(i=Pi(i,"onBeforeInput")).length&&(r=new xn("onBeforeInput","beforeinput",null,n,r),s.push({event:r,listeners:i}),r.data=m))}ki(s,e)}))}function Ti(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Pi(t,e){for(var n=e+"Capture",i=[];null!==t;){var r=t,o=r.stateNode;5===r.tag&&null!==o&&(r=o,null!=(o=zt(t,n))&&i.unshift(Ti(t,o,r)),null!=(o=zt(t,e))&&i.push(Ti(t,o,r))),t=t.return}return i}function Li(t){if(null===t)return null;do{t=t.return}while(t&&5!==t.tag);return t||null}function Ni(t,e,n,i,r){for(var o=e._reactName,s=[];null!==n&&n!==i;){var a=n,l=a.alternate,u=a.stateNode;if(null!==l&&l===i)break;5===a.tag&&null!==u&&(a=u,r?null!=(l=zt(n,o))&&s.unshift(Ti(n,l,a)):r||null!=(l=zt(n,o))&&s.push(Ti(n,l,a))),n=n.return}0!==s.length&&t.push({event:e,listeners:s})}function Ai(){}var ji=null,Di=null;function Fi(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function zi(t,e){return"textarea"===t||"option"===t||"noscript"===t||"string"===typeof e.children||"number"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var Gi="function"===typeof setTimeout?setTimeout:void 0,Bi="function"===typeof clearTimeout?clearTimeout:void 0;function Vi(t){1===t.nodeType?t.textContent="":9===t.nodeType&&(null!=(t=t.body)&&(t.textContent=""))}function Yi(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break}return t}function qi(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if("$"===n||"$!"===n||"$?"===n){if(0===e)return t;e--}else"/$"===n&&e++}t=t.previousSibling}return null}var Ui=0;var Xi=Math.random().toString(36).slice(2),Wi="__reactFiber$"+Xi,Hi="__reactProps$"+Xi,Zi="__reactContainer$"+Xi,Ki="__reactEvents$"+Xi;function Ji(t){var e=t[Wi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Zi]||n[Wi]){if(n=e.alternate,null!==e.child||null!==n&&null!==n.child)for(t=qi(t);null!==t;){if(n=t[Wi])return n;t=qi(t)}return e}n=(t=n).parentNode}return null}function Qi(t){return!(t=t[Wi]||t[Zi])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function $i(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(s(33))}function tr(t){return t[Hi]||null}function er(t){var e=t[Ki];return void 0===e&&(e=t[Ki]=new Set),e}var nr=[],ir=-1;function rr(t){return{current:t}}function or(t){0>ir||(t.current=nr[ir],nr[ir]=null,ir--)}function sr(t,e){ir++,nr[ir]=t.current,t.current=e}var ar={},lr=rr(ar),ur=rr(!1),cr=ar;function hr(t,e){var n=t.type.contextTypes;if(!n)return ar;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r,o={};for(r in n)o[r]=e[r];return i&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function fr(t){return null!==(t=t.childContextTypes)&&void 0!==t}function dr(){or(ur),or(lr)}function gr(t,e,n){if(lr.current!==ar)throw Error(s(168));sr(lr,e),sr(ur,n)}function pr(t,e,n){var i=t.stateNode;if(t=e.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var o in i=i.getChildContext())if(!(o in t))throw Error(s(108,W(e)||"Unknown",o));return r({},n,i)}function vr(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ar,cr=lr.current,sr(lr,t),sr(ur,ur.current),!0}function yr(t,e,n){var i=t.stateNode;if(!i)throw Error(s(169));n?(t=pr(t,e,cr),i.__reactInternalMemoizedMergedChildContext=t,or(ur),or(lr),sr(lr,t)):or(ur),sr(ur,n)}var mr=null,_r=null,br=o.unstable_runWithPriority,xr=o.unstable_scheduleCallback,Er=o.unstable_cancelCallback,wr=o.unstable_shouldYield,kr=o.unstable_requestPaint,Sr=o.unstable_now,Cr=o.unstable_getCurrentPriorityLevel,Or=o.unstable_ImmediatePriority,Ir=o.unstable_UserBlockingPriority,Mr=o.unstable_NormalPriority,Rr=o.unstable_LowPriority,Tr=o.unstable_IdlePriority,Pr={},Lr=void 0!==kr?kr:function(){},Nr=null,Ar=null,jr=!1,Dr=Sr(),Fr=1e4>Dr?Sr:function(){return Sr()-Dr};function zr(){switch(Cr()){case Or:return 99;case Ir:return 98;case Mr:return 97;case Rr:return 96;case Tr:return 95;default:throw Error(s(332))}}function Gr(t){switch(t){case 99:return Or;case 98:return Ir;case 97:return Mr;case 96:return Rr;case 95:return Tr;default:throw Error(s(332))}}function Br(t,e){return t=Gr(t),br(t,e)}function Vr(t,e,n){return t=Gr(t),xr(t,e,n)}function Yr(){if(null!==Ar){var t=Ar;Ar=null,Er(t)}qr()}function qr(){if(!jr&&null!==Nr){jr=!0;var t=0;try{var e=Nr;Br(99,(function(){for(;t<e.length;t++){var n=e[t];do{n=n(!0)}while(null!==n)}})),Nr=null}catch(n){throw null!==Nr&&(Nr=Nr.slice(t+1)),xr(Or,Yr),n}finally{jr=!1}}}var Ur=x.ReactCurrentBatchConfig;function Xr(t,e){if(t&&t.defaultProps){for(var n in e=r({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}return e}var Wr=rr(null),Hr=null,Zr=null,Kr=null;function Jr(){Kr=Zr=Hr=null}function Qr(t){var e=Wr.current;or(Wr),t.type._context._currentValue=e}function $r(t,e){for(;null!==t;){var n=t.alternate;if((t.childLanes&e)===e){if(null===n||(n.childLanes&e)===e)break;n.childLanes|=e}else t.childLanes|=e,null!==n&&(n.childLanes|=e);t=t.return}}function to(t,e){Hr=t,Kr=Zr=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(0!==(t.lanes&e)&&(Ps=!0),t.firstContext=null)}function eo(t,e){if(Kr!==t&&!1!==e&&0!==e)if("number"===typeof e&&1073741823!==e||(Kr=t,e=1073741823),e={context:t,observedBits:e,next:null},null===Zr){if(null===Hr)throw Error(s(308));Zr=e,Hr.dependencies={lanes:0,firstContext:e,responders:null}}else Zr=Zr.next=e;return t._currentValue}var no=!1;function io(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ro(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function oo(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function so(t,e){if(null!==(t=t.updateQueue)){var n=(t=t.shared).pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}}function ao(t,e){var n=t.updateQueue,i=t.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?r=o=s:o=o.next=s,n=n.next}while(null!==n);null===o?r=o=e:o=o.next=e}else r=o=e;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},void(t.updateQueue=n)}null===(t=n.lastBaseUpdate)?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function lo(t,e,n,i){var o=t.updateQueue;no=!1;var s=o.firstBaseUpdate,a=o.lastBaseUpdate,l=o.shared.pending;if(null!==l){o.shared.pending=null;var u=l,c=u.next;u.next=null,null===a?s=c:a.next=c,a=u;var h=t.alternate;if(null!==h){var f=(h=h.updateQueue).lastBaseUpdate;f!==a&&(null===f?h.firstBaseUpdate=c:f.next=c,h.lastBaseUpdate=u)}}if(null!==s){for(f=o.baseState,a=0,h=c=u=null;;){l=s.lane;var d=s.eventTime;if((i&l)===l){null!==h&&(h=h.next={eventTime:d,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});t:{var g=t,p=s;switch(l=e,d=n,p.tag){case 1:if("function"===typeof(g=p.payload)){f=g.call(d,f,l);break t}f=g;break t;case 3:g.flags=-4097&g.flags|64;case 0:if(null===(l="function"===typeof(g=p.payload)?g.call(d,f,l):g)||void 0===l)break t;f=r({},f,l);break t;case 2:no=!0}}null!==s.callback&&(t.flags|=32,null===(l=o.effects)?o.effects=[s]:l.push(s))}else d={eventTime:d,lane:l,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===h?(c=h=d,u=f):h=h.next=d,a|=l;if(null===(s=s.next)){if(null===(l=o.shared.pending))break;s=l.next,l.next=null,o.lastBaseUpdate=l,o.shared.pending=null}}null===h&&(u=f),o.baseState=u,o.firstBaseUpdate=c,o.lastBaseUpdate=h,Na|=a,t.lanes=a,t.memoizedState=f}}function uo(t,e,n){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(null!==r){if(i.callback=null,i=n,"function"!==typeof r)throw Error(s(191,r));r.call(i)}}}var co=(new i.Component).refs;function ho(t,e,n,i){n=null===(n=n(i,e=t.memoizedState))||void 0===n?e:r({},e,n),t.memoizedState=n,0===t.lanes&&(t.updateQueue.baseState=n)}var fo={isMounted:function(t){return!!(t=t._reactInternals)&&Zt(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=ol(),r=sl(t),o=oo(i,r);o.payload=e,void 0!==n&&null!==n&&(o.callback=n),so(t,o),al(t,r,i)},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=ol(),r=sl(t),o=oo(i,r);o.tag=1,o.payload=e,void 0!==n&&null!==n&&(o.callback=n),so(t,o),al(t,r,i)},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ol(),i=sl(t),r=oo(n,i);r.tag=2,void 0!==e&&null!==e&&(r.callback=e),so(t,r),al(t,i,n)}};function go(t,e,n,i,r,o,s){return"function"===typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(i,o,s):!e.prototype||!e.prototype.isPureReactComponent||(!li(n,i)||!li(r,o))}function po(t,e,n){var i=!1,r=ar,o=e.contextType;return"object"===typeof o&&null!==o?o=eo(o):(r=fr(e)?cr:lr.current,o=(i=null!==(i=e.contextTypes)&&void 0!==i)?hr(t,r):ar),e=new e(n,o),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=fo,t.stateNode=e,e._reactInternals=t,i&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=o),e}function vo(t,e,n,i){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,i),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&fo.enqueueReplaceState(e,e.state,null)}function yo(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs=co,io(t);var o=e.contextType;"object"===typeof o&&null!==o?r.context=eo(o):(o=fr(e)?cr:lr.current,r.context=hr(t,o)),lo(t,n,r,i),r.state=t.memoizedState,"function"===typeof(o=e.getDerivedStateFromProps)&&(ho(t,e,o,n),r.state=t.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(e=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),e!==r.state&&fo.enqueueReplaceState(r,r.state,null),lo(t,n,r,i),r.state=t.memoizedState),"function"===typeof r.componentDidMount&&(t.flags|=4)}var mo=Array.isArray;function _o(t,e,n){if(null!==(t=n.ref)&&"function"!==typeof t&&"object"!==typeof t){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var i=n.stateNode}if(!i)throw Error(s(147,t));var r=""+t;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===r?e.ref:((e=function(t){var e=i.refs;e===co&&(e=i.refs={}),null===t?delete e[r]:e[r]=t})._stringRef=r,e)}if("string"!==typeof t)throw Error(s(284));if(!n._owner)throw Error(s(290,t))}return t}function bo(t,e){if("textarea"!==t.type)throw Error(s(31,"[object Object]"===Object.prototype.toString.call(e)?"object with keys {"+Object.keys(e).join(", ")+"}":e))}function xo(t){function e(e,n){if(t){var i=e.lastEffect;null!==i?(i.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,i){if(!t)return null;for(;null!==i;)e(n,i),i=i.sibling;return null}function i(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function r(t,e){return(t=zl(t,e)).index=0,t.sibling=null,t}function o(e,n,i){return e.index=i,t?null!==(i=e.alternate)?(i=i.index)<n?(e.flags=2,n):i:(e.flags=2,n):n}function a(e){return t&&null===e.alternate&&(e.flags=2),e}function l(t,e,n,i){return null===e||6!==e.tag?((e=Yl(n,t.mode,i)).return=t,e):((e=r(e,n)).return=t,e)}function u(t,e,n,i){return null!==e&&e.elementType===n.type?((i=r(e,n.props)).ref=_o(t,e,n),i.return=t,i):((i=Gl(n.type,n.key,n.props,null,t.mode,i)).ref=_o(t,e,n),i.return=t,i)}function c(t,e,n,i){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=ql(n,t.mode,i)).return=t,e):((e=r(e,n.children||[])).return=t,e)}function h(t,e,n,i,o){return null===e||7!==e.tag?((e=Bl(n,t.mode,i,o)).return=t,e):((e=r(e,n)).return=t,e)}function f(t,e,n){if("string"===typeof e||"number"===typeof e)return(e=Yl(""+e,t.mode,n)).return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case E:return(n=Gl(e.type,e.key,e.props,null,t.mode,n)).ref=_o(t,null,e),n.return=t,n;case w:return(e=ql(e,t.mode,n)).return=t,e}if(mo(e)||V(e))return(e=Bl(e,t.mode,n,null)).return=t,e;bo(t,e)}return null}function d(t,e,n,i){var r=null!==e?e.key:null;if("string"===typeof n||"number"===typeof n)return null!==r?null:l(t,e,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case E:return n.key===r?n.type===k?h(t,e,n.props.children,i,r):u(t,e,n,i):null;case w:return n.key===r?c(t,e,n,i):null}if(mo(n)||V(n))return null!==r?null:h(t,e,n,i,null);bo(t,n)}return null}function g(t,e,n,i,r){if("string"===typeof i||"number"===typeof i)return l(e,t=t.get(n)||null,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case E:return t=t.get(null===i.key?n:i.key)||null,i.type===k?h(e,t,i.props.children,r,i.key):u(e,t,i,r);case w:return c(e,t=t.get(null===i.key?n:i.key)||null,i,r)}if(mo(i)||V(i))return h(e,t=t.get(n)||null,i,r,null);bo(e,i)}return null}function p(r,s,a,l){for(var u=null,c=null,h=s,p=s=0,v=null;null!==h&&p<a.length;p++){h.index>p?(v=h,h=null):v=h.sibling;var y=d(r,h,a[p],l);if(null===y){null===h&&(h=v);break}t&&h&&null===y.alternate&&e(r,h),s=o(y,s,p),null===c?u=y:c.sibling=y,c=y,h=v}if(p===a.length)return n(r,h),u;if(null===h){for(;p<a.length;p++)null!==(h=f(r,a[p],l))&&(s=o(h,s,p),null===c?u=h:c.sibling=h,c=h);return u}for(h=i(r,h);p<a.length;p++)null!==(v=g(h,r,p,a[p],l))&&(t&&null!==v.alternate&&h.delete(null===v.key?p:v.key),s=o(v,s,p),null===c?u=v:c.sibling=v,c=v);return t&&h.forEach((function(t){return e(r,t)})),u}function v(r,a,l,u){var c=V(l);if("function"!==typeof c)throw Error(s(150));if(null==(l=c.call(l)))throw Error(s(151));for(var h=c=null,p=a,v=a=0,y=null,m=l.next();null!==p&&!m.done;v++,m=l.next()){p.index>v?(y=p,p=null):y=p.sibling;var _=d(r,p,m.value,u);if(null===_){null===p&&(p=y);break}t&&p&&null===_.alternate&&e(r,p),a=o(_,a,v),null===h?c=_:h.sibling=_,h=_,p=y}if(m.done)return n(r,p),c;if(null===p){for(;!m.done;v++,m=l.next())null!==(m=f(r,m.value,u))&&(a=o(m,a,v),null===h?c=m:h.sibling=m,h=m);return c}for(p=i(r,p);!m.done;v++,m=l.next())null!==(m=g(p,r,v,m.value,u))&&(t&&null!==m.alternate&&p.delete(null===m.key?v:m.key),a=o(m,a,v),null===h?c=m:h.sibling=m,h=m);return t&&p.forEach((function(t){return e(r,t)})),c}return function(t,i,o,l){var u="object"===typeof o&&null!==o&&o.type===k&&null===o.key;u&&(o=o.props.children);var c="object"===typeof o&&null!==o;if(c)switch(o.$$typeof){case E:t:{for(c=o.key,u=i;null!==u;){if(u.key===c){switch(u.tag){case 7:if(o.type===k){n(t,u.sibling),(i=r(u,o.props.children)).return=t,t=i;break t}break;default:if(u.elementType===o.type){n(t,u.sibling),(i=r(u,o.props)).ref=_o(t,u,o),i.return=t,t=i;break t}}n(t,u);break}e(t,u),u=u.sibling}o.type===k?((i=Bl(o.props.children,t.mode,l,o.key)).return=t,t=i):((l=Gl(o.type,o.key,o.props,null,t.mode,l)).ref=_o(t,i,o),l.return=t,t=l)}return a(t);case w:t:{for(u=o.key;null!==i;){if(i.key===u){if(4===i.tag&&i.stateNode.containerInfo===o.containerInfo&&i.stateNode.implementation===o.implementation){n(t,i.sibling),(i=r(i,o.children||[])).return=t,t=i;break t}n(t,i);break}e(t,i),i=i.sibling}(i=ql(o,t.mode,l)).return=t,t=i}return a(t)}if("string"===typeof o||"number"===typeof o)return o=""+o,null!==i&&6===i.tag?(n(t,i.sibling),(i=r(i,o)).return=t,t=i):(n(t,i),(i=Yl(o,t.mode,l)).return=t,t=i),a(t);if(mo(o))return p(t,i,o,l);if(V(o))return v(t,i,o,l);if(c&&bo(t,o),"undefined"===typeof o&&!u)switch(t.tag){case 1:case 22:case 0:case 11:case 15:throw Error(s(152,W(t.type)||"Component"))}return n(t,i)}}var Eo=xo(!0),wo=xo(!1),ko={},So=rr(ko),Co=rr(ko),Oo=rr(ko);function Io(t){if(t===ko)throw Error(s(174));return t}function Mo(t,e){switch(sr(Oo,e),sr(Co,t),sr(So,ko),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:gt(null,"");break;default:e=gt(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}or(So),sr(So,e)}function Ro(){or(So),or(Co),or(Oo)}function To(t){Io(Oo.current);var e=Io(So.current),n=gt(e,t.type);e!==n&&(sr(Co,t),sr(So,n))}function Po(t){Co.current===t&&(or(So),or(Co))}var Lo=rr(0);function No(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!==(64&e.flags))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ao=null,jo=null,Do=!1;function Fo(t,e){var n=Dl(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=e,n.return=t,n.flags=8,null!==t.lastEffect?(t.lastEffect.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n}function zo(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,!0);case 13:default:return!1}}function Go(t){if(Do){var e=jo;if(e){var n=e;if(!zo(t,e)){if(!(e=Yi(n.nextSibling))||!zo(t,e))return t.flags=-1025&t.flags|2,Do=!1,void(Ao=t);Fo(Ao,n)}Ao=t,jo=Yi(e.firstChild)}else t.flags=-1025&t.flags|2,Do=!1,Ao=t}}function Bo(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;Ao=t}function Vo(t){if(t!==Ao)return!1;if(!Do)return Bo(t),Do=!0,!1;var e=t.type;if(5!==t.tag||"head"!==e&&"body"!==e&&!zi(e,t.memoizedProps))for(e=jo;e;)Fo(t,e),e=Yi(e.nextSibling);if(Bo(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(s(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var n=t.data;if("/$"===n){if(0===e){jo=Yi(t.nextSibling);break t}e--}else"$"!==n&&"$!"!==n&&"$?"!==n||e++}t=t.nextSibling}jo=null}}else jo=Ao?Yi(t.stateNode.nextSibling):null;return!0}function Yo(){jo=Ao=null,Do=!1}var qo=[];function Uo(){for(var t=0;t<qo.length;t++)qo[t]._workInProgressVersionPrimary=null;qo.length=0}var Xo=x.ReactCurrentDispatcher,Wo=x.ReactCurrentBatchConfig,Ho=0,Zo=null,Ko=null,Jo=null,Qo=!1,$o=!1;function ts(){throw Error(s(321))}function es(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!si(t[n],e[n]))return!1;return!0}function ns(t,e,n,i,r,o){if(Ho=o,Zo=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Xo.current=null===t||null===t.memoizedState?Is:Ms,t=n(i,r),$o){o=0;do{if($o=!1,!(25>o))throw Error(s(301));o+=1,Jo=Ko=null,e.updateQueue=null,Xo.current=Rs,t=n(i,r)}while($o)}if(Xo.current=Os,e=null!==Ko&&null!==Ko.next,Ho=0,Jo=Ko=Zo=null,Qo=!1,e)throw Error(s(300));return t}function is(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Jo?Zo.memoizedState=Jo=t:Jo=Jo.next=t,Jo}function rs(){if(null===Ko){var t=Zo.alternate;t=null!==t?t.memoizedState:null}else t=Ko.next;var e=null===Jo?Zo.memoizedState:Jo.next;if(null!==e)Jo=e,Ko=t;else{if(null===t)throw Error(s(310));t={memoizedState:(Ko=t).memoizedState,baseState:Ko.baseState,baseQueue:Ko.baseQueue,queue:Ko.queue,next:null},null===Jo?Zo.memoizedState=Jo=t:Jo=Jo.next=t}return Jo}function os(t,e){return"function"===typeof e?e(t):e}function ss(t){var e=rs(),n=e.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=t;var i=Ko,r=i.baseQueue,o=n.pending;if(null!==o){if(null!==r){var a=r.next;r.next=o.next,o.next=a}i.baseQueue=r=o,n.pending=null}if(null!==r){r=r.next,i=i.baseState;var l=a=o=null,u=r;do{var c=u.lane;if((Ho&c)===c)null!==l&&(l=l.next={lane:0,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null}),i=u.eagerReducer===t?u.eagerState:t(i,u.action);else{var h={lane:c,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null};null===l?(a=l=h,o=i):l=l.next=h,Zo.lanes|=c,Na|=c}u=u.next}while(null!==u&&u!==r);null===l?o=i:l.next=a,si(i,e.memoizedState)||(Ps=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}return[e.memoizedState,n.dispatch]}function as(t){var e=rs(),n=e.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,o=e.memoizedState;if(null!==r){n.pending=null;var a=r=r.next;do{o=t(o,a.action),a=a.next}while(a!==r);si(o,e.memoizedState)||(Ps=!0),e.memoizedState=o,null===e.baseQueue&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function ls(t,e,n){var i=e._getVersion;i=i(e._source);var r=e._workInProgressVersionPrimary;if(null!==r?t=r===i:(t=t.mutableReadLanes,(t=(Ho&t)===t)&&(e._workInProgressVersionPrimary=i,qo.push(e))),t)return n(e._source);throw qo.push(e),Error(s(350))}function us(t,e,n,i){var r=Ca;if(null===r)throw Error(s(349));var o=e._getVersion,a=o(e._source),l=Xo.current,u=l.useState((function(){return ls(r,e,n)})),c=u[1],h=u[0];u=Jo;var f=t.memoizedState,d=f.refs,g=d.getSnapshot,p=f.source;f=f.subscribe;var v=Zo;return t.memoizedState={refs:d,source:e,subscribe:i},l.useEffect((function(){d.getSnapshot=n,d.setSnapshot=c;var t=o(e._source);if(!si(a,t)){t=n(e._source),si(h,t)||(c(t),t=sl(v),r.mutableReadLanes|=t&r.pendingLanes),t=r.mutableReadLanes,r.entangledLanes|=t;for(var i=r.entanglements,s=t;0<s;){var l=31-Ye(s),u=1<<l;i[l]|=t,s&=~u}}}),[n,e,i]),l.useEffect((function(){return i(e._source,(function(){var t=d.getSnapshot,n=d.setSnapshot;try{n(t(e._source));var i=sl(v);r.mutableReadLanes|=i&r.pendingLanes}catch(o){n((function(){throw o}))}}))}),[e,i]),si(g,n)&&si(p,e)&&si(f,i)||((t={pending:null,dispatch:null,lastRenderedReducer:os,lastRenderedState:h}).dispatch=c=Cs.bind(null,Zo,t),u.queue=t,u.baseQueue=null,h=ls(r,e,n),u.memoizedState=u.baseState=h),h}function cs(t,e,n){return us(rs(),t,e,n)}function hs(t){var e=is();return"function"===typeof t&&(t=t()),e.memoizedState=e.baseState=t,t=(t=e.queue={pending:null,dispatch:null,lastRenderedReducer:os,lastRenderedState:t}).dispatch=Cs.bind(null,Zo,t),[e.memoizedState,t]}function fs(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},null===(e=Zo.updateQueue)?(e={lastEffect:null},Zo.updateQueue=e,e.lastEffect=t.next=t):null===(n=e.lastEffect)?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t),t}function ds(t){return t={current:t},is().memoizedState=t}function gs(){return rs().memoizedState}function ps(t,e,n,i){var r=is();Zo.flags|=t,r.memoizedState=fs(1|e,n,void 0,void 0===i?null:i)}function vs(t,e,n,i){var r=rs();i=void 0===i?null:i;var o=void 0;if(null!==Ko){var s=Ko.memoizedState;if(o=s.destroy,null!==i&&es(i,s.deps))return void fs(e,n,o,i)}Zo.flags|=t,r.memoizedState=fs(1|e,n,o,i)}function ys(t,e){return ps(516,4,t,e)}function ms(t,e){return vs(516,4,t,e)}function _s(t,e){return vs(4,2,t,e)}function bs(t,e){return"function"===typeof e?(t=t(),e(t),function(){e(null)}):null!==e&&void 0!==e?(t=t(),e.current=t,function(){e.current=null}):void 0}function xs(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,vs(4,2,bs.bind(null,e,t),n)}function Es(){}function ws(t,e){var n=rs();e=void 0===e?null:e;var i=n.memoizedState;return null!==i&&null!==e&&es(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function ks(t,e){var n=rs();e=void 0===e?null:e;var i=n.memoizedState;return null!==i&&null!==e&&es(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function Ss(t,e){var n=zr();Br(98>n?98:n,(function(){t(!0)})),Br(97<n?97:n,(function(){var n=Wo.transition;Wo.transition=1;try{t(!1),e()}finally{Wo.transition=n}}))}function Cs(t,e,n){var i=ol(),r=sl(t),o={lane:r,action:n,eagerReducer:null,eagerState:null,next:null},s=e.pending;if(null===s?o.next=o:(o.next=s.next,s.next=o),e.pending=o,s=t.alternate,t===Zo||null!==s&&s===Zo)$o=Qo=!0;else{if(0===t.lanes&&(null===s||0===s.lanes)&&null!==(s=e.lastRenderedReducer))try{var a=e.lastRenderedState,l=s(a,n);if(o.eagerReducer=s,o.eagerState=l,si(l,a))return}catch(u){}al(t,r,i)}}var Os={readContext:eo,useCallback:ts,useContext:ts,useEffect:ts,useImperativeHandle:ts,useLayoutEffect:ts,useMemo:ts,useReducer:ts,useRef:ts,useState:ts,useDebugValue:ts,useDeferredValue:ts,useTransition:ts,useMutableSource:ts,useOpaqueIdentifier:ts,unstable_isNewReconciler:!1},Is={readContext:eo,useCallback:function(t,e){return is().memoizedState=[t,void 0===e?null:e],t},useContext:eo,useEffect:ys,useImperativeHandle:function(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,ps(4,2,bs.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ps(4,2,t,e)},useMemo:function(t,e){var n=is();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=is();return e=void 0!==n?n(e):e,i.memoizedState=i.baseState=e,t=(t=i.queue={pending:null,dispatch:null,lastRenderedReducer:t,lastRenderedState:e}).dispatch=Cs.bind(null,Zo,t),[i.memoizedState,t]},useRef:ds,useState:hs,useDebugValue:Es,useDeferredValue:function(t){var e=hs(t),n=e[0],i=e[1];return ys((function(){var e=Wo.transition;Wo.transition=1;try{i(t)}finally{Wo.transition=e}}),[t]),n},useTransition:function(){var t=hs(!1),e=t[0];return ds(t=Ss.bind(null,t[1])),[t,e]},useMutableSource:function(t,e,n){var i=is();return i.memoizedState={refs:{getSnapshot:e,setSnapshot:null},source:t,subscribe:n},us(i,t,e,n)},useOpaqueIdentifier:function(){if(Do){var t=!1,e=function(t){return{$$typeof:A,toString:t,valueOf:t}}((function(){throw t||(t=!0,n("r:"+(Ui++).toString(36))),Error(s(355))})),n=hs(e)[1];return 0===(2&Zo.mode)&&(Zo.flags|=516,fs(5,(function(){n("r:"+(Ui++).toString(36))}),void 0,null)),e}return hs(e="r:"+(Ui++).toString(36)),e},unstable_isNewReconciler:!1},Ms={readContext:eo,useCallback:ws,useContext:eo,useEffect:ms,useImperativeHandle:xs,useLayoutEffect:_s,useMemo:ks,useReducer:ss,useRef:gs,useState:function(){return ss(os)},useDebugValue:Es,useDeferredValue:function(t){var e=ss(os),n=e[0],i=e[1];return ms((function(){var e=Wo.transition;Wo.transition=1;try{i(t)}finally{Wo.transition=e}}),[t]),n},useTransition:function(){var t=ss(os)[0];return[gs().current,t]},useMutableSource:cs,useOpaqueIdentifier:function(){return ss(os)[0]},unstable_isNewReconciler:!1},Rs={readContext:eo,useCallback:ws,useContext:eo,useEffect:ms,useImperativeHandle:xs,useLayoutEffect:_s,useMemo:ks,useReducer:as,useRef:gs,useState:function(){return as(os)},useDebugValue:Es,useDeferredValue:function(t){var e=as(os),n=e[0],i=e[1];return ms((function(){var e=Wo.transition;Wo.transition=1;try{i(t)}finally{Wo.transition=e}}),[t]),n},useTransition:function(){var t=as(os)[0];return[gs().current,t]},useMutableSource:cs,useOpaqueIdentifier:function(){return as(os)[0]},unstable_isNewReconciler:!1},Ts=x.ReactCurrentOwner,Ps=!1;function Ls(t,e,n,i){e.child=null===t?wo(e,null,n,i):Eo(e,t.child,n,i)}function Ns(t,e,n,i,r){n=n.render;var o=e.ref;return to(e,r),i=ns(t,e,n,i,o,r),null===t||Ps?(e.flags|=1,Ls(t,e,i,r),e.child):(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~r,ta(t,e,r))}function As(t,e,n,i,r,o){if(null===t){var s=n.type;return"function"!==typeof s||Fl(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=Gl(n.type,null,i,e,e.mode,o)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=s,js(t,e,s,i,r,o))}return s=t.child,0===(r&o)&&(r=s.memoizedProps,(n=null!==(n=n.compare)?n:li)(r,i)&&t.ref===e.ref)?ta(t,e,o):(e.flags|=1,(t=zl(s,i)).ref=e.ref,t.return=e,e.child=t)}function js(t,e,n,i,r,o){if(null!==t&&li(t.memoizedProps,i)&&t.ref===e.ref){if(Ps=!1,0===(o&r))return e.lanes=t.lanes,ta(t,e,o);0!==(16384&t.flags)&&(Ps=!0)}return zs(t,e,n,i,o)}function Ds(t,e,n){var i=e.pendingProps,r=i.children,o=null!==t?t.memoizedState:null;if("hidden"===i.mode||"unstable-defer-without-hiding"===i.mode)if(0===(4&e.mode))e.memoizedState={baseLanes:0},pl(e,n);else{if(0===(1073741824&n))return t=null!==o?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t},pl(e,t),null;e.memoizedState={baseLanes:0},pl(e,null!==o?o.baseLanes:n)}else null!==o?(i=o.baseLanes|n,e.memoizedState=null):i=n,pl(e,i);return Ls(t,e,r,n),e.child}function Fs(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.flags|=128)}function zs(t,e,n,i,r){var o=fr(n)?cr:lr.current;return o=hr(e,o),to(e,r),n=ns(t,e,n,i,o,r),null===t||Ps?(e.flags|=1,Ls(t,e,n,r),e.child):(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~r,ta(t,e,r))}function Gs(t,e,n,i,r){if(fr(n)){var o=!0;vr(e)}else o=!1;if(to(e,r),null===e.stateNode)null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),po(e,n,i),yo(e,n,i,r),i=!0;else if(null===t){var s=e.stateNode,a=e.memoizedProps;s.props=a;var l=s.context,u=n.contextType;"object"===typeof u&&null!==u?u=eo(u):u=hr(e,u=fr(n)?cr:lr.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof s.getSnapshotBeforeUpdate;h||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==i||l!==u)&&vo(e,s,i,u),no=!1;var f=e.memoizedState;s.state=f,lo(e,i,s,r),l=e.memoizedState,a!==i||f!==l||ur.current||no?("function"===typeof c&&(ho(e,n,c,i),l=e.memoizedState),(a=no||go(e,n,a,i,f,l,u))?(h||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(e.flags|=4)):("function"===typeof s.componentDidMount&&(e.flags|=4),e.memoizedProps=i,e.memoizedState=l),s.props=i,s.state=l,s.context=u,i=a):("function"===typeof s.componentDidMount&&(e.flags|=4),i=!1)}else{s=e.stateNode,ro(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Xr(e.type,a),s.props=u,h=e.pendingProps,f=s.context,"object"===typeof(l=n.contextType)&&null!==l?l=eo(l):l=hr(e,l=fr(n)?cr:lr.current);var d=n.getDerivedStateFromProps;(c="function"===typeof d||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==h||f!==l)&&vo(e,s,i,l),no=!1,f=e.memoizedState,s.state=f,lo(e,i,s,r);var g=e.memoizedState;a!==h||f!==g||ur.current||no?("function"===typeof d&&(ho(e,n,d,i),g=e.memoizedState),(u=no||go(e,n,u,i,f,g,l))?(c||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(i,g,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(i,g,l)),"function"===typeof s.componentDidUpdate&&(e.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(e.flags|=256)):("function"!==typeof s.componentDidUpdate||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=256),e.memoizedProps=i,e.memoizedState=g),s.props=i,s.state=g,s.context=l,i=u):("function"!==typeof s.componentDidUpdate||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=256),i=!1)}return Bs(t,e,n,i,o,r)}function Bs(t,e,n,i,r,o){Fs(t,e);var s=0!==(64&e.flags);if(!i&&!s)return r&&yr(e,n,!1),ta(t,e,o);i=e.stateNode,Ts.current=e;var a=s&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return e.flags|=1,null!==t&&s?(e.child=Eo(e,t.child,null,o),e.child=Eo(e,null,a,o)):Ls(t,e,a,o),e.memoizedState=i.state,r&&yr(e,n,!0),e.child}function Vs(t){var e=t.stateNode;e.pendingContext?gr(0,e.pendingContext,e.pendingContext!==e.context):e.context&&gr(0,e.context,!1),Mo(t,e.containerInfo)}var Ys,qs,Us,Xs={dehydrated:null,retryLane:0};function Ws(t,e,n){var i,r=e.pendingProps,o=Lo.current,s=!1;return(i=0!==(64&e.flags))||(i=(null===t||null!==t.memoizedState)&&0!==(2&o)),i?(s=!0,e.flags&=-65):null!==t&&null===t.memoizedState||void 0===r.fallback||!0===r.unstable_avoidThisFallback||(o|=1),sr(Lo,1&o),null===t?(void 0!==r.fallback&&Go(e),t=r.children,o=r.fallback,s?(t=Hs(e,t,o,n),e.child.memoizedState={baseLanes:n},e.memoizedState=Xs,t):"number"===typeof r.unstable_expectedLoadTime?(t=Hs(e,t,o,n),e.child.memoizedState={baseLanes:n},e.memoizedState=Xs,e.lanes=33554432,t):((n=Vl({mode:"visible",children:t},e.mode,n,null)).return=e,e.child=n)):(t.memoizedState,s?(r=Ks(t,e,r.children,r.fallback,n),s=e.child,o=t.child.memoizedState,s.memoizedState=null===o?{baseLanes:n}:{baseLanes:o.baseLanes|n},s.childLanes=t.childLanes&~n,e.memoizedState=Xs,r):(n=Zs(t,e,r.children,n),e.memoizedState=null,n))}function Hs(t,e,n,i){var r=t.mode,o=t.child;return e={mode:"hidden",children:e},0===(2&r)&&null!==o?(o.childLanes=0,o.pendingProps=e):o=Vl(e,r,0,null),n=Bl(n,r,i,null),o.return=t,n.return=t,o.sibling=n,t.child=o,n}function Zs(t,e,n,i){var r=t.child;return t=r.sibling,n=zl(r,{mode:"visible",children:n}),0===(2&e.mode)&&(n.lanes=i),n.return=e,n.sibling=null,null!==t&&(t.nextEffect=null,t.flags=8,e.firstEffect=e.lastEffect=t),e.child=n}function Ks(t,e,n,i,r){var o=e.mode,s=t.child;t=s.sibling;var a={mode:"hidden",children:n};return 0===(2&o)&&e.child!==s?((n=e.child).childLanes=0,n.pendingProps=a,null!==(s=n.lastEffect)?(e.firstEffect=n.firstEffect,e.lastEffect=s,s.nextEffect=null):e.firstEffect=e.lastEffect=null):n=zl(s,a),null!==t?i=zl(t,i):(i=Bl(i,o,r,null)).flags|=2,i.return=e,n.return=e,n.sibling=i,e.child=n,i}function Js(t,e){t.lanes|=e;var n=t.alternate;null!==n&&(n.lanes|=e),$r(t.return,e)}function Qs(t,e,n,i,r,o){var s=t.memoizedState;null===s?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r,lastEffect:o}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r,s.lastEffect=o)}function $s(t,e,n){var i=e.pendingProps,r=i.revealOrder,o=i.tail;if(Ls(t,e,i.children,n),0!==(2&(i=Lo.current)))i=1&i|2,e.flags|=64;else{if(null!==t&&0!==(64&t.flags))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&Js(t,n);else if(19===t.tag)Js(t,n);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(sr(Lo,i),0===(2&e.mode))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;null!==n;)null!==(t=n.alternate)&&null===No(t)&&(r=n),n=n.sibling;null===(n=r)?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Qs(e,!1,r,n,o,e.lastEffect);break;case"backwards":for(n=null,r=e.child,e.child=null;null!==r;){if(null!==(t=r.alternate)&&null===No(t)){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Qs(e,!0,n,null,o,e.lastEffect);break;case"together":Qs(e,!1,null,null,void 0,e.lastEffect);break;default:e.memoizedState=null}return e.child}function ta(t,e,n){if(null!==t&&(e.dependencies=t.dependencies),Na|=e.lanes,0!==(n&e.childLanes)){if(null!==t&&e.child!==t.child)throw Error(s(153));if(null!==e.child){for(n=zl(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=zl(t,t.pendingProps)).return=e;n.sibling=null}return e.child}return null}function ea(t,e){if(!Do)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?e||null===t.tail?t.tail=null:t.tail.sibling=null:i.sibling=null}}function na(t,e,n){var i=e.pendingProps;switch(e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return fr(e.type)&&dr(),null;case 3:return Ro(),or(ur),or(lr),Uo(),(i=e.stateNode).pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==t&&null!==t.child||(Vo(e)?e.flags|=4:i.hydrate||(e.flags|=256)),null;case 5:Po(e);var o=Io(Oo.current);if(n=e.type,null!==t&&null!=e.stateNode)qs(t,e,n,i),t.ref!==e.ref&&(e.flags|=128);else{if(!i){if(null===e.stateNode)throw Error(s(166));return null}if(t=Io(So.current),Vo(e)){i=e.stateNode,n=e.type;var a=e.memoizedProps;switch(i[Wi]=e,i[Hi]=a,n){case"dialog":Si("cancel",i),Si("close",i);break;case"iframe":case"object":case"embed":Si("load",i);break;case"video":case"audio":for(t=0;t<xi.length;t++)Si(xi[t],i);break;case"source":Si("error",i);break;case"img":case"image":case"link":Si("error",i),Si("load",i);break;case"details":Si("toggle",i);break;case"input":tt(i,a),Si("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!a.multiple},Si("invalid",i);break;case"textarea":lt(i,a),Si("invalid",i)}for(var u in wt(n,a),t=null,a)a.hasOwnProperty(u)&&(o=a[u],"children"===u?"string"===typeof o?i.textContent!==o&&(t=["children",o]):"number"===typeof o&&i.textContent!==""+o&&(t=["children",""+o]):l.hasOwnProperty(u)&&null!=o&&"onScroll"===u&&Si("scroll",i));switch(n){case"input":K(i),it(i,a,!0);break;case"textarea":K(i),ct(i);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(i.onclick=Ai)}i=t,e.updateQueue=i,null!==i&&(e.flags|=4)}else{switch(u=9===o.nodeType?o:o.ownerDocument,t===ht&&(t=dt(n)),t===ht?"script"===n?((t=u.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"===typeof i.is?t=u.createElement(n,{is:i.is}):(t=u.createElement(n),"select"===n&&(u=t,i.multiple?u.multiple=!0:i.size&&(u.size=i.size))):t=u.createElementNS(t,n),t[Wi]=e,t[Hi]=i,Ys(t,e),e.stateNode=t,u=kt(n,i),n){case"dialog":Si("cancel",t),Si("close",t),o=i;break;case"iframe":case"object":case"embed":Si("load",t),o=i;break;case"video":case"audio":for(o=0;o<xi.length;o++)Si(xi[o],t);o=i;break;case"source":Si("error",t),o=i;break;case"img":case"image":case"link":Si("error",t),Si("load",t),o=i;break;case"details":Si("toggle",t),o=i;break;case"input":tt(t,i),o=$(t,i),Si("invalid",t);break;case"option":o=ot(t,i);break;case"select":t._wrapperState={wasMultiple:!!i.multiple},o=r({},i,{value:void 0}),Si("invalid",t);break;case"textarea":lt(t,i),o=at(t,i),Si("invalid",t);break;default:o=i}wt(n,o);var c=o;for(a in c)if(c.hasOwnProperty(a)){var h=c[a];"style"===a?xt(t,h):"dangerouslySetInnerHTML"===a?null!=(h=h?h.__html:void 0)&&vt(t,h):"children"===a?"string"===typeof h?("textarea"!==n||""!==h)&&yt(t,h):"number"===typeof h&&yt(t,""+h):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(l.hasOwnProperty(a)?null!=h&&"onScroll"===a&&Si("scroll",t):null!=h&&b(t,a,h,u))}switch(n){case"input":K(t),it(t,i,!1);break;case"textarea":K(t),ct(t);break;case"option":null!=i.value&&t.setAttribute("value",""+H(i.value));break;case"select":t.multiple=!!i.multiple,null!=(a=i.value)?st(t,!!i.multiple,a,!1):null!=i.defaultValue&&st(t,!!i.multiple,i.defaultValue,!0);break;default:"function"===typeof o.onClick&&(t.onclick=Ai)}Fi(n,i)&&(e.flags|=4)}null!==e.ref&&(e.flags|=128)}return null;case 6:if(t&&null!=e.stateNode)Us(0,e,t.memoizedProps,i);else{if("string"!==typeof i&&null===e.stateNode)throw Error(s(166));n=Io(Oo.current),Io(So.current),Vo(e)?(i=e.stateNode,n=e.memoizedProps,i[Wi]=e,i.nodeValue!==n&&(e.flags|=4)):((i=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[Wi]=e,e.stateNode=i)}return null;case 13:return or(Lo),i=e.memoizedState,0!==(64&e.flags)?(e.lanes=n,e):(i=null!==i,n=!1,null===t?void 0!==e.memoizedProps.fallback&&Vo(e):n=null!==t.memoizedState,i&&!n&&0!==(2&e.mode)&&(null===t&&!0!==e.memoizedProps.unstable_avoidThisFallback||0!==(1&Lo.current)?0===Ta&&(Ta=3):(0!==Ta&&3!==Ta||(Ta=4),null===Ca||0===(134217727&Na)&&0===(134217727&Aa)||hl(Ca,Ia))),(i||n)&&(e.flags|=4),null);case 4:return Ro(),null===t&&Oi(e.stateNode.containerInfo),null;case 10:return Qr(e),null;case 17:return fr(e.type)&&dr(),null;case 19:if(or(Lo),null===(i=e.memoizedState))return null;if(a=0!==(64&e.flags),null===(u=i.rendering))if(a)ea(i,!1);else{if(0!==Ta||null!==t&&0!==(64&t.flags))for(t=e.child;null!==t;){if(null!==(u=No(t))){for(e.flags|=64,ea(i,!1),null!==(a=u.updateQueue)&&(e.updateQueue=a,e.flags|=4),null===i.lastEffect&&(e.firstEffect=null),e.lastEffect=i.lastEffect,i=n,n=e.child;null!==n;)t=i,(a=n).flags&=2,a.nextEffect=null,a.firstEffect=null,a.lastEffect=null,null===(u=a.alternate)?(a.childLanes=0,a.lanes=t,a.child=null,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=u.childLanes,a.lanes=u.lanes,a.child=u.child,a.memoizedProps=u.memoizedProps,a.memoizedState=u.memoizedState,a.updateQueue=u.updateQueue,a.type=u.type,t=u.dependencies,a.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return sr(Lo,1&Lo.current|2),e.child}t=t.sibling}null!==i.tail&&Fr()>za&&(e.flags|=64,a=!0,ea(i,!1),e.lanes=33554432)}else{if(!a)if(null!==(t=No(u))){if(e.flags|=64,a=!0,null!==(n=t.updateQueue)&&(e.updateQueue=n,e.flags|=4),ea(i,!0),null===i.tail&&"hidden"===i.tailMode&&!u.alternate&&!Do)return null!==(e=e.lastEffect=i.lastEffect)&&(e.nextEffect=null),null}else 2*Fr()-i.renderingStartTime>za&&1073741824!==n&&(e.flags|=64,a=!0,ea(i,!1),e.lanes=33554432);i.isBackwards?(u.sibling=e.child,e.child=u):(null!==(n=i.last)?n.sibling=u:e.child=u,i.last=u)}return null!==i.tail?(n=i.tail,i.rendering=n,i.tail=n.sibling,i.lastEffect=e.lastEffect,i.renderingStartTime=Fr(),n.sibling=null,e=Lo.current,sr(Lo,a?1&e|2:1&e),n):null;case 23:case 24:return vl(),null!==t&&null!==t.memoizedState!==(null!==e.memoizedState)&&"unstable-defer-without-hiding"!==i.mode&&(e.flags|=4),null}throw Error(s(156,e.tag))}function ia(t){switch(t.tag){case 1:fr(t.type)&&dr();var e=t.flags;return 4096&e?(t.flags=-4097&e|64,t):null;case 3:if(Ro(),or(ur),or(lr),Uo(),0!==(64&(e=t.flags)))throw Error(s(285));return t.flags=-4097&e|64,t;case 5:return Po(t),null;case 13:return or(Lo),4096&(e=t.flags)?(t.flags=-4097&e|64,t):null;case 19:return or(Lo),null;case 4:return Ro(),null;case 10:return Qr(t),null;case 23:case 24:return vl(),null;default:return null}}function ra(t,e){try{var n="",i=e;do{n+=X(i),i=i.return}while(i);var r=n}catch(o){r="\nError generating stack: "+o.message+"\n"+o.stack}return{value:t,source:e,stack:r}}function oa(t,e){try{console.error(e.value)}catch(n){setTimeout((function(){throw n}))}}Ys=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},qs=function(t,e,n,i){var o=t.memoizedProps;if(o!==i){t=e.stateNode,Io(So.current);var s,a=null;switch(n){case"input":o=$(t,o),i=$(t,i),a=[];break;case"option":o=ot(t,o),i=ot(t,i),a=[];break;case"select":o=r({},o,{value:void 0}),i=r({},i,{value:void 0}),a=[];break;case"textarea":o=at(t,o),i=at(t,i),a=[];break;default:"function"!==typeof o.onClick&&"function"===typeof i.onClick&&(t.onclick=Ai)}for(h in wt(n,i),n=null,o)if(!i.hasOwnProperty(h)&&o.hasOwnProperty(h)&&null!=o[h])if("style"===h){var u=o[h];for(s in u)u.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(l.hasOwnProperty(h)?a||(a=[]):(a=a||[]).push(h,null));for(h in i){var c=i[h];if(u=null!=o?o[h]:void 0,i.hasOwnProperty(h)&&c!==u&&(null!=c||null!=u))if("style"===h)if(u){for(s in u)!u.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&u[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(a||(a=[]),a.push(h,n)),n=c;else"dangerouslySetInnerHTML"===h?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(a=a||[]).push(h,c)):"children"===h?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(h,""+c):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(l.hasOwnProperty(h)?(null!=c&&"onScroll"===h&&Si("scroll",t),a||u===c||(a=[])):"object"===typeof c&&null!==c&&c.$$typeof===A?c.toString():(a=a||[]).push(h,c))}n&&(a=a||[]).push("style",n);var h=a;(e.updateQueue=h)&&(e.flags|=4)}},Us=function(t,e,n,i){n!==i&&(e.flags|=4)};var sa="function"===typeof WeakMap?WeakMap:Map;function aa(t,e,n){(n=oo(-1,n)).tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Ya||(Ya=!0,qa=i),oa(0,e)},n}function la(t,e,n){(n=oo(-1,n)).tag=3;var i=t.type.getDerivedStateFromError;if("function"===typeof i){var r=e.value;n.payload=function(){return oa(0,e),i(r)}}var o=t.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){"function"!==typeof i&&(null===Ua?Ua=new Set([this]):Ua.add(this),oa(0,e));var t=e.stack;this.componentDidCatch(e.value,{componentStack:null!==t?t:""})}),n}var ua="function"===typeof WeakSet?WeakSet:Set;function ca(t){var e=t.ref;if(null!==e)if("function"===typeof e)try{e(null)}catch(n){Ll(t,n)}else e.current=null}function ha(t,e){switch(e.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&e.flags&&null!==t){var n=t.memoizedProps,i=t.memoizedState;e=(t=e.stateNode).getSnapshotBeforeUpdate(e.elementType===e.type?n:Xr(e.type,n),i),t.__reactInternalSnapshotBeforeUpdate=e}return;case 3:return void(256&e.flags&&Vi(e.stateNode.containerInfo));case 5:case 6:case 4:case 17:return}throw Error(s(163))}function fa(t,e,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(e=null!==(e=n.updateQueue)?e.lastEffect:null)){t=e=e.next;do{if(3===(3&t.tag)){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}if(null!==(e=null!==(e=n.updateQueue)?e.lastEffect:null)){t=e=e.next;do{var r=t;i=r.next,0!==(4&(r=r.tag))&&0!==(1&r)&&(Rl(n,t),Ml(n,t)),t=i}while(t!==e)}return;case 1:return t=n.stateNode,4&n.flags&&(null===e?t.componentDidMount():(i=n.elementType===n.type?e.memoizedProps:Xr(n.type,e.memoizedProps),t.componentDidUpdate(i,e.memoizedState,t.__reactInternalSnapshotBeforeUpdate))),void(null!==(e=n.updateQueue)&&uo(n,e,t));case 3:if(null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}uo(n,e,t)}return;case 5:return t=n.stateNode,void(null===e&&4&n.flags&&Fi(n.type,n.memoizedProps)&&t.focus());case 6:case 4:case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&xe(n)))));case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(s(163))}function da(t,e){for(var n=t;;){if(5===n.tag){var i=n.stateNode;if(e)"function"===typeof(i=i.style).setProperty?i.setProperty("display","none","important"):i.display="none";else{i=n.stateNode;var r=n.memoizedProps.style;r=void 0!==r&&null!==r&&r.hasOwnProperty("display")?r.display:null,i.style.display=bt("display",r)}}else if(6===n.tag)n.stateNode.nodeValue=e?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===t)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function ga(t,e){if(_r&&"function"===typeof _r.onCommitFiberUnmount)try{_r.onCommitFiberUnmount(mr,e)}catch(o){}switch(e.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(t=e.updateQueue)&&null!==(t=t.lastEffect)){var n=t=t.next;do{var i=n,r=i.destroy;if(i=i.tag,void 0!==r)if(0!==(4&i))Rl(e,n);else{i=e;try{r()}catch(o){Ll(i,o)}}n=n.next}while(n!==t)}break;case 1:if(ca(e),"function"===typeof(t=e.stateNode).componentWillUnmount)try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(o){Ll(e,o)}break;case 5:ca(e);break;case 4:ma(t,e)}}function pa(t){t.alternate=null,t.child=null,t.dependencies=null,t.firstEffect=null,t.lastEffect=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.return=null,t.updateQueue=null}function va(t){return 5===t.tag||3===t.tag||4===t.tag}function ya(t){t:{for(var e=t.return;null!==e;){if(va(e))break t;e=e.return}throw Error(s(160))}var n=e;switch(e=n.stateNode,n.tag){case 5:var i=!1;break;case 3:case 4:e=e.containerInfo,i=!0;break;default:throw Error(s(161))}16&n.flags&&(yt(e,""),n.flags&=-17);t:e:for(n=t;;){for(;null===n.sibling;){if(null===n.return||va(n.return)){n=null;break t}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue e;if(null===n.child||4===n.tag)continue e;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break t}}i?function t(e,n,i){var r=e.tag,o=5===r||6===r;if(o)e=o?e.stateNode:e.stateNode.instance,n?8===i.nodeType?i.parentNode.insertBefore(e,n):i.insertBefore(e,n):(8===i.nodeType?(n=i.parentNode).insertBefore(e,i):(n=i).appendChild(e),null!==(i=i._reactRootContainer)&&void 0!==i||null!==n.onclick||(n.onclick=Ai));else if(4!==r&&null!==(e=e.child))for(t(e,n,i),e=e.sibling;null!==e;)t(e,n,i),e=e.sibling}(t,n,e):function t(e,n,i){var r=e.tag,o=5===r||6===r;if(o)e=o?e.stateNode:e.stateNode.instance,n?i.insertBefore(e,n):i.appendChild(e);else if(4!==r&&null!==(e=e.child))for(t(e,n,i),e=e.sibling;null!==e;)t(e,n,i),e=e.sibling}(t,n,e)}function ma(t,e){for(var n,i,r=e,o=!1;;){if(!o){o=r.return;t:for(;;){if(null===o)throw Error(s(160));switch(n=o.stateNode,o.tag){case 5:i=!1;break t;case 3:case 4:n=n.containerInfo,i=!0;break t}o=o.return}o=!0}if(5===r.tag||6===r.tag){t:for(var a=t,l=r,u=l;;)if(ga(a,u),null!==u.child&&4!==u.tag)u.child.return=u,u=u.child;else{if(u===l)break t;for(;null===u.sibling;){if(null===u.return||u.return===l)break t;u=u.return}u.sibling.return=u.return,u=u.sibling}i?(a=n,l=r.stateNode,8===a.nodeType?a.parentNode.removeChild(l):a.removeChild(l)):n.removeChild(r.stateNode)}else if(4===r.tag){if(null!==r.child){n=r.stateNode.containerInfo,i=!0,r.child.return=r,r=r.child;continue}}else if(ga(t,r),null!==r.child){r.child.return=r,r=r.child;continue}if(r===e)break;for(;null===r.sibling;){if(null===r.return||r.return===e)return;4===(r=r.return).tag&&(o=!1)}r.sibling.return=r.return,r=r.sibling}}function _a(t,e){switch(e.tag){case 0:case 11:case 14:case 15:case 22:var n=e.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var i=n=n.next;do{3===(3&i.tag)&&(t=i.destroy,i.destroy=void 0,void 0!==t&&t()),i=i.next}while(i!==n)}return;case 1:return;case 5:if(null!=(n=e.stateNode)){i=e.memoizedProps;var r=null!==t?t.memoizedProps:i;t=e.type;var o=e.updateQueue;if(e.updateQueue=null,null!==o){for(n[Hi]=i,"input"===t&&"radio"===i.type&&null!=i.name&&et(n,i),kt(t,r),e=kt(t,i),r=0;r<o.length;r+=2){var a=o[r],l=o[r+1];"style"===a?xt(n,l):"dangerouslySetInnerHTML"===a?vt(n,l):"children"===a?yt(n,l):b(n,a,l,e)}switch(t){case"input":nt(n,i);break;case"textarea":ut(n,i);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!i.multiple,null!=(o=i.value)?st(n,!!i.multiple,o,!1):t!==!!i.multiple&&(null!=i.defaultValue?st(n,!!i.multiple,i.defaultValue,!0):st(n,!!i.multiple,i.multiple?[]:"",!1))}}}return;case 6:if(null===e.stateNode)throw Error(s(162));return void(e.stateNode.nodeValue=e.memoizedProps);case 3:return void((n=e.stateNode).hydrate&&(n.hydrate=!1,xe(n.containerInfo)));case 12:return;case 13:return null!==e.memoizedState&&(Fa=Fr(),da(e.child,!0)),void ba(e);case 19:return void ba(e);case 17:return;case 23:case 24:return void da(e,null!==e.memoizedState)}throw Error(s(163))}function ba(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new ua),e.forEach((function(e){var i=Al.bind(null,t,e);n.has(e)||(n.add(e),e.then(i,i))}))}}function xa(t,e){return null!==t&&(null===(t=t.memoizedState)||null!==t.dehydrated)&&(null!==(e=e.memoizedState)&&null===e.dehydrated)}var Ea=Math.ceil,wa=x.ReactCurrentDispatcher,ka=x.ReactCurrentOwner,Sa=0,Ca=null,Oa=null,Ia=0,Ma=0,Ra=rr(0),Ta=0,Pa=null,La=0,Na=0,Aa=0,ja=0,Da=null,Fa=0,za=1/0;function Ga(){za=Fr()+500}var Ba,Va=null,Ya=!1,qa=null,Ua=null,Xa=!1,Wa=null,Ha=90,Za=[],Ka=[],Ja=null,Qa=0,$a=null,tl=-1,el=0,nl=0,il=null,rl=!1;function ol(){return 0!==(48&Sa)?Fr():-1!==tl?tl:tl=Fr()}function sl(t){if(0===(2&(t=t.mode)))return 1;if(0===(4&t))return 99===zr()?1:2;if(0===el&&(el=La),0!==Ur.transition){0!==nl&&(nl=null!==Da?Da.pendingLanes:0),t=el;var e=4186112&~nl;return 0===(e&=-e)&&(0===(e=(t=4186112&~t)&-t)&&(e=8192)),e}return t=zr(),0!==(4&Sa)&&98===t?t=ze(12,el):t=ze(t=function(t){switch(t){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(t),el),t}function al(t,e,n){if(50<Qa)throw Qa=0,$a=null,Error(s(185));if(null===(t=ll(t,e)))return null;Ve(t,e,n),t===Ca&&(Aa|=e,4===Ta&&hl(t,Ia));var i=zr();1===e?0!==(8&Sa)&&0===(48&Sa)?fl(t):(ul(t,n),0===Sa&&(Ga(),Yr())):(0===(4&Sa)||98!==i&&99!==i||(null===Ja?Ja=new Set([t]):Ja.add(t)),ul(t,n)),Da=t}function ll(t,e){t.lanes|=e;var n=t.alternate;for(null!==n&&(n.lanes|=e),n=t,t=t.return;null!==t;)t.childLanes|=e,null!==(n=t.alternate)&&(n.childLanes|=e),n=t,t=t.return;return 3===n.tag?n.stateNode:null}function ul(t,e){for(var n=t.callbackNode,i=t.suspendedLanes,r=t.pingedLanes,o=t.expirationTimes,a=t.pendingLanes;0<a;){var l=31-Ye(a),u=1<<l,c=o[l];if(-1===c){if(0===(u&i)||0!==(u&r)){c=e,je(u);var h=Ae;o[l]=10<=h?c+250:6<=h?c+5e3:-1}}else c<=e&&(t.expiredLanes|=u);a&=~u}if(i=De(t,t===Ca?Ia:0),e=Ae,0===i)null!==n&&(n!==Pr&&Er(n),t.callbackNode=null,t.callbackPriority=0);else{if(null!==n){if(t.callbackPriority===e)return;n!==Pr&&Er(n)}15===e?(n=fl.bind(null,t),null===Nr?(Nr=[n],Ar=xr(Or,qr)):Nr.push(n),n=Pr):14===e?n=Vr(99,fl.bind(null,t)):n=Vr(n=function(t){switch(t){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(s(358,t))}}(e),cl.bind(null,t)),t.callbackPriority=e,t.callbackNode=n}}function cl(t){if(tl=-1,nl=el=0,0!==(48&Sa))throw Error(s(327));var e=t.callbackNode;if(Il()&&t.callbackNode!==e)return null;var n=De(t,t===Ca?Ia:0);if(0===n)return null;var i=n,r=Sa;Sa|=16;var o=_l();for(Ca===t&&Ia===i||(Ga(),yl(t,i));;)try{El();break}catch(l){ml(t,l)}if(Jr(),wa.current=o,Sa=r,null!==Oa?i=0:(Ca=null,Ia=0,i=Ta),0!==(La&Aa))yl(t,0);else if(0!==i){if(2===i&&(Sa|=64,t.hydrate&&(t.hydrate=!1,Vi(t.containerInfo)),0!==(n=Fe(t))&&(i=bl(t,n))),1===i)throw e=Pa,yl(t,0),hl(t,n),ul(t,Fr()),e;switch(t.finishedWork=t.current.alternate,t.finishedLanes=n,i){case 0:case 1:throw Error(s(345));case 2:Sl(t);break;case 3:if(hl(t,n),(62914560&n)===n&&10<(i=Fa+500-Fr())){if(0!==De(t,0))break;if(((r=t.suspendedLanes)&n)!==n){ol(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Gi(Sl.bind(null,t),i);break}Sl(t);break;case 4:if(hl(t,n),(4186112&n)===n)break;for(i=t.eventTimes,r=-1;0<n;){var a=31-Ye(n);o=1<<a,(a=i[a])>r&&(r=a),n&=~o}if(n=r,10<(n=(120>(n=Fr()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Ea(n/1960))-n)){t.timeoutHandle=Gi(Sl.bind(null,t),n);break}Sl(t);break;case 5:Sl(t);break;default:throw Error(s(329))}}return ul(t,Fr()),t.callbackNode===e?cl.bind(null,t):null}function hl(t,e){for(e&=~ja,e&=~Aa,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ye(e),i=1<<n;t[n]=-1,e&=~i}}function fl(t){if(0!==(48&Sa))throw Error(s(327));if(Il(),t===Ca&&0!==(t.expiredLanes&Ia)){var e=Ia,n=bl(t,e);0!==(La&Aa)&&(n=bl(t,e=De(t,e)))}else n=bl(t,e=De(t,0));if(0!==t.tag&&2===n&&(Sa|=64,t.hydrate&&(t.hydrate=!1,Vi(t.containerInfo)),0!==(e=Fe(t))&&(n=bl(t,e))),1===n)throw n=Pa,yl(t,0),hl(t,e),ul(t,Fr()),n;return t.finishedWork=t.current.alternate,t.finishedLanes=e,Sl(t),ul(t,Fr()),null}function dl(t,e){var n=Sa;Sa|=1;try{return t(e)}finally{0===(Sa=n)&&(Ga(),Yr())}}function gl(t,e){var n=Sa;Sa&=-2,Sa|=8;try{return t(e)}finally{0===(Sa=n)&&(Ga(),Yr())}}function pl(t,e){sr(Ra,Ma),Ma|=e,La|=e}function vl(){Ma=Ra.current,or(Ra)}function yl(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(-1!==n&&(t.timeoutHandle=-1,Bi(n)),null!==Oa)for(n=Oa.return;null!==n;){var i=n;switch(i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&dr();break;case 3:Ro(),or(ur),or(lr),Uo();break;case 5:Po(i);break;case 4:Ro();break;case 13:case 19:or(Lo);break;case 10:Qr(i);break;case 23:case 24:vl()}n=n.return}Ca=t,Oa=zl(t.current,null),Ia=Ma=La=e,Ta=0,Pa=null,ja=Aa=Na=0}function ml(t,e){for(;;){var n=Oa;try{if(Jr(),Xo.current=Os,Qo){for(var i=Zo.memoizedState;null!==i;){var r=i.queue;null!==r&&(r.pending=null),i=i.next}Qo=!1}if(Ho=0,Jo=Ko=Zo=null,$o=!1,ka.current=null,null===n||null===n.return){Ta=1,Pa=e,Oa=null;break}t:{var o=t,s=n.return,a=n,l=e;if(e=Ia,a.flags|=2048,a.firstEffect=a.lastEffect=null,null!==l&&"object"===typeof l&&"function"===typeof l.then){var u=l;if(0===(2&a.mode)){var c=a.alternate;c?(a.updateQueue=c.updateQueue,a.memoizedState=c.memoizedState,a.lanes=c.lanes):(a.updateQueue=null,a.memoizedState=null)}var h=0!==(1&Lo.current),f=s;do{var d;if(d=13===f.tag){var g=f.memoizedState;if(null!==g)d=null!==g.dehydrated;else{var p=f.memoizedProps;d=void 0!==p.fallback&&(!0!==p.unstable_avoidThisFallback||!h)}}if(d){var v=f.updateQueue;if(null===v){var y=new Set;y.add(u),f.updateQueue=y}else v.add(u);if(0===(2&f.mode)){if(f.flags|=64,a.flags|=16384,a.flags&=-2981,1===a.tag)if(null===a.alternate)a.tag=17;else{var m=oo(-1,1);m.tag=2,so(a,m)}a.lanes|=1;break t}l=void 0,a=e;var _=o.pingCache;if(null===_?(_=o.pingCache=new sa,l=new Set,_.set(u,l)):void 0===(l=_.get(u))&&(l=new Set,_.set(u,l)),!l.has(a)){l.add(a);var b=Nl.bind(null,o,u,a);u.then(b,b)}f.flags|=4096,f.lanes=e;break t}f=f.return}while(null!==f);l=Error((W(a.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Ta&&(Ta=2),l=ra(l,a),f=s;do{switch(f.tag){case 3:o=l,f.flags|=4096,e&=-e,f.lanes|=e,ao(f,aa(0,o,e));break t;case 1:o=l;var x=f.type,E=f.stateNode;if(0===(64&f.flags)&&("function"===typeof x.getDerivedStateFromError||null!==E&&"function"===typeof E.componentDidCatch&&(null===Ua||!Ua.has(E)))){f.flags|=4096,e&=-e,f.lanes|=e,ao(f,la(f,o,e));break t}}f=f.return}while(null!==f)}kl(n)}catch(w){e=w,Oa===n&&null!==n&&(Oa=n=n.return);continue}break}}function _l(){var t=wa.current;return wa.current=Os,null===t?Os:t}function bl(t,e){var n=Sa;Sa|=16;var i=_l();for(Ca===t&&Ia===e||yl(t,e);;)try{xl();break}catch(r){ml(t,r)}if(Jr(),Sa=n,wa.current=i,null!==Oa)throw Error(s(261));return Ca=null,Ia=0,Ta}function xl(){for(;null!==Oa;)wl(Oa)}function El(){for(;null!==Oa&&!wr();)wl(Oa)}function wl(t){var e=Ba(t.alternate,t,Ma);t.memoizedProps=t.pendingProps,null===e?kl(t):Oa=e,ka.current=null}function kl(t){var e=t;do{var n=e.alternate;if(t=e.return,0===(2048&e.flags)){if(null!==(n=na(n,e,Ma)))return void(Oa=n);if(24!==(n=e).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Ma)||0===(4&n.mode)){for(var i=0,r=n.child;null!==r;)i|=r.lanes|r.childLanes,r=r.sibling;n.childLanes=i}null!==t&&0===(2048&t.flags)&&(null===t.firstEffect&&(t.firstEffect=e.firstEffect),null!==e.lastEffect&&(null!==t.lastEffect&&(t.lastEffect.nextEffect=e.firstEffect),t.lastEffect=e.lastEffect),1<e.flags&&(null!==t.lastEffect?t.lastEffect.nextEffect=e:t.firstEffect=e,t.lastEffect=e))}else{if(null!==(n=ia(e)))return n.flags&=2047,void(Oa=n);null!==t&&(t.firstEffect=t.lastEffect=null,t.flags|=2048)}if(null!==(e=e.sibling))return void(Oa=e);Oa=e=t}while(null!==e);0===Ta&&(Ta=5)}function Sl(t){var e=zr();return Br(99,Cl.bind(null,t,e)),null}function Cl(t,e){do{Il()}while(null!==Wa);if(0!==(48&Sa))throw Error(s(327));var n=t.finishedWork;if(null===n)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(s(177));t.callbackNode=null;var i=n.lanes|n.childLanes,r=i,o=t.pendingLanes&~r;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=r,t.mutableReadLanes&=r,t.entangledLanes&=r,r=t.entanglements;for(var a=t.eventTimes,l=t.expirationTimes;0<o;){var u=31-Ye(o),c=1<<u;r[u]=0,a[u]=-1,l[u]=-1,o&=~c}if(null!==Ja&&0===(24&i)&&Ja.has(t)&&Ja.delete(t),t===Ca&&(Oa=Ca=null,Ia=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,i=n.firstEffect):i=n:i=n.firstEffect,null!==i){if(r=Sa,Sa|=32,ka.current=null,ji=He,fi(a=hi())){if("selectionStart"in a)l={start:a.selectionStart,end:a.selectionEnd};else t:if(l=(l=a.ownerDocument)&&l.defaultView||window,(c=l.getSelection&&l.getSelection())&&0!==c.rangeCount){l=c.anchorNode,o=c.anchorOffset,u=c.focusNode,c=c.focusOffset;try{l.nodeType,u.nodeType}catch(C){l=null;break t}var h=0,f=-1,d=-1,g=0,p=0,v=a,y=null;e:for(;;){for(var m;v!==l||0!==o&&3!==v.nodeType||(f=h+o),v!==u||0!==c&&3!==v.nodeType||(d=h+c),3===v.nodeType&&(h+=v.nodeValue.length),null!==(m=v.firstChild);)y=v,v=m;for(;;){if(v===a)break e;if(y===l&&++g===o&&(f=h),y===u&&++p===c&&(d=h),null!==(m=v.nextSibling))break;y=(v=y).parentNode}v=m}l=-1===f||-1===d?null:{start:f,end:d}}else l=null;l=l||{start:0,end:0}}else l=null;Di={focusedElem:a,selectionRange:l},He=!1,il=null,rl=!1,Va=i;do{try{Ol()}catch(C){if(null===Va)throw Error(s(330));Ll(Va,C),Va=Va.nextEffect}}while(null!==Va);il=null,Va=i;do{try{for(a=t;null!==Va;){var _=Va.flags;if(16&_&&yt(Va.stateNode,""),128&_){var b=Va.alternate;if(null!==b){var x=b.ref;null!==x&&("function"===typeof x?x(null):x.current=null)}}switch(1038&_){case 2:ya(Va),Va.flags&=-3;break;case 6:ya(Va),Va.flags&=-3,_a(Va.alternate,Va);break;case 1024:Va.flags&=-1025;break;case 1028:Va.flags&=-1025,_a(Va.alternate,Va);break;case 4:_a(Va.alternate,Va);break;case 8:ma(a,l=Va);var E=l.alternate;pa(l),null!==E&&pa(E)}Va=Va.nextEffect}}catch(C){if(null===Va)throw Error(s(330));Ll(Va,C),Va=Va.nextEffect}}while(null!==Va);if(x=Di,b=hi(),_=x.focusedElem,a=x.selectionRange,b!==_&&_&&_.ownerDocument&&function t(e,n){return!(!e||!n)&&(e===n||(!e||3!==e.nodeType)&&(n&&3===n.nodeType?t(e,n.parentNode):"contains"in e?e.contains(n):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(n))))}(_.ownerDocument.documentElement,_)){null!==a&&fi(_)&&(b=a.start,void 0===(x=a.end)&&(x=b),"selectionStart"in _?(_.selectionStart=b,_.selectionEnd=Math.min(x,_.value.length)):(x=(b=_.ownerDocument||document)&&b.defaultView||window).getSelection&&(x=x.getSelection(),l=_.textContent.length,E=Math.min(a.start,l),a=void 0===a.end?E:Math.min(a.end,l),!x.extend&&E>a&&(l=a,a=E,E=l),l=ci(_,E),o=ci(_,a),l&&o&&(1!==x.rangeCount||x.anchorNode!==l.node||x.anchorOffset!==l.offset||x.focusNode!==o.node||x.focusOffset!==o.offset)&&((b=b.createRange()).setStart(l.node,l.offset),x.removeAllRanges(),E>a?(x.addRange(b),x.extend(o.node,o.offset)):(b.setEnd(o.node,o.offset),x.addRange(b))))),b=[];for(x=_;x=x.parentNode;)1===x.nodeType&&b.push({element:x,left:x.scrollLeft,top:x.scrollTop});for("function"===typeof _.focus&&_.focus(),_=0;_<b.length;_++)(x=b[_]).element.scrollLeft=x.left,x.element.scrollTop=x.top}He=!!ji,Di=ji=null,t.current=n,Va=i;do{try{for(_=t;null!==Va;){var w=Va.flags;if(36&w&&fa(_,Va.alternate,Va),128&w){b=void 0;var k=Va.ref;if(null!==k){var S=Va.stateNode;switch(Va.tag){case 5:b=S;break;default:b=S}"function"===typeof k?k(b):k.current=b}}Va=Va.nextEffect}}catch(C){if(null===Va)throw Error(s(330));Ll(Va,C),Va=Va.nextEffect}}while(null!==Va);Va=null,Lr(),Sa=r}else t.current=n;if(Xa)Xa=!1,Wa=t,Ha=e;else for(Va=i;null!==Va;)e=Va.nextEffect,Va.nextEffect=null,8&Va.flags&&((w=Va).sibling=null,w.stateNode=null),Va=e;if(0===(i=t.pendingLanes)&&(Ua=null),1===i?t===$a?Qa++:(Qa=0,$a=t):Qa=0,n=n.stateNode,_r&&"function"===typeof _r.onCommitFiberRoot)try{_r.onCommitFiberRoot(mr,n,void 0,64===(64&n.current.flags))}catch(C){}if(ul(t,Fr()),Ya)throw Ya=!1,t=qa,qa=null,t;return 0!==(8&Sa)||Yr(),null}function Ol(){for(;null!==Va;){var t=Va.alternate;rl||null===il||(0!==(8&Va.flags)?$t(Va,il)&&(rl=!0):13===Va.tag&&xa(t,Va)&&$t(Va,il)&&(rl=!0));var e=Va.flags;0!==(256&e)&&ha(t,Va),0===(512&e)||Xa||(Xa=!0,Vr(97,(function(){return Il(),null}))),Va=Va.nextEffect}}function Il(){if(90!==Ha){var t=97<Ha?97:Ha;return Ha=90,Br(t,Tl)}return!1}function Ml(t,e){Za.push(e,t),Xa||(Xa=!0,Vr(97,(function(){return Il(),null})))}function Rl(t,e){Ka.push(e,t),Xa||(Xa=!0,Vr(97,(function(){return Il(),null})))}function Tl(){if(null===Wa)return!1;var t=Wa;if(Wa=null,0!==(48&Sa))throw Error(s(331));var e=Sa;Sa|=32;var n=Ka;Ka=[];for(var i=0;i<n.length;i+=2){var r=n[i],o=n[i+1],a=r.destroy;if(r.destroy=void 0,"function"===typeof a)try{a()}catch(u){if(null===o)throw Error(s(330));Ll(o,u)}}for(n=Za,Za=[],i=0;i<n.length;i+=2){r=n[i],o=n[i+1];try{var l=r.create;r.destroy=l()}catch(u){if(null===o)throw Error(s(330));Ll(o,u)}}for(l=t.current.firstEffect;null!==l;)t=l.nextEffect,l.nextEffect=null,8&l.flags&&(l.sibling=null,l.stateNode=null),l=t;return Sa=e,Yr(),!0}function Pl(t,e,n){so(t,e=aa(0,e=ra(n,e),1)),e=ol(),null!==(t=ll(t,1))&&(Ve(t,1,e),ul(t,e))}function Ll(t,e){if(3===t.tag)Pl(t,t,e);else for(var n=t.return;null!==n;){if(3===n.tag){Pl(n,t,e);break}if(1===n.tag){var i=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===Ua||!Ua.has(i))){var r=la(n,t=ra(e,t),1);if(so(n,r),r=ol(),null!==(n=ll(n,1)))Ve(n,1,r),ul(n,r);else if("function"===typeof i.componentDidCatch&&(null===Ua||!Ua.has(i)))try{i.componentDidCatch(e,t)}catch(o){}break}}n=n.return}}function Nl(t,e,n){var i=t.pingCache;null!==i&&i.delete(e),e=ol(),t.pingedLanes|=t.suspendedLanes&n,Ca===t&&(Ia&n)===n&&(4===Ta||3===Ta&&(62914560&Ia)===Ia&&500>Fr()-Fa?yl(t,0):ja|=n),ul(t,e)}function Al(t,e){var n=t.stateNode;null!==n&&n.delete(e),0===(e=0)&&(0===(2&(e=t.mode))?e=1:0===(4&e)?e=99===zr()?1:2:(0===el&&(el=La),0===(e=Ge(62914560&~el))&&(e=4194304))),n=ol(),null!==(t=ll(t,e))&&(Ve(t,e,n),ul(t,n))}function jl(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Dl(t,e,n,i){return new jl(t,e,n,i)}function Fl(t){return!(!(t=t.prototype)||!t.isReactComponent)}function zl(t,e){var n=t.alternate;return null===n?((n=Dl(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Gl(t,e,n,i,r,o){var a=2;if(i=t,"function"===typeof t)Fl(t)&&(a=1);else if("string"===typeof t)a=5;else t:switch(t){case k:return Bl(n.children,r,o,e);case j:a=8,r|=16;break;case S:a=8,r|=1;break;case C:return(t=Dl(12,n,e,8|r)).elementType=C,t.type=C,t.lanes=o,t;case R:return(t=Dl(13,n,e,r)).type=R,t.elementType=R,t.lanes=o,t;case T:return(t=Dl(19,n,e,r)).elementType=T,t.lanes=o,t;case D:return Vl(n,r,o,e);case F:return(t=Dl(24,n,e,r)).elementType=F,t.lanes=o,t;default:if("object"===typeof t&&null!==t)switch(t.$$typeof){case O:a=10;break t;case I:a=9;break t;case M:a=11;break t;case P:a=14;break t;case L:a=16,i=null;break t;case N:a=22;break t}throw Error(s(130,null==t?t:typeof t,""))}return(e=Dl(a,n,e,r)).elementType=t,e.type=i,e.lanes=o,e}function Bl(t,e,n,i){return(t=Dl(7,t,i,e)).lanes=n,t}function Vl(t,e,n,i){return(t=Dl(23,t,i,e)).elementType=D,t.lanes=n,t}function Yl(t,e,n){return(t=Dl(6,t,null,e)).lanes=n,t}function ql(t,e,n){return(e=Dl(4,null!==t.children?t.children:[],t.key,e)).lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Ul(t,e,n){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Be(0),this.expirationTimes=Be(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Be(0),this.mutableSourceEagerHydrationData=null}function Xl(t,e,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==i?null:""+i,children:t,containerInfo:e,implementation:n}}function Wl(t,e,n,i){var r=e.current,o=ol(),a=sl(r);t:if(n){e:{if(Zt(n=n._reactInternals)!==n||1!==n.tag)throw Error(s(170));var l=n;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(fr(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(null!==l);throw Error(s(171))}if(1===n.tag){var u=n.type;if(fr(u)){n=pr(n,u,l);break t}}n=l}else n=ar;return null===e.context?e.context=n:e.pendingContext=n,(e=oo(o,a)).payload={element:t},null!==(i=void 0===i?null:i)&&(e.callback=i),so(r,e),al(r,a,o),a}function Hl(t){if(!(t=t.current).child)return null;switch(t.child.tag){case 5:default:return t.child.stateNode}}function Zl(t,e){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var n=t.retryLane;t.retryLane=0!==n&&n<e?n:e}}function Kl(t,e){Zl(t,e),(t=t.alternate)&&Zl(t,e)}function Jl(t,e,n){var i=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Ul(t,e,null!=n&&!0===n.hydrate),e=Dl(3,null,null,2===e?7:1===e?3:0),n.current=e,e.stateNode=n,io(e),t[Zi]=n.current,Oi(8===t.nodeType?t.parentNode:t),i)for(t=0;t<i.length;t++){var r=(e=i[t])._getVersion;r=r(e._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[e,r]:n.mutableSourceEagerHydrationData.push(e,r)}this._internalRoot=n}function Ql(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function $l(t,e,n,i,r){var o=n._reactRootContainer;if(o){var s=o._internalRoot;if("function"===typeof r){var a=r;r=function(){var t=Hl(s);a.call(t)}}Wl(e,s,t,r)}else{if(o=n._reactRootContainer=function(t,e){if(e||(e=!(!(e=t?9===t.nodeType?t.documentElement:t.firstChild:null)||1!==e.nodeType||!e.hasAttribute("data-reactroot"))),!e)for(var n;n=t.lastChild;)t.removeChild(n);return new Jl(t,0,e?{hydrate:!0}:void 0)}(n,i),s=o._internalRoot,"function"===typeof r){var l=r;r=function(){var t=Hl(s);l.call(t)}}gl((function(){Wl(e,s,t,r)}))}return Hl(s)}function tu(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Ql(e))throw Error(s(200));return Xl(t,e,null,n)}Ba=function(t,e,n){var i=e.lanes;if(null!==t)if(t.memoizedProps!==e.pendingProps||ur.current)Ps=!0;else{if(0===(n&i)){switch(Ps=!1,e.tag){case 3:Vs(e),Yo();break;case 5:To(e);break;case 1:fr(e.type)&&vr(e);break;case 4:Mo(e,e.stateNode.containerInfo);break;case 10:i=e.memoizedProps.value;var r=e.type._context;sr(Wr,r._currentValue),r._currentValue=i;break;case 13:if(null!==e.memoizedState)return 0!==(n&e.child.childLanes)?Ws(t,e,n):(sr(Lo,1&Lo.current),null!==(e=ta(t,e,n))?e.sibling:null);sr(Lo,1&Lo.current);break;case 19:if(i=0!==(n&e.childLanes),0!==(64&t.flags)){if(i)return $s(t,e,n);e.flags|=64}if(null!==(r=e.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),sr(Lo,Lo.current),i)break;return null;case 23:case 24:return e.lanes=0,Ds(t,e,n)}return ta(t,e,n)}Ps=0!==(16384&t.flags)}else Ps=!1;switch(e.lanes=0,e.tag){case 2:if(i=e.type,null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,r=hr(e,lr.current),to(e,n),r=ns(null,e,i,t,r,n),e.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof){if(e.tag=1,e.memoizedState=null,e.updateQueue=null,fr(i)){var o=!0;vr(e)}else o=!1;e.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,io(e);var a=i.getDerivedStateFromProps;"function"===typeof a&&ho(e,i,a,t),r.updater=fo,e.stateNode=r,r._reactInternals=e,yo(e,i,t,n),e=Bs(null,e,i,!0,o,n)}else e.tag=0,Ls(null,e,r,n),e=e.child;return e;case 16:r=e.elementType;t:{switch(null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,r=(o=r._init)(r._payload),e.type=r,o=e.tag=function(t){if("function"===typeof t)return Fl(t)?1:0;if(void 0!==t&&null!==t){if((t=t.$$typeof)===M)return 11;if(t===P)return 14}return 2}(r),t=Xr(r,t),o){case 0:e=zs(null,e,r,t,n);break t;case 1:e=Gs(null,e,r,t,n);break t;case 11:e=Ns(null,e,r,t,n);break t;case 14:e=As(null,e,r,Xr(r.type,t),i,n);break t}throw Error(s(306,r,""))}return e;case 0:return i=e.type,r=e.pendingProps,zs(t,e,i,r=e.elementType===i?r:Xr(i,r),n);case 1:return i=e.type,r=e.pendingProps,Gs(t,e,i,r=e.elementType===i?r:Xr(i,r),n);case 3:if(Vs(e),i=e.updateQueue,null===t||null===i)throw Error(s(282));if(i=e.pendingProps,r=null!==(r=e.memoizedState)?r.element:null,ro(t,e),lo(e,i,null,n),(i=e.memoizedState.element)===r)Yo(),e=ta(t,e,n);else{if((o=(r=e.stateNode).hydrate)&&(jo=Yi(e.stateNode.containerInfo.firstChild),Ao=e,o=Do=!0),o){if(null!=(t=r.mutableSourceEagerHydrationData))for(r=0;r<t.length;r+=2)(o=t[r])._workInProgressVersionPrimary=t[r+1],qo.push(o);for(n=wo(e,null,i,n),e.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Ls(t,e,i,n),Yo();e=e.child}return e;case 5:return To(e),null===t&&Go(e),i=e.type,r=e.pendingProps,o=null!==t?t.memoizedProps:null,a=r.children,zi(i,r)?a=null:null!==o&&zi(i,o)&&(e.flags|=16),Fs(t,e),Ls(t,e,a,n),e.child;case 6:return null===t&&Go(e),null;case 13:return Ws(t,e,n);case 4:return Mo(e,e.stateNode.containerInfo),i=e.pendingProps,null===t?e.child=Eo(e,null,i,n):Ls(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,Ns(t,e,i,r=e.elementType===i?r:Xr(i,r),n);case 7:return Ls(t,e,e.pendingProps,n),e.child;case 8:case 12:return Ls(t,e,e.pendingProps.children,n),e.child;case 10:t:{i=e.type._context,r=e.pendingProps,a=e.memoizedProps,o=r.value;var l=e.type._context;if(sr(Wr,l._currentValue),l._currentValue=o,null!==a)if(l=a.value,0===(o=si(l,o)?0:0|("function"===typeof i._calculateChangedBits?i._calculateChangedBits(l,o):1073741823))){if(a.children===r.children&&!ur.current){e=ta(t,e,n);break t}}else for(null!==(l=e.child)&&(l.return=e);null!==l;){var u=l.dependencies;if(null!==u){a=l.child;for(var c=u.firstContext;null!==c;){if(c.context===i&&0!==(c.observedBits&o)){1===l.tag&&((c=oo(-1,n&-n)).tag=2,so(l,c)),l.lanes|=n,null!==(c=l.alternate)&&(c.lanes|=n),$r(l.return,n),u.lanes|=n;break}c=c.next}}else a=10===l.tag&&l.type===e.type?null:l.child;if(null!==a)a.return=l;else for(a=l;null!==a;){if(a===e){a=null;break}if(null!==(l=a.sibling)){l.return=a.return,a=l;break}a=a.return}l=a}Ls(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=(o=e.pendingProps).children,to(e,n),i=i(r=eo(r,o.unstable_observedBits)),e.flags|=1,Ls(t,e,i,n),e.child;case 14:return o=Xr(r=e.type,e.pendingProps),As(t,e,r,o=Xr(r.type,o),i,n);case 15:return js(t,e,e.type,e.pendingProps,i,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Xr(i,r),null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),e.tag=1,fr(i)?(t=!0,vr(e)):t=!1,to(e,n),po(e,i,r),yo(e,i,r,n),Bs(null,e,i,!0,t,n);case 19:return $s(t,e,n);case 23:case 24:return Ds(t,e,n)}throw Error(s(156,e.tag))},Jl.prototype.render=function(t){Wl(t,this._internalRoot,null,null)},Jl.prototype.unmount=function(){var t=this._internalRoot,e=t.containerInfo;Wl(null,t,null,(function(){e[Zi]=null}))},te=function(t){13===t.tag&&(al(t,4,ol()),Kl(t,4))},ee=function(t){13===t.tag&&(al(t,67108864,ol()),Kl(t,67108864))},ne=function(t){if(13===t.tag){var e=ol(),n=sl(t);al(t,n,e),Kl(t,n)}},ie=function(t,e){return e()},Ct=function(t,e,n){switch(e){case"input":if(nt(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=tr(i);if(!r)throw Error(s(90));J(i),nt(i,r)}}}break;case"textarea":ut(t,n);break;case"select":null!=(e=n.value)&&st(t,!!n.multiple,e,!1)}},Pt=dl,Lt=function(t,e,n,i,r){var o=Sa;Sa|=4;try{return Br(98,t.bind(null,e,n,i,r))}finally{0===(Sa=o)&&(Ga(),Yr())}},Nt=function(){0===(49&Sa)&&(function(){if(null!==Ja){var t=Ja;Ja=null,t.forEach((function(t){t.expiredLanes|=24&t.pendingLanes,ul(t,Fr())}))}Yr()}(),Il())},At=function(t,e){var n=Sa;Sa|=2;try{return t(e)}finally{0===(Sa=n)&&(Ga(),Yr())}};var eu={Events:[Qi,$i,tr,Rt,Tt,Il,{current:!1}]},nu={findFiberByHostInstance:Ji,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},iu={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=Qt(t))?null:t.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{mr=ru.inject(iu),_r=ru}catch(ou){}}e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,e.createPortal=tu,e.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternals;if(void 0===e){if("function"===typeof t.render)throw Error(s(188));throw Error(s(268,Object.keys(t)))}return t=null===(t=Qt(e))?null:t.stateNode},e.flushSync=function(t,e){var n=Sa;if(0!==(48&n))return t(e);Sa|=1;try{if(t)return Br(99,t.bind(null,e))}finally{Sa=n,Yr()}},e.hydrate=function(t,e,n){if(!Ql(e))throw Error(s(200));return $l(null,t,e,!0,n)},e.render=function(t,e,n){if(!Ql(e))throw Error(s(200));return $l(null,t,e,!1,n)},e.unmountComponentAtNode=function(t){if(!Ql(t))throw Error(s(40));return!!t._reactRootContainer&&(gl((function(){$l(null,null,t,!1,(function(){t._reactRootContainer=null,t[Zi]=null}))})),!0)},e.unstable_batchedUpdates=dl,e.unstable_createPortal=function(t,e){return tu(t,e,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},e.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Ql(n))throw Error(s(200));if(null==t||void 0===t._reactInternals)throw Error(s(38));return $l(t,e,n,!1,i)},e.version="17.0.2"},function(t,e,n){"use strict";t.exports=n(103)},function(t,e,n){"use strict";var i,r,o,s;if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;e.unstable_now=function(){return a.now()}}else{var l=Date,u=l.now();e.unstable_now=function(){return l.now()-u}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var c=null,h=null,f=function(){if(null!==c)try{var t=e.unstable_now();c(!0,t),c=null}catch(n){throw setTimeout(f,0),n}};i=function(t){null!==c?setTimeout(i,0,t):(c=t,setTimeout(f,0))},r=function(t,e){h=setTimeout(t,e)},o=function(){clearTimeout(h)},e.unstable_shouldYield=function(){return!1},s=e.unstable_forceFrameRate=function(){}}else{var d=window.setTimeout,g=window.clearTimeout;if("undefined"!==typeof console){var p=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof p&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var v=!1,y=null,m=-1,_=5,b=0;e.unstable_shouldYield=function(){return e.unstable_now()>=b},s=function(){},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<t?Math.floor(1e3/t):5};var x=new MessageChannel,E=x.port2;x.port1.onmessage=function(){if(null!==y){var t=e.unstable_now();b=t+_;try{y(!0,t)?E.postMessage(null):(v=!1,y=null)}catch(n){throw E.postMessage(null),n}}else v=!1},i=function(t){y=t,v||(v=!0,E.postMessage(null))},r=function(t,n){m=d((function(){t(e.unstable_now())}),n)},o=function(){g(m),m=-1}}function w(t,e){var n=t.length;t.push(e);t:for(;;){var i=n-1>>>1,r=t[i];if(!(void 0!==r&&0<C(r,e)))break t;t[i]=e,t[n]=r,n=i}}function k(t){return void 0===(t=t[0])?null:t}function S(t){var e=t[0];if(void 0!==e){var n=t.pop();if(n!==e){t[0]=n;t:for(var i=0,r=t.length;i<r;){var o=2*(i+1)-1,s=t[o],a=o+1,l=t[a];if(void 0!==s&&0>C(s,n))void 0!==l&&0>C(l,s)?(t[i]=l,t[a]=n,i=a):(t[i]=s,t[o]=n,i=o);else{if(!(void 0!==l&&0>C(l,n)))break t;t[i]=l,t[a]=n,i=a}}}return e}return null}function C(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}var O=[],I=[],M=1,R=null,T=3,P=!1,L=!1,N=!1;function A(t){for(var e=k(I);null!==e;){if(null===e.callback)S(I);else{if(!(e.startTime<=t))break;S(I),e.sortIndex=e.expirationTime,w(O,e)}e=k(I)}}function j(t){if(N=!1,A(t),!L)if(null!==k(O))L=!0,i(D);else{var e=k(I);null!==e&&r(j,e.startTime-t)}}function D(t,n){L=!1,N&&(N=!1,o()),P=!0;var i=T;try{for(A(n),R=k(O);null!==R&&(!(R.expirationTime>n)||t&&!e.unstable_shouldYield());){var s=R.callback;if("function"===typeof s){R.callback=null,T=R.priorityLevel;var a=s(R.expirationTime<=n);n=e.unstable_now(),"function"===typeof a?R.callback=a:R===k(O)&&S(O),A(n)}else S(O);R=k(O)}if(null!==R)var l=!0;else{var u=k(I);null!==u&&r(j,u.startTime-n),l=!1}return l}finally{R=null,T=i,P=!1}}var F=s;e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){L||P||(L=!0,i(D))},e.unstable_getCurrentPriorityLevel=function(){return T},e.unstable_getFirstCallbackNode=function(){return k(O)},e.unstable_next=function(t){switch(T){case 1:case 2:case 3:var e=3;break;default:e=T}var n=T;T=e;try{return t()}finally{T=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=F,e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=T;T=t;try{return e()}finally{T=n}},e.unstable_scheduleCallback=function(t,n,s){var a=e.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?a+s:a:s=a,t){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return t={id:M++,callback:n,priorityLevel:t,startTime:s,expirationTime:l=s+l,sortIndex:-1},s>a?(t.sortIndex=s,w(I,t),null===k(O)&&t===k(I)&&(N?o():N=!0,r(j,s-a))):(t.sortIndex=l,w(O,t),L||P||(L=!0,i(D))),t},e.unstable_wrapCallback=function(t){var e=T;return function(){var n=T;T=e;try{return t.apply(this,arguments)}finally{T=n}}}},,,,,,,,,function(t,e,n){},function(t,e,n){},,,,,,function(t,e,n){"use strict";var i=n(32),r=n(23),o=n(27),s=n(66),a=n(36),l=n(62),u=n(16),c=n(21),h=n(53),f=n(13),d=n(3),g=n(17);const p="select";class v extends o.a{constructor(t,e,n,i){super(t),this.selected=e,this.deselected=n,this.mapBrowserEvent=i}}const y={};class m extends a.a{constructor(t){let e;if(super(),this.on,this.once,this.un,t=t||{},this.boundAddFeature_=this.addFeature_.bind(this),this.boundRemoveFeature_=this.removeFeature_.bind(this),this.condition_=t.condition?t.condition:g.l,this.addCondition_=t.addCondition?t.addCondition:g.h,this.removeCondition_=t.removeCondition?t.removeCondition:g.h,this.toggleCondition_=t.toggleCondition?t.toggleCondition:g.k,this.multi_=!!t.multi&&t.multi,this.filter_=t.filter?t.filter:u.b,this.hitTolerance_=t.hitTolerance?t.hitTolerance:0,this.style_=void 0!==t.style?t.style:function(){const t=Object(h.b)();return Object(f.c)(t.Polygon,t.LineString),Object(f.c)(t.GeometryCollection,t.LineString),function(e){return e.getGeometry()?t[e.getGeometry().getType()]:null}}(),this.features_=t.features||new i.a,t.layers)if("function"===typeof t.layers)e=t.layers;else{const n=t.layers;e=function(t){return n.includes(t)}}else e=u.b;this.layerFilter_=e,this.featureLayerAssociation_={}}addFeatureLayerAssociation_(t,e){this.featureLayerAssociation_[Object(d.b)(t)]=e}getFeatures(){return this.features_}getHitTolerance(){return this.hitTolerance_}getLayer(t){return this.featureLayerAssociation_[Object(d.b)(t)]}setHitTolerance(t){this.hitTolerance_=t}setMap(t){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),super.setMap(t),t?(this.features_.addEventListener(r.a.ADD,this.boundAddFeature_),this.features_.addEventListener(r.a.REMOVE,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(r.a.ADD,this.boundAddFeature_),this.features_.removeEventListener(r.a.REMOVE,this.boundRemoveFeature_))}addFeature_(t){const e=t.element;if(this.style_&&this.applySelectedStyle_(e),!this.getLayer(e)){const t=this.getMap().getAllLayers().find((function(t){if(t instanceof l.a&&t.getSource()&&t.getSource().hasFeature(e))return t}));t&&this.addFeatureLayerAssociation_(e,t)}}removeFeature_(t){this.style_&&this.restorePreviousStyle_(t.element)}getStyle(){return this.style_}applySelectedStyle_(t){const e=Object(d.b)(t);e in y||(y[e]=t.getStyle()),t.setStyle(this.style_)}restorePreviousStyle_(t){const e=this.getMap().getInteractions().getArray();for(let i=e.length-1;i>=0;--i){const n=e[i];if(n!==this&&n instanceof m&&n.getStyle()&&-1!==n.getFeatures().getArray().lastIndexOf(t))return void t.setStyle(n.getStyle())}const n=Object(d.b)(t);t.setStyle(y[n]),delete y[n]}removeFeatureLayerAssociation_(t){delete this.featureLayerAssociation_[Object(d.b)(t)]}handleEvent(t){if(!this.condition_(t))return!0;const e=this.addCondition_(t),n=this.removeCondition_(t),i=this.toggleCondition_(t),r=!e&&!n&&!i,o=t.map,a=this.getFeatures(),l=[],u=[];if(r){Object(c.a)(this.featureLayerAssociation_),o.forEachFeatureAtPixel(t.pixel,function(t,e){if(t instanceof s.a&&this.filter_(t,e))return this.addFeatureLayerAssociation_(t,e),u.push(t),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let t=a.getLength()-1;t>=0;--t){const e=a.item(t),n=u.indexOf(e);n>-1?u.splice(n,1):(a.remove(e),l.push(e))}0!==u.length&&a.extend(u)}else{o.forEachFeatureAtPixel(t.pixel,function(t,r){if(t instanceof s.a&&this.filter_(t,r))return!e&&!i||a.getArray().includes(t)?(n||i)&&a.getArray().includes(t)&&(l.push(t),this.removeFeatureLayerAssociation_(t)):(this.addFeatureLayerAssociation_(t,r),u.push(t)),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let t=l.length-1;t>=0;--t)a.remove(l[t]);a.extend(u)}return(u.length>0||l.length>0)&&this.dispatchEvent(new v(p,u,l,t)),!0}}e.a=m},function(t,e,n){"use strict";var i=n(24),r=n(32),o=n(23),s=n(60),a=n(16),l=n(3),u=n(14),c=n(2),h=n(63),f=n(40),d=n(31);class g extends s.a{constructor(t){super(),this.map_=t}dispatchRenderEvent(t,e){Object(l.a)()}calculateMatrices2D(t){const e=t.viewState,n=t.coordinateToPixelTransform,i=t.pixelToCoordinateTransform;Object(u.b)(n,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),Object(u.d)(i,n)}forEachFeatureAtCoordinate(t,e,n,i,r,o,s,a){let l;const u=e.viewState;function h(t,e,n,i){return r.call(o,e,t?n:null,i)}const g=u.projection,p=Object(d.f)(t.slice(),g),v=[[0,0]];if(g.canWrapX()&&i){const t=g.getExtent(),e=Object(c.E)(t);v.push([-e,0],[e,0])}const y=e.layerStatesArray,m=y.length,_=[],b=[];for(let c=0;c<v.length;c++)for(let i=m-1;i>=0;--i){const r=y[i],o=r.layer;if(o.hasRenderer()&&Object(f.b)(r,u)&&s.call(a,o)){const i=o.getRenderer(),s=o.getSource();if(i&&s){const o=s.getWrapX()?p:t,a=h.bind(null,r.managed);b[0]=o[0]+v[c][0],b[1]=o[1]+v[c][1],l=i.forEachFeatureAtCoordinate(b,e,n,a,_)}if(l)return l}}if(0===_.length)return;const x=1/_.length;return _.forEach((t,e)=>t.distanceSq+=e*x),_.sort((t,e)=>t.distanceSq-e.distanceSq),_.some(t=>l=t.callback(t.feature,t.layer,t.geometry)),l}hasFeatureAtCoordinate(t,e,n,i,r,o){return void 0!==this.forEachFeatureAtCoordinate(t,e,n,i,a.b,this,r,o)}getMap(){return this.map_}renderFrame(t){Object(l.a)()}scheduleExpireIconCache(t){h.a.canExpireCache()&&t.postRenderFunctions.push(p)}}function p(t,e){h.a.expire()}var v=g,y=n(47),m=n(84),_=n(44),b=n(25),x=n(9),E=n(8),w=n(15);var k=class extends v{constructor(t){super(t),this.fontChangeListenerKey_=Object(E.a)(x.a,y.a.PROPERTYCHANGE,t.redrawText.bind(t)),this.element_=document.createElement("div");const e=this.element_.style;e.position="absolute",e.width="100%",e.height="100%",e.zIndex="0",this.element_.className=b.e+" ol-layers";const n=t.getViewport();n.insertBefore(this.element_,n.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(t,e){const n=this.getMap();if(n.hasListener(t)){const i=new m.a(t,void 0,e);n.dispatchEvent(i)}}disposeInternal(){Object(E.c)(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(t){if(!t)return void(this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1));this.calculateMatrices2D(t),this.dispatchRenderEvent(_.a.PRECOMPOSE,t);const e=t.layerStatesArray.sort((function(t,e){return t.zIndex-e.zIndex})),n=t.viewState;this.children_.length=0;const i=[];let r=null;for(let o=0,s=e.length;o<s;++o){const s=e[o];t.layerIndex=o;const a=s.layer,l=a.getSourceState();if(!Object(f.b)(s,n)||"ready"!=l&&"undefined"!=l){a.unrender();continue}const u=a.render(t,r);u&&(u!==r&&(this.children_.push(u),r=u),"getDeclutter"in a&&i.push(a))}for(let o=i.length-1;o>=0;--o)i[o].renderDeclutter(t);Object(w.g)(this.element_,this.children_),this.dispatchRenderEvent(_.a.POSTCOMPOSE,t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}},S=n(10),C=n(81),O=n(27),I=n(12),M=n(21);class R extends O.a{constructor(t,e){super(t),this.layer=e}}const T="layers";class P extends C.a{constructor(t){t=t||{};const e=Object.assign({},t);delete e.layers;let n=t.layers;super(e),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(T,this.handleLayersChanged_),n?Array.isArray(n)?n=new r.a(n.slice(),{unique:!0}):Object(I.a)("function"===typeof n.getArray,43):n=new r.a(void 0,{unique:!0}),this.setLayers(n)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(E.c),this.layersListenerKeys_.length=0;const t=this.getLayers();this.layersListenerKeys_.push(Object(E.a)(t,o.a.ADD,this.handleLayersAdd_,this),Object(E.a)(t,o.a.REMOVE,this.handleLayersRemove_,this));for(const n in this.listenerKeys_)this.listenerKeys_[n].forEach(E.c);Object(M.a)(this.listenerKeys_);const e=t.getArray();for(let n=0,i=e.length;n<i;n++){const t=e[n];this.registerLayerListeners_(t),this.dispatchEvent(new R("addlayer",t))}this.changed()}registerLayerListeners_(t){const e=[Object(E.a)(t,y.a.PROPERTYCHANGE,this.handleLayerChange_,this),Object(E.a)(t,S.a.CHANGE,this.handleLayerChange_,this)];t instanceof P&&e.push(Object(E.a)(t,"addlayer",this.handleLayerGroupAdd_,this),Object(E.a)(t,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[Object(l.b)(t)]=e}handleLayerGroupAdd_(t){this.dispatchEvent(new R("addlayer",t.layer))}handleLayerGroupRemove_(t){this.dispatchEvent(new R("removelayer",t.layer))}handleLayersAdd_(t){const e=t.element;this.registerLayerListeners_(e),this.dispatchEvent(new R("addlayer",e)),this.changed()}handleLayersRemove_(t){const e=t.element,n=Object(l.b)(e);this.listenerKeys_[n].forEach(E.c),delete this.listenerKeys_[n],this.dispatchEvent(new R("removelayer",e)),this.changed()}getLayers(){return this.get(T)}setLayers(t){const e=this.getLayers();if(e){const t=e.getArray();for(let e=0,n=t.length;e<n;++e)this.dispatchEvent(new R("removelayer",t[e]))}this.set(T,t)}getLayersArray(t){return t=void 0!==t?t:[],this.getLayers().forEach((function(e){e.getLayersArray(t)})),t}getLayerStatesArray(t){const e=void 0!==t?t:[],n=e.length;this.getLayers().forEach((function(t){t.getLayerStatesArray(e)}));const i=this.getLayerState();let r=i.zIndex;t||void 0!==i.zIndex||(r=0);for(let o=n,s=e.length;o<s;o++){const t=e[o];t.opacity*=i.opacity,t.visible=t.visible&&i.visible,t.maxResolution=Math.min(t.maxResolution,i.maxResolution),t.minResolution=Math.max(t.minResolution,i.minResolution),t.minZoom=Math.max(t.minZoom,i.minZoom),t.maxZoom=Math.min(t.maxZoom,i.maxZoom),void 0!==i.extent&&(void 0!==t.extent?t.extent=Object(c.A)(t.extent,i.extent):t.extent=i.extent),void 0===t.zIndex&&(t.zIndex=r)}return e}getSourceState(){return"ready"}}var L=P;class N extends O.a{constructor(t,e,n){super(t),this.map=e,this.frameState=void 0!==n?n:null}}var A=N;var j=class extends A{constructor(t,e,n,i,r,o){super(t,e,r),this.originalEvent=n,this.pixel_=null,this.coordinate_=null,this.dragging=void 0!==i&&i,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(t){this.pixel_=t}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(t){this.coordinate_=t}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}},D=n(20),F="pointermove",z="pointerdown",G=n(48),B=n(28);class V extends G.a{constructor(t,e){super(t),this.map_=t,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=void 0===e?1:e,this.down_=null;const n=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=n,this.pointerdownListenerKey_=Object(E.a)(n,z,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=Object(E.a)(n,F,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(S.a.TOUCHMOVE,this.boundHandleTouchMove_,!!B.e&&{passive:!1})}emulateClick_(t){let e=new j(D.a.CLICK,this.map_,t);this.dispatchEvent(e),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new j(D.a.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;const e=new j(D.a.SINGLECLICK,this.map_,t);this.dispatchEvent(e)}.bind(this),250)}updateActivePointers_(t){const e=t,n=e.pointerId;if(e.type==D.a.POINTERUP||e.type==D.a.POINTERCANCEL){delete this.trackedTouches_[n];for(const t in this.trackedTouches_)if(this.trackedTouches_[t].target!==e.target){delete this.trackedTouches_[t];break}}else e.type!=D.a.POINTERDOWN&&e.type!=D.a.POINTERMOVE||(this.trackedTouches_[n]=e);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(t){this.updateActivePointers_(t);const e=new j(D.a.POINTERUP,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(e),this.emulateClicks_&&!e.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),0===this.activePointers_.length&&(this.dragListenerKeys_.forEach(E.c),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(t){return 0===t.button}handlePointerDown_(t){this.emulateClicks_=0===this.activePointers_.length,this.updateActivePointers_(t);const e=new j(D.a.POINTERDOWN,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(e),this.down_={};for(const n in t){const e=t[n];this.down_[n]="function"===typeof e?a.c:e}if(0===this.dragListenerKeys_.length){const t=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Object(E.a)(t,D.a.POINTERMOVE,this.handlePointerMove_,this),Object(E.a)(t,D.a.POINTERUP,this.handlePointerUp_,this),Object(E.a)(this.element_,D.a.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==t&&this.dragListenerKeys_.push(Object(E.a)(this.element_.getRootNode(),D.a.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(t){if(this.isMoving_(t)){this.updateActivePointers_(t),this.dragging_=!0;const e=new j(D.a.POINTERDRAG,this.map_,t,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(e)}}relayMoveEvent_(t){this.originalPointerMoveEvent_=t;const e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new j(D.a.POINTERMOVE,this.map_,t,e))}handleTouchMove_(t){const e=this.originalPointerMoveEvent_;e&&!e.defaultPrevented||"boolean"===typeof t.cancelable&&!0!==t.cancelable||t.preventDefault()}isMoving_(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(Object(E.c)(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(S.a.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Object(E.c)(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(E.c),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}var Y=V,q=n(45),U="layergroup",X="size",W="target",H="view";var Z=class{constructor(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,Object(M.a)(this.queuedElements_)}dequeue(){const t=this.elements_,e=this.priorities_,n=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));const i=this.keyFunction_(n);return delete this.queuedElements_[i],n}enqueue(t){Object(I.a)(!(this.keyFunction_(t)in this.queuedElements_),31);const e=this.priorityFunction_(t);return e!=1/0&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)}getCount(){return this.elements_.length}getLeftChildIndex_(t){return 2*t+1}getRightChildIndex_(t){return 2*t+2}getParentIndex_(t){return t-1>>1}heapify_(){let t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)}isEmpty(){return 0===this.elements_.length}isKeyQueued(t){return t in this.queuedElements_}isQueued(t){return this.isKeyQueued(this.keyFunction_(t))}siftUp_(t){const e=this.elements_,n=this.priorities_,i=e.length,r=e[t],o=n[t],s=t;for(;t<i>>1;){const r=this.getLeftChildIndex_(t),o=this.getRightChildIndex_(t),s=o<i&&n[o]<n[r]?o:r;e[t]=e[s],n[t]=n[s],t=s}e[t]=r,n[t]=o,this.siftDown_(s,t)}siftDown_(t,e){const n=this.elements_,i=this.priorities_,r=n[e],o=i[e];for(;e>t;){const t=this.getParentIndex_(e);if(!(i[t]>o))break;n[e]=n[t],i[e]=i[t],e=t}n[e]=r,i[e]=o}reprioritize(){const t=this.priorityFunction_,e=this.elements_,n=this.priorities_;let i=0;const r=e.length;let o,s,a;for(s=0;s<r;++s)o=e[s],a=t(o),a==1/0?delete this.queuedElements_[this.keyFunction_(o)]:(n[i]=a,e[i++]=o);e.length=i,n.length=i,this.heapify_()}},K=n(11);var J=class extends Z{constructor(t,e){super((function(e){return t.apply(null,e)}),(function(t){return t[0].getKey()})),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=e,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(t){const e=super.enqueue(t);if(e){t[0].addEventListener(S.a.CHANGE,this.boundHandleTileChange_)}return e}getTilesLoading(){return this.tilesLoading_}handleTileChange(t){const e=t.target,n=e.getState();if(n===K.a.LOADED||n===K.a.ERROR||n===K.a.EMPTY){n!==K.a.ERROR&&e.removeEventListener(S.a.CHANGE,this.boundHandleTileChange_);const t=e.getKey();t in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[t],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(t,e){let n,i,r,o=0;for(;this.tilesLoading_<t&&o<e&&this.getCount()>0;)i=this.dequeue()[0],r=i.getKey(),n=i.getState(),n!==K.a.IDLE||r in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[r]=!0,++this.tilesLoading_,++o,i.load())}};var Q=n(56),$=n(30);class tt extends i.a{constructor(t){super();const e=t.element;!e||t.target||e.style.pointerEvents||(e.style.pointerEvents="auto"),this.element=e||null,this.target_=null,this.map_=null,this.listenerKeys=[],t.render&&(this.render=t.render),t.target&&this.setTarget(t.target)}disposeInternal(){Object(w.f)(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(t){this.map_&&Object(w.f)(this.element);for(let e=0,n=this.listenerKeys.length;e<n;++e)Object(E.c)(this.listenerKeys[e]);if(this.listenerKeys.length=0,this.map_=t,t){(this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==a.c&&this.listenerKeys.push(Object(E.a)(t,q.a.POSTRENDER,this.render,this)),t.render()}}render(t){}setTarget(t){this.target_="string"===typeof t?document.getElementById(t):t}}var et=tt,nt=n(13);var it=class extends et{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=void 0===t.collapsed||t.collapsed,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=void 0!==t.collapsible,this.collapsible_=void 0===t.collapsible||t.collapsible,this.collapsible_||(this.collapsed_=!1);const e=void 0!==t.className?t.className:"ol-attribution",n=void 0!==t.tipLabel?t.tipLabel:"Attributions",i=void 0!==t.expandClassName?t.expandClassName:e+"-expand",r=void 0!==t.collapseLabel?t.collapseLabel:"\u203a",o=void 0!==t.collapseClassName?t.collapseClassName:e+"-collapse";"string"===typeof r?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=r,this.collapseLabel_.className=o):this.collapseLabel_=r;const s=void 0!==t.label?t.label:"i";"string"===typeof s?(this.label_=document.createElement("span"),this.label_.textContent=s,this.label_.className=i):this.label_=s;const a=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=n,this.toggleButton_.appendChild(a),this.toggleButton_.addEventListener(S.a.CLICK,this.handleClick_.bind(this),!1);const l=e+" "+b.e+" "+b.b+(this.collapsed_&&this.collapsible_?" "+b.a:"")+(this.collapsible_?"":" ol-uncollapsible"),u=this.element;u.className=l,u.appendChild(this.toggleButton_),u.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(t){const e={},n=[];let i=!0;const r=t.layerStatesArray;for(let o=0,s=r.length;o<s;++o){const s=r[o];if(!Object(f.b)(s,t.viewState))continue;const a=s.layer.getSource();if(!a)continue;const l=a.getAttributions();if(!l)continue;const u=l(t);if(u)if(i=i&&!1!==a.getAttributionsCollapsible(),Array.isArray(u))for(let t=0,i=u.length;t<i;++t)u[t]in e||(n.push(u[t]),e[u[t]]=!0);else u in e||(n.push(u),e[u]=!0)}return this.overrideCollapsible_||this.setCollapsible(i),n}updateElement_(t){if(!t)return void(this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1));const e=this.collectSourceAttributions_(t),n=e.length>0;if(this.renderedVisible_!=n&&(this.element.style.display=n?"":"none",this.renderedVisible_=n),!Object(nt.b)(e,this.renderedAttributions_)){Object(w.e)(this.ulElement_);for(let t=0,n=e.length;t<n;++t){const n=document.createElement("li");n.innerHTML=e[t],this.ulElement_.appendChild(n)}this.renderedAttributions_=e}}handleClick_(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(b.a),this.collapsed_?Object(w.h)(this.collapseLabel_,this.label_):Object(w.h)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(t){this.userCollapsed_=t,this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(t){this.updateElement_(t.frameState)}},rt=n(35);var ot=class extends et{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target});const e=void 0!==t.className?t.className:"ol-rotate",n=void 0!==t.label?t.label:"\u21e7",i=void 0!==t.compassClassName?t.compassClassName:"ol-compass";this.label_=null,"string"===typeof n?(this.label_=document.createElement("span"),this.label_.className=i,this.label_.textContent=n):(this.label_=n,this.label_.classList.add(i));const r=t.tipLabel?t.tipLabel:"Reset rotation",o=document.createElement("button");o.className=e+"-reset",o.setAttribute("type","button"),o.title=r,o.appendChild(this.label_),o.addEventListener(S.a.CLICK,this.handleClick_.bind(this),!1);const s=e+" "+b.e+" "+b.b,a=this.element;a.className=s,a.appendChild(o),this.callResetNorth_=t.resetNorth?t.resetNorth:void 0,this.duration_=void 0!==t.duration?t.duration:250,this.autoHide_=void 0===t.autoHide||t.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(b.c)}handleClick_(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const e=t.getRotation();void 0!==e&&(this.duration_>0&&e%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:rt.b}):t.setRotation(0))}render(t){const e=t.frameState;if(!e)return;const n=e.viewState.rotation;if(n!=this.rotation_){const t="rotate("+n+"rad)";if(this.autoHide_){const t=this.element.classList.contains(b.c);t||0!==n?t&&0!==n&&this.element.classList.remove(b.c):this.element.classList.add(b.c)}this.label_.style.transform=t}this.rotation_=n}};var st=class extends et{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target});const e=void 0!==t.className?t.className:"ol-zoom",n=void 0!==t.delta?t.delta:1,i=void 0!==t.zoomInClassName?t.zoomInClassName:e+"-in",r=void 0!==t.zoomOutClassName?t.zoomOutClassName:e+"-out",o=void 0!==t.zoomInLabel?t.zoomInLabel:"+",s=void 0!==t.zoomOutLabel?t.zoomOutLabel:"\u2013",a=void 0!==t.zoomInTipLabel?t.zoomInTipLabel:"Zoom in",l=void 0!==t.zoomOutTipLabel?t.zoomOutTipLabel:"Zoom out",u=document.createElement("button");u.className=i,u.setAttribute("type","button"),u.title=a,u.appendChild("string"===typeof o?document.createTextNode(o):o),u.addEventListener(S.a.CLICK,this.handleClick_.bind(this,n),!1);const c=document.createElement("button");c.className=r,c.setAttribute("type","button"),c.title=l,c.appendChild("string"===typeof s?document.createTextNode(s):s),c.addEventListener(S.a.CLICK,this.handleClick_.bind(this,-n),!1);const h=e+" "+b.e+" "+b.b,f=this.element;f.className=h,f.appendChild(u),f.appendChild(c),this.duration_=void 0!==t.duration?t.duration:250}handleClick_(t,e){e.preventDefault(),this.zoomByDelta_(t)}zoomByDelta_(t){const e=this.getMap().getView();if(!e)return;const n=e.getZoom();if(void 0!==n){const i=e.getConstrainedZoom(n+t);this.duration_>0?(e.getAnimating()&&e.cancelAnimations(),e.animate({zoom:i,duration:this.duration_,easing:rt.b})):e.setZoom(i)}}};var at=n(36);class lt extends at.a{constructor(t){super(),t=t||{},this.delta_=t.delta?t.delta:1,this.duration_=void 0!==t.duration?t.duration:250}handleEvent(t){let e=!1;if(t.type==D.a.DBLCLICK){const n=t.originalEvent,i=t.map,r=t.coordinate,o=n.shiftKey?-this.delta_:this.delta_,s=i.getView();Object(at.c)(s,o,r,this.duration_),n.preventDefault(),e=!0}return!e}}var ut=lt;class ct extends at.a{constructor(t){super(t=t||{}),t.handleDownEvent&&(this.handleDownEvent=t.handleDownEvent),t.handleDragEvent&&(this.handleDragEvent=t.handleDragEvent),t.handleMoveEvent&&(this.handleMoveEvent=t.handleMoveEvent),t.handleUpEvent&&(this.handleUpEvent=t.handleUpEvent),t.stopDown&&(this.stopDown=t.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(t){return!1}handleDragEvent(t){}handleEvent(t){if(!t.originalEvent)return!0;let e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==D.a.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==D.a.POINTERUP){const e=this.handleUpEvent(t);this.handlingDownUpSequence=e&&this.targetPointers.length>0}}else if(t.type==D.a.POINTERDOWN){const n=this.handleDownEvent(t);this.handlingDownUpSequence=n,e=this.stopDown(n)}else t.type==D.a.POINTERMOVE&&this.handleMoveEvent(t);return!e}handleMoveEvent(t){}handleUpEvent(t){return!1}stopDown(t){return t}updateTrackedPointers_(t){t.activePointers&&(this.targetPointers=t.activePointers)}}function ht(t){const e=t.length;let n=0,i=0;for(let r=0;r<e;r++)n+=t[r].clientX,i+=t[r].clientY;return[n/e,i/e]}var ft=ct,dt=n(17);var gt=class extends ft{constructor(t){super({stopDown:a.a}),t=t||{},this.kinetic_=t.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const e=t.condition?t.condition:Object(dt.a)(dt.i,dt.j);this.condition_=t.onFocusOnly?Object(dt.a)(dt.e,e):e,this.noKinetic_=!1}handleDragEvent(t){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());const e=this.targetPointers,n=ht(e);if(e.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(n[0],n[1]),this.lastCentroid){const e=[this.lastCentroid[0]-n[0],n[1]-this.lastCentroid[1]],i=t.map.getView();Object(d.e)(e,i.getResolution()),Object(d.d)(e,i.getRotation()),i.adjustCenterInternal(e)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=n,this.lastPointersCount_=e.length,t.originalEvent.preventDefault()}handleUpEvent(t){const e=t.map,n=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const t=this.kinetic_.getDistance(),i=this.kinetic_.getAngle(),r=n.getCenterInternal(),o=e.getPixelFromCoordinateInternal(r),s=e.getCoordinateFromPixelInternal([o[0]-t*Math.cos(i),o[1]-t*Math.sin(i)]);n.animateInternal({center:n.getConstrainedCenter(s),duration:500,easing:rt.b})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(t){if(this.targetPointers.length>0&&this.condition_(t)){const e=t.map.getView();return this.lastCentroid=null,e.getAnimating()&&e.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}},pt=n(51);var vt=class extends ft{constructor(t){t=t||{},super({stopDown:a.a}),this.condition_=t.condition?t.condition:dt.b,this.lastAngle_=void 0,this.duration_=void 0!==t.duration?t.duration:250}handleDragEvent(t){if(!Object(dt.g)(t))return;const e=t.map,n=e.getView();if(n.getConstraints().rotation===pt.c)return;const i=e.getSize(),r=t.pixel,o=Math.atan2(i[1]/2-r[1],r[0]-i[0]/2);if(void 0!==this.lastAngle_){const t=o-this.lastAngle_;n.adjustRotationInternal(-t)}this.lastAngle_=o}handleUpEvent(t){if(!Object(dt.g)(t))return!0;return t.map.getView().endInteraction(this.duration_),!1}handleDownEvent(t){if(!Object(dt.g)(t))return!1;if(Object(dt.f)(t)&&this.condition_(t)){return t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0}return!1}},yt=n(50);class mt extends s.a{constructor(t){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+t,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const t=this.startPixel_,e=this.endPixel_,n=this.element_.style;n.left=Math.min(t[0],e[0])+"px",n.top=Math.min(t[1],e[1])+"px",n.width=Math.abs(e[0]-t[0])+"px",n.height=Math.abs(e[1]-t[1])+"px"}setMap(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const t=this.startPixel_,e=this.endPixel_,n=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);n[4]=n[0].slice(),this.geometry_?this.geometry_.setCoordinates([n]):this.geometry_=new yt.a([n])}getGeometry(){return this.geometry_}}var _t=mt;const bt="boxstart",xt="boxdrag",Et="boxend",wt="boxcancel";class kt extends O.a{constructor(t,e,n){super(t),this.coordinate=e,this.mapBrowserEvent=n}}var St=class extends ft{constructor(t){super(),this.on,this.once,this.un,t=t||{},this.box_=new _t(t.className||"ol-dragbox"),this.minArea_=void 0!==t.minArea?t.minArea:64,t.onBoxEnd&&(this.onBoxEnd=t.onBoxEnd),this.startPixel_=null,this.condition_=t.condition?t.condition:dt.f,this.boxEndCondition_=t.boxEndCondition?t.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(t,e,n){const i=n[0]-e[0],r=n[1]-e[1];return i*i+r*r>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new kt(xt,t.coordinate,t))}handleUpEvent(t){this.box_.setMap(null);const e=this.boxEndCondition_(t,this.startPixel_,t.pixel);return e&&this.onBoxEnd(t),this.dispatchEvent(new kt(e?Et:wt,t.coordinate,t)),!1}handleDownEvent(t){return!!this.condition_(t)&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new kt(bt,t.coordinate,t)),!0)}onBoxEnd(t){}};var Ct=class extends St{constructor(t){super({condition:(t=t||{}).condition?t.condition:dt.k,className:t.className||"ol-dragzoom",minArea:t.minArea}),this.duration_=void 0!==t.duration?t.duration:200,this.out_=void 0!==t.out&&t.out}onBoxEnd(t){const e=this.getMap().getView();let n=this.getGeometry();if(this.out_){const t=e.rotatedExtentForGeometry(n),i=e.getResolutionForExtentInternal(t),r=e.getResolution()/i;n=n.clone(),n.scale(r*r)}e.fitInternal(n,{duration:this.duration_,easing:rt.b})}},Ot=37,It=38,Mt=39,Rt=40;class Tt extends at.a{constructor(t){super(),t=t||{},this.defaultCondition_=function(t){return Object(dt.i)(t)&&Object(dt.m)(t)},this.condition_=void 0!==t.condition?t.condition:this.defaultCondition_,this.duration_=void 0!==t.duration?t.duration:100,this.pixelDelta_=void 0!==t.pixelDelta?t.pixelDelta:128}handleEvent(t){let e=!1;if(t.type==S.a.KEYDOWN){const n=t.originalEvent,i=n.keyCode;if(this.condition_(t)&&(i==Rt||i==Ot||i==Mt||i==It)){const r=t.map.getView(),o=r.getResolution()*this.pixelDelta_;let s=0,a=0;i==Rt?a=-o:i==Ot?s=-o:i==Mt?s=o:a=o;const l=[s,a];Object(d.d)(l,r.getRotation()),Object(at.b)(r,l,this.duration_),n.preventDefault(),e=!0}}return!e}}var Pt=Tt;class Lt extends at.a{constructor(t){super(),t=t||{},this.condition_=t.condition?t.condition:dt.m,this.delta_=t.delta?t.delta:1,this.duration_=void 0!==t.duration?t.duration:100}handleEvent(t){let e=!1;if(t.type==S.a.KEYDOWN||t.type==S.a.KEYPRESS){const n=t.originalEvent,i=n.charCode;if(this.condition_(t)&&(i=="+".charCodeAt(0)||i=="-".charCodeAt(0))){const r=t.map,o=i=="+".charCodeAt(0)?this.delta_:-this.delta_,s=r.getView();Object(at.c)(s,o,void 0,this.duration_),n.preventDefault(),e=!0}}return!e}}var Nt=Lt;var At=class{constructor(t,e,n){this.decay_=t,this.minVelocity_=e,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(t,e){this.points_.push(t,e,Date.now())}end(){if(this.points_.length<6)return!1;const t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;let n=e-3;for(;n>0&&this.points_[n+2]>t;)n-=3;const i=this.points_[e+2]-this.points_[n+2];if(i<1e3/60)return!1;const r=this.points_[e]-this.points_[n],o=this.points_[e+1]-this.points_[n+1];return this.angle_=Math.atan2(o,r),this.initialVelocity_=Math.sqrt(r*r+o*o)/i,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}},jt=n(5);class Dt extends at.a{constructor(t){super(t=t||{}),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=void 0!==t.maxDelta?t.maxDelta:1,this.duration_=void 0!==t.duration?t.duration:250,this.timeout_=void 0!==t.timeout?t.timeout:80,this.useAnchor_=void 0===t.useAnchor||t.useAnchor,this.constrainResolution_=void 0!==t.constrainResolution&&t.constrainResolution;const e=t.condition?t.condition:dt.c;this.condition_=t.onFocusOnly?Object(dt.a)(dt.e,e):e,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const t=this.getMap();if(!t)return;t.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(t){if(!this.condition_(t))return!0;if(t.type!==S.a.WHEEL)return!0;const e=t.map,n=t.originalEvent;let i;if(n.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.coordinate),t.type==S.a.WHEEL&&(i=n.deltaY,B.b&&n.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(i/=B.a),n.deltaMode===WheelEvent.DOM_DELTA_LINE&&(i*=40)),0===i)return!1;this.lastDelta_=i;const r=Date.now();void 0===this.startTime_&&(this.startTime_=r),(!this.mode_||r-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(i)<4?"trackpad":"wheel");const o=e.getView();if("trackpad"===this.mode_&&!o.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(o.getAnimating()&&o.cancelAnimations(),o.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),o.adjustZoom(-i/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=r,!1;this.totalDelta_+=i;const s=Math.max(this.timeout_-(r-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,e),s),!1}handleWheelZoom_(t){const e=t.getView();e.getAnimating()&&e.cancelAnimations();let n=-Object(jt.b)(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(e.getConstrainResolution()||this.constrainResolution_)&&(n=n?n>0?1:-1:0),Object(at.c)(e,n,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(t){this.useAnchor_=t,t||(this.lastAnchor_=null)}}var Ft=Dt;var zt=class extends ft{constructor(t){const e=t=t||{};e.stopDown||(e.stopDown=a.a),super(e),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==t.threshold?t.threshold:.3,this.duration_=void 0!==t.duration?t.duration:250}handleDragEvent(t){let e=0;const n=this.targetPointers[0],i=this.targetPointers[1],r=Math.atan2(i.clientY-n.clientY,i.clientX-n.clientX);if(void 0!==this.lastAngle_){const t=r-this.lastAngle_;this.rotationDelta_+=t,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=t}this.lastAngle_=r;const o=t.map,s=o.getView();if(s.getConstraints().rotation===pt.c)return;const a=o.getViewport().getBoundingClientRect(),l=ht(this.targetPointers);l[0]-=a.left,l[1]-=a.top,this.anchor_=o.getCoordinateFromPixelInternal(l),this.rotating_&&(o.render(),s.adjustRotationInternal(e,this.anchor_))}handleUpEvent(t){if(this.targetPointers.length<2){return t.map.getView().endInteraction(this.duration_),!1}return!0}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}};var Gt=class extends ft{constructor(t){const e=t=t||{};e.stopDown||(e.stopDown=a.a),super(e),this.anchor_=null,this.duration_=void 0!==t.duration?t.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(t){let e=1;const n=this.targetPointers[0],i=this.targetPointers[1],r=n.clientX-i.clientX,o=n.clientY-i.clientY,s=Math.sqrt(r*r+o*o);void 0!==this.lastDistance_&&(e=this.lastDistance_/s),this.lastDistance_=s;const a=t.map,l=a.getView();1!=e&&(this.lastScaleDelta_=e);const u=a.getViewport().getBoundingClientRect(),c=ht(this.targetPointers);c[0]-=u.left,c[1]-=u.top,this.anchor_=a.getCoordinateFromPixelInternal(c),a.render(),l.adjustResolutionInternal(e,this.anchor_)}handleUpEvent(t){if(this.targetPointers.length<2){const e=t.map.getView(),n=this.lastScaleDelta_>1?1:-1;return e.endInteraction(this.duration_,n),!1}return!0}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}};var Bt=n(6),Vt=n(22);function Yt(t){t instanceof f.a?t.setMapInternal(null):t instanceof L&&t.getLayers().forEach(Yt)}class qt extends i.a{constructor(t){super(),t=t||{},this.on,this.once,this.un;const e=function(t){let e=null;void 0!==t.keyboardEventTarget&&(e="string"===typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);const n={},i=t.layers&&"function"===typeof t.layers.getLayers?t.layers:new L({layers:t.layers});let o,s,a;n[U]=i,n[W]=t.target,n[H]=t.view instanceof Q.a?t.view:new Q.a,void 0!==t.controls&&(Array.isArray(t.controls)?o=new r.a(t.controls.slice()):(Object(I.a)("function"===typeof t.controls.getArray,47),o=t.controls));void 0!==t.interactions&&(Array.isArray(t.interactions)?s=new r.a(t.interactions.slice()):(Object(I.a)("function"===typeof t.interactions.getArray,48),s=t.interactions));void 0!==t.overlays?Array.isArray(t.overlays)?a=new r.a(t.overlays.slice()):(Object(I.a)("function"===typeof t.overlays.getArray,49),a=t.overlays):a=new r.a;return{controls:o,interactions:s,keyboardEventTarget:e,overlays:a,values:n}}(t);this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=void 0!==t.maxTilesLoading?t.maxTilesLoading:16,this.pixelRatio_=void 0!==t.pixelRatio?t.pixelRatio:B.a,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=Object(u.c)(),this.pixelToCoordinateTransform_=Object(u.c)(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=t.moveTolerance,this.keyboardEventTarget_=e.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.controls=e.controls||function(t){t=t||{};const e=new r.a;return(void 0===t.zoom||t.zoom)&&e.push(new st(t.zoomOptions)),(void 0===t.rotate||t.rotate)&&e.push(new ot(t.rotateOptions)),(void 0===t.attribution||t.attribution)&&e.push(new it(t.attributionOptions)),e}(),this.interactions=e.interactions||function(t){t=t||{};const e=new r.a,n=new At(-.005,.05,100);return(void 0===t.altShiftDragRotate||t.altShiftDragRotate)&&e.push(new vt),(void 0===t.doubleClickZoom||t.doubleClickZoom)&&e.push(new ut({delta:t.zoomDelta,duration:t.zoomDuration})),(void 0===t.dragPan||t.dragPan)&&e.push(new gt({onFocusOnly:t.onFocusOnly,kinetic:n})),(void 0===t.pinchRotate||t.pinchRotate)&&e.push(new zt),(void 0===t.pinchZoom||t.pinchZoom)&&e.push(new Gt({duration:t.zoomDuration})),(void 0===t.keyboard||t.keyboard)&&(e.push(new Pt),e.push(new Nt({delta:t.zoomDelta,duration:t.zoomDuration}))),(void 0===t.mouseWheelZoom||t.mouseWheelZoom)&&e.push(new Ft({onFocusOnly:t.onFocusOnly,duration:t.zoomDuration})),(void 0===t.shiftDragZoom||t.shiftDragZoom)&&e.push(new Ct({duration:t.zoomDuration})),e}({onFocusOnly:!0}),this.overlays_=e.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new J(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(U,this.handleLayerGroupChanged_),this.addChangeListener(H,this.handleViewChanged_),this.addChangeListener(X,this.handleSizeChanged_),this.addChangeListener(W,this.handleTargetChanged_),this.setProperties(e.values);const n=this;!t.view||t.view instanceof Q.a||t.view.then((function(t){n.setView(new Q.a(t))})),this.controls.addEventListener(o.a.ADD,function(t){t.element.setMap(this)}.bind(this)),this.controls.addEventListener(o.a.REMOVE,function(t){t.element.setMap(null)}.bind(this)),this.interactions.addEventListener(o.a.ADD,function(t){t.element.setMap(this)}.bind(this)),this.interactions.addEventListener(o.a.REMOVE,function(t){t.element.setMap(null)}.bind(this)),this.overlays_.addEventListener(o.a.ADD,function(t){this.addOverlayInternal_(t.element)}.bind(this)),this.overlays_.addEventListener(o.a.REMOVE,function(t){const e=t.element.getId();void 0!==e&&delete this.overlayIdIndex_[e.toString()],t.element.setMap(null)}.bind(this)),this.controls.forEach(function(t){t.setMap(this)}.bind(this)),this.interactions.forEach(function(t){t.setMap(this)}.bind(this)),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(t){this.getControls().push(t)}addInteraction(t){this.getInteractions().push(t)}addLayer(t){this.getLayerGroup().getLayers().push(t)}handleLayerAdd_(t){!function t(e,n){if(e instanceof f.a)e.setMapInternal(n);else if(e instanceof L){const i=e.getLayers().getArray();for(let e=0,r=i.length;e<r;++e)t(i[e],n)}}(t.layer,this)}addOverlay(t){this.getOverlays().push(t)}addOverlayInternal_(t){const e=t.getId();void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(t,e,n){if(!this.frameState_||!this.renderer_)return;const i=this.getCoordinateFromPixelInternal(t),r=void 0!==(n=void 0!==n?n:{}).hitTolerance?n.hitTolerance:0,o=void 0!==n.layerFilter?n.layerFilter:a.b,s=!1!==n.checkWrapped;return this.renderer_.forEachFeatureAtCoordinate(i,this.frameState_,r,s,e,null,o,null)}getFeaturesAtPixel(t,e){const n=[];return this.forEachFeatureAtPixel(t,(function(t){n.push(t)}),e),n}getAllLayers(){const t=[];return function e(n){n.forEach((function(n){n instanceof L?e(n.getLayers()):t.push(n)}))}(this.getLayers()),t}hasFeatureAtPixel(t,e){if(!this.frameState_||!this.renderer_)return!1;const n=this.getCoordinateFromPixelInternal(t),i=void 0!==(e=void 0!==e?e:{}).layerFilter?e.layerFilter:a.b,r=void 0!==e.hitTolerance?e.hitTolerance:0,o=!1!==e.checkWrapped;return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,r,o,i,null)}getEventCoordinate(t){return this.getCoordinateFromPixel(this.getEventPixel(t))}getEventCoordinateInternal(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))}getEventPixel(t){const e=this.viewport_.getBoundingClientRect(),n="changedTouches"in t?t.changedTouches[0]:t;return[n.clientX-e.left,n.clientY-e.top]}getTarget(){return this.get(W)}getTargetElement(){const t=this.getTarget();return void 0!==t?"string"===typeof t?document.getElementById(t):t:null}getCoordinateFromPixel(t){return Object(Bt.n)(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())}getCoordinateFromPixelInternal(t){const e=this.frameState_;return e?Object(u.a)(e.pixelToCoordinateTransform,t.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(t){const e=this.overlayIdIndex_[t.toString()];return void 0!==e?e:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(U)}setLayers(t){const e=this.getLayerGroup();if(t instanceof r.a)return void e.setLayers(t);const n=e.getLayers();n.clear(),n.extend(t)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,n=t.length;e<n;++e){const n=t[e];if(!n.visible)continue;const i=n.layer.getRenderer();if(i&&!i.ready)return!0;const r=n.layer.getSource();if(r&&r.loading)return!0}return!1}getPixelFromCoordinate(t){const e=Object(Bt.e)(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)}getPixelFromCoordinateInternal(t){const e=this.frameState_;return e?Object(u.a)(e.coordinateToPixelTransform,t.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(X)}getView(){return this.get(H)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const t=this.getTargetElement();return t?t.ownerDocument:document}getTilePriority(t,e,n,i){return function(t,e,n,i,r){if(!t||!(n in t.wantedTiles))return 1/0;if(!t.wantedTiles[n][e.getKey()])return 1/0;const o=t.viewState.center,s=i[0]-o[0],a=i[1]-o[1];return 65536*Math.log(r)+Math.sqrt(s*s+a*a)/r}(this.frameState_,t,e,n,i)}handleBrowserEvent(t,e){e=e||t.type;const n=new j(e,this,t);this.handleMapBrowserEvent(n)}handleMapBrowserEvent(t){if(!this.frameState_)return;const e=t.originalEvent,n=e.type;if(n===z||n===S.a.WHEEL||n===S.a.KEYDOWN){const t=this.getOwnerDocument(),n=this.viewport_.getRootNode?this.viewport_.getRootNode():t,i=e.target;if(this.overlayContainerStopEvent_.contains(i)||!(n===t?t.documentElement:n).contains(i))return}if(t.frameState=this.frameState_,!1!==this.dispatchEvent(t)){const e=this.getInteractions().getArray().slice();for(let n=e.length-1;n>=0;n--){const i=e[n];if(i.getMap()!==this||!i.getActive()||!this.getTargetElement())continue;if(!i.handleEvent(t)||t.propagationStopped)break}}}handlePostRender(){const t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){let n=this.maxTilesLoading_,i=n;if(t){const e=t.viewHints;if(e[$.a.ANIMATING]||e[$.a.INTERACTING]){const e=Date.now()-t.time>8;n=e?0:8,i=e?0:2}}e.getTilesLoading()<n&&(e.reprioritize(),e.loadMoreTiles(n,i))}t&&this.renderer_&&!t.animate&&(!0===this.renderComplete_?(this.hasListener(_.a.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(_.a.RENDERCOMPLETE,t),!1===this.loaded_&&(this.loaded_=!0,this.dispatchEvent(new A(q.a.LOADEND,this,t)))):!0===this.loaded_&&(this.loaded_=!1,this.dispatchEvent(new A(q.a.LOADSTART,this,t))));const n=this.postRenderFunctions_;for(let i=0,r=n.length;i<r;++i)n[i](this,t);n.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let t=0,e=this.targetChangeHandlerKeys_.length;t<e;++t)Object(E.c)(this.targetChangeHandlerKeys_[t]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(S.a.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(S.a.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,Object(w.f)(this.viewport_)}const t=this.getTargetElement();if(t){t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new k(this)),this.mapBrowserEventHandler_=new Y(this,this.moveTolerance_);for(const t in D.a)this.mapBrowserEventHandler_.addEventListener(D.a[t],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(S.a.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(S.a.WHEEL,this.boundHandleBrowserEvent_,!!B.e&&{passive:!1});const e=this.getOwnerDocument().defaultView,n=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.targetChangeHandlerKeys_=[Object(E.a)(n,S.a.KEYDOWN,this.handleBrowserEvent,this),Object(E.a)(n,S.a.KEYPRESS,this.handleBrowserEvent,this),Object(E.a)(e,S.a.RESIZE,this.updateSize,this)]}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(Object(E.c)(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Object(E.c)(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const t=this.getView();t&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=Object(E.a)(t,y.a.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Object(E.a)(t,S.a.CHANGE,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(E.c),this.layerGroupPropertyListenerKeys_=null);const t=this.getLayerGroup();t&&(this.handleLayerAdd_(new R("addlayer",t)),this.layerGroupPropertyListenerKeys_=[Object(E.a)(t,y.a.PROPERTYCHANGE,this.render,this),Object(E.a)(t,S.a.CHANGE,this.render,this),Object(E.a)(t,"addlayer",this.handleLayerAdd_,this),Object(E.a)(t,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,n=t.length;e<n;++e){const n=t[e].layer;n.hasRenderer()&&n.getRenderer().handleFontsChanged()}}render(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(t){return this.getControls().remove(t)}removeInteraction(t){return this.getInteractions().remove(t)}removeLayer(t){return this.getLayerGroup().getLayers().remove(t)}handleLayerRemove_(t){Yt(t.layer)}removeOverlay(t){return this.getOverlays().remove(t)}renderFrame_(t){const e=this.getSize(),n=this.getView(),i=this.frameState_;let r=null;if(void 0!==e&&Object(Vt.a)(e)&&n&&n.isDef()){const i=n.getHints(this.frameState_?this.frameState_.viewHints:void 0),o=n.getState();if(r={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:Object(c.y)(o.center,o.resolution,o.rotation,e),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:e,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:o,viewHints:i,wantedTiles:{},mapId:Object(l.b)(this),renderTargets:{}},o.nextCenter&&o.nextResolution){const t=isNaN(o.nextRotation)?o.rotation:o.nextRotation;r.nextExtent=Object(c.y)(o.nextCenter,o.nextResolution,t,e)}}if(this.frameState_=r,this.renderer_.renderFrame(r),r){if(r.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,r.postRenderFunctions),i){(!this.previousExtent_||!Object(c.H)(this.previousExtent_)&&!Object(c.o)(r.extent,this.previousExtent_))&&(this.dispatchEvent(new A(q.a.MOVESTART,this,i)),this.previousExtent_=Object(c.l)(this.previousExtent_))}this.previousExtent_&&!r.viewHints[$.a.ANIMATING]&&!r.viewHints[$.a.INTERACTING]&&!Object(c.o)(r.extent,this.previousExtent_)&&(this.dispatchEvent(new A(q.a.MOVEEND,this,r)),Object(c.d)(r.extent,this.previousExtent_))}this.dispatchEvent(new A(q.a.POSTRENDER,this,r)),this.renderComplete_=this.hasListener(q.a.LOADSTART)||this.hasListener(q.a.LOADEND)||this.hasListener(_.a.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(t){const e=this.getLayerGroup();e&&this.handleLayerRemove_(new R("removelayer",e)),this.set(U,t)}setSize(t){this.set(X,t)}setTarget(t){this.set(W,t)}setView(t){if(!t||t instanceof Q.a)return void this.set(H,t);this.set(H,new Q.a);const e=this;t.then((function(t){e.setView(new Q.a(t))}))}updateSize(){const t=this.getTargetElement();let e=void 0;if(t){const n=getComputedStyle(t),i=t.offsetWidth-parseFloat(n.borderLeftWidth)-parseFloat(n.paddingLeft)-parseFloat(n.paddingRight)-parseFloat(n.borderRightWidth),r=t.offsetHeight-parseFloat(n.borderTopWidth)-parseFloat(n.paddingTop)-parseFloat(n.paddingBottom)-parseFloat(n.borderBottomWidth);isNaN(i)||isNaN(r)||(e=[i,r],!Object(Vt.a)(e)&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&console.warn("No map visible because the map container's width or height are 0."))}this.setSize(e),this.updateViewportSize_()}updateViewportSize_(){const t=this.getView();if(t){let e=void 0;const n=getComputedStyle(this.viewport_);n.width&&n.height&&(e=[parseInt(n.width,10),parseInt(n.height,10)]),t.setViewportSize(e)}}}e.a=qt},function(t,e,n){"use strict";var i=n(10),r=n(85),o=n(70),s=n(12);var a=class{constructor(t){this.highWaterMark=void 0!==t?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(t){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(t){return this.entries_.hasOwnProperty(t)}forEach(t){let e=this.oldest_;for(;e;)t(e.value_,e.key_,this),e=e.newer}get(t,e){const n=this.entries_[t];return Object(s.a)(void 0!==n,15),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_}remove(t){const e=this.entries_[t];return Object(s.a)(void 0!==e,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_}getCount(){return this.count_}getKeys(){const t=new Array(this.count_);let e,n=0;for(e=this.newest_;e;e=e.older)t[n++]=e.key_;return t}getValues(){const t=new Array(this.count_);let e,n=0;for(e=this.newest_;e;e=e.older)t[n++]=e.value_;return t}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(t){if(this.containsKey(t))return this.entries_[t].value_}pop(){const t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_}replace(t,e){this.get(t),this.entries_[t].value_=e}set(t,e){Object(s.a)(!(t in this.entries_),16);const n={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[t]=n,++this.count_}setSize(t){this.highWaterMark=t}};function l(t,e,n,i){return void 0!==i?(i[0]=t,i[1]=e,i[2]=n,i):[t,e,n]}function u(t,e,n){return t+"/"+e+"/"+n}function c(t){return u(t[0],t[1],t[2])}var h=class extends a{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(t){for(;this.canExpireCache();){if(this.peekLast().getKey()in t)break;this.pop().release()}}pruneExceptNewestZ(){if(0===this.getCount())return;const t=function(t){return t.split("/").map(Number)}(this.peekFirstKey())[0];this.forEach(function(e){e.tileCoord[0]!==t&&(this.remove(c(e.tileCoord)),e.release())}.bind(this))}},f=n(11),d="tileloadstart",g="tileloadend",p="tileloaderror",v=n(27),y=n(75),m=n(3),_=n(6),b=n(52),x=n(58),E=n(5),w=n(2),k=n(49),S=n(13),C=n(22);const O=[0,0,0];var I=class{constructor(t){let e;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,Object(s.a)(Object(S.d)(this.resolutions_,(function(t,e){return e-t}),!0),17),!t.origins)for(let i=0,r=this.resolutions_.length-1;i<r;++i)if(e){if(this.resolutions_[i]/this.resolutions_[i+1]!==e){e=void 0;break}}else e=this.resolutions_[i]/this.resolutions_[i+1];this.zoomFactor_=e,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,Object(s.a)(this.origins_.length==this.resolutions_.length,20));const n=t.extent;void 0===n||this.origin_||this.origins_||(this.origin_=Object(w.C)(n)),Object(s.a)(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,Object(s.a)(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:x.b,Object(s.a)(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==n?n:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map((function(t,e){const i=new b.b(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1));if(n){const t=this.getTileRangeForExtentAndZ(n,e);i.minX=Math.max(t.minX,i.minX),i.maxX=Math.min(t.maxX,i.maxX),i.minY=Math.max(t.minY,i.minY),i.maxY=Math.min(t.maxY,i.maxY)}return i}),this):n&&this.calculateTileRanges_(n)}forEachTileCoord(t,e,n){const i=this.getTileRangeForExtentAndZ(t,e);for(let r=i.minX,o=i.maxX;r<=o;++r)for(let t=i.minY,s=i.maxY;t<=s;++t)n([e,r,t])}forEachTileCoordParentTileRange(t,e,n,i){let r,o,s,a=null,l=t[0]-1;for(2===this.zoomFactor_?(o=t[1],s=t[2]):a=this.getTileCoordExtent(t,i);l>=this.minZoom;){if(2===this.zoomFactor_?(o=Math.floor(o/2),s=Math.floor(s/2),r=Object(b.a)(o,o,s,s,n)):r=this.getTileRangeForExtentAndZ(a,l,n),e(l,r))return!0;--l}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(t){return this.origin_?this.origin_:this.origins_[t]}getResolution(t){return this.resolutions_[t]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(t,e,n){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){const n=2*t[1],i=2*t[2];return Object(b.a)(n,n+1,i,i+1,e)}const i=this.getTileCoordExtent(t,n||this.tmpExtent_);return this.getTileRangeForExtentAndZ(i,t[0]+1,e)}return null}getTileRangeForTileCoordAndZ(t,e,n){if(e>this.maxZoom||e<this.minZoom)return null;const i=t[0],r=t[1],o=t[2];if(e===i)return Object(b.a)(r,o,r,o,n);if(this.zoomFactor_){const t=Math.pow(this.zoomFactor_,e-i),s=Math.floor(r*t),a=Math.floor(o*t);if(e<i)return Object(b.a)(s,s,a,a,n);const l=Math.floor(t*(r+1))-1,u=Math.floor(t*(o+1))-1;return Object(b.a)(s,l,a,u,n)}const s=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(s,e,n)}getTileRangeExtent(t,e,n){const i=this.getOrigin(t),r=this.getResolution(t),o=Object(C.c)(this.getTileSize(t),this.tmpSize_),s=i[0]+e.minX*o[0]*r,a=i[0]+(e.maxX+1)*o[0]*r,l=i[1]+e.minY*o[1]*r,u=i[1]+(e.maxY+1)*o[1]*r;return Object(w.k)(s,l,a,u,n)}getTileRangeForExtentAndZ(t,e,n){const i=O;this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,i);const r=i[1],o=i[2];return this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,i),Object(b.a)(r,i[1],o,i[2],n)}getTileCoordCenter(t){const e=this.getOrigin(t[0]),n=this.getResolution(t[0]),i=Object(C.c)(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*i[0]*n,e[1]-(t[2]+.5)*i[1]*n]}getTileCoordExtent(t,e){const n=this.getOrigin(t[0]),i=this.getResolution(t[0]),r=Object(C.c)(this.getTileSize(t[0]),this.tmpSize_),o=n[0]+t[1]*r[0]*i,s=n[1]-(t[2]+1)*r[1]*i,a=o+r[0]*i,l=s+r[1]*i;return Object(w.k)(o,s,a,l,e)}getTileCoordForCoordAndResolution(t,e,n){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,n)}getTileCoordForXYAndResolution_(t,e,n,i,r){const o=this.getZForResolution(n),s=n/this.getResolution(o),a=this.getOrigin(o),u=Object(C.c)(this.getTileSize(o),this.tmpSize_);let c=s*(t-a[0])/n/u[0],h=s*(a[1]-e)/n/u[1];return i?(c=Object(E.a)(c,5)-1,h=Object(E.a)(h,5)-1):(c=Object(E.c)(c,5),h=Object(E.c)(h,5)),l(o,c,h,r)}getTileCoordForXYAndZ_(t,e,n,i,r){const o=this.getOrigin(n),s=this.getResolution(n),a=Object(C.c)(this.getTileSize(n),this.tmpSize_);let u=(t-o[0])/s/a[0],c=(o[1]-e)/s/a[1];return i?(u=Object(E.a)(u,5)-1,c=Object(E.a)(c,5)-1):(u=Object(E.c)(u,5),c=Object(E.c)(c,5)),l(n,u,c,r)}getTileCoordForCoordAndZ(t,e,n){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,n)}getTileCoordResolution(t){return this.resolutions_[t[0]]}getTileSize(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]}getFullTileRange(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null}getZForResolution(t,e){const n=Object(S.e)(this.resolutions_,t,e||0);return Object(E.b)(n,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(t,e){return Object(k.c)(e,0,e.length,2,this.getTileCoordExtent(t))}calculateTileRanges_(t){const e=this.resolutions_.length,n=new Array(e);for(let i=this.minZoom;i<e;++i)n[i]=this.getTileRangeForExtentAndZ(t,i);this.fullTileRanges_=n}};function M(t){let e=t.getDefaultTileGrid();return e||(e=function(t,e,n,i){return function(t,e,n,i){i=void 0!==i?i:"top-left";const r=R(t,e,n);return new I({extent:t,origin:Object(w.x)(t,i),resolutions:r,tileSize:n})}(T(t),e,n,i)}(t),t.setDefaultTileGrid(e)),e}function R(t,e,n,i){e=void 0!==e?e:x.a,n=Object(C.c)(void 0!==n?n:x.b);const r=Object(w.z)(t),o=Object(w.E)(t);i=i>0?i:Math.max(o/n[0],r/n[1]);const s=e+1,a=new Array(s);for(let l=0;l<s;++l)a[l]=i/Math.pow(2,l);return a}function T(t){let e=(t=Object(_.h)(t)).getExtent();if(!e){const n=180*_.a.degrees/t.getMetersPerUnit();e=Object(w.k)(-n,-n,n,n)}return e}class P extends y.a{constructor(t){super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX,interpolate:t.interpolate}),this.on,this.once,this.un,this.opaque_=void 0!==t.opaque&&t.opaque,this.tilePixelRatio_=void 0!==t.tilePixelRatio?t.tilePixelRatio:1,this.tileGrid=void 0!==t.tileGrid?t.tileGrid:null;const e=[256,256];this.tileGrid&&Object(C.c)(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),e),this.tileCache=new h(t.cacheSize||0),this.tmpSize=[0,0],this.key_=t.key||"",this.tileOptions={transition:t.transition,interpolate:t.interpolate},this.zDirection=t.zDirection?t.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(t,e){const n=this.getTileCacheForProjection(t);n&&n.expireCache(e)}forEachLoadedTile(t,e,n,i){const r=this.getTileCacheForProjection(t);if(!r)return!1;let o,s,a,l=!0;for(let c=n.minX;c<=n.maxX;++c)for(let t=n.minY;t<=n.maxY;++t)s=u(e,c,t),a=!1,r.containsKey(s)&&(o=r.get(s),a=o.getState()===f.a.LOADED,a&&(a=!1!==i(o))),a||(l=!1);return l}getGutterForProjection(t){return 0}getKey(){return this.key_}setKey(t){this.key_!==t&&(this.key_=t,this.changed())}getOpaque(t){return this.opaque_}getResolutions(){return this.tileGrid?this.tileGrid.getResolutions():null}getTile(t,e,n,i,r){return Object(m.a)()}getTileGrid(){return this.tileGrid}getTileGridForProjection(t){return this.tileGrid?this.tileGrid:M(t)}getTileCacheForProjection(t){const e=this.getProjection();return Object(s.a)(null===e||Object(_.d)(e,t),68),this.tileCache}getTilePixelRatio(t){return this.tilePixelRatio_}getTilePixelSize(t,e,n){const i=this.getTileGridForProjection(n),r=this.getTilePixelRatio(e),o=Object(C.c)(i.getTileSize(t),this.tmpSize);return 1==r?o:Object(C.b)(o,r,this.tmpSize)}getTileCoordForTileUrlFunction(t,e){e=void 0!==e?e:this.getProjection();const n=this.getTileGridForProjection(e);return this.getWrapX()&&e.isGlobal()&&(t=function(t,e,n){const i=e[0],r=t.getTileCoordCenter(e),o=T(n);if(Object(w.f)(o,r))return e;{const e=Object(w.E)(o),n=Math.ceil((o[0]-r[0])/e);return r[0]+=e*n,t.getTileCoordForCoordAndZ(r,i)}}(n,t,e)),function(t,e){const n=t[0],i=t[1],r=t[2];if(e.getMinZoom()>n||n>e.getMaxZoom())return!1;const o=e.getFullTileRange(n);return!o||o.containsXY(i,r)}(t,n)?t:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(t,e){const n=this.getTileCacheForProjection(e);t>n.highWaterMark&&(n.highWaterMark=t)}useTile(t,e,n,i){}}class L extends v.a{constructor(t,e){super(t),this.tile=e}}var N=P;function A(t,e){const n=/\{z\}/g,i=/\{x\}/g,r=/\{y\}/g,o=/\{-y\}/g;return function(a,l,u){return a?t.replace(n,a[0].toString()).replace(i,a[1].toString()).replace(r,a[2].toString()).replace(o,(function(){const t=a[0],n=e.getFullTileRange(t);Object(s.a)(n,55);return(n.getHeight()-a[2]-1).toString()})):void 0}}function j(t,e){const n=t.length,i=new Array(n);for(let r=0;r<n;++r)i[r]=A(t[r],e);return function(t){if(1===t.length)return t[0];return function(e,n,i){if(e){const r=function(t){return(t[1]<<t[0])+t[2]}(e),o=Object(E.e)(r,t.length);return t[o](e,n,i)}}}(i)}class D extends N{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===D.prototype.tileUrlFunction,this.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(this.tileUrlFunction=t.tileUrlFunction),this.urls=null,t.urls?this.setUrls(t.urls):t.url&&this.setUrl(t.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(t){const e=t.target,n=Object(m.b)(e),i=e.getState();let r;i==f.a.LOADING?(this.tileLoadingKeys_[n]=!0,r=d):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],r=i==f.a.ERROR?p:i==f.a.LOADED?g:void 0),void 0!=r&&this.dispatchEvent(new L(r,e))}setTileLoadFunction(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()}setTileUrlFunction(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),"undefined"!==typeof e?this.setKey(e):this.changed()}setUrl(t){const e=function(t){const e=[];let n=/\{([a-z])-([a-z])\}/.exec(t);if(n){const i=n[1].charCodeAt(0),r=n[2].charCodeAt(0);let o;for(o=i;o<=r;++o)e.push(t.replace(n[0],String.fromCharCode(o)));return e}if(n=/\{(\d+)-(\d+)\}/.exec(t),n){const i=parseInt(n[2],10);for(let r=parseInt(n[1],10);r<=i;r++)e.push(t.replace(n[0],r.toString()));return e}return e.push(t),e}(t);this.urls=e,this.setUrls(e)}setUrls(t){this.urls=t;const e=t.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(j(t,this.tileGrid),e):this.setKey(e)}tileUrlFunction(t,e,n){}useTile(t,e,n){const i=u(t,e,n);this.tileCache.containsKey(i)&&this.tileCache.get(i)}}var F=D;function z(t,e){t.getImage().src=e}var G=class extends F{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:z,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,interpolate:void 0===t.interpolate||t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.crossOrigin=void 0!==t.crossOrigin?t.crossOrigin:null,this.tileClass=void 0!==t.tileClass?t.tileClass:r.a,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1}expireCache(t,e){const n=this.getTileCacheForProjection(t);this.tileCache.expireCache(this.tileCache==n?e:{});for(const i in this.tileCacheForProjection){const t=this.tileCacheForProjection[i];t.expireCache(t==n?e:{})}}getGutterForProjection(t){return this.getProjection()&&t&&!Object(_.d)(this.getProjection(),t)?0:this.getGutter()}getGutter(){return 0}getKey(){let t=super.getKey();return this.getInterpolate()||(t+=":disable-interpolation"),t}getOpaque(t){return!(this.getProjection()&&t&&!Object(_.d)(this.getProjection(),t))&&super.getOpaque(t)}getTileGridForProjection(t){const e=this.getProjection();if(!this.tileGrid||e&&!Object(_.d)(e,t)){const e=Object(m.b)(t);return e in this.tileGridForProjection||(this.tileGridForProjection[e]=M(t)),this.tileGridForProjection[e]}return this.tileGrid}getTileCacheForProjection(t){const e=this.getProjection();if(!e||Object(_.d)(e,t))return this.tileCache;{const e=Object(m.b)(t);return e in this.tileCacheForProjection||(this.tileCacheForProjection[e]=new h(this.tileCache.highWaterMark)),this.tileCacheForProjection[e]}}createTile_(t,e,n,r,o,s){const a=[t,e,n],l=this.getTileCoordForTileUrlFunction(a,o),u=l?this.tileUrlFunction(l,r,o):void 0,c=new this.tileClass(a,void 0!==u?f.a.IDLE:f.a.EMPTY,void 0!==u?u:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return c.key=s,c.addEventListener(i.a.CHANGE,this.handleTileChange.bind(this)),c}getTile(t,e,n,i,r){const s=this.getProjection();if(s&&r&&!Object(_.d)(s,r)){const a=this.getTileCacheForProjection(r),l=[t,e,n];let u;const h=c(l);a.containsKey(h)&&(u=a.get(h));const f=this.getKey();if(u&&u.key==f)return u;{const t=this.getTileGridForProjection(s),e=this.getTileGridForProjection(r),n=this.getTileCoordForTileUrlFunction(l,r),c=new o.a(s,t,r,e,l,n,this.getTilePixelRatio(i),this.getGutter(),function(t,e,n,i){return this.getTileInternal(t,e,n,i,s)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return c.key=f,u?(c.interimTile=u,c.refreshInterimChain(),a.replace(h,c)):a.set(h,c),c}}return this.getTileInternal(t,e,n,i,s||r)}getTileInternal(t,e,n,i,r){let o=null;const s=u(t,e,n),a=this.getKey();if(this.tileCache.containsKey(s)){if(o=this.tileCache.get(s),o.key!=a){const l=o;o=this.createTile_(t,e,n,i,r,a),l.getState()==f.a.IDLE?o.interimTile=l.interimTile:o.interimTile=l,o.refreshInterimChain(),this.tileCache.replace(s,o)}}else o=this.createTile_(t,e,n,i,r,a),this.tileCache.set(s,o);return o}setRenderReprojectionEdges(t){if(this.renderReprojectionEdges_!=t){this.renderReprojectionEdges_=t;for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear();this.changed()}}setTileGridForProjection(t,e){const n=Object(_.h)(t);if(n){const t=Object(m.b)(n);t in this.tileGridForProjection||(this.tileGridForProjection[t]=e)}}clear(){super.clear();for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear()}};var B=class extends G{constructor(t){const e=void 0!==(t=t||{}).projection?t.projection:"EPSG:3857",n=void 0!==t.tileGrid?t.tileGrid:function(t){const e=t||{},n=e.extent||Object(_.h)("EPSG:3857").getExtent(),i={extent:n,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:R(n,e.maxZoom,e.tileSize,e.maxResolution)};return new I(i)}({extent:T(e),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize});super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,opaque:t.opaque,projection:e,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:n,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.gutter_=void 0!==t.gutter?t.gutter:0}getGutter(){return this.gutter_}};e.a=class extends B{constructor(t){let e;e=void 0!==(t=t||{}).attributions?t.attributions:['&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.'];const n=void 0!==t.crossOrigin?t.crossOrigin:"anonymous",i=void 0!==t.url?t.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:e,attributionsCollapsible:!1,cacheSize:t.cacheSize,crossOrigin:n,interpolate:t.interpolate,maxZoom:void 0!==t.maxZoom?t.maxZoom:19,opaque:void 0===t.opaque||t.opaque,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,transition:t.transition,url:i,wrapX:t.wrapX,zDirection:t.zDirection})}}}]]);
//# sourceMappingURL=2.699d212d.chunk.js.map